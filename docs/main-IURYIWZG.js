var _k=Object.defineProperty,Ck=Object.defineProperties;var Ek=Object.getOwnPropertyDescriptors;var Jw=Object.getOwnPropertySymbols;var Ik=Object.prototype.hasOwnProperty,wk=Object.prototype.propertyIsEnumerable;var Zw=(t,e,n)=>e in t?_k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})Ik.call(e,n)&&Zw(t,n,e[n]);if(Jw)for(var n of Jw(e))wk.call(e,n)&&Zw(t,n,e[n]);return t},Ce=(t,e)=>Ck(t,Ek(e));var I=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(u){i(u)}},s=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var Cm;function Ad(){return Cm}function Tr(t){let e=Cm;return Cm=t,e}var Xw=Symbol("NotFound");function Xs(t){return t===Xw||t?.name==="\u0275NotFound"}var Xt=null,Rd=!1,Em=1,Tk=null,en=Symbol("SIGNAL");function ye(t){let e=Xt;return Xt=t,e}function Nd(){return Xt}var ko={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ea(t){if(Rd)throw new Error("");if(Xt===null)return;Xt.consumerOnSignalRead(t);let e=Xt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Xt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Xt.producers,n!==void 0&&n.producer===t)){Xt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Xt&&(!r||Sk(i,Xt)))return;let o=ra(Xt),s={producer:t,consumer:Xt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Xt.producersTail=s,e!==void 0?e.nextProducer=s:Xt.producers=s,o&&rT(t,s)}function eT(){Em++}function kd(t){if(!(ra(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Em)){if(!t.producerMustRecompute(t)&&!na(t)){Pd(t);return}t.producerRecomputeValue(t),Pd(t)}}function Im(t){if(t.consumers===void 0)return;let e=Rd;Rd=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||bk(r)}}finally{Rd=e}}function wm(){return Xt?.consumerAllowSignalWrites!==!1}function bk(t){t.dirty=!0,Im(t),t.consumerMarkedDirty?.(t)}function Pd(t){t.dirty=!1,t.lastCleanEpoch=Em}function Oo(t){return t&&tT(t),ye(t)}function tT(t){t.producersTail=void 0,t.recomputing=!0}function ta(t,e){ye(e),t&&nT(t)}function nT(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ra(t))do n=Tm(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function na(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(kd(n),r!==n.version))return!0}return!1}function Fo(t){if(ra(t)){let e=t.producers;for(;e!==void 0;)e=Tm(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function rT(t,e){let n=t.consumersTail,r=ra(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)rT(i.producer,i)}function Tm(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ra(e)){let o=e.producers;for(;o!==void 0;)o=Tm(o)}return n}function ra(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Od(t){Tk?.(t)}function Sk(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Fd(t,e){return Object.is(t,e)}function Ld(t,e){let n=Object.create(Dk);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(kd(n),ea(n),n.value===hl)throw n.error;return n.value};return r[en]=n,Od(n),r}var Md=Symbol("UNSET"),xd=Symbol("COMPUTING"),hl=Symbol("ERRORED"),Dk=Ce(H({},ko),{value:Md,dirty:!0,error:null,equal:Fd,kind:"computed",producerMustRecompute(t){return t.value===Md||t.value===xd},producerRecomputeValue(t){if(t.value===xd)throw new Error("");let e=t.value;t.value=xd;let n=Oo(t),r,i=!1;try{r=t.computation(),ye(null),i=e!==Md&&e!==hl&&r!==hl&&t.equal(e,r)}catch(o){r=hl,t.error=o}finally{ta(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Ak(){throw new Error}var iT=Ak;function oT(t){iT(t)}function bm(t){iT=t}var Rk=null;function Sm(t,e){let n=Object.create(Vd);n.value=t,e!==void 0&&(n.equal=e);let r=()=>sT(n);return r[en]=n,Od(n),[r,s=>ia(n,s),s=>Dm(n,s)]}function sT(t){return ea(t),t.value}function ia(t,e){wm()||oT(t),t.equal(t.value,e)||(t.value=e,Mk(t))}function Dm(t,e){wm()||oT(t),ia(t,e(t.value))}var Vd=Ce(H({},ko),{equal:Fd,value:void 0,kind:"signal"});function Mk(t){t.version++,eT(),Im(t),Rk?.(t)}function be(t){return typeof t=="function"}function oa(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var jd=oa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Lo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ht=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(be(r))try{r()}catch(o){e=o instanceof jd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{aT(o)}catch(s){e=e??[],s instanceof jd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)aT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Lo(n,e)}remove(e){let{_finalizers:n}=this;n&&Lo(n,e),e instanceof t&&e._removeParent(this)}};ht.EMPTY=(()=>{let t=new ht;return t.closed=!0,t})();var Am=ht.EMPTY;function Ud(t){return t instanceof ht||t&&"closed"in t&&be(t.remove)&&be(t.add)&&be(t.unsubscribe)}function aT(t){be(t)?t():t.unsubscribe()}var ir={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sa={setTimeout(t,e,...n){let{delegate:r}=sa;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=sa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bd(t){sa.setTimeout(()=>{let{onUnhandledError:e}=ir;if(e)e(t);else throw t})}function fl(){}var cT=Rm("C",void 0,void 0);function lT(t){return Rm("E",void 0,t)}function uT(t){return Rm("N",t,void 0)}function Rm(t,e,n){return{kind:t,value:e,error:n}}var Vo=null;function aa(t){if(ir.useDeprecatedSynchronousErrorHandling){let e=!Vo;if(e&&(Vo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Vo;if(Vo=null,n)throw r}}else t()}function dT(t){ir.useDeprecatedSynchronousErrorHandling&&Vo&&(Vo.errorThrown=!0,Vo.error=t)}var jo=class extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ud(e)&&e.add(this)):this.destination=Nk}static create(e,n,r){return new Bi(e,n,r)}next(e){this.isStopped?xm(uT(e),this):this._next(e)}error(e){this.isStopped?xm(lT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xm(cT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xk=Function.prototype.bind;function Mm(t,e){return xk.call(t,e)}var Pm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$d(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$d(r)}else $d(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$d(n)}}},Bi=class extends jo{constructor(e,n,r){super();let i;if(be(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ir.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mm(e.next,o),error:e.error&&Mm(e.error,o),complete:e.complete&&Mm(e.complete,o)}):i=e}this.destination=new Pm(i)}};function $d(t){ir.useDeprecatedSynchronousErrorHandling?dT(t):Bd(t)}function Pk(t){throw t}function xm(t,e){let{onStoppedNotification:n}=ir;n&&sa.setTimeout(()=>n(t,e))}var Nk={closed:!0,next:fl,error:Pk,complete:fl};var ca=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dn(t){return t}function Nm(...t){return km(t)}function km(t){return t.length===0?Dn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Ok(n)?n:new Bi(n,r,i);return aa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=hT(r),new r((i,o)=>{let s=new Bi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ca](){return this}pipe(...n){return km(n)(this)}toPromise(n){return n=hT(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function hT(t){var e;return(e=t??ir.Promise)!==null&&e!==void 0?e:Promise}function kk(t){return t&&be(t.next)&&be(t.error)&&be(t.complete)}function Ok(t){return t&&t instanceof jo||kk(t)&&Ud(t)}function Om(t){return be(t?.lift)}function Oe(t){return e=>{if(Om(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(t,e,n,r,i){return new Fm(t,e,n,r,i)}var Fm=class extends jo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function la(){return Oe((t,e)=>{let n=null;t._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ua=class extends Se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Om(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ht;let n=this.getSubject();e.add(this.source.subscribe(Ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ht.EMPTY)}return e}refCount(){return la()(this)}};var fT=oa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Et=(()=>{class t extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Hd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new fT}next(n){aa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){aa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){aa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Am:(this.currentObservers=null,o.push(n),new ht(()=>{this.currentObservers=null,Lo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Se;return n.source=this,n}}return t.create=(e,n)=>new Hd(e,n),t})(),Hd=class extends Et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Am}};var Gt=class extends Et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Lm={now(){return(Lm.delegate||Date).now()},delegate:void 0};var zd=class extends ht{constructor(e,n){super()}schedule(e,n=0){return this}};var pl={setInterval(t,e,...n){let{delegate:r}=pl;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=pl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var da=class extends zd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return pl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&pl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Lo(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ha=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ha.now=Lm.now;var fa=class extends ha{constructor(e,n=ha.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Vm=new fa(da);var Gd=class extends da{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var qd=class extends fa{};var jm=new qd(Gd);var pn=new Se(t=>t.complete());function pT(t){return t&&be(t.schedule)}function gT(t){return t[t.length-1]}function Wd(t){return be(gT(t))?t.pop():void 0}function $i(t){return pT(gT(t))?t.pop():void 0}function Um(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function c(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function mT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uo(t){return this instanceof Uo?(this.v=t,this):new Uo(t)}function yT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(w){return Promise.resolve(w).then(v,p)}}function a(v,w){r[v]&&(i[v]=function(O){return new Promise(function(P,j){o.push([v,O,P,j])>1||c(v,O)})},w&&(i[v]=w(i[v])))}function c(v,w){try{u(r[v](w))}catch(O){g(o[0][3],O)}}function u(v){v.value instanceof Uo?Promise.resolve(v.value.v).then(h,p):g(o[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function g(v,w){v(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function _T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mT=="function"?mT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Kd=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qd(t){return be(t?.then)}function Yd(t){return be(t[ca])}function Jd(t){return Symbol.asyncIterator&&be(t?.[Symbol.asyncIterator])}function Zd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Fk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xd=Fk();function eh(t){return be(t?.[Xd])}function th(t){return yT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Uo(n.read());if(i)return yield Uo(void 0);yield yield Uo(r)}}finally{n.releaseLock()}})}function nh(t){return be(t?.getReader)}function It(t){if(t instanceof Se)return t;if(t!=null){if(Yd(t))return Lk(t);if(Kd(t))return Vk(t);if(Qd(t))return jk(t);if(Jd(t))return CT(t);if(eh(t))return Uk(t);if(nh(t))return Bk(t)}throw Zd(t)}function Lk(t){return new Se(e=>{let n=t[ca]();if(be(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Vk(t){return new Se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function jk(t){return new Se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bd)})}function Uk(t){return new Se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function CT(t){return new Se(e=>{$k(t,e).catch(n=>e.error(n))})}function Bk(t){return CT(th(t))}function $k(t,e){var n,r,i,o;return vT(this,void 0,void 0,function*(){try{for(n=_T(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function gn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Hi(t,e=0){return Oe((n,r)=>{n.subscribe(Ne(r,i=>gn(r,t,()=>r.next(i),e),()=>gn(r,t,()=>r.complete(),e),i=>gn(r,t,()=>r.error(i),e)))})}function zi(t,e=0){return Oe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function ET(t,e){return It(t).pipe(zi(e),Hi(e))}function IT(t,e){return It(t).pipe(zi(e),Hi(e))}function wT(t,e){return new Se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function TT(t,e){return new Se(n=>{let r;return gn(n,e,()=>{r=t[Xd](),gn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>be(r?.return)&&r.return()})}function rh(t,e){if(!t)throw new Error("Iterable cannot be null");return new Se(n=>{gn(n,e,()=>{let r=t[Symbol.asyncIterator]();gn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function bT(t,e){return rh(th(t),e)}function ST(t,e){if(t!=null){if(Yd(t))return ET(t,e);if(Kd(t))return wT(t,e);if(Qd(t))return IT(t,e);if(Jd(t))return rh(t,e);if(eh(t))return TT(t,e);if(nh(t))return bT(t,e)}throw Zd(t)}function st(t,e){return e?ST(t,e):It(t)}function me(...t){let e=$i(t);return st(t,e)}function Gi(t,e){let n=be(t)?t:()=>t,r=i=>i.error(n());return new Se(e?i=>e.schedule(r,0,i):r)}function Bm(t){return!!t&&(t instanceof Se||be(t.lift)&&be(t.subscribe))}var An=oa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function mn(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=!1,s;t.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(e.defaultValue):i(new An)}})})}function ih(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new Bi({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new An)}});t.subscribe(o)})}function Ie(t,e){return Oe((n,r)=>{let i=0;n.subscribe(Ne(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Hk}=Array;function zk(t,e){return Hk(e)?t(...e):t(e)}function oh(t){return Ie(e=>zk(t,e))}var{isArray:Gk}=Array,{getPrototypeOf:qk,prototype:Wk,keys:Kk}=Object;function sh(t){if(t.length===1){let e=t[0];if(Gk(e))return{args:e,keys:null};if(Qk(e)){let n=Kk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Qk(t){return t&&typeof t=="object"&&qk(t)===Wk}function ah(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ch(...t){let e=$i(t),n=Wd(t),{args:r,keys:i}=sh(t);if(r.length===0)return st([],e);let o=new Se(Yk(r,e,i?s=>ah(i,s):Dn));return n?o.pipe(oh(n)):o}function Yk(t,e,n=Dn){return r=>{DT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)DT(e,()=>{let u=st(t[c],e),h=!1;u.subscribe(Ne(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function DT(t,e,n){t?gn(n,t,e):e()}function AT(t,e,n,r,i,o,s,a){let c=[],u=0,h=0,p=!1,g=()=>{p&&!c.length&&!u&&e.complete()},v=O=>u<r?w(O):c.push(O),w=O=>{o&&e.next(O),u++;let P=!1;It(n(O,h++)).subscribe(Ne(e,j=>{i?.(j),o?v(j):e.next(j)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){let j=c.shift();s?gn(e,s,()=>w(j)):w(j)}g()}catch(j){e.error(j)}}))};return t.subscribe(Ne(e,v,()=>{p=!0,g()})),()=>{a?.()}}function Pt(t,e,n=1/0){return be(e)?Pt((r,i)=>Ie((o,s)=>e(r,o,i,s))(It(t(r,i))),n):(typeof e=="number"&&(n=e),Oe((r,i)=>AT(r,i,t,n)))}function RT(t=1/0){return Pt(Dn,t)}function MT(){return RT(1)}function pa(...t){return MT()(st(t,$i(t)))}function gl(t){return new Se(e=>{It(t()).subscribe(e)})}function $m(...t){let e=Wd(t),{args:n,keys:r}=sh(t),i=new Se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let p=!1;It(n[h]).subscribe(Ne(o,g=>{p||(p=!0,u--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(u||o.next(r?ah(r,a):a),o.complete())}))}});return e?i.pipe(oh(e)):i}function vn(t,e){return Oe((n,r)=>{let i=0;n.subscribe(Ne(r,o=>t.call(e,o,i++)&&r.next(o)))})}function or(t){return Oe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ne(n,void 0,void 0,s=>{o=It(t(s,or(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function xT(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Ne(s,h=>{let p=u++;c=a?t(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function qi(t,e){return be(e)?Pt(t,e,1):Pt(t,1)}function Wi(t){return Oe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ni(t){return t<=0?()=>pn:Oe((e,n)=>{let r=0;e.subscribe(Ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function lh(t=Jk){return Oe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Jk(){return new An}function Bo(t){return Oe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ri(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vn((i,o)=>t(i,o,r)):Dn,ni(1),n?Wi(e):lh(()=>new An))}function ga(t){return t<=0?()=>pn:Oe((e,n)=>{let r=[];e.subscribe(Ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Hm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vn((i,o)=>t(i,o,r)):Dn,ga(1),n?Wi(e):lh(()=>new An))}function zm(t,e){return Oe(xT(t,e,arguments.length>=2,!0))}function Gm(...t){let e=$i(t);return Oe((n,r)=>{(e?pa(t,n,e):pa(t,n)).subscribe(r)})}function Lt(t,e){return Oe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ne(r,c=>{i?.unsubscribe();let u=0,h=o++;It(t(c,h)).subscribe(i=Ne(r,p=>r.next(e?e(c,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function uh(t){return Oe((e,n)=>{It(t).subscribe(Ne(n,()=>n.complete(),fl)),!n.closed&&e.subscribe(n)})}function Vt(t,e,n){let r=be(t)||e||n?{next:t,error:e,complete:n}:t;return r?Oe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ne(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Dn}function PT(t){let e=ye(null);try{return t()}finally{ye(e)}}var NT=Ce(H({},ko),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function kT(t){if(t.dirty=!1,t.version>0&&!na(t))return;t.version++;let e=Oo(t);try{t.cleanup(),t.fn()}finally{ta(t,e)}}var Ki=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},rv=new Ki("20.3.12");var ph="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,n){super(Yi(e,n)),this.code=e}};function Zk(t){return`NG0${Math.abs(t)}`}function Yi(t,e){return`${Zk(t)}${e?": "+e:""}`}var va=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("")}function LT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function oi(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(oi).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function gh(t,e){return t?e?`${t} ${e}`:t:e||""}var Xk=ze({__forward_ref__:ze});function si(t){return t.__forward_ref__=si,t.toString=function(){return oi(this())},t}function qt(t){return iv(t)?t():t}function iv(t){return typeof t=="function"&&t.hasOwnProperty(Xk)&&t.__forward_ref__===si}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function br(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cl(t){return eO(t,mh)}function ov(t){return Cl(t)!==null}function eO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function tO(t){let e=t?.[mh]??null;return e||null}function Wm(t){return t&&t.hasOwnProperty(hh)?t[hh]:null}var mh=ze({\u0275prov:ze}),hh=ze({\u0275inj:ze}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sv(t){return t&&!!t.\u0275providers}var av=ze({\u0275cmp:ze}),cv=ze({\u0275dir:ze}),lv=ze({\u0275pipe:ze}),uv=ze({\u0275mod:ze}),vl=ze({\u0275fac:ze}),Wo=ze({__NG_ELEMENT_ID__:ze}),OT=ze({__NG_ENV_ID__:ze});function ya(t){return typeof t=="string"?t:t==null?"":String(t)}function VT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ya(t)}var jT=ze({ngErrorCode:ze}),nO=ze({ngErrorMessage:ze}),rO=ze({ngTokenPath:ze});function dv(t,e){return UT("",-200,e)}function vh(t,e){throw new re(-201,!1)}function UT(t,e,n){let r=new re(e,t);return r[jT]=e,r[nO]=t,n&&(r[rO]=n),r}function iO(t){return t[jT]}var Km;function BT(){return Km}function Rn(t){let e=Km;return Km=t,e}function hv(t,e,n){let r=Cl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;vh(t,"Injector")}var oO={},$o=oO,Qm="__NG_DI_FLAG__",Ym=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ho(n)||0;try{return this.injector.get(e,r&8?null:$o,r)}catch(i){if(Xs(i))return i;throw i}}};function sO(t,e=0){let n=Ad();if(n===void 0)throw new re(-203,!1);if(n===null)return hv(t,void 0,e);{let r=aO(e),i=n.retrieve(t,r);if(Xs(i)){if(r.optional)return null;throw i}return i}}function z(t,e=0){return(BT()||sO)(qt(t),e)}function F(t,e){return z(t,Ho(e))}function Ho(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function aO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Jm(t){let e=[];for(let n=0;n<t.length;n++){let r=qt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=cO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function $T(t,e){return t[Qm]=e,t.prototype[Qm]=e,t}function cO(t){return t[Qm]}function zo(t,e){let n=t.hasOwnProperty(vl);return n?t[vl]:null}function HT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function zT(t){return t.flat(Number.POSITIVE_INFINITY)}function yh(t,e){t.forEach(n=>Array.isArray(n)?yh(n,e):e(n))}function fv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function El(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function GT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function _h(t,e,n){let r=_a(t,e);return r>=0?t[r|1]=n:(r=~r,GT(t,r,e,n)),r}function Ch(t,e){let n=_a(t,e);if(n>=0)return t[n|1]}function _a(t,e){return lO(t,e,1)}function lO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ji={},an=[],ai=new ae(""),pv=new ae("",-1),gv=new ae(""),yl=class{get(e,n=$o){if(n===$o){let i=UT("",-201);throw i.name="\u0275NotFound",i}return n}};function mv(t){return t[uv]||null}function ci(t){return t[av]||null}function vv(t){return t[cv]||null}function qT(t){return t[lv]||null}function ar(t){return{\u0275providers:t}}function WT(...t){return{\u0275providers:yv(!0,t),\u0275fromNgModule:!0}}function yv(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return yh(e,s=>{let a=s;fh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&KT(i,o),n}function KT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_v(i,o=>{e(o,r)})}}function fh(t,e,n,r){if(t=qt(t),!t)return!1;let i=null,o=Wm(t),s=!o&&ci(t);if(!o&&!s){let c=t.ngModule;if(o=Wm(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)fh(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{yh(o.imports,h=>{fh(h,e,n,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&KT(u,e)}if(!a){let u=zo(i)||(()=>new i);e({provide:i,useFactory:u,deps:an},i),e({provide:gv,useValue:i,multi:!0},i),e({provide:ai,useValue:()=>z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;_v(c,h=>{e(h,u)})}}else return!1;return i!==t&&t.providers!==void 0}function _v(t,e){for(let n of t)sv(n)&&(n=n.\u0275providers),Array.isArray(n)?_v(n,e):e(n)}var uO=ze({provide:String,useValue:ze});function QT(t){return t!==null&&typeof t=="object"&&uO in t}function dO(t){return!!(t&&t.useExisting)}function hO(t){return!!(t&&t.useFactory)}function Go(t){return typeof t=="function"}function YT(t){return!!t.useClass}var Il=new ae(""),dh={},FT={},qm;function Ca(){return qm===void 0&&(qm=new yl),qm}var ot=class{},qo=class extends ot{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Xm(e,s=>this.processProvider(s)),this.records.set(pv,ma(void 0,this)),i.has("environment")&&this.records.set(ot,ma(void 0,this));let o=this.records.get(Il);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gv,an,{self:!0}))}retrieve(e,n){let r=Ho(n)||0;try{return this.get(e,$o,r)}catch(i){if(Xs(i))return i;throw i}}destroy(){ml(this),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return ml(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ml(this);let n=Tr(this),r=Rn(void 0),i;try{return e()}finally{Tr(n),Rn(r)}}get(e,n=$o,r){if(ml(this),e.hasOwnProperty(OT))return e[OT](this);let i=Ho(r),o,s=Tr(this),a=Rn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=vO(e)&&Cl(e);h&&this.injectableDefInScope(h)?u=ma(Zm(e),dh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Ca():this.parent;return n=i&8&&n===$o?null:n,c.get(e,n)}catch(c){let u=iO(c);throw u===-200||u===-201?new re(u,null):c}finally{Rn(a),Tr(s)}}resolveInjectorInitializers(){let e=ye(null),n=Tr(this),r=Rn(void 0),i;try{let o=this.get(ai,an,{self:!0});for(let s of o)s()}finally{Tr(n),Rn(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(oi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=qt(e);let n=Go(e)?e:qt(e&&e.provide),r=pO(e);if(!Go(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ma(void 0,dh,!0),i.factory=()=>Jm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ye(null);try{if(n.value===FT)throw dv(oi(e));return n.value===dh&&(n.value=FT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&mO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=qt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Zm(t){let e=Cl(t),n=e!==null?e.factory:zo(t);if(n!==null)return n;if(t instanceof ae)throw new re(204,!1);if(t instanceof Function)return fO(t);throw new re(204,!1)}function fO(t){if(t.length>0)throw new re(204,!1);let n=tO(t);return n!==null?()=>n.factory(t):()=>new t}function pO(t){if(QT(t))return ma(void 0,t.useValue);{let e=Cv(t);return ma(e,dh)}}function Cv(t,e,n){let r;if(Go(t)){let i=qt(t);return zo(i)||Zm(i)}else if(QT(t))r=()=>qt(t.useValue);else if(hO(t))r=()=>t.useFactory(...Jm(t.deps||[]));else if(dO(t))r=(i,o)=>z(qt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=qt(t&&(t.useClass||t.provide));if(gO(t))r=()=>new i(...Jm(t.deps));else return zo(i)||Zm(i)}return r}function ml(t){if(t.destroyed)throw new re(205,!1)}function ma(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gO(t){return!!t.deps}function mO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function vO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Xm(t,e){for(let n of t)Array.isArray(n)?Xm(n,e):n&&sv(n)?Xm(n.\u0275providers,e):e(n)}function lt(t,e){let n;t instanceof qo?(ml(t),n=t):n=new Ym(t);let r,i=Tr(n),o=Rn(void 0);try{return e()}finally{Tr(i),Rn(o)}}function JT(){return BT()!==void 0||Ad()!=null}var cr=0,fe=1,_e=2,Nt=3,Hn=4,zn=5,Ea=6,Ia=7,vt=8,Gn=9,Sr=10,et=11,wa=12,Ev=13,Ko=14,Mn=15,li=16,Qo=17,Dr=18,wl=19,Iv=20,ii=21,Eh=22,ui=23,xn=24,Yo=25,Zi=26,yt=27,ZT=1,wv=6,Xi=7,Tl=8,Jo=9,ft=10;function Ar(t){return Array.isArray(t)&&typeof t[ZT]=="object"}function lr(t){return Array.isArray(t)&&t[ZT]===!0}function Tv(t){return(t.flags&4)!==0}function eo(t){return t.componentOffset>-1}function Ih(t){return(t.flags&1)===1}function Rr(t){return!!t.template}function Ta(t){return(t[_e]&512)!==0}function Zo(t){return(t[_e]&256)===256}var XT="svg",eb="math";function qn(t){for(;Array.isArray(t);)t=t[cr];return t}function bv(t,e){return qn(e[t])}function ur(t,e){return qn(e[t.index])}function bl(t,e){return t.data[e]}function Sv(t,e){return t[e]}function wh(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Wn(t,e){let n=e[t];return Ar(n)?n:n[cr]}function tb(t){return(t[_e]&4)===4}function Th(t){return(t[_e]&128)===128}function nb(t){return lr(t[Nt])}function Mr(t,e){return e==null?null:t[e]}function Dv(t){t[Qo]=0}function Av(t){t[_e]&1024||(t[_e]|=1024,Th(t)&&to(t))}function rb(t,e){for(;t>0;)e=e[Ko],t--;return e}function Sl(t){return!!(t[_e]&9216||t[xn]?.dirty)}function bh(t){t[Sr].changeDetectionScheduler?.notify(8),t[_e]&64&&(t[_e]|=1024),Sl(t)&&to(t)}function to(t){t[Sr].changeDetectionScheduler?.notify(0);let e=Qi(t);for(;e!==null&&!(e[_e]&8192||(e[_e]|=8192,!Th(e)));)e=Qi(e)}function Rv(t,e){if(Zo(t))throw new re(911,!1);t[ii]===null&&(t[ii]=[]),t[ii].push(e)}function ib(t,e){if(t[ii]===null)return;let n=t[ii].indexOf(e);n!==-1&&t[ii].splice(n,1)}function Qi(t){let e=t[Nt];return lr(e)?e[Nt]:e}function Mv(t){return t[Ia]??=[]}function xv(t){return t.cleanup??=[]}function ob(t,e,n,r){let i=Mv(e);i.push(n),t.firstCreatePass&&xv(t).push(r,i.length-1)}var Ae={lFrame:_b(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ev=!1;function sb(){return Ae.lFrame.elementDepthCount}function ab(){Ae.lFrame.elementDepthCount++}function Pv(){Ae.lFrame.elementDepthCount--}function cb(){return Ae.bindingsEnabled}function lb(){return Ae.skipHydrationRootTNode!==null}function Nv(t){return Ae.skipHydrationRootTNode===t}function kv(){Ae.skipHydrationRootTNode=null}function Ee(){return Ae.lFrame.lView}function pt(){return Ae.lFrame.tView}function L(t){return Ae.lFrame.contextLView=t,t[vt]}function V(t){return Ae.lFrame.contextLView=null,t}function wt(){let t=Ov();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ov(){return Ae.lFrame.currentTNode}function ub(){let t=Ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xo(t,e){let n=Ae.lFrame;n.currentTNode=t,n.isParent=e}function Fv(){return Ae.lFrame.isParent}function db(){Ae.lFrame.isParent=!1}function Lv(){return Ae.lFrame.contextLView}function Vv(){return ev}function ba(t){let e=ev;return ev=t,e}function jv(){let t=Ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function hb(){return Ae.lFrame.bindingIndex}function fb(t){return Ae.lFrame.bindingIndex=t}function es(){return Ae.lFrame.bindingIndex++}function Sh(t){let e=Ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function pb(){return Ae.lFrame.inI18n}function gb(t,e){let n=Ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Dh(e)}function mb(){return Ae.lFrame.currentDirectiveIndex}function Dh(t){Ae.lFrame.currentDirectiveIndex=t}function vb(t){let e=Ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Uv(){return Ae.lFrame.currentQueryIndex}function Ah(t){Ae.lFrame.currentQueryIndex=t}function yO(t){let e=t[fe];return e.type===2?e.declTNode:e.type===1?t[zn]:null}function Bv(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=yO(o),i===null||(o=o[Ko],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ae.lFrame=yb();return r.currentTNode=e,r.lView=t,!0}function Rh(t){let e=yb(),n=t[fe];Ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yb(){let t=Ae.lFrame,e=t===null?null:t.child;return e===null?_b(t):e}function _b(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Cb(){let t=Ae.lFrame;return Ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var $v=Cb;function Mh(){let t=Cb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Eb(t){return(Ae.lFrame.contextLView=rb(t,Ae.lFrame.contextLView))[vt]}function dr(){return Ae.lFrame.selectedIndex}function no(t){Ae.lFrame.selectedIndex=t}function xh(){let t=Ae.lFrame;return bl(t.tView,t.selectedIndex)}function Ib(){return Ae.lFrame.currentNamespace}var wb=!0;function Ph(){return wb}function Dl(t){wb=t}function tv(t,e=null,n=null,r){let i=Hv(t,e,n,r);return i.resolveInjectorInitializers(),i}function Hv(t,e=null,n=null,r,i=new Set){let o=[n||an,WT(t)];return r=r||(typeof t=="object"?void 0:oi(t)),new qo(o,e||Ca(),r||null,i)}var Xe=class t{static THROW_IF_NOT_FOUND=$o;static NULL=new yl;static create(e,n){if(Array.isArray(e))return tv({name:""},n,e,"");{let r=e.name??"";return tv({name:r},e.parent,e.providers,r)}}static \u0275prov=W({token:t,providedIn:"any",factory:()=>z(pv)});static __NG_ELEMENT_ID__=-1},Tt=new ae(""),yn=(()=>{class t{static __NG_ELEMENT_ID__=_O;static __NG_ENV_ID__=n=>n}return t})(),_l=class extends yn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Zo(this._lView)}onDestroy(e){let n=this._lView;return Rv(n,e),()=>ib(n,e)}};function _O(){return new _l(Ee())}var $n=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Kn=new ae("",{providedIn:"root",factory:()=>{let t=F(ot),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get($n),e.handleError(n))}}}),Tb={provide:ai,useValue:()=>void F($n),multi:!0};function zv(t){return typeof t=="function"&&t[en]!==void 0}function nt(t,e){let[n,r,i]=Sm(t,e?.equal),o=n,s=o[en];return o.set=r,o.update=i,o.asReadonly=Gv.bind(o),o}function Gv(){let t=this[en];if(t.readonlyFn===void 0){let e=()=>this();e[en]=t,t.readonlyFn=e}return t.readonlyFn}function qv(t){return zv(t)&&typeof t.set=="function"}var Sa=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=CO}return t})();function CO(){return new Sa(Ee(),wt())}var sr=class{},Al=new ae("",{providedIn:"root",factory:()=>!1});var Wv=new ae(""),Kv=new ae(""),xr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Gt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Se(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})(),di=(()=>{class t{internalPendingTasks=F(xr);scheduler=F(sr);errorHandler=F(Kn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})();function ts(...t){}var Rl=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>new nv})}return t})(),nv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Fa(t){return{toString:t}.toString()}var Nh="__parameters__";function AO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function RO(t,e,n){return Fa(()=>{let r=AO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,h){let p=c.hasOwnProperty(Nh)?c[Nh]:Object.defineProperty(c,Nh,{value:[]})[Nh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Nr=$T(RO("Optional"),8);function MO(t){return typeof t=="function"}var $h=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function aS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var La=(()=>{let t=()=>cS;return t.ngInherit=!0,t})();function cS(t){return t.type.prototype.ngOnChanges&&(t.setInput=PO),xO}function xO(){let t=uS(this),e=t?.current;if(e){let n=t.previous;if(n===Ji)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function PO(t,e,n,r,i){let o=this.declaredInputs[r],s=uS(t)||NO(t,{previous:Ji,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new $h(u&&u.currentValue,n,c===Ji),aS(t,e,i,n)}var lS="__ngSimpleChanges__";function uS(t){return t[lS]||null}function NO(t,e){return t[lS]=e}var bb=[];var Ke=function(t,e=null,n){for(let r=0;r<bb.length;r++){let i=bb[r];i(t,e,n)}};function kO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cS(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function OO(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Lh(t,e,n){dS(t,e,3,n)}function Vh(t,e,n,r){(t[_e]&3)===n&&dS(t,e,n,r)}function Qv(t,e){let n=t[_e];(n&3)===e&&(n&=16383,n+=1,t[_e]=n)}function dS(t,e,n,r){let i=r!==void 0?t[Qo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Qo]+=65536),(a<o||o==-1)&&(FO(t,n,e,c),t[Qo]=(t[Qo]&4294901760)+c+2),c++}function Sb(t,e){Ke(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),Ke(5,t,e)}}function FO(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[_e]>>14<t[Qo]>>16&&(t[_e]&3)===e&&(t[_e]+=16384,Sb(a,o)):Sb(a,o)}var Aa=-1,rs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function LO(t){return(t.flags&8)!==0}function VO(t){return(t.flags&16)!==0}function jO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];BO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function UO(t){return t===3||t===4||t===6}function BO(t){return t.charCodeAt(0)===64}function xa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Db(t,n,i,null,e[++r]):Db(t,n,i,null,null))}}return t}function Db(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function hS(t){return t!==Aa}function Hh(t){return t&32767}function $O(t){return t>>16}function zh(t,e){let n=$O(t),r=e;for(;n>0;)r=r[Ko],n--;return r}var oy=!0;function Ab(t){let e=oy;return oy=t,e}var HO=256,fS=HO-1,pS=5,zO=0,Pr={};function GO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Wo)&&(r=n[Wo]),r==null&&(r=n[Wo]=zO++);let i=r&fS,o=1<<i;e.data[t+(i>>pS)]|=o}function Gh(t,e){let n=gS(t,e);if(n!==-1)return n;let r=e[fe];r.firstCreatePass&&(t.injectorIndex=e.length,Yv(r.data,t),Yv(e,null),Yv(r.blueprint,null));let i=Gy(t,e),o=t.injectorIndex;if(hS(i)){let s=Hh(i),a=zh(i,e),c=a[fe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Yv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function gS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Gy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=CS(i),r===null)return Aa;if(n++,i=i[Ko],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Aa}function sy(t,e,n){GO(t,e,n)}function mS(t,e,n){if(n&8||t!==void 0)return t;vh(e,"NodeInjector")}function vS(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Gn],o=Rn(void 0);try{return i?i.get(e,r,n&8):hv(e,r,n&8)}finally{Rn(o)}}return mS(r,e,n)}function yS(t,e,n,r=0,i){if(t!==null){if(e[_e]&2048&&!(r&2)){let s=QO(t,e,n,r,Pr);if(s!==Pr)return s}let o=_S(t,e,n,r,Pr);if(o!==Pr)return o}return vS(e,n,r,i)}function _S(t,e,n,r,i){let o=WO(n);if(typeof o=="function"){if(!Bv(e,t,r))return r&1?mS(i,n,r):vS(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))vh(n);else return s}finally{$v()}}else if(typeof o=="number"){let s=null,a=gS(t,e),c=Aa,u=r&1?e[Mn][zn]:null;for((a===-1||r&4)&&(c=a===-1?Gy(t,e):e[a+8],c===Aa||!Mb(r,!1)?a=-1:(s=e[fe],a=Hh(c),e=zh(c,e)));a!==-1;){let h=e[fe];if(Rb(o,a,h.data)){let p=qO(a,e,n,s,r,u);if(p!==Pr)return p}c=e[a+8],c!==Aa&&Mb(r,e[fe].data[a+8]===u)&&Rb(o,a,e)?(s=h,a=Hh(c),e=zh(c,e)):a=-1}}return i}function qO(t,e,n,r,i,o){let s=e[fe],a=s.data[t+8],c=r==null?eo(a)&&oy:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=jh(a,s,n,c,u);return h!==null?Nl(e,s,h,a,i):Pr}function jh(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:u;for(let v=p;v<g;v++){let w=s[v];if(v<c&&n===w||v>=c&&w.type===n)return v}if(i){let v=s[c];if(v&&Rr(v)&&v.type===n)return c}return null}function Nl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof rs){let a=o;if(a.resolving){let v=VT(s[n]);throw dv(v)}let c=Ab(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],h,p=a.injectImpl?Rn(a.injectImpl):null,g=Bv(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kO(n,s[n],e)}finally{p!==null&&Rn(p),Ab(c),a.resolving=!1,$v()}}return o}function WO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Wo)?t[Wo]:void 0;return typeof e=="number"?e>=0?e&fS:KO:e}function Rb(t,e,n){let r=1<<t;return!!(n[e+(t>>pS)]&r)}function Mb(t,e){return!(t&2)&&!(t&1&&e)}var ns=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return yS(this._tNode,this._lView,e,Ho(r),n)}};function KO(){return new ns(wt(),Ee())}function bt(t){return Fa(()=>{let e=t.prototype.constructor,n=e[vl]||ay(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[vl]||ay(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ay(t){return iv(t)?()=>{let e=ay(qt(t));return e&&e()}:zo(t)}function QO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[_e]&2048&&!Ta(s);){let a=_S(o,s,n,r|2,Pr);if(a!==Pr)return a;let c=o.parent;if(!c){let u=s[Iv];if(u){let h=u.get(n,Pr,r);if(h!==Pr)return h}c=CS(s),s=s[Ko]}o=c}return i}function CS(t){let e=t[fe],n=e.type;return n===2?e.declTNode:n===1?t[zn]:null}function YO(){return Va(wt(),Ee())}function Va(t,e){return new jt(ur(t,e))}var jt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=YO}return t})();function JO(t){return t instanceof jt?t.nativeElement:t}function ZO(){return this._results[Symbol.iterator]()}var qh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=zT(e);(this._changesDetected=!HT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=ZO};function ES(t){return(t.flags&128)===128}var qy=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(qy||{}),IS=new Map,XO=0;function eF(){return XO++}function tF(t){IS.set(t[wl],t)}function cy(t){IS.delete(t[wl])}var xb="__ngContext__";function Pa(t,e){Ar(e)?(t[xb]=e[wl],tF(e)):t[xb]=e}function wS(t){return bS(t[wa])}function TS(t){return bS(t[Hn])}function bS(t){for(;t!==null&&!lr(t);)t=t[Hn];return t}var ly;function Wy(t){ly=t}function SS(){if(ly!==void 0)return ly;if(typeof document<"u")return document;throw new re(210,!1)}var uf=new ae("",{providedIn:"root",factory:()=>nF}),nF="ng",df=new ae(""),as=new ae("",{providedIn:"platform",factory:()=>"unknown"});var hf=new ae("",{providedIn:"root",factory:()=>SS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rF="h",iF="b";var DS="r";var AS="di";var RS=!1,MS=new ae("",{providedIn:"root",factory:()=>RS});var oF=(t,e,n,r)=>{};function sF(t,e,n,r){oF(t,e,n,r)}function Ky(t){return(t.flags&32)===32}var aF=()=>null;function xS(t,e,n=!1){return aF(t,e,n)}function PS(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ah(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function uy(t,e,n){Ah(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function NS(t,e,n){if(Tv(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ye(r)}}}var hi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(hi||{}),kh;function cF(){if(kh===void 0&&(kh=null,va.trustedTypes))try{kh=va.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kh}function ff(t){return cF()?.createHTML(t)||t}var fi=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ph})`}},dy=class extends fi{getTypeName(){return"HTML"}},hy=class extends fi{getTypeName(){return"Style"}},fy=class extends fi{getTypeName(){return"Script"}},py=class extends fi{getTypeName(){return"URL"}},gy=class extends fi{getTypeName(){return"ResourceURL"}};function kr(t){return t instanceof fi?t.changingThisBreaksApplicationSecurity:t}function oo(t,e){let n=kS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ph})`)}return n===e}function kS(t){return t instanceof fi&&t.getTypeName()||null}function Qy(t){return new dy(t)}function Yy(t){return new hy(t)}function Jy(t){return new fy(t)}function Zy(t){return new py(t)}function Xy(t){return new gy(t)}function lF(t){let e=new vy(t);return uF()?new my(e):e}var my=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(ff(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},vy=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=ff(e),n}};function uF(){try{return!!new window.DOMParser().parseFromString(ff(""),"text/html")}catch{return!1}}var dF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jl(t){return t=String(t),t.match(dF)?t:"unsafe:"+t}function gi(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Ul(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var OS=gi("area,br,col,hr,img,wbr"),FS=gi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),LS=gi("rp,rt"),hF=Ul(LS,FS),fF=Ul(FS,gi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pF=Ul(LS,gi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pb=Ul(OS,fF,pF,hF),VS=gi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gF=gi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mF=gi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),vF=Ul(VS,gF,mF),yF=gi("script,style,template"),yy=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=EF(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=CF(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=Nb(e).toLowerCase();if(!Pb.hasOwnProperty(n))return this.sanitizedSomething=!0,!yF.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!vF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;VS[a]&&(c=jl(c)),this.buf.push(" ",s,'="',kb(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=Nb(e).toLowerCase();Pb.hasOwnProperty(n)&&!OS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(kb(e))}};function _F(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function CF(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw jS(e);return e}function EF(t){let e=t.firstChild;if(e&&_F(t,e))throw jS(e);return e}function Nb(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function jS(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var IF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wF=/([^\#-~ |!])/g;function kb(t){return t.replace(/&/g,"&amp;").replace(IF,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(wF,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Oh;function e_(t,e){let n=null;try{Oh=Oh||lF(t);let r=e?String(e):"";n=Oh.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Oh.getInertBodyElement(r)}while(r!==o);let a=new yy().sanitizeChildren(Ob(n)||n);return ff(a)}finally{if(n){let r=Ob(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function Ob(t){return"content"in t&&TF(t)?t.content:null}function TF(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Or=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Or||{});function _t(t){let e=bF();return e?e.sanitize(Or.URL,t)||"":oo(t,"URL")?kr(t):jl(ya(t))}function bF(){let t=Ee();return t&&t[Sr].sanitizer}var SF=/^>|^->|<!--|-->|--!>|<!-$/g,DF=/(<|>)/g,AF="\u200B$1\u200B";function RF(t){return t.replace(SF,e=>e.replace(DF,AF))}function t_(t){return t.ownerDocument.defaultView}function US(t){return t instanceof Function?t():t}function MF(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var BS="ng-template";function xF(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&MF(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(n_(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function n_(t){return t.type===4&&t.value!==BS}function PF(t,e,n){let r=t.type===4&&!n?BS:t.value;return e===r}function NF(t,e,n){let r=4,i=t.attrs,o=i!==null?FF(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!hr(r)&&!hr(c))return!1;if(s&&hr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!PF(t,c,n)||c===""&&e.length===1){if(hr(r))return!1;s=!0}}else if(r&8){if(i===null||!xF(t,i,c,n)){if(hr(r))return!1;s=!0}}else{let u=e[++a],h=kF(c,i,n_(t),n);if(h===-1){if(hr(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(hr(r))return!1;s=!0}}}}return hr(r)||s}function hr(t){return(t&1)===0}function kF(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LF(e,t)}function OF(t,e,n=!1){for(let r=0;r<e.length;r++)if(NF(t,e[r],n))return!0;return!1}function FF(t){for(let e=0;e<t.length;e++){let n=t[e];if(UO(n))return e}return t.length}function LF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Fb(t,e){return t?":not("+e.trim()+")":e}function VF(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hr(s)&&(e+=Fb(o,i),i=""),r=s,o=o||!hr(r);n++}return i!==""&&(e+=Fb(o,i)),e}function jF(t){return t.map(VF).join(",")}function UF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!hr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var cn={};function BF(t,e){return t.createText(e)}function $F(t,e,n){t.setValue(e,n)}function HF(t,e){return t.createComment(RF(e))}function $S(t,e,n){return t.createElement(e,n)}function Wh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function HS(t,e,n){t.appendChild(e,n)}function Lb(t,e,n,r,i){r!==null?Wh(t,e,n,r,i):HS(t,e,n)}function zS(t,e,n,r){t.removeChild(null,e,n,r)}function zF(t,e,n){t.setAttribute(e,"style",n)}function GF(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function GS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&jO(t,e,r),i!==null&&GF(t,e,i),o!==null&&zF(t,e,o)}function r_(t,e,n,r,i,o,s,a,c,u,h){let p=yt+r,g=p+i,v=qF(p,g),w=typeof u=="function"?u():u;return v[fe]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:h}}function qF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:cn);return n}function WF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=r_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function i_(t,e,n,r,i,o,s,a,c,u,h){let p=e.blueprint.slice();return p[cr]=i,p[_e]=r|4|128|8|64|1024,(u!==null||t&&t[_e]&2048)&&(p[_e]|=2048),Dv(p),p[Nt]=p[Ko]=t,p[vt]=n,p[Sr]=s||t&&t[Sr],p[et]=a||t&&t[et],p[Gn]=c||t&&t[Gn]||null,p[zn]=o,p[wl]=eF(),p[Ea]=h,p[Iv]=u,p[Mn]=e.type==2?t[Mn]:p,p}function KF(t,e,n){let r=ur(e,t),i=WF(n),o=t[Sr].rendererFactory,s=o_(t,i_(t,i,null,qS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function qS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function WS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function o_(t,e){return t[wa]?t[Ev][Hn]=e:t[wa]=e,t[Ev]=e,e}function b(t=1){KS(pt(),Ee(),dr()+t,!1)}function KS(t,e,n,r){if(!r)if((e[_e]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Lh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Vh(e,o,0,n)}no(n)}var pf=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(pf||{});function _y(t,e,n,r){let i=ye(null);try{let[o,s,a]=t.inputs[n],c=null;(s&pf.SignalBased)!==0&&(c=e[o][en]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):aS(e,c,o,r)}finally{ye(i)}}var pi=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(pi||{}),QF;function s_(t,e){return QF(t,e)}function Kh(t){if(!t)return 0;let e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function Ra(t,e){return t.getPropertyValue(e).split(",").map(r=>r.trim())}function YF(t){let e=Ra(t,"transition-property"),n=Ra(t,"transition-duration"),r=Ra(t,"transition-delay"),i={propertyName:"",duration:0,animationName:void 0};for(let o=0;o<e.length;o++){let s=Kh(r[o])+Kh(n[o]);s>i.duration&&(i.propertyName=e[o],i.duration=s)}return i}function JF(t){let e=Ra(t,"animation-name"),n=Ra(t,"animation-delay"),r=Ra(t,"animation-duration"),i={animationName:"",propertyName:void 0,duration:0};for(let o=0;o<e.length;o++){let s=Kh(n[o])+Kh(r[o]);s>i.duration&&(i.animationName=e[o],i.duration=s)}return i}function QS(t,e){return t!==void 0&&t.duration>e.duration}function YS(t){return(t.animationName!=null||t.propertyName!=null)&&t.duration>0}function ZF(t,e){let n=getComputedStyle(t),r=JF(n),i=YF(n),o=r.duration>i.duration?r:i;QS(e.get(t),o)||YS(o)&&e.set(t,o)}function XF(t,e,n){if(!n)return;let r=t.getAnimations();return r.length===0?ZF(t,e):eL(t,e,r)}function eL(t,e,n){let r={animationName:void 0,propertyName:void 0,duration:0};for(let i of n){let o=i.effect?.getTiming(),s=typeof o?.duration=="number"?o.duration:0,a=(o?.delay??0)+s,c,u;i.animationName?u=i.animationName:c=i.transitionProperty,a>=r.duration&&(r={animationName:u,propertyName:c,duration:a})}QS(e.get(t),r)||YS(r)&&e.set(t,r)}var ro=new Set,gf=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(gf||{}),cs=new ae(""),Vb=new Set;function Fr(t){Vb.has(t)||(Vb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var JS=!1,Cy=class extends Et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,JT()&&(this.destroyRef=F(yn,{optional:!0})??void 0,this.pendingTasks=F(xr,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ht&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ut=Cy;function ZS(t){let e,n;function r(){t=ts;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function jb(t){return queueMicrotask(()=>t()),()=>{t=ts}}var a_="isAngularZone",Qh=a_+"_ID",tL=0,Le=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ut(!1);onMicrotaskEmpty=new ut(!1);onStable=new ut(!1);onError=new ut(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=JS}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,iL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(a_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new re(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nL,ts,ts);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},nL={};function c_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function rL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){ZS(()=>{t.callbackScheduled=!1,Ey(t),t.isCheckStableRunning=!0,c_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Ey(t)}function iL(t){let e=()=>{rL(t)},n=tL++;t._inner=t._inner.fork({name:"angular",properties:{[a_]:!0,[Qh]:n,[Qh+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(oL(c))return r.invokeTask(o,s,a,c);try{return Ub(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Bb(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return Ub(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!sL(c)&&e(),Bb(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ey(t),c_(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ey(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ub(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Bb(t){t._nesting--,c_(t)}var Yh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ut;onMicrotaskEmpty=new ut;onStable=new ut;onError=new ut;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function oL(t){return XS(t,"__ignore_ng_zone__")}function sL(t){return XS(t,"__scheduler_tick__")}function XS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var l_=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})(),eD=[0,1,2,3],tD=(()=>{class t{ngZone=F(Le);scheduler=F(sr);errorHandler=F($n,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(cs,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ke(16),this.executing=!0;for(let r of eD)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ke(17)}register(n){let{view:r}=n;r!==void 0?((r[Yo]??=[]).push(n),to(r),r[_e]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(gf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})(),Jh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Yo];e&&(this.view[Yo]=e.filter(n=>n!==this))}};function Bl(t,e){let n=e?.injector??F(Xe);return Fr("NgAfterNextRender"),cL(t,n,e,!0)}function aL(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function cL(t,e,n,r){let i=e.get(l_);i.impl??=e.get(tD);let o=e.get(cs,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(yn):null,a=e.get(Sa,null,{optional:!0}),c=new Jh(i.impl,aL(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var mf=new ae("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function nD(t,e,n){let r=t.get(mf);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function lL(t,e){let n=t.get(mf);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function uL(t){let e=t.get(mf);e.isScheduled||(Bl(()=>{e.isScheduled=!1;for(let n of e.queue)n();e.queue.clear()},{injector:t}),e.isScheduled=!0)}function dL(t){let e=t.get(mf);e.scheduler=uL,e.scheduler(t)}function hL(t,e){for(let[n,r]of e)nD(t,r.animateFns)}function $b(t,e,n,r){let i=t?.[Zi]?.enter;e!==null&&i&&i.has(n.index)&&hL(r,i)}function Da(t,e,n,r,i,o,s,a){if(i!=null){let c,u=!1;lr(i)?c=i:Ar(i)&&(u=!0,i=i[cr]);let h=qn(i);t===0&&r!==null?($b(a,r,o,n),s==null?HS(e,r,h):Wh(e,r,h,s||null,!0)):t===1&&r!==null?($b(a,r,o,n),Wh(e,r,h,s||null,!0)):t===2?Hb(a,o,n,p=>{zS(e,h,u,p)}):t===3&&Hb(a,o,n,()=>{e.destroyNode(h)}),c!=null&&bL(e,t,n,c,o,r,s)}}function fL(t,e){rD(t,e),e[cr]=null,e[zn]=null}function pL(t,e,n,r,i,o){r[cr]=i,r[zn]=e,yf(t,r,n,1,i,o)}function rD(t,e){e[Sr].changeDetectionScheduler?.notify(9),yf(t,e,e[et],2,null,null)}function gL(t){let e=t[wa];if(!e)return Jv(t[fe],t);for(;e;){let n=null;if(Ar(e))n=e[wa];else{let r=e[ft];r&&(n=r)}if(!n){for(;e&&!e[Hn]&&e!==t;)Ar(e)&&Jv(e[fe],e),e=e[Nt];e===null&&(e=t),Ar(e)&&Jv(e[fe],e),n=e&&e[Hn]}e=n}}function u_(t,e){let n=t[Jo],r=n.indexOf(e);n.splice(r,1)}function vf(t,e){if(Zo(e))return;let n=e[et];n.destroyNode&&yf(t,e,n,3,null,null),gL(e)}function Jv(t,e){if(Zo(e))return;let n=ye(null);try{e[_e]&=-129,e[_e]|=256,e[xn]&&Fo(e[xn]),yL(t,e),vL(t,e),e[fe].type===1&&e[et].destroy();let r=e[li];if(r!==null&&lr(e[Nt])){r!==e[Nt]&&u_(r,e);let i=e[Dr];i!==null&&i.detachView(t)}cy(e)}finally{ye(n)}}function Hb(t,e,n,r){let i=t?.[Zi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ro.add(t),nD(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:h}=u();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),mL(t,r)}else t&&ro.delete(t),r(!1)},i)}function mL(t,e){let n=t[Zi]?.running;if(n){n.then(()=>{t[Zi].running=void 0,ro.delete(t),e(!0)});return}e(!1)}function vL(t,e){let n=t.cleanup,r=e[Ia];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ia]=null);let i=e[ii];if(i!==null){e[ii]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ui];if(o!==null){e[ui]=null;for(let s of o)s.destroy()}}function yL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof rs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ke(4,a,c);try{c.call(a)}finally{Ke(5,a,c)}}else{Ke(4,i,o);try{o.call(i)}finally{Ke(5,i,o)}}}}}function _L(t,e,n){return CL(t,e.parent,n)}function CL(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[cr];if(eo(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===hi.None||i===hi.Emulated)return null}return ur(r,n)}function EL(t,e,n){return wL(t,e,n)}function IL(t,e,n){return t.type&40?ur(t,n):null}var wL=IL,zb;function d_(t,e,n,r){let i=_L(t,r,e),o=e[et],s=r.parent||e[zn],a=EL(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Lb(o,i,n[c],a,!1);else Lb(o,i,n,a,!1);zb!==void 0&&zb(o,r,e,n,i)}function Ml(t,e){if(e!==null){let n=e.type;if(n&3)return ur(e,t);if(n&4)return Zh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ml(t,r);{let i=t[e.index];return lr(i)?Zh(-1,i):qn(i)}}else{if(n&128)return Ml(t,e.next);if(n&32)return s_(e,t)()||qn(t[e.index]);{let r=iD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Qi(t[Mn]);return Ml(i,r)}else return Ml(t,e.next)}}}return null}function iD(t,e){if(e!==null){let r=t[Mn][zn],i=e.projection;return r.projection[i]}return null}function Zh(t,e){let n=ft+t+1;if(n<e.length){let r=e[n],i=r[fe].firstChild;if(i!==null)return Ml(r,i)}return e[Xi]}function h_(t,e,n,r,i,o,s){for(;n!=null;){let a=r[Gn];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Pa(qn(c),r),n.flags|=2),!Ky(n))if(u&8)h_(t,e,n.child,r,i,o,!1),Da(e,t,a,i,c,n,o,r);else if(u&32){let h=s_(n,r),p;for(;p=h();)Da(e,t,a,i,p,n,o,r);Da(e,t,a,i,c,n,o,r)}else u&16?TL(t,e,r,n,i,o):Da(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function yf(t,e,n,r,i,o){h_(n,r,t.firstChild,e,i,o,!1)}function TL(t,e,n,r,i,o){let s=n[Mn],c=s[zn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];Da(e,t,n[Gn],i,h,r,o,n)}else{let u=c,h=s[Nt];ES(r)&&(u.flags|=128),h_(t,e,u,h,i,o,!0)}}function bL(t,e,n,r,i,o,s){let a=r[Xi],c=qn(r);a!==c&&Da(e,t,n,o,a,i,s);for(let u=ft;u<r.length;u++){let h=r[u];yf(h[fe],h,t,e,o,a)}}function SL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:pi.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=pi.Important),t.setStyle(n,r,i,o))}}function oD(t,e,n,r,i){let o=dr(),s=r&2;try{no(-1),s&&e.length>yt&&KS(t,e,yt,!1),Ke(s?2:0,i,n),n(r,i)}finally{no(o),Ke(s?3:1,i,n)}}function sD(t,e,n){PL(t,e,n),(n.flags&64)===64&&NL(t,e,n)}function _f(t,e,n=ur){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function DL(t,e,n,r){let o=r.get(MS,RS)||n===hi.ShadowDom,s=t.selectRootElement(e,o);return AL(s),s}function AL(t){RL(t)}var RL=()=>null;function ML(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function aD(t,e,n,r,i,o){let s=e[fe];if(p_(t,s,e,n,r)){eo(t)&&xL(e,t.index);return}t.type&3&&(n=ML(n)),cD(t,e,n,r,i,o)}function cD(t,e,n,r,i,o){if(t.type&3){let s=ur(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function xL(t,e){let n=Wn(e,t);n[_e]&16||(n[_e]|=64)}function PL(t,e,n){let r=n.directiveStart,i=n.directiveEnd;eo(n)&&KF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Gh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=Nl(e,t,s,n);if(Pa(c,e),o!==null&&FL(e,s-r,c,a,n,o),Rr(a)){let u=Wn(n.index,e);u[vt]=Nl(e,t,s,n)}}}function NL(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=mb();try{no(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Dh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&kL(c,u)}}finally{no(-1),Dh(s)}}function kL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function OL(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];OF(e,o.selectors,!1)&&(r??=[],Rr(o)?r.unshift(o):r.push(o))}return r}function FL(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];_y(r,n,c,u)}}function f_(t,e,n,r,i){let o=yt+n,s=e[fe],a=i(s,e,t,r,n);e[o]=a,Xo(t,!0);let c=t.type===2;return c?(GS(e[et],a,t),(sb()===0||Ih(t))&&Pa(a,e),ab()):Pa(a,e),Ph()&&(!c||!Ky(t))&&d_(s,e,a,t),t}function Cf(t){let e=t;return Fv()?db():(e=e.parent,Xo(e,!1)),e}function LL(t,e){let n=t[Gn];if(!n)return;let r;try{r=n.get(Kn,null)}catch{r=null}r?.(e)}function p_(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],h=s[c+1],p=e.data[u];_y(p,n[u],h,i),a=!0}if(o)for(let c of o){let u=n[c],h=e.data[c];_y(h,u,r,i),a=!0}return a}function VL(t,e){let n=Wn(e,t),r=n[fe];jL(r,n);let i=n[cr];i!==null&&n[Ea]===null&&(n[Ea]=xS(i,n[Gn])),Ke(18),g_(r,n,n[vt]),Ke(19,n[vt])}function jL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function g_(t,e,n){Rh(e);try{let r=t.viewQuery;r!==null&&uy(1,r,n);let i=t.template;i!==null&&oD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Dr]?.finishViewCreation(t),t.staticContentQueries&&PS(t,e),t.staticViewQueries&&uy(2,t.viewQuery,n);let o=t.components;o!==null&&UL(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[_e]&=-5,Mh()}}function UL(t,e){for(let n=0;n<e.length;n++)VL(t,e[n])}function Ef(t,e,n,r){let i=ye(null);try{let o=e.tView,a=t[_e]&4096?4096:16,c=i_(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[li]=u;let h=t[Dr];return h!==null&&(c[Dr]=h.createEmbeddedView(o)),g_(o,c,n),c}finally{ye(i)}}function kl(t,e){return!e||e.firstChild===null||ES(t)}function Ol(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(qn(o)),lr(o)&&lD(o,r);let s=n.type;if(s&8)Ol(t,e,n.child,r);else if(s&32){let a=s_(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=iD(e,n);if(Array.isArray(a))r.push(...a);else{let c=Qi(e[Mn]);Ol(c[fe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function lD(t,e){for(let n=ft;n<t.length;n++){let r=t[n],i=r[fe].firstChild;i!==null&&Ol(r[fe],r,i,e)}t[Xi]!==t[cr]&&e.push(t[Xi])}function uD(t){if(t[Yo]!==null){for(let e of t[Yo])e.impl.addSequence(e);t[Yo].length=0}}var dD=[];function BL(t){return t[xn]??$L(t)}function $L(t){let e=dD.pop()??Object.create(zL);return e.lView=t,e}function HL(t){t.lView[xn]!==t&&(t.lView=null,dD.push(t))}var zL=Ce(H({},ko),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{to(t.lView)},consumerOnSignalRead(){this.lView[xn]=this}});function GL(t){let e=t[xn]??Object.create(qL);return e.lView=t,e}var qL=Ce(H({},ko),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Qi(t.lView);for(;e&&!hD(e[fe]);)e=Qi(e);e&&Av(e)},consumerOnSignalRead(){this.lView[xn]=this}});function hD(t){return t.type!==2}function fD(t){if(t[ui]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ui])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[_e]&8192)}}var WL=100;function pD(t,e=0){let r=t[Sr].rendererFactory,i=!1;i||r.begin?.();try{KL(t,e)}finally{i||r.end?.()}}function KL(t,e){let n=Vv();try{ba(!0),Iy(t,e);let r=0;for(;Sl(t);){if(r===WL)throw new re(103,!1);r++,Iy(t,1)}}finally{ba(n)}}function QL(t,e,n,r){if(Zo(e))return;let i=e[_e],o=!1,s=!1;Rh(e);let a=!0,c=null,u=null;o||(hD(t)?(u=BL(e),c=Oo(u)):Nd()===null?(a=!1,u=GL(e),c=Oo(u)):e[xn]&&(Fo(e[xn]),e[xn]=null));try{Dv(e),fb(t.bindingStartIndex),n!==null&&oD(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let v=t.preOrderCheckHooks;v!==null&&Lh(e,v,null)}else{let v=t.preOrderHooks;v!==null&&Vh(e,v,0,null),Qv(e,0)}if(s||YL(e),fD(e),gD(e,0),t.contentQueries!==null&&PS(t,e),!o)if(h){let v=t.contentCheckHooks;v!==null&&Lh(e,v)}else{let v=t.contentHooks;v!==null&&Vh(e,v,1),Qv(e,1)}ZL(t,e);let p=t.components;p!==null&&vD(e,p,0);let g=t.viewQuery;if(g!==null&&uy(2,g,r),!o)if(h){let v=t.viewCheckHooks;v!==null&&Lh(e,v)}else{let v=t.viewHooks;v!==null&&Vh(e,v,2),Qv(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Eh]){for(let v of e[Eh])v();e[Eh]=null}o||(uD(e),e[_e]&=-73)}catch(h){throw o||to(e),h}finally{u!==null&&(ta(u,c),a&&HL(u)),Mh()}}function gD(t,e){for(let n=wS(t);n!==null;n=TS(n))for(let r=ft;r<n.length;r++){let i=n[r];mD(i,e)}}function YL(t){for(let e=wS(t);e!==null;e=TS(e)){if(!(e[_e]&2))continue;let n=e[Jo];for(let r=0;r<n.length;r++){let i=n[r];Av(i)}}}function JL(t,e,n){Ke(18);let r=Wn(e,t);mD(r,n),Ke(19,r[vt])}function mD(t,e){Th(t)&&Iy(t,e)}function Iy(t,e){let r=t[fe],i=t[_e],o=t[xn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&na(o)),s||=!1,o&&(o.dirty=!1),t[_e]&=-9217,s)QL(r,t,r.template,t[vt]);else if(i&8192){let a=ye(null);try{fD(t),gD(t,1);let c=r.components;c!==null&&vD(t,c,1),uD(t)}finally{ye(a)}}}function vD(t,e,n){for(let r=0;r<e.length;r++)JL(t,e[r],n)}function ZL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)no(~i);else{let o=i,s=n[++r],a=n[++r];gb(s,o);let c=e[o];Ke(24,c),a(2,c),Ke(25,c)}}}finally{no(-1)}}function m_(t,e){let n=Vv()?64:1088;for(t[Sr].changeDetectionScheduler?.notify(e);t;){t[_e]|=n;let r=Qi(t);if(Ta(t)&&!r)return t;t=r}return null}function yD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function _D(t,e){let n=ft+e;if(n<t.length)return t[n]}function If(t,e,n,r=!0){let i=e[fe];if(XL(i,e,t,n),r){let s=Zh(n,t),a=e[et],c=a.parentNode(t[Xi]);c!==null&&pL(i,t[zn],a,e,c,s)}let o=e[Ea];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function CD(t,e){let n=Fl(t,e);return n!==void 0&&vf(n[fe],n),n}function Fl(t,e){if(t.length<=ft)return;let n=ft+e,r=t[n];if(r){let i=r[li];i!==null&&i!==t&&u_(i,r),e>0&&(t[n-1][Hn]=r[Hn]);let o=El(t,ft+e);fL(r[fe],r);let s=o[Dr];s!==null&&s.detachView(o[fe]),r[Nt]=null,r[Hn]=null,r[_e]&=-129}return r}function XL(t,e,n,r){let i=ft+r,o=n.length;r>0&&(n[i-1][Hn]=e),r<o-ft?(e[Hn]=n[i],fv(n,ft+r,e)):(n.push(e),e[Hn]=null),e[Nt]=n;let s=e[li];s!==null&&n!==s&&ED(s,e);let a=e[Dr];a!==null&&a.insertView(t),bh(e),e[_e]|=128}function ED(t,e){let n=t[Jo],r=e[Nt];if(Ar(r))t[_e]|=2;else{let i=r[Nt][Mn];e[Mn]!==i&&(t[_e]|=2)}n===null?t[Jo]=[e]:n.push(e)}var io=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[fe];return Ol(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[vt]}set context(e){this._lView[vt]=e}get destroyed(){return Zo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(lr(e)){let n=e[Tl],r=n?n.indexOf(this):-1;r>-1&&(Fl(e,r),El(n,r))}this._attachedToViewContainer=!1}vf(this._lView[fe],this._lView)}onDestroy(e){Rv(this._lView,e)}markForCheck(){m_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){bh(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,pD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ta(this._lView),n=this._lView[li];n!==null&&!e&&u_(n,this._lView),rD(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let n=Ta(this._lView),r=this._lView[li];r!==null&&!n&&ED(r,this._lView),bh(this._lView)}};var Na=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=eV;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Ef(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new io(o)}}return t})();function eV(){return v_(wt(),Ee())}function v_(t,e){return t.type&4?new Na(e,t,Va(t,e)):null}function $l(t,e,n,r,i){let o=t.data[e];if(o===null)o=tV(t,e,n,r,i),pb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ub();o.injectorIndex=s===null?-1:s.injectorIndex}return Xo(o,!0),o}function tV(t,e,n,r,i){let o=Ov(),s=Fv(),a=s?o:o&&o.parent,c=t.data[e]=rV(t,a,n,e,r,i);return nV(t,c,o,s),c}function nV(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function rV(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return lb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var JJ=new RegExp(`^(\\d+)*(${iF}|${rF})*(.*)`);function iV(t){let e=t[wv]??[],r=t[Nt][et],i=[];for(let o of e)o.data[AS]!==void 0?i.push(o):oV(o,r);t[wv]=i}function oV(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[DS];for(;n<i;){let o=r.nextSibling;zS(e,r,!1),r=o,n++}}}var sV=()=>null,aV=()=>null;function wy(t,e){return sV(t,e)}function ID(t,e,n){return aV(t,e,n)}var wD=class{},wf=class{},Ty=class{resolveComponentFactory(e){throw new re(917,!1)}},Hl=class{static NULL=new Ty},is=class{},so=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>cV()}return t})();function cV(){let t=Ee(),e=wt(),n=Wn(e.index,t);return(Ar(n)?n:t)[et]}var TD=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>null})}return t})();var Uh={},by=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Uh,r);return i!==Uh||n===Uh?i:this.parentInjector.get(e,n,r)}};function Xh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=gh(i,a);else if(o==2){let c=a,u=e[++s];r=gh(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function k(t,e=0){let n=Ee();if(n===null)return z(t,e);let r=wt();return yS(r,n,qt(t),e)}function lV(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,u]=h.resolveHostDirectives(s);break}hV(t,e,n,a,o,c,u)}o!==null&&r!==null&&uV(n,r,o)}function uV(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function dV(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function hV(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let v=r[g];!c&&Rr(v)&&(c=!0,dV(t,n,g)),sy(Gh(n,e),t,v.type)}yV(n,t.data.length,a);for(let g=0;g<a;g++){let v=r[g];v.providersResolver&&v.providersResolver(v)}let u=!1,h=!1,p=WS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let v=r[g];if(n.mergedAttrs=xa(n.mergedAttrs,v.hostAttrs),pV(t,n,e,p,v),vV(p,v,i),s!==null&&s.has(v)){let[O,P]=s.get(v);n.directiveToIndex.set(v.type,[p,O+n.directiveStart,P+n.directiveStart])}else(o===null||!o.has(v))&&n.directiveToIndex.set(v.type,p);v.contentQueries!==null&&(n.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(n.flags|=64);let w=v.type.prototype;!u&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}fV(t,n,o)}function fV(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Gb(0,e,i,r),Gb(1,e,i,r),Wb(e,r,!1);else{let o=n.get(i);qb(0,e,o,r),qb(1,e,o,r),Wb(e,r,!0)}}}function Gb(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),bD(e,o)}}function qb(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),bD(e,s)}}function bD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Wb(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||n_(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function pV(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=zo(i.type,!0)),s=new rs(o,Rr(i),k,null);t.blueprint[r]=s,n[r]=s,gV(t,e,r,WS(t,n,i.hostVars,cn),i)}function gV(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;mV(s)!=a&&s.push(a),s.push(n,r,o)}}function mV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function vV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Rr(e)&&(n[""]=t)}}function yV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function SD(t,e,n,r,i,o,s,a){let c=e[fe],u=c.consts,h=Mr(u,s),p=$l(c,t,n,r,h);return o&&lV(c,e,p,Mr(u,a),i),p.mergedAttrs=xa(p.mergedAttrs,p.attrs),p.attrs!==null&&Xh(p,p.attrs,!1),p.mergedAttrs!==null&&Xh(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function y_(t,e){OO(t,e),Tv(e)&&t.queries.elementEnd(e)}function DD(t,e,n,r,i,o){let s=e.consts,a=Mr(s,i),c=$l(e,t,n,r,a);if(c.mergedAttrs=xa(c.mergedAttrs,c.attrs),o!=null){let u=Mr(s,o);c.localNames=[];for(let h=0;h<u.length;h+=2)c.localNames.push(u[h],-1)}return c.attrs!==null&&Xh(c,c.attrs,!1),c.mergedAttrs!==null&&Xh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function AD(t,e,n){return t[e]=n}function _V(t,e){return t[e]}function pr(t,e,n){if(n===cn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function CV(t,e,n,r){let i=pr(t,e,n);return pr(t,e+1,r)||i}function Bh(t,e,n){return function r(i){let o=eo(t)?Wn(t.index,e):e;m_(o,5);let s=e[vt],a=Kb(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Kb(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Kb(t,e,n,r){let i=ye(null);try{return Ke(6,e,n),n(r)!==!1}catch(o){return LL(t,o),!1}finally{Ke(7,e,n),ye(i)}}function RD(t,e,n,r,i,o,s,a){let c=Ih(t),u=!1,h=null;if(!r&&c&&(h=IV(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=ur(t,n),g=r?r(p):p;sF(n,g,o,a);let v=i.listen(g,o,a);if(!EV(o)){let w=r?O=>r(qn(O[t.index])):t.index;MD(w,e,n,o,a,v,!1)}}return u}function EV(t){return t.startsWith("animation")||t.startsWith("transition")}function IV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ia],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function MD(t,e,n,r,i,o,s){let a=e.firstCreatePass?xv(e):null,c=Mv(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function Qb(t,e,n,r,i,o){let s=e[n],a=e[fe],u=a.data[n].outputs[r],p=s[u].subscribe(o);MD(t.index,a,e,i,o,p,!0)}var Sy=Symbol("BINDING");var ef=class extends Hl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ci(e);return new os(n,this.ngModule)}};function wV(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&pf.SignalBased)!==0};return i&&(o.transform=i),o})}function TV(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function bV(t,e,n){let r=e instanceof ot?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new by(n,r):n}function SV(t){let e=t.get(is,null);if(e===null)throw new re(407,!1);let n=t.get(TD,null),r=t.get(sr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function DV(t,e){let n=xD(t);return $S(e,n,n==="svg"?XT:n==="math"?eb:null)}function xD(t){return(t.selectors[0][0]||"div").toLowerCase()}var os=class extends wf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=wV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TV(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ke(22);let a=ye(null);try{let c=this.componentDef,u=AV(r,c,s,o),h=bV(c,i||this.ngModule,e),p=SV(h),g=p.rendererFactory.createRenderer(null,c),v=r?DL(g,r,c.encapsulation,h):DV(c,g),w=s?.some(Yb)||o?.some(j=>typeof j!="function"&&j.bindings.some(Yb)),O=i_(null,u,null,512|qS(c),null,null,p,g,h,null,xS(v,h,!0));O[yt]=v,Rh(O);let P=null;try{let j=SD(yt,O,2,"#host",()=>u.directiveRegistry,!0,0);GS(g,v,j),Pa(v,O),sD(u,O,j),NS(u,j,O),y_(u,j),n!==void 0&&MV(j,this.ngContentSelectors,n),P=Wn(j.index,O),O[vt]=P[vt],g_(u,O,null)}catch(j){throw P!==null&&cy(P),cy(O),j}finally{Ke(23),Mh()}return new tf(this.componentType,O,!!w)}finally{ye(a)}}};function AV(t,e,n,r){let i=t?["ng-version","20.3.12"]:UF(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Sy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Sy].requiredVars;let v=h+1;g.create&&(g.targetIdx=v,(o??=[]).push(g)),g.update&&(g.targetIdx=v,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=vv(p);c.push(g)}return r_(0,null,RV(o,s),1,a,c,null,null,null,[i],null)}function RV(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function Yb(t){let e=t[Sy].kind;return e==="input"||e==="twoWay"}var tf=class extends wD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=bl(n[fe],yt),this.location=Va(this._tNode,n),this.instance=Wn(this._tNode.index,n)[vt],this.hostView=this.changeDetectorRef=new io(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=p_(r,i[fe],i,e,n);this.previousInputValues.set(e,n);let s=Wn(r.index,i);m_(s,1)}get injector(){return new ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function MV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var gr=(()=>{class t{static __NG_ELEMENT_ID__=xV}return t})();function xV(){let t=wt();return ND(t,Ee())}var PV=gr,PD=class extends PV{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Va(this._hostTNode,this._hostLView)}get injector(){return new ns(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gy(this._hostTNode,this._hostLView);if(hS(e)){let n=zh(e,this._hostLView),r=Hh(e),i=n[fe].data[r+8];return new ns(i,n)}else return new ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Jb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=wy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,kl(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!MO(e),u;if(c)u=n;else{let P=n||{};u=P.index,r=P.injector,i=P.projectableNodes,o=P.environmentInjector||P.ngModuleRef,s=P.directives,a=P.bindings}let h=c?e:new os(ci(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(c?p:this.parentInjector).get(ot,null);j&&(o=j)}let g=ci(h.componentType??{}),v=wy(this._lContainer,g?.id??null),w=v?.firstChild??null,O=h.create(p,i,w,o,s,a);return this.insertImpl(O.hostView,u,kl(this._hostTNode,v)),O}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(nb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Nt],u=new PD(c,c[zn],c[Nt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return If(s,i,o,r),e.attachToViewContainerRef(),fv(Zv(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Jb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Fl(this._lContainer,n);r&&(El(Zv(this._lContainer),n),vf(r[fe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Fl(this._lContainer,n);return r&&El(Zv(this._lContainer),n)!=null?new io(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Jb(t){return t[Tl]}function Zv(t){return t[Tl]||(t[Tl]=[])}function ND(t,e){let n,r=e[t.index];return lr(r)?n=r:(n=yD(r,e,null,t),e[t.index]=n,o_(e,n)),kV(n,e,t,r),new PD(n,t,e)}function NV(t,e){let n=t[et],r=n.createComment(""),i=ur(e,t),o=n.parentNode(i);return Wh(n,o,r,n.nextSibling(i),!1),r}var kV=LV,OV=()=>!1;function FV(t,e,n){return OV(t,e,n)}function LV(t,e,n,r){if(t[Xi])return;let i;n.type&8?i=qn(r):i=NV(e,n),t[Xi]=i}var Dy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ay=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)__(e,n).matches!==null&&this.queries[n].setDirty()}},Ry=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=GV(e):this.predicate=e}},My=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},xy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,VV(n,o)),this.matchTNodeWithReadOption(e,n,jh(n,e,o,!1,!1))}else r===Na?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,jh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===jt||i===gr||i===Na&&n.type&4)this.addMatch(n.index,-2);else{let o=jh(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function VV(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function jV(t,e){return t.type&11?Va(t,e):t.type&4?v_(t,e):null}function UV(t,e,n,r){return n===-1?jV(e,t):n===-2?BV(t,e,r):Nl(t,t[fe],n,e)}function BV(t,e,n){if(n===jt)return Va(e,t);if(n===Na)return v_(e,t);if(n===gr)return ND(e,t)}function kD(t,e,n,r){let i=e[Dr].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let h=o[u];a.push(UV(e,h,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Py(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=kD(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],h=e[-c];for(let p=ft;p<h.length;p++){let g=h[p];g[li]===g[Nt]&&Py(g[fe],g,u,r)}if(h[Jo]!==null){let p=h[Jo];for(let g=0;g<p.length;g++){let v=p[g];Py(v[fe],v,u,r)}}}}}return r}function $V(t,e){return t[Dr].queries[e].queryList}function HV(t,e,n){let r=new qh((n&4)===4);return ob(t,e,r,r.destroy),(e[Dr]??=new Ay).queries.push(new Dy(r))-1}function zV(t,e,n){let r=pt();return r.firstCreatePass&&(qV(r,new Ry(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),HV(r,Ee(),e)}function GV(t){return t.split(",").map(e=>e.trim())}function qV(t,e,n){t.queries===null&&(t.queries=new My),t.queries.track(new xy(e,n))}function __(t,e){return t.queries.getByIndex(e)}function WV(t,e){let n=t[fe],r=__(n,e);return r.crossesNgTemplate?Py(n,t,e,[]):kD(n,t,r,e)}var ka=class{},Tf=class{};var nf=class extends ka{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ef(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=mv(e);this._bootstrapComponents=US(o.bootstrap),this._r3Injector=Hv(e,n,[{provide:ka,useValue:this},{provide:Hl,useValue:this.componentFactoryResolver},...r],oi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rf=class extends Tf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new nf(this.moduleType,e,[])}};var Ll=class extends ka{injector;componentFactoryResolver=new ef(this);instance=null;constructor(e){super();let n=new qo([...e.providers,{provide:ka,useValue:this},{provide:Hl,useValue:this.componentFactoryResolver}],e.parent||Ca(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zl(t,e,n=null){return new Ll({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var KV=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=yv(!1,n.type),i=r.length>0?zl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=W({token:t,providedIn:"environment",factory:()=>new t(z(ot))})}return t})();function se(t){return Fa(()=>{let e=OD(t),n=Ce(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===qy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(KV).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||hi.Emulated,styles:t.styles||an,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Fr("NgStandalone"),FD(n);let r=t.dependencies;return n.directiveDefs=Zb(r,QV),n.pipeDefs=Zb(r,qT),n.id=ZV(n),n})}function QV(t){return ci(t)||vv(t)}function mi(t){return Fa(()=>({type:t.type,bootstrap:t.bootstrap||an,declarations:t.declarations||an,imports:t.imports||an,exports:t.exports||an,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function YV(t,e){if(t==null)return Ji;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=pf.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function JV(t){if(t==null)return Ji;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function kt(t){return Fa(()=>{let e=OD(t);return FD(e),e})}function OD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ji,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||an,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:YV(t.inputs,e),outputs:JV(t.outputs),debugInfo:null}}function FD(t){t.features?.forEach(e=>e(t))}function Zb(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function ZV(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function XV(t){return Object.getPrototypeOf(t.prototype).constructor}function Ve(t){let e=XV(t.type),n=!0,r=[t];for(;e;){let i;if(Rr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Xv(t.inputs),s.declaredInputs=Xv(t.declaredInputs),s.outputs=Xv(t.outputs);let a=i.hostBindings;a&&i2(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&n2(t,c),u&&r2(t,u),e2(t,i),LT(t.outputs,i.outputs),Rr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ve&&(n=!1)}}e=Object.getPrototypeOf(e)}t2(r)}function e2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function t2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xa(i.hostAttrs,n=xa(n,i.hostAttrs))}}function Xv(t){return t===Ji?{}:t===an?[]:t}function n2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function r2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function i2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function o2(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=xa(t.mergedAttrs,t.attrs);let h=t.tView=r_(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Xo(t,!1);let c=s2(n,e,t,r);Ph()&&d_(n,e,c,t),Pa(c,e);let u=yD(c,e,c,t);e[r+yt]=u,o_(e,u),FV(u,t,e)}function of(t,e,n,r,i,o,s,a,c,u,h){let p=n+yt,g;if(e.firstCreatePass){if(g=$l(e,p,4,s||null,a||null),u!=null){let v=Mr(e.consts,u);g.localNames=[];for(let w=0;w<v.length;w+=2)g.localNames.push(v[w],-1)}}else g=e.data[p];return o2(g,t,e,n,r,i,o,c),u!=null&&_f(t,g,h),g}var s2=a2;function a2(t,e,n,r){return Dl(!0),e[et].createComment("")}var bf=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var C_=new ae("");function ls(t){return!!t&&typeof t.then=="function"}function LD(t){return!!t&&typeof t.subscribe=="function"}var VD=new ae("");var E_=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=F(VD,{optional:!0})??[];injector=F(Xe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=lt(this.injector,i);if(ls(o))n.push(o);else if(LD(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sf=new ae("");function jD(){bm(()=>{let t="";throw new re(600,t)})}function UD(t){return t.isBoundToModule}var c2=10;var Qn=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(Kn);afterRenderManager=F(l_);zonelessEnabled=F(Al);rootEffectScheduler=F(Rl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(xr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ie(n=>!n))}constructor(){F(cs,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=F(ot);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Xe.NULL){return this._injector.get(Le).run(()=>{Ke(10);let s=n instanceof wf;if(!this._injector.get(E_).done){let w="";throw new re(405,w)}let c;s?c=n:c=this._injector.get(Hl).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=UD(c)?void 0:this._injector.get(ka),h=r||c.selector,p=c.create(i,[],h,u),g=p.location.nativeElement,v=p.injector.get(C_,null);return v?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),xl(this.components,p),v?.unregisterApplication(g)}),this._loadComponent(p),Ke(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(gf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let n=ye(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(n),this.afterTick.next(),Ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(is,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<c2;)Ke(14),this.synchronizeOnce(),Ke(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Sl(i))continue;let o=r&&!this.zonelessEnabled?0:1;pD(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Sl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;xl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Sf,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new re(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function l2(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}var BD=new ae("",{providedIn:"root",factory:()=>!1});var u2=!1,I_=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function d2(t){return t[Gn].get(BD,u2)}function h2(t){let e=Ny.get(t);if(e){for(let n of e.cleanupFns)n();Ny.delete(t)}Pl.delete(t)}var Ny=new WeakMap,Pl=new WeakMap,Ma=new WeakMap;function Xb(t,e){let n=Ma.get(t);if(n&&n.length>0){let r=n.findIndex(i=>i===e);r>-1&&n.splice(r,1)}n?.length===0&&Ma.delete(t)}function f2(t,e){let n=Ma.get(t)?.shift(),r=e[li];if(r){let o=Zh(t.index,r)?.previousSibling;n&&o&&n===o&&n.dispatchEvent(new CustomEvent("animationend",{detail:{cancel:!0}}))}}function p2(t,e){Ma.has(t)?Ma.get(t)?.push(e):Ma.set(t,[e])}function Df(t){let e=t[Zi]??={};return e.leave??=new Map}function g2(t){let e=typeof t=="function"?t():t,n=Array.isArray(e)?e:null;return typeof e=="string"&&(n=e.trim().split(/\s+/).filter(r=>r)),n}function m2(t,e){if(!I_)return;let n=Ny.get(t);if(n&&n.classList.length>0&&v2(t,n.classList))for(let r of n.classList)e.removeClass(t,r);h2(t)}function v2(t,e){for(let n of e)if(t.classList.contains(n))return!0;return!1}function y2(t,e){let n=Pl.get(e);return n===void 0?!0:e===t.target&&(n.animationName!==void 0&&t.animationName===n.animationName||n.propertyName!==void 0&&t.propertyName===n.propertyName)}function _2(t,e,n){let r=t.get(e.index)??{animateFns:[]};r.animateFns.push(n),t.set(e.index,r)}function eS(t,e){if(t)for(let n of t)n();for(let n of e)n()}function tS(t,e){let n=Df(t).get(e.index);n&&(n.resolvers=void 0)}function _n(t){if(Fr("NgAnimateLeave"),!I_)return _n;let e=Ee();if(d2(e))return _n;let r=wt();return f2(r,e),_2(Df(e),r,()=>C2(e,r,t)),dL(e[Gn]),_n}function C2(t,e,n){let{promise:r,resolve:i}=l2(),o=ur(e,t),s=t[et],a=t[Gn].get(Le);ro.add(t),(Df(t).get(e.index).resolvers??=[]).push(i);let c=g2(n);return c&&c.length>0?E2(o,e,t,c,s,a):i(),{promise:r,resolve:i}}function E2(t,e,n,r,i,o){m2(t,i);let s=[],a=Df(n).get(e.index)?.resolvers,c=u=>{if(u.target===t&&(u instanceof CustomEvent||y2(u,t))){if(u.stopImmediatePropagation(),Pl.delete(t),Xb(e,t),Array.isArray(e.projection))for(let h of r)i.removeClass(t,h);eS(a,s),tS(n,e)}};o.runOutsideAngular(()=>{s.push(i.listen(t,"animationend",c)),s.push(i.listen(t,"transitionend",c))}),p2(e,t);for(let u of r)i.addClass(t,u);o.runOutsideAngular(()=>{requestAnimationFrame(()=>{XF(t,Pl,I_),Pl.has(t)||(Xb(e,t),eS(a,s),tS(n,e))})})}var ky=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function ey(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function I2(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=t.at(o),h=e[o],p=ey(o,u,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),v=e[c],w=ey(s,g,c,v,n);if(w!==0){w<0&&t.updateValue(s,v),s--,c--;continue}let O=n(o,u),P=n(s,g),j=n(o,h);if(Object.is(j,P)){let oe=n(c,v);Object.is(oe,O)?(t.swap(o,s),t.updateValue(s,v),c--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new sf,i??=rS(t,o,s,n),Oy(t,r,o,j))t.updateValue(o,h),o++,s++;else if(i.has(j))r.set(O,t.detach(o)),s--;else{let oe=t.create(o,e[o]);t.attach(o,oe),o++,s++}}for(;o<=c;)nS(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let h=t.at(o),p=u.value,g=ey(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,u=c.next();else{r??=new sf,i??=rS(t,o,s,n);let v=n(o,p);if(Oy(t,r,o,v))t.updateValue(o,p),o++,s++,u=c.next();else if(!i.has(v))t.attach(o,t.create(o,p)),o++,s++,u=c.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!u.done;)nS(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function Oy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function nS(t,e,n,r,i){if(Oy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function rS(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var sf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function G(t,e,n,r,i,o,s,a){Fr("NgControlFlow");let c=Ee(),u=pt(),h=Mr(u.consts,o);return of(c,u,t,e,n,r,i,h,256,s,a),w_}function w_(t,e,n,r,i,o,s,a){Fr("NgControlFlow");let c=Ee(),u=pt(),h=Mr(u.consts,o);return of(c,u,t,e,n,r,i,h,512,s,a),w_}function q(t,e){Fr("NgControlFlow");let n=Ee(),r=es(),i=n[r]!==cn?n[r]:-1,o=i!==-1?af(n,yt+i):void 0,s=0;if(pr(n,r,t)){let a=ye(null);try{if(o!==void 0&&CD(o,s),t!==-1){let c=yt+t,u=af(n,c),h=jy(n[fe],c),p=ID(u,h,n),g=Ef(n,h,e,{dehydratedView:p});If(u,g,s,kl(h,p))}}finally{ye(a)}}else if(o!==void 0){let a=_D(o,s);a!==void 0&&(a[vt]=e)}}var Fy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ft}};function Cn(t){return t}function Yn(t,e){return e}var Ly=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function te(t,e,n,r,i,o,s,a,c,u,h,p,g){Fr("NgControlFlow");let v=Ee(),w=pt(),O=c!==void 0,P=Ee(),j=a?s.bind(P[Mn][vt]):s,oe=new Ly(O,j);P[yt+t]=oe,of(v,w,t+1,e,n,r,i,Mr(w.consts,o),256),O&&of(v,w,t+2,c,u,h,p,Mr(w.consts,g),512)}var Vy=class extends ky{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ft}at(e){return this.getLView(e)[vt].$implicit}attach(e,n){let r=n[Ea];this.needsIndexUpdate||=e!==this.length,If(this.lContainer,n,e,kl(this.templateTNode,r)),w2(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,T2(this.lContainer,e),b2(this.lContainer,e)}create(e,n){let r=wy(this.lContainer,this.templateTNode.tView.ssrId),i=Ef(this.hostLView,this.templateTNode,new Fy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){vf(e[fe],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[vt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[vt].$index=e}getLView(e){return S2(this.lContainer,e)}};function ne(t){let e=ye(null),n=dr();try{let r=Ee(),i=r[fe],o=r[n],s=n+1,a=af(r,s);if(o.liveCollection===void 0){let u=jy(i,s);o.liveCollection=new Vy(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(I2(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=es(),h=c.length===0;if(pr(r,u,h)){let p=n+2,g=af(r,p);if(h){let v=jy(i,p),w=ID(g,v,r),O=Ef(r,v,void 0,{dehydratedView:w});If(g,O,0,kl(v,w))}else i.firstUpdatePass&&iV(g),CD(g,0)}}}finally{ye(e)}}function af(t,e){return t[e]}function w2(t,e){if(t.length<=ft)return;let n=ft+e,r=t[n],i=r?r[Zi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Gn];lL(o,i),ro.delete(r),i.detachedLeaveAnimationFns=void 0}}function T2(t,e){if(t.length<=ft)return;let n=ft+e,r=t[n],i=r?r[Zi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function b2(t,e){return Fl(t,e)}function S2(t,e){return _D(t,e)}function jy(t,e){return bl(t,e)}function X(t,e,n){let r=Ee(),i=es();if(pr(r,i,e)){let o=pt(),s=xh();aD(s,r,t,e,r[et],n)}return X}function Uy(t,e,n,r,i){p_(e,t,n,i?"class":"style",r)}function R(t,e,n,r){let i=Ee(),o=i[fe],s=t+yt,a=o.firstCreatePass?SD(s,i,2,e,OL,cb(),n,r):o.data[s];if(f_(a,i,t,e,$D),Ih(a)){let c=i[fe];sD(c,i,a),NS(c,a,i)}return r!=null&&_f(i,a),R}function x(){let t=pt(),e=wt(),n=Cf(e);return t.firstCreatePass&&y_(t,n),Nv(n)&&kv(),Pv(),n.classesWithoutHost!=null&&LO(n)&&Uy(t,n,Ee(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&VO(n)&&Uy(t,n,Ee(),n.stylesWithoutHost,!1),x}function K(t,e,n,r){return R(t,e,n,r),x(),K}function pe(t,e,n,r){let i=Ee(),o=i[fe],s=t+yt,a=o.firstCreatePass?DD(s,o,2,e,n,r):o.data[s];return f_(a,i,t,e,$D),r!=null&&_f(i,a),pe}function he(){let t=wt(),e=Cf(t);return Nv(e)&&kv(),Pv(),he}function ja(t,e,n,r){return pe(t,e,n,r),he(),ja}var $D=(t,e,n,r,i)=>(Dl(!0),$S(e[et],r,Ib()));function T_(){let t=pt(),e=wt(),n=Cf(e);return t.firstCreatePass&&y_(t,n),T_}function b_(t,e,n){let r=Ee(),i=r[fe],o=t+yt,s=i.firstCreatePass?DD(o,i,8,"ng-container",e,n):i.data[o];return f_(s,r,t,"ng-container",D2),n!=null&&_f(r,s),b_}function HD(){let t=wt(),e=Cf(t);return T_}function Af(t,e,n){return b_(t,e,n),HD(),Af}var D2=(t,e,n,r,i)=>(Dl(!0),HF(e[et],""));function J(){return Ee()}function ao(t,e,n){let r=Ee(),i=es();if(pr(r,i,e)){let o=pt(),s=xh();cD(s,r,t,e,r[et],n)}return ao}var Gl="en-US";var A2=Gl;function zD(t){typeof t=="string"&&(A2=t.toLowerCase().replace(/_/g,"-"))}function B(t,e,n){let r=Ee(),i=pt(),o=wt();return GD(i,r,r[et],o,t,e,n),B}function Be(t,e,n){let r=Ee(),i=pt(),o=wt();return(o.type&3||n)&&RD(o,i,r,n,r[et],t,e,Bh(o,r,e)),Be}function GD(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Bh(r,e,o),RD(r,t,e,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],v=h[p+1];c??=Bh(r,e,o),Qb(r,e,g,v,i,c)}if(u&&u.length)for(let p of u)c??=Bh(r,e,o),Qb(r,e,p,i,i,c)}}function _(t=1){return Eb(t)}function ql(t,e,n){zV(t,e,n)}function Wl(t){let e=Ee(),n=pt(),r=Uv();Ah(r+1);let i=__(n,r);if(t.dirty&&tb(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=WV(e,r);t.reset(o,JO),t.notifyOnChanges()}return!0}return!1}function Kl(){return $V(Ee(),Uv())}function Pn(t){let e=Lv();return Sv(e,yt+t)}function Fh(t,e){return t<<17|e<<2}function ss(t){return t>>17&32767}function R2(t){return(t&2)==2}function M2(t,e){return t&131071|e<<17}function By(t){return t|2}function Oa(t){return(t&131068)>>2}function ty(t,e){return t&-131069|e<<2}function x2(t){return(t&1)===1}function $y(t){return t|1}function P2(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ss(s),c=Oa(s);t[r]=n;let u=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||_a(p,h)>0)&&(u=!0)}else h=n;if(i)if(c!==0){let g=ss(t[a+1]);t[r+1]=Fh(g,a),g!==0&&(t[g+1]=ty(t[g+1],r)),t[a+1]=M2(t[a+1],r)}else t[r+1]=Fh(a,0),a!==0&&(t[a+1]=ty(t[a+1],r)),a=r;else t[r+1]=Fh(c,0),a===0?a=r:t[c+1]=ty(t[c+1],r),c=r;u&&(t[r+1]=By(t[r+1])),iS(t,h,r,!0),iS(t,h,r,!1),N2(e,h,t,r,o),s=Fh(a,c),o?e.classBindings=s:e.styleBindings=s}function N2(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&_a(o,e)>=0&&(n[r+1]=$y(n[r+1]))}function iS(t,e,n,r){let i=t[n+1],o=e===null,s=r?ss(i):Oa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];k2(c,e)&&(a=!0,t[s+1]=r?$y(u):By(u)),s=r?ss(u):Oa(u)}a&&(t[n+1]=r?By(i):$y(i))}function k2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?_a(t,e)>=0:!1}var fr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function O2(t){return t.substring(fr.key,fr.keyEnd)}function F2(t){return L2(t),qD(t,WD(t,0,fr.textEnd))}function qD(t,e){let n=fr.textEnd;return n===e?-1:(e=fr.keyEnd=V2(t,fr.key=e,n),WD(t,e,n))}function L2(t){fr.key=0,fr.keyEnd=0,fr.value=0,fr.valueEnd=0,fr.textEnd=t.length}function WD(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function V2(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function gt(t,e,n){return KD(t,e,n,!1),gt}function ce(t,e){return KD(t,e,null,!0),ce}function Rf(t){U2(q2,j2,t,!0)}function j2(t,e){for(let n=F2(e);n>=0;n=qD(e,n))_h(t,O2(e),!0)}function KD(t,e,n,r){let i=Ee(),o=pt(),s=Sh(2);if(o.firstUpdatePass&&YD(o,t,s,r),e!==cn&&pr(i,s,e)){let a=o.data[dr()];JD(o,a,i,i[et],t,i[s+1]=K2(e,n),r,s)}}function U2(t,e,n,r){let i=pt(),o=Sh(2);i.firstUpdatePass&&YD(i,null,o,r);let s=Ee();if(n!==cn&&pr(s,o,n)){let a=i.data[dr()];if(ZD(a,r)&&!QD(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=gh(c,n||"")),Uy(i,a,s,n,r)}else W2(i,a,s,s[et],s[o+1],s[o+1]=G2(t,e,n),r,o)}}function QD(t,e){return e>=t.expandoStartIndex}function YD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[dr()],s=QD(t,n);ZD(o,r)&&e===null&&!s&&(e=!1),e=B2(i,o,e,r),P2(i,o,e,n,s,r)}}function B2(t,e,n,r){let i=vb(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ny(null,t,e,n,r),n=Vl(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=ny(i,t,e,n,r),o===null){let c=$2(t,e,r);c!==void 0&&Array.isArray(c)&&(c=ny(null,t,e,c[1],r),c=Vl(c,e.attrs,r),H2(t,e,r,c))}else o=z2(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function $2(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Oa(r)!==0)return t[ss(r)]}function H2(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ss(i)]=r}function z2(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Vl(r,s,n)}return Vl(r,e.attrs,n)}function ny(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Vl(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Vl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_h(t,s,n?!0:e[++o]))}return t===void 0?null:t}function G2(t,e,n){if(n==null||n==="")return an;let r=[],i=kr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function q2(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&_h(t,r,n)}function W2(t,e,n,r,i,o,s,a){i===cn&&(i=an);let c=0,u=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=c<i.length?i[c+1]:void 0,v=u<o.length?o[u+1]:void 0,w=null,O;h===p?(c+=2,u+=2,g!==v&&(w=p,O=v)):p===null||h!==null&&h<p?(c+=2,w=h):(u+=2,w=p,O=v),w!==null&&JD(t,e,n,r,w,O,s,a),h=c<i.length?i[c]:null,p=u<o.length?o[u]:null}}function JD(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],h=x2(u)?oS(c,e,n,i,Oa(u),s):void 0;if(!cf(h)){cf(o)||R2(u)&&(o=oS(c,null,n,i,a,s));let p=bv(dr(),n);SL(r,s,p,i,o)}}function oS(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),h=u?c[1]:c,p=h===null,g=n[i+1];g===cn&&(g=p?an:void 0);let v=p?Ch(g,r):h===r?g:void 0;if(u&&!cf(v)&&(v=Ch(c,r)),cf(v)&&(a=v,s))return a;let w=t[i+1];i=s?ss(w):Oa(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ch(c,r))}return a}function cf(t){return t!==void 0}function K2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=oi(kr(t)))),t}function ZD(t,e){return(t.flags&(e?8:16))!==0}function Y(t,e=""){let n=Ee(),r=pt(),i=t+yt,o=r.firstCreatePass?$l(r,i,1,e,null):r.data[i],s=Q2(r,n,o,e,t);n[i]=s,Ph()&&d_(r,n,s,o),Xo(o,!1)}var Q2=(t,e,n,r,i)=>(Dl(!0),BF(e[et],r));function Y2(t,e,n,r=""){return pr(t,es(),n)?e+ya(n)+r:cn}function J2(t,e,n,r,i,o=""){let s=hb(),a=CV(t,s,n,i);return Sh(2),a?e+ya(n)+r+ya(i)+o:cn}function Me(t){return us("",t),Me}function us(t,e,n){let r=Ee(),i=Y2(r,t,e,n);return i!==cn&&XD(r,dr(),i),us}function Ua(t,e,n,r,i){let o=Ee(),s=J2(o,t,e,n,r,i);return s!==cn&&XD(o,dr(),s),Ua}function XD(t,e,n){let r=bv(e,t);$F(t[et],r,n)}function En(t,e,n){qv(e)&&(e=e());let r=Ee(),i=es();if(pr(r,i,e)){let o=pt(),s=xh();aD(s,r,t,e,r[et],n)}return En}function Nn(t,e){let n=qv(t);return n&&t.set(e),n}function In(t,e){let n=Ee(),r=pt(),i=wt();return GD(r,n,n[et],i,t,e),In}var eA={};function Ba(t){let e=pt(),n=Ee(),r=t+yt,i=$l(e,r,128,null,null);return Xo(i,!1),wh(e,n,r,eA),Ba}function Ql(t){Fr("NgLet");let e=pt(),n=Ee(),r=dr();return wh(e,n,r,t),t}function co(t){let e=Lv(),n=Sv(e,yt+t);if(n===eA)throw new re(314,!1);return n}function Z2(t,e,n){let r=pt();if(r.firstCreatePass){let i=Rr(t);Hy(n,r.data,r.blueprint,i,!0),Hy(e,r.data,r.blueprint,i,!1)}}function Hy(t,e,n,r,i){if(t=qt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Hy(t[o],e,n,r,i);else{let o=pt(),s=Ee(),a=wt(),c=Go(t)?t:qt(t.provide),u=Cv(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Go(t)||!t.multi){let v=new rs(u,i,k,null),w=iy(c,e,i?h:h+g,p);w===-1?(sy(Gh(a,s),o,c),ry(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[w]=v,s[w]=v)}else{let v=iy(c,e,h+g,p),w=iy(c,e,h,h+g),O=v>=0&&n[v],P=w>=0&&n[w];if(i&&!P||!i&&!O){sy(Gh(a,s),o,c);let j=tj(i?ej:X2,n.length,i,r,u,t);!i&&P&&(n[w].providerFactory=j),ry(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=tA(n[i?w:v],u,!i&&r);ry(o,t,v>-1?v:w,j)}!i&&r&&P&&n[w].componentProviders++}}}function ry(t,e,n,r){let i=Go(e),o=YT(e);if(i||o){let c=(o?qt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(n);h===-1?u.push(n,[r,c]):u[h+1].push(r,c)}else u.push(n,c)}}}function tA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function iy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function X2(t,e,n,r,i){return zy(this.multi,[])}function ej(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Nl(r,r[fe],this.providerFactory.index,i);s=c.slice(0,a),zy(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],zy(o,s);return s}function zy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tj(t,e,n,r,i,o){let s=new rs(t,n,k,null);return s.multi=[],s.index=e,s.componentProviders=0,tA(s,i,r&&!n),s}function $a(t,e=[]){return n=>{n.providersResolver=(r,i)=>Z2(r,i?i(t):t,e)}}function ds(t,e,n){let r=jv()+t,i=Ee();return i[r]===cn?AD(i,r,n?e.call(n):e()):_V(i,r)}function S_(t,e,n,r){return rj(Ee(),jv(),t,e,n,r)}function nj(t,e){let n=t[e];return n===cn?void 0:n}function rj(t,e,n,r,i,o){let s=e+n;return pr(t,s,i)?AD(t,s+1,o?r.call(o,i):r(i)):nj(t,s+1)}var lf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},D_=(()=>{class t{compileModuleSync(n){return new rf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=mv(n),o=US(i.declarations).reduce((s,a)=>{let c=ci(a);return c&&s.push(new os(c)),s},[]);return new lf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ij=(()=>{class t{zone=F(Le);changeDetectionScheduler=F(sr);applicationRef=F(Qn);applicationErrorHandler=F(Kn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Le(Ce(H({},rA()),{scheduleInRootZone:n})),[{provide:Le,useFactory:t},{provide:ai,multi:!0,useFactory:()=>{let r=F(ij,{optional:!0});return()=>r.initialize()}},{provide:ai,multi:!0,useFactory:()=>{let r=F(oj);return()=>{r.initialize()}}},e===!0?{provide:Wv,useValue:!0}:[],{provide:Kv,useValue:n??JS},{provide:Kn,useFactory:()=>{let r=F(Le),i=F(ot),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get($n),o.handleError(s))})}}}]}function rA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var oj=(()=>{class t{subscription=new ht;initialized=!1;zone=F(Le);pendingTasks=F(xr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var iA=(()=>{class t{applicationErrorHandler=F(Kn);appRef=F(Qn);taskService=F(xr);ngZone=F(Le);zonelessEnabled=F(Al);tracing=F(cs,{optional:!0});disableScheduling=F(Wv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ht;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Qh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(Kv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?jb:ZS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Qh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sj(){return typeof $localize<"u"&&$localize.locale||Gl}var A_=new ae("",{providedIn:"root",factory:()=>F(A_,{optional:!0,skipSelf:!0})||sj()});function ln(t){return PT(t)}function vi(t,e){return Ld(t,e?.equal)}var R_=class{[en];constructor(e){this[en]=e}destroy(){this[en].destroy()}};function un(t,e){let n=e?.injector??F(Xe),r=e?.manualCleanup!==!0?n.get(yn):null,i,o=n.get(Sa,null,{optional:!0}),s=n.get(sr);return o!==null?(i=lj(o.view,s,t),r instanceof _l&&r._lView===o.view&&(r=null)):i=uj(t,n.get(Rl),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new R_(i)}var oA=Ce(H({},NT),{cleanupFns:void 0,zone:null,onDestroyFn:ts,run(){let t=ba(!1);try{kT(this)}finally{ba(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=ye(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ye(t)}}}),aj=Ce(H({},oA),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Fo(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),cj=Ce(H({},oA),{consumerMarkedDirty(){this.view[_e]|=8192,to(this.view),this.notifier.notify(13)},destroy(){Fo(this),this.onDestroyFn(),this.cleanup(),this.view[ui]?.delete(this)}});function lj(t,e,n){let r=Object.create(cj);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=sA(r,n),t[ui]??=new Set,t[ui].add(r),r.consumerMarkedDirty(r),r}function uj(t,e,n){let r=Object.create(aj);return r.fn=sA(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function sA(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var lA=Symbol("InputSignalNode#UNSET"),Ej=Ce(H({},Vd),{transformFn:void 0,applyValueToInputSignal(t,e){ia(t,e)}});function uA(t,e){let n=Object.create(Ej);n.value=t,n.transformFn=e?.transform;function r(){if(ea(n),n.value===lA){let i=null;throw new re(-950,i)}return n.value}return r[en]=n,r}var Ij=new ae("");Ij.__NG_ELEMENT_ID__=t=>{let e=wt();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new re(204,!1)};function aA(t,e){return uA(t,e)}function wj(t){return uA(lA,t)}var Jl=(aA.required=wj,aA);var M_=new ae(""),Tj=new ae("");function Yl(t){return!t.moduleRef}function bj(t){let e=Yl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Le);return n.run(()=>{Yl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Kn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Yl(t)){let o=()=>e.destroy(),s=t.platformInjector.get(M_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(M_);s.add(o),t.moduleRef.onDestroy(()=>{xl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Dj(r,n,()=>{let o=e.get(xr),s=o.add(),a=e.get(E_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(A_,Gl);if(zD(c||Gl),!e.get(Tj,!0))return Yl(t)?e.get(Qn):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Yl(t)){let h=e.get(Qn);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return Sj?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var Sj;function Dj(t,e,n){try{let r=n();return ls(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Mf=null;function Aj(t=[],e){return Xe.create({name:e,providers:[{provide:Il,useValue:"platform"},{provide:M_,useValue:new Set([()=>Mf=null])},...t]})}function Rj(t=[]){if(Mf)return Mf;let e=Aj(t);return Mf=e,jD(),Mj(e),e}function Mj(t){let e=t.get(df,null);lt(t,()=>{e?.forEach(n=>n())})}function x_(){return!1}var lo=(()=>{class t{static __NG_ELEMENT_ID__=xj}return t})();function xj(t){return Pj(wt(),Ee(),(t&16)===16)}function Pj(t,e,n){if(eo(t)&&!n){let r=Wn(t.index,e);return new io(r,r)}else if(t.type&175){let r=e[Mn];return new io(r,e)}return null}function dA(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ke(8);try{let o=i?.injector??Rj(r),s=[nA({}),{provide:sr,useExisting:iA},Tb,...n||[]],a=new Ll({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return bj({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ke(9)}}function P_(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function hA(t,e){let n=ci(t),r=e.elementInjector||Ca();return new os(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function Zl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var hs=class{};var za=class{},Ga=class{},Vr=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Nf=class{encodeKey(e){return fA(e)}encodeValue(e){return fA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Nj(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var kj=/%(\d[a-f0-9])/gi,Oj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fA(t){return encodeURIComponent(t).replace(kj,(e,n)=>Oj[n]??e)}function xf(t){return`${t}`}var yi=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Nf,e.fromString){if(e.fromObject)throw new re(2805,!1);this.map=Nj(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(xf):[xf(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(xf(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(xf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kf=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Fj(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function pA(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function gA(t){return typeof Blob<"u"&&t instanceof Blob}function mA(t){return typeof FormData<"u"&&t instanceof FormData}function Lj(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Xl="Content-Type",Of="Accept",L_="X-Request-URL",yA="text/plain",_A="application/json",CA=`${_A}, ${yA}, */*`,Ha=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(Fj(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new re(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Vr,this.context??=new kf,!this.params)this.params=new yi,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||pA(this.body)||gA(this.body)||mA(this.body)||Lj(this.body)?this.body:this.body instanceof yi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||mA(this.body)?null:gA(this.body)?this.body.type||null:pA(this.body)?null:typeof this.body=="string"?yA:this.body instanceof yi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?_A:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,u=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.referrer||this.referrer,g=e.integrity||this.integrity,v=e.transferCache??this.transferCache,w=e.timeout??this.timeout,O=e.body!==void 0?e.body:this.body,P=e.withCredentials??this.withCredentials,j=e.reportProgress??this.reportProgress,oe=e.headers||this.headers,ue=e.params||this.params,ve=e.context??this.context;return e.setHeaders!==void 0&&(oe=Object.keys(e.setHeaders).reduce((tt,Re)=>tt.set(Re,e.setHeaders[Re]),oe)),e.setParams&&(ue=Object.keys(e.setParams).reduce((tt,Re)=>tt.set(Re,e.setParams[Re]),ue)),new t(n,r,O,{params:ue,headers:oe,context:ve,reportProgress:j,responseType:i,withCredentials:P,transferCache:v,keepalive:o,cache:a,priority:s,timeout:w,mode:c,redirect:u,credentials:h,referrer:p,integrity:g})}},_i=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(_i||{}),qa=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new Vr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},eu=class t extends qa{constructor(e={}){super(e)}type=_i.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Wa=class t extends qa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=_i.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Lr=class extends qa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},EA=200,Vj=204;function N_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer}}var uo=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Ha)o=n;else{let c;i.headers instanceof Vr?c=i.headers:c=new Vr(i.headers);let u;i.params&&(i.params instanceof yi?u=i.params:u=new yi({fromObject:i.params})),o=new Ha(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=me(o).pipe(qi(c=>this.handler.handle(c)));if(n instanceof Ha||i.observe==="events")return s;let a=s.pipe(vn(c=>c instanceof Wa));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ie(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new re(2806,!1);return c.body}));case"blob":return a.pipe(Ie(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new re(2807,!1);return c.body}));case"text":return a.pipe(Ie(c=>{if(c.body!==null&&typeof c.body!="string")throw new re(2808,!1);return c.body}));case"json":default:return a.pipe(Ie(c=>c.body))}case"response":return a;default:throw new re(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new yi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,N_(i,r))}post(n,r,i={}){return this.request("POST",n,N_(i,r))}put(n,r,i={}){return this.request("PUT",n,N_(i,r))}static \u0275fac=function(r){return new(r||t)(z(za))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),jj=/^\)\]\}',?\n/;function vA(t){if(t.url)return t.url;let e=L_.toLocaleLowerCase();return t.headers.get(e)}var IA=new ae(""),Pf=(()=>{class t{fetchImpl=F(k_,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n));ngZone=F(Le);destroyRef=F(yn);handle(n){return new Se(r=>{let i=new AbortController;this.doRequest(n,i.signal,r).then(O_,s=>r.error(new Lr({error:s})));let o;return n.timeout&&(o=this.ngZone.runOutsideAngular(()=>setTimeout(()=>{i.signal.aborted||i.abort(new DOMException("signal timed out","TimeoutError"))},n.timeout))),()=>{o!==void 0&&clearTimeout(o),i.abort()}})}doRequest(n,r,i){return I(this,null,function*(){let o=this.createRequestInit(n),s;try{let w=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,H({signal:r},o)));Uj(w),i.next({type:_i.Sent}),s=yield w}catch(w){i.error(new Lr({error:w,status:w.status??0,statusText:w.statusText,url:n.urlWithParams,headers:w.headers}));return}let a=new Vr(s.headers),c=s.statusText,u=vA(s)??n.urlWithParams,h=s.status,p=null;if(n.reportProgress&&i.next(new eu({headers:a,status:h,statusText:c,url:u})),s.body){let w=s.headers.get("content-length"),O=[],P=s.body.getReader(),j=0,oe,ue,ve=typeof Zone<"u"&&Zone.current,tt=!1;if(yield this.ngZone.runOutsideAngular(()=>I(this,null,function*(){for(;;){if(this.destroyRef.destroyed){yield P.cancel(),tt=!0;break}let{done:S,value:y}=yield P.read();if(S)break;if(O.push(y),j+=y.length,n.reportProgress){ue=n.responseType==="text"?(ue??"")+(oe??=new TextDecoder).decode(y,{stream:!0}):void 0;let C=()=>i.next({type:_i.DownloadProgress,total:w?+w:void 0,loaded:j,partialText:ue});ve?ve.run(C):C()}}})),tt){i.complete();return}let Re=this.concatChunks(O,j);try{let S=s.headers.get(Xl)??"";p=this.parseBody(n,Re,S,h)}catch(S){i.error(new Lr({error:S,headers:new Vr(s.headers),status:s.status,statusText:s.statusText,url:vA(s)??n.urlWithParams}));return}}h===0&&(h=p?EA:0);let g=h>=200&&h<300,v=s.redirected;g?(i.next(new Wa({body:p,headers:a,status:h,statusText:c,url:u,redirected:v})),i.complete()):i.error(new Lr({error:p,headers:a,status:h,statusText:c,url:u,redirected:v}))})}parseBody(n,r,i,o){switch(n.responseType){case"json":let s=new TextDecoder().decode(r).replace(jj,"");if(s==="")return null;try{return JSON.parse(s)}catch(a){if(o<200||o>=300)return s;throw a}case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},i;if(i=n.credentials,n.withCredentials&&(i="include"),n.headers.forEach((o,s)=>r[o]=s.join(",")),n.headers.has(Of)||(r[Of]=CA),!n.headers.has(Xl)){let o=n.detectContentTypeHeader();o!==null&&(r[Xl]=o)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i,keepalive:n.keepalive,cache:n.cache,priority:n.priority,mode:n.mode,redirect:n.redirect,referrer:n.referrer,integrity:n.integrity}}concatChunks(n,r){let i=new Uint8Array(r),o=0;for(let s of n)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),k_=class{};function O_(){}function Uj(t){t.then(O_,O_)}function Bj(t,e){return e(t)}function $j(t,e,n){return(r,i)=>lt(n,()=>e(r,o=>t(o,i)))}var V_=new ae(""),wA=new ae(""),TA=new ae("",{providedIn:"root",factory:()=>!0});var Ff=(()=>{class t extends za{backend;injector;chain=null;pendingTasks=F(di);contributeToStability=F(TA);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(V_),...this.injector.get(wA,[])]));this.chain=r.reduceRight((i,o)=>$j(i,o,this.injector),Bj)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Bo(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(z(Ga),z(ot))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();var Hj=/^\)\]\}',?\n/,zj=RegExp(`^${L_}:`,"m");function Gj(t){return"responseURL"in t&&t.responseURL?t.responseURL:zj.test(t.getAllResponseHeaders())?t.getResponseHeader(L_):null}var F_=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new re(-2800,!1);let r=this.xhrFactory;return me(null).pipe(Lt(()=>new Se(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((P,j)=>s.setRequestHeader(P,j.join(","))),n.headers.has(Of)||s.setRequestHeader(Of,CA),!n.headers.has(Xl)){let P=n.detectContentTypeHeader();P!==null&&s.setRequestHeader(Xl,P)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let P=n.responseType.toLowerCase();s.responseType=P!=="json"?P:"text"}let a=n.serializeBody(),c=null,u=()=>{if(c!==null)return c;let P=s.statusText||"OK",j=new Vr(s.getAllResponseHeaders()),oe=Gj(s)||n.url;return c=new eu({headers:j,status:s.status,statusText:P,url:oe}),c},h=()=>{let{headers:P,status:j,statusText:oe,url:ue}=u(),ve=null;j!==Vj&&(ve=typeof s.response>"u"?s.responseText:s.response),j===0&&(j=ve?EA:0);let tt=j>=200&&j<300;if(n.responseType==="json"&&typeof ve=="string"){let Re=ve;ve=ve.replace(Hj,"");try{ve=ve!==""?JSON.parse(ve):null}catch(S){ve=Re,tt&&(tt=!1,ve={error:S,text:ve})}}tt?(o.next(new Wa({body:ve,headers:P,status:j,statusText:oe,url:ue||void 0})),o.complete()):o.error(new Lr({error:ve,headers:P,status:j,statusText:oe,url:ue||void 0}))},p=P=>{let{url:j}=u(),oe=new Lr({error:P,status:s.status||0,statusText:s.statusText||"Unknown Error",url:j||void 0});o.error(oe)},g=p;n.timeout&&(g=P=>{let{url:j}=u(),oe=new Lr({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:j||void 0});o.error(oe)});let v=!1,w=P=>{v||(o.next(u()),v=!0);let j={type:_i.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(j.total=P.total),n.responseType==="text"&&s.responseText&&(j.partialText=s.responseText),o.next(j)},O=P=>{let j={type:_i.UploadProgress,loaded:P.loaded};P.lengthComputable&&(j.total=P.total),o.next(j)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",w),a!==null&&s.upload&&s.upload.addEventListener("progress",O)),s.send(a),o.next({type:_i.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",w),a!==null&&s.upload&&s.upload.removeEventListener("progress",O)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(z(hs))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),bA=new ae(""),qj="XSRF-TOKEN",Wj=new ae("",{providedIn:"root",factory:()=>qj}),Kj="X-XSRF-TOKEN",Qj=new ae("",{providedIn:"root",factory:()=>Kj}),tu=class{},Yj=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zl(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(z(Tt),z(Wj))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();function Jj(t,e){let n=t.url.toLowerCase();if(!F(bA)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=F(tu).getToken(),i=F(Qj);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Lf=(function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t})(Lf||{});function SA(t,e){return{\u0275kind:t,\u0275providers:e}}function j_(...t){let e=[uo,F_,Ff,{provide:za,useExisting:Ff},{provide:Ga,useFactory:()=>F(IA,{optional:!0})??F(F_)},{provide:V_,useValue:Jj,multi:!0},{provide:bA,useValue:!0},{provide:tu,useClass:Yj}];for(let n of t)e.push(...n.\u0275providers);return ar(e)}function U_(t){return SA(Lf.Interceptors,t.map(e=>({provide:V_,useValue:e,multi:!0})))}function B_(){return SA(Lf.Fetch,[Pf,{provide:IA,useExisting:Pf},{provide:Ga,useExisting:Pf}])}var RA=null;function Jn(){return RA}function H_(t){RA??=t}var nu=class{},z_=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>F(MA),providedIn:"platform"})}return t})();var MA=(()=>{class t extends z_{_location;_history;_doc=F(Tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jn().getBaseHref(this._doc)}onPopState(n){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function xA(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function DA(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ho(t){return t&&t[0]!=="?"?`?${t}`:t}var Vf=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>F(NA),providedIn:"root"})}return t})(),PA=new ae(""),NA=(()=>{class t extends Vf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return xA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ho(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ho(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ho(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(z(z_),z(PA,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ka=(()=>{class t{_subject=new Et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=e3(DA(AA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ho(r))}normalize(n){return t.stripTrailingSlash(Xj(this._basePath,AA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ho(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ho(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ho;static joinWithSlash=xA;static stripTrailingSlash=DA;static \u0275fac=function(r){return new(r||t)(z(Vf))};static \u0275prov=W({token:t,factory:()=>Zj(),providedIn:"root"})}return t})();function Zj(){return new Ka(z(Vf))}function Xj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function AA(t){return t.replace(/\/index.html$/,"")}function e3(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var G_=/\s+/,kA=[],Wt=(()=>{class t{_ngEl;_renderer;initialClasses=kA;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(G_):kA}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(G_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(G_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(k(jt),k(so))};static \u0275dir=kt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Ge=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=mi({type:t});static \u0275inj=br({})}return t})();var OA="browser";var ru=class{_doc;constructor(e){this._doc=e}manager},jf=(()=>{class t extends ru{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),Bf=new ae(""),Y_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof jf));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof jf);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(z(Bf),z(Le))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),q_="ng-app-id";function FA(t){for(let e of t)e.remove()}function LA(t,e){let n=e.createElement("style");return n.textContent=t,n}function n3(t,e,n,r){let i=t.head?.querySelectorAll(`style[${q_}="${e}"],link[${q_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(q_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function K_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var J_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,n3(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,LA);r?.forEach(i=>this.addUsage(i,this.external,K_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(FA(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])FA(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,LA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,K_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(z(Tt),z(uf),z(hf,8),z(as))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),W_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Z_=/%COMP%/g;var jA="%COMP%",r3=`_nghost-${jA}`,i3=`_ngcontent-${jA}`,o3=!0,s3=new ae("",{providedIn:"root",factory:()=>o3});function a3(t){return i3.replace(Z_,t)}function c3(t){return r3.replace(Z_,t)}function UA(t,e){return e.map(n=>n.replace(Z_,t))}var X_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new iu(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Uf?i.applyToHost(n):i instanceof ou&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case hi.Emulated:o=new Uf(c,u,r,this.appId,h,s,a,p,g);break;case hi.ShadowDom:return new Q_(c,u,n,r,s,a,this.nonce,p,g);default:o=new ou(c,u,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(z(Y_),z(J_),z(uf),z(s3),z(Tt),z(Le),z(hf),z(cs,8))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),iu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(W_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(VA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(VA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=W_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=W_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(pi.DashCase|pi.Important)?e.style.setProperty(n,r,i&pi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&pi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Jn().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function VA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Q_=class extends iu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=UA(i.id,h);for(let g of h){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=g,this.shadowRoot.appendChild(v)}let p=i.getExternalStyles?.();if(p)for(let g of p){let v=K_(g,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ou=class extends iu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?UA(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ro.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Uf=class extends ou{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){let h=i+"-"+r.id;super(e,n,r,o,s,a,c,u,h),this.contentAttr=a3(h),this.hostAttr=c3(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var $f=class t extends nu{supportsDOMEvents=!0;static makeCurrent(){H_(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=l3();return n==null?null:u3(n)}resetBaseElement(){su=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zl(document.cookie,e)}},su=null;function l3(){return su=su||document.head.querySelector("base"),su?su.getAttribute("href"):null}function u3(t){return new URL(t,document.baseURI).pathname}var d3=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),BA=["alt","control","meta","shift"],h3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},$A=(()=>{class t extends ru{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),BA.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=h3[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),BA.forEach(s=>{if(s!==i){let a=f3[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();function eC(t,e,n){let r=H({rootComponent:t,platformRef:n?.platformRef},p3(e));return dA(r)}function p3(t){return{appProviders:[..._3,...t?.providers??[]],platformProviders:y3}}function g3(){$f.makeCurrent()}function m3(){return new $n}function v3(){return Wy(document),document}var y3=[{provide:as,useValue:OA},{provide:df,useValue:g3,multi:!0},{provide:Tt,useFactory:v3}];var _3=[{provide:Il,useValue:"root"},{provide:$n,useFactory:m3},{provide:Bf,useClass:jf,multi:!0,deps:[Tt]},{provide:Bf,useClass:$A,multi:!0,deps:[Tt]},X_,J_,Y_,{provide:is,useExisting:X_},{provide:hs,useClass:d3},[]];var HA=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var tC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=z(C3),i},providedIn:"root"})}return t})(),C3=(()=>{class t extends tC{_doc;constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Or.NONE:return r;case Or.HTML:return oo(r,"HTML")?kr(r):e_(this._doc,String(r)).toString();case Or.STYLE:return oo(r,"Style")?kr(r):r;case Or.SCRIPT:if(oo(r,"Script"))return kr(r);throw new re(5200,!1);case Or.URL:return oo(r,"URL")?kr(r):jl(String(r));case Or.RESOURCE_URL:if(oo(r,"ResourceURL"))return kr(r);throw new re(5201,!1);default:throw new re(5202,!1)}}bypassSecurityTrustHtml(n){return Qy(n)}bypassSecurityTrustStyle(n){return Yy(n)}bypassSecurityTrustScript(n){return Jy(n)}bypassSecurityTrustUrl(n){return Zy(n)}bypassSecurityTrustResourceUrl(n){return Xy(n)}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var we="primary",Eu=Symbol("RouteTitle"),sC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ms(t){return new sC(t)}function ZA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function E3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jr(t[n],e[n]))return!1;return!0}function jr(t,e){let n=t?aC(t):void 0,r=e?aC(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!XA(t[i],e[i]))return!1;return!0}function aC(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function XA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function eR(t){return t.length>0?t[t.length-1]:null}function Ii(t){return Bm(t)?t:ls(t)?st(Promise.resolve(t)):me(t)}var I3={exact:nR,subset:rR},tR={exact:w3,subset:T3,ignored:()=>!0};function GA(t,e,n){return I3[n.paths](t.root,e.root,n.matrixParams)&&tR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function w3(t,e){return jr(t,e)}function nR(t,e,n){if(!ps(t.segments,e.segments)||!Gf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!nR(t.children[r],e.children[r],n))return!1;return!0}function T3(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>XA(t[n],e[n]))}function rR(t,e,n){return iR(t,e,e.segments,n)}function iR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ps(i,n)||e.hasChildren()||!Gf(i,n,r))}else if(t.segments.length===n.length){if(!ps(t.segments,n)||!Gf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!rR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ps(t.segments,i)||!Gf(t.segments,i,r)||!t.children[we]?!1:iR(t.children[we],e,o,r)}}function Gf(t,e,n){return e.every((r,i)=>tR[n](t[i].parameters,r.parameters))}var Br=class{root;queryParams;fragment;_queryParamMap;constructor(e=new $e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ms(this.queryParams),this._queryParamMap}toString(){return D3.serialize(this)}},$e=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qf(this)}},fo=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ms(this.parameters),this._parameterMap}toString(){return sR(this)}};function b3(t,e){return ps(t,e)&&t.every((n,r)=>jr(n.parameters,e[r].parameters))}function ps(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function S3(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===we&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==we&&(n=n.concat(e(i,r)))}),n}var Iu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>new vs,providedIn:"root"})}return t})(),vs=class{parse(e){let n=new lC(e);return new Br(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${au(e.root,!0)}`,r=M3(e.queryParams),i=typeof e.fragment=="string"?`#${A3(e.fragment)}`:"";return`${n}${r}${i}`}},D3=new vs;function qf(t){return t.segments.map(e=>sR(e)).join("/")}function au(t,e){if(!t.hasChildren())return qf(t);if(e){let n=t.children[we]?au(t.children[we],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==we&&r.push(`${i}:${au(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=S3(t,(r,i)=>i===we?[au(t.children[we],!1)]:[`${i}:${au(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[we]!=null?`${qf(t)}/${n[0]}`:`${qf(t)}/(${n.join("//")})`}}function oR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hf(t){return oR(t).replace(/%3B/gi,";")}function A3(t){return encodeURI(t)}function cC(t){return oR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wf(t){return decodeURIComponent(t)}function qA(t){return Wf(t.replace(/\+/g,"%20"))}function sR(t){return`${cC(t.path)}${R3(t.parameters)}`}function R3(t){return Object.entries(t).map(([e,n])=>`;${cC(e)}=${cC(n)}`).join("")}function M3(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hf(n)}=${Hf(i)}`).join("&"):`${Hf(n)}=${Hf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var x3=/^[^\/()?;#]+/;function nC(t){let e=t.match(x3);return e?e[0]:""}var P3=/^[^\/()?;=#]+/;function N3(t){let e=t.match(P3);return e?e[0]:""}var k3=/^[^=?&#]+/;function O3(t){let e=t.match(k3);return e?e[0]:""}var F3=/^[^&#]+/;function L3(t){let e=t.match(F3);return e?e[0]:""}var lC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[we]=new $e(e,n)),r}parseSegment(){let e=nC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new fo(Wf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=N3(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=nC(this.remaining);i&&(r=i,this.capture(r))}e[Wf(n)]=Wf(r)}parseQueryParam(e){let n=O3(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=L3(this.remaining);s&&(r=s,this.capture(r))}let i=qA(n),o=qA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=nC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();n[o??we]=Object.keys(s).length===1&&s[we]?s[we]:new $e([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function aR(t){return t.segments.length>0?new $e([],{[we]:t}):t}function cR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=cR(i);if(r===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new $e(t.segments,e);return V3(n)}function V3(t){if(t.numberOfChildren===1&&t.children[we]){let e=t.children[we];return new $e(t.segments.concat(e.segments),e.children)}return t}function Xa(t){return t instanceof Br}function lR(t,e,n=null,r=null){let i=uR(t);return dR(i,e,n,r)}function uR(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new $e(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=aR(r);return e??i}function dR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return rC(i,i,i,n,r);let o=j3(e);if(o.toRoot())return rC(i,i,new $e([],{}),n,r);let s=U3(o,i,t),a=s.processChildren?lu(s.segmentGroup,s.index,o.commands):fR(s.segmentGroup,s.index,o.commands);return rC(i,s.segmentGroup,a,n,r)}function Kf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function hu(t){return typeof t=="object"&&t!=null&&t.outlets}function rC(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;t===e?s=n:s=hR(t,e,n);let a=aR(cR(s));return new Br(a,o,i)}function hR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=hR(o,e,n)}),new $e(t.segments,r)}var Qf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Kf(r[0]))throw new re(4003,!1);let i=r.find(hu);if(i&&i!==eR(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function j3(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Qf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Qf(n,e,r)}var Ja=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function U3(t,e,n){if(t.isAbsolute)return new Ja(e,!0,0);if(!n)return new Ja(e,!1,NaN);if(n.parent===null)return new Ja(n,!0,0);let r=Kf(t.commands[0])?0:1,i=n.segments.length-1+r;return B3(n,i,t.numberOfDoubleDots)}function B3(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new Ja(r,!1,i-o)}function $3(t){return hu(t[0])?t[0].outlets:{[we]:t}}function fR(t,e,n){if(t??=new $e([],{}),t.segments.length===0&&t.hasChildren())return lu(t,e,n);let r=H3(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new $e(t.segments.slice(0,r.pathIndex),{});return o.children[we]=new $e(t.segments.slice(r.pathIndex),t.children),lu(o,0,i)}else return r.match&&i.length===0?new $e(t.segments,{}):r.match&&!t.hasChildren()?uC(t,e,n):r.match?lu(t,0,i):uC(t,e,n)}function lu(t,e,n){if(n.length===0)return new $e(t.segments,{});{let r=$3(n),i={};if(Object.keys(r).some(o=>o!==we)&&t.children[we]&&t.numberOfChildren===1&&t.children[we].segments.length===0){let o=lu(t.children[we],e,n);return new $e(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=fR(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new $e(t.segments,i)}}function H3(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(hu(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!KA(c,u,s))return o;r+=2}else{if(!KA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function uC(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(hu(o)){let c=z3(o.outlets);return new $e(r,c)}if(i===0&&Kf(n[0])){let c=t.segments[e];r.push(new fo(c.path,WA(n[0]))),i++;continue}let s=hu(o)?o.outlets[we]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Kf(a)?(r.push(new fo(s,WA(a))),i+=2):(r.push(new fo(s,{})),i++)}return new $e(r,{})}function z3(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=uC(new $e([],{}),0,r))}),e}function WA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function KA(t,e,n){return t==n.path&&jr(e,n.parameters)}var uu="imperative",Ut=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ut||{}),On=class{id;url;constructor(e,n){this.id=e,this.url=n}},ys=class extends On{type=Ut.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ci=class extends On{urlAfterRedirects;type=Ut.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(dn||{}),fu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(fu||{}),Ur=class extends On{reason;code;type=Ut.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ei=class extends On{reason;code;type=Ut.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},ec=class extends On{error;target;type=Ut.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pu=class extends On{urlAfterRedirects;state;type=Ut.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yf=class extends On{urlAfterRedirects;state;type=Ut.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jf=class extends On{urlAfterRedirects;state;shouldActivate;type=Ut.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zf=class extends On{urlAfterRedirects;state;type=Ut.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xf=class extends On{urlAfterRedirects;state;type=Ut.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ep=class{route;type=Ut.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tp=class{route;type=Ut.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},np=class{snapshot;type=Ut.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rp=class{snapshot;type=Ut.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ip=class{snapshot;type=Ut.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},op=class{snapshot;type=Ut.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var gu=class{},tc=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function G3(t){return!(t instanceof gu)&&!(t instanceof tc)}function q3(t,e){return t.providers&&!t._injector&&(t._injector=zl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mr(t){return t.outlet||we}function W3(t,e){let n=t.filter(r=>mr(r)===e);return n.push(...t.filter(r=>mr(r)!==e)),n}function ic(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var sp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ic(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new oc(this.rootInjector)}},oc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new sp(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(z(ot))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ap=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hC(e,this._root).map(n=>n.value)}};function dC(t,e){if(t===e.value)return e;for(let n of e.children){let r=dC(t,n);if(r)return r}return null}function hC(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hC(t,n);if(r.length)return r.unshift(e),r}return[]}var kn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ya(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var mu=class extends ap{snapshot;constructor(e,n){super(e),this.snapshot=n,CC(this,e)}toString(){return this.snapshot.toString()}};function pR(t){let e=K3(t),n=new Gt([new fo("",{})]),r=new Gt({}),i=new Gt({}),o=new Gt({}),s=new Gt(""),a=new $r(n,r,o,s,i,we,t,e.root);return a.snapshot=e.root,new mu(new kn(a,[]),e)}function K3(t){let e={},n={},r={},o=new gs([],e,r,"",n,we,t,null,{});return new vu("",new kn(o,[]))}var $r=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(u=>u[Eu]))??me(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ie(e=>ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ie(e=>ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&mR(i)&&(r.resolve[Eu]=i.title),r}var gs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Eu]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},vu=class extends ap{url;constructor(e,n){super(n),this.url=e,CC(this,n)}toString(){return gR(this._root)}};function CC(t,e){e.value._routerState=t,e.children.forEach(n=>CC(t,n))}function gR(t){let e=t.children.length>0?` { ${t.children.map(gR).join(", ")} } `:"";return`${t.value}${e}`}function iC(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),jr(e.params,n.params)||t.paramsSubject.next(n.params),E3(e.url,n.url)||t.urlSubject.next(n.url),jr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fC(t,e){let n=jr(t.params,e.params)&&b3(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fC(t.parent,e.parent))}function mR(t){return typeof t.title=="string"||t.title===null}var vR=new ae(""),wu=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new ut;deactivateEvents=new ut;attachEvents=new ut;detachEvents=new ut;routerOutletData=Jl();parentContexts=F(oc);location=F(gr);changeDetector=F(lo);inputBinder=F(hp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new pC(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[La]})}return t})(),pC=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===$r?this.route:e===oc?this.childContexts:e===vR?this.outletData:this.parent.get(e,n)}},hp=new ae("");var EC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=se({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&K(0,"router-outlet")},dependencies:[wu],encapsulation:2})}return t})();function IC(t){let e=t.children&&t.children.map(IC),n=e?Ce(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==we&&(n.component=EC),n}function Q3(t,e,n){let r=yu(t,e._root,n?n._root:void 0);return new mu(r,e)}function yu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Y3(t,e,n);return new kn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yu(t,a)),s}}let r=J3(e.value),i=e.children.map(o=>yu(t,o));return new kn(r,i)}}function Y3(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return yu(t,r,i);return yu(t,r)})}function J3(t){return new $r(new Gt(t.url),new Gt(t.params),new Gt(t.queryParams),new Gt(t.fragment),new Gt(t.data),t.outlet,t.component,t)}var nc=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},yR="ngNavigationCancelingError";function lp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_R(!1,dn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function _R(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[yR]=!0,n.cancellationCode=e,n}function Z3(t){return CR(t)&&Xa(t.url)}function CR(t){return!!t&&t[yR]}var X3=(t,e,n,r)=>Ie(i=>(new gC(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),gC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),iC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ya(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ya(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ya(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ya(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new op(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(iC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),iC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},up=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Za=class{component;route;constructor(e,n){this.component=e,this.route=n}};function eU(t,e,n){let r=t._root,i=e?e._root:null;return cu(r,i,n,[r.value])}function tU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function sc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ov(t)?t:e.get(t):r}function cu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ya(e);return t.children.forEach(s=>{nU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>du(a,n.getContext(s),i)),i}function nU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=rU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new up(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?cu(t,e,a?a.children:null,r,i):cu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Za(a.outlet.component,s))}else s&&du(e,a,i),i.canActivateChecks.push(new up(r)),o.component?cu(t,null,a?a.children:null,r,i):cu(t,null,n,r,i);return i}function rU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ps(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ps(t.url,e.url)||!jr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fC(t,e)||!jr(t.queryParams,e.queryParams);case"paramsChange":default:return!fC(t,e)}}function du(t,e,n){let r=Ya(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?du(s,e.children.getContext(o),n):du(s,null,n):du(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Za(e.outlet.component,i)):n.canDeactivateChecks.push(new Za(null,i)):n.canDeactivateChecks.push(new Za(null,i))}function Tu(t){return typeof t=="function"}function iU(t){return typeof t=="boolean"}function oU(t){return t&&Tu(t.canLoad)}function sU(t){return t&&Tu(t.canActivate)}function aU(t){return t&&Tu(t.canActivateChild)}function cU(t){return t&&Tu(t.canDeactivate)}function lU(t){return t&&Tu(t.canMatch)}function ER(t){return t instanceof An||t?.name==="EmptyError"}var zf=Symbol("INITIAL_VALUE");function rc(){return Lt(t=>ch(t.map(e=>e.pipe(ni(1),Gm(zf)))).pipe(Ie(e=>{for(let n of e)if(n!==!0){if(n===zf)return zf;if(n===!1||uU(n))return n}return!0}),vn(e=>e!==zf),ni(1)))}function uU(t){return Xa(t)||t instanceof nc}function dU(t,e){return Pt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?me(Ce(H({},n),{guardsResult:!0})):hU(s,r,i,t).pipe(Pt(a=>a&&iU(a)?fU(r,o,t,e):me(a)),Ie(a=>Ce(H({},n),{guardsResult:a})))})}function hU(t,e,n,r){return st(t).pipe(Pt(i=>yU(i.component,i.route,n,e,r)),ri(i=>i!==!0,!0))}function fU(t,e,n,r){return st(e).pipe(qi(i=>pa(gU(i.route.parent,r),pU(i.route,r),vU(t,i.path,n),mU(t,i.route,n))),ri(i=>i!==!0,!0))}function pU(t,e){return t!==null&&e&&e(new ip(t)),me(!0)}function gU(t,e){return t!==null&&e&&e(new np(t)),me(!0)}function mU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return me(!0);let i=r.map(o=>gl(()=>{let s=ic(e)??n,a=sc(o,s),c=sU(a)?a.canActivate(e,t):lt(s,()=>a(e,t));return Ii(c).pipe(ri())}));return me(i).pipe(rc())}function vU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tU(s)).filter(s=>s!==null).map(s=>gl(()=>{let a=s.guards.map(c=>{let u=ic(s.node)??n,h=sc(c,u),p=aU(h)?h.canActivateChild(r,t):lt(u,()=>h(r,t));return Ii(p).pipe(ri())});return me(a).pipe(rc())}));return me(o).pipe(rc())}function yU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return me(!0);let s=o.map(a=>{let c=ic(e)??i,u=sc(a,c),h=cU(u)?u.canDeactivate(t,e,n,r):lt(c,()=>u(t,e,n,r));return Ii(h).pipe(ri())});return me(s).pipe(rc())}function _U(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return me(!0);let o=i.map(s=>{let a=sc(s,t),c=oU(a)?a.canLoad(e,n):lt(t,()=>a(e,n));return Ii(c)});return me(o).pipe(rc(),IR(r))}function IR(t){return Nm(Vt(e=>{if(typeof e!="boolean")throw lp(t,e)}),Ie(e=>e===!0))}function CU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return me(!0);let o=i.map(s=>{let a=sc(s,t),c=lU(a)?a.canMatch(e,n):lt(t,()=>a(e,n));return Ii(c)});return me(o).pipe(rc(),IR(r))}var _u=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Cu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Qa(t){return Gi(new _u(t))}function EU(t){return Gi(new re(4e3,!1))}function IU(t){return Gi(_R(!1,dn.GuardRejected))}var mC=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return me(r);if(i.numberOfChildren>1||!i.children[we])return EU(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,n,r,i,o){return wU(n,i,o).pipe(Ie(s=>{if(s instanceof Br)throw new Cu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Cu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Br(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new $e(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function wU(t,e,n){if(typeof t=="string")return me(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:h,title:p}=e;return Ii(lt(n,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var vC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TU(t,e,n,r,i){let o=wR(t,e,n);return o.matched?(r=q3(e,r),CU(r,e,n,i).pipe(Ie(s=>s===!0?o:H({},vC)))):me(o)}function wR(t,e,n){if(e.path==="**")return bU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},vC):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ZA)(n,t,e);if(!i)return H({},vC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function bU(t){return{matched:!0,parameters:t.length>0?eR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function QA(t,e,n,r){return n.length>0&&AU(t,n,r)?{segmentGroup:new $e(e,DU(r,new $e(n,t.children))),slicedSegments:[]}:n.length===0&&RU(t,n,r)?{segmentGroup:new $e(t.segments,SU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new $e(t.segments,t.children),slicedSegments:n}}function SU(t,e,n,r){let i={};for(let o of n)if(fp(t,e,o)&&!r[mr(o)]){let s=new $e([],{});i[mr(o)]=s}return H(H({},r),i)}function DU(t,e){let n={};n[we]=e;for(let r of t)if(r.path===""&&mr(r)!==we){let i=new $e([],{});n[mr(r)]=i}return n}function AU(t,e,n){return n.some(r=>fp(t,e,r)&&mr(r)!==we)}function RU(t,e,n){return n.some(r=>fp(t,e,r))}function fp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function MU(t,e,n){return e.length===0&&!t.children[n]}var yC=class{};function xU(t,e,n,r,i,o,s="emptyOnly"){return new _C(t,e,n,r,i,s,o).recognize()}var PU=31,_C=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new mC(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=QA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(({children:n,rootSnapshot:r})=>{let i=new kn(r,n),o=new vu("",i),s=lR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new gs([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,n).pipe(Ie(r=>({children:r,rootSnapshot:n})),or(r=>{if(r instanceof Cu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _u?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Ie(s=>s instanceof kn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return st(o).pipe(qi(s=>{let a=r.children[s],c=W3(n,s);return this.processSegmentGroup(e,c,a,s,i)}),zm((s,a)=>(s.push(...a),s)),Wi(null),Hm(),Pt(s=>{if(s===null)return Qa(r);let a=TR(s);return NU(a),me(a)}))}processSegment(e,n,r,i,o,s,a){return st(n).pipe(qi(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(or(u=>{if(u instanceof _u)return me(null);throw u}))),ri(c=>!!c),or(c=>{if(ER(c))return MU(r,i,o)?me(new yC):Qa(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return mr(r)!==s&&(s===we||!fp(i,o,r))?Qa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Qa(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=wR(n,i,o);if(!c)return Qa(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PU&&(this.allowRedirects=!1));let v=new gs(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,YA(i),mr(i),i.component??i._loadedComponent??null,i,JA(i)),w=cp(v,a,this.paramsInheritanceStrategy);return v.params=Object.freeze(w.params),v.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e).pipe(Lt(P=>this.applyRedirects.lineralizeSegments(i,P)),Pt(P=>this.processSegment(e,r,n,P.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=TU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Lt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Lt(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:v}=c,w=new gs(g,p,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,YA(r),mr(r),r.component??r._loadedComponent??null,r,JA(r)),O=cp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(O.params),w.data=Object.freeze(O.data);let{segmentGroup:P,slicedSegments:j}=QA(n,g,v,u);if(j.length===0&&P.hasChildren())return this.processChildren(h,u,P,w).pipe(Ie(ue=>new kn(w,ue)));if(u.length===0&&j.length===0)return me(new kn(w,[]));let oe=mr(r)===o;return this.processSegment(h,u,P,j,oe?we:o,!0,w).pipe(Ie(ue=>new kn(w,ue instanceof kn?[ue]:[])))}))):Qa(n)))}getChildConfig(e,n,r){return n.children?me({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?me({routes:n._loadedRoutes,injector:n._loadedInjector}):_U(e,n,r,this.urlSerializer).pipe(Pt(i=>i?this.configLoader.loadChildren(e,n).pipe(Vt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):IU(n))):me({routes:[],injector:e})}};function NU(t){t.sort((e,n)=>e.value.outlet===we?-1:n.value.outlet===we?1:e.value.outlet.localeCompare(n.value.outlet))}function kU(t){let e=t.value.routeConfig;return e&&e.path===""}function TR(t){let e=[],n=new Set;for(let r of t){if(!kU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=TR(r.children);e.push(new kn(r.value,i))}return e.filter(r=>!n.has(r))}function YA(t){return t.data||{}}function JA(t){return t.resolve||{}}function OU(t,e,n,r,i,o){return Pt(s=>xU(t,e,n,r,s.extractedUrl,i,o).pipe(Ie(({state:a,tree:c})=>Ce(H({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FU(t,e){return Pt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return me(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of bR(c))s.add(u);let a=0;return st(s).pipe(qi(c=>o.has(c)?LU(c,r,t,e):(c.data=cp(c,c.parent,t).resolve,me(void 0))),Vt(()=>a++),ga(1),Pt(c=>a===s.size?me(n):pn))})}function bR(t){let e=t.children.map(n=>bR(n)).flat();return[t,...e]}function LU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!mR(i)&&(o[Eu]=i.title),gl(()=>(t.data=cp(t,t.parent,n).resolve,VU(o,t,e,r).pipe(Ie(s=>(t._resolvedData=s,t.data=H(H({},t.data),s),null)))))}function VU(t,e,n,r){let i=aC(t);if(i.length===0)return me({});let o={};return st(i).pipe(Pt(s=>jU(t[s],e,n,r).pipe(ri(),Vt(a=>{if(a instanceof nc)throw lp(new vs,a);o[s]=a}))),ga(1),Ie(()=>o),or(s=>ER(s)?pn:Gi(s)))}function jU(t,e,n,r){let i=ic(e)??r,o=sc(t,i),s=o.resolve?o.resolve(e,n):lt(i,()=>o(e,n));return Ii(s)}function oC(t){return Lt(e=>{let n=t(e);return n?st(n).pipe(Ie(()=>e)):me(e)})}var wC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===we);return r}getResolvedTitleForRoute(n){return n.data[Eu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>F(SR),providedIn:"root"})}return t})(),SR=(()=>{class t extends wC{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(z(HA))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ac=new ae("",{providedIn:"root",factory:()=>({})}),bu=new ae(""),DR=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(D_);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return me(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ii(lt(n,()=>r.loadComponent())).pipe(Ie(RR),Lt(MR),Vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Bo(()=>{this.componentLoaders.delete(r)})),o=new ua(i,()=>new Et).pipe(la());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=AR(r,this.compiler,n,this.onLoadEndListener).pipe(Bo(()=>{this.childrenLoaders.delete(r)})),s=new ua(o,()=>new Et).pipe(la());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AR(t,e,n,r){return Ii(lt(n,()=>t.loadChildren())).pipe(Ie(RR),Lt(MR),Pt(i=>i instanceof Tf||Array.isArray(i)?me(i):st(e.compileModuleAsync(i))),Ie(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(bu,[],{optional:!0,self:!0}).flat()),{routes:s.map(IC),injector:o}}))}function UU(t){return t&&typeof t=="object"&&"default"in t}function RR(t){return UU(t)?t.default:t}function MR(t){return me(t)}var pp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>F(BU),providedIn:"root"})}return t})(),BU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xR=new ae("");var PR=new ae(""),NR=(()=>{class t{currentNavigation=nt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Et;transitionAbortWithErrorSubject=new Et;configLoader=F(DR);environmentInjector=F(ot);destroyRef=F(yn);urlSerializer=F(Iu);rootContexts=F(oc);location=F(Ka);inputBindingEnabled=F(hp,{optional:!0})!==null;titleStrategy=F(wC);options=F(ac,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(pp);createViewTransition=F(xR,{optional:!0});navigationErrorHandler=F(PR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>me(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ep(i)),r=i=>this.events.next(new tp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ln(()=>{this.transitions?.next(Ce(H({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Gt(null),this.transitions.pipe(vn(r=>r!==null),Lt(r=>{let i=!1;return me(r).pipe(Lt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",dn.SupersededByNewNavigation),pn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Ei(o.id,this.urlSerializer.serialize(o.rawUrl),"",fu.IgnoredSameUrlNavigation)),o.resolve(!1),pn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return me(o).pipe(Lt(c=>(this.events.next(new ys(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?pn:Promise.resolve(c))),OU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Vt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=c.urlAfterRedirects,h));let u=new pu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:h,restoredState:p,extras:g}=o,v=new ys(c,this.urlSerializer.serialize(u),h,p);this.events.next(v);let w=pR(this.rootComponentType).snapshot;return this.currentTransition=r=Ce(H({},o),{targetSnapshot:w,urlAfterRedirects:u,extras:Ce(H({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(O=>(O.finalUrl=u,O)),me(r)}else return this.events.next(new Ei(o.id,this.urlSerializer.serialize(o.extractedUrl),"",fu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),pn}),Vt(o=>{let s=new Yf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ie(o=>(this.currentTransition=r=Ce(H({},o),{guards:eU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),dU(this.environmentInjector,o=>this.events.next(o)),Vt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw lp(this.urlSerializer,o.guardsResult);let s=new Jf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),vn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",dn.GuardRejected),!1)),oC(o=>{if(o.guards.canActivateChecks.length!==0)return me(o).pipe(Vt(s=>{let a=new Zf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Lt(s=>{let a=!1;return me(s).pipe(FU(this.paramsInheritanceStrategy,this.environmentInjector),Vt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",dn.NoDataFromResolver)}}))}),Vt(s=>{let a=new Xf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),oC(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=ic(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Vt(h=>{a.component=h}),Ie(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return ch(s(o.targetSnapshot.root)).pipe(Wi(null),ni(1))}),oC(()=>this.afterPreactivation()),Lt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?st(a).pipe(Ie(()=>r)):me(r)}),Ie(o=>{let s=Q3(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ce(H({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Vt(()=>{this.events.next(new gu)}),X3(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ni(1),uh(new Se(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(vn(()=>!i&&!r.targetRouterState),Vt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",dn.Aborted)}))),Vt({next:o=>{i=!0,this.lastSuccessfulNavigation=ln(this.currentNavigation),this.events.next(new Ci(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),uh(this.transitionAbortWithErrorSubject.pipe(Vt(o=>{throw o}))),Bo(()=>{i||this.cancelNavigationTransition(r,"",dn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),or(o=>{if(this.destroyed)return r.resolve(!1),pn;if(i=!0,CR(o))this.events.next(new Ur(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Z3(o)?this.events.next(new tc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ec(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof nc){let{message:c,cancellationCode:u}=lp(this.urlSerializer,a);this.events.next(new Ur(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new tc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return pn}))}))}cancelNavigationTransition(n,r,i){let o=new Ur(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ln(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $U(t){return t!==uu}var kR=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>F(HU),providedIn:"root"})}return t})(),dp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},HU=(()=>{class t extends dp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),OR=(()=>{class t{urlSerializer=F(Iu);options=F(ac,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Ka);urlHandlingStrategy=F(pp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Br;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Br?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=pR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>F(zU),providedIn:"root"})}return t})(),zU=(()=>{class t extends OR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ys?this.updateStateMemento():n instanceof Ei?this.commitTransition(r):n instanceof pu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof gu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ur&&n.code!==dn.SupersededByNewNavigation&&n.code!==dn.Redirect?this.restoreHistory(r):n instanceof ec?this.restoreHistory(r,!0):n instanceof Ci&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TC(t,e){t.events.pipe(vn(n=>n instanceof Ci||n instanceof Ur||n instanceof ec||n instanceof Ei),Ie(n=>n instanceof Ci||n instanceof Ei?0:(n instanceof Ur?n.code===dn.Redirect||n.code===dn.SupersededByNewNavigation:!1)?2:1),vn(n=>n!==2),ni(1)).subscribe(()=>{e()})}var GU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Fn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(bf);stateManager=F(OR);options=F(ac,{optional:!0})||{};pendingTasks=F(xr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(NR);urlSerializer=F(Iu);location=F(Ka);urlHandlingStrategy=F(pp);injector=F(ot);_events=new Et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(kR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(bu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(hp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ht;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ln(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ur&&r.code!==dn.Redirect&&r.code!==dn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ci)this.navigated=!0;else if(r instanceof tc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$U(i.source)},s);this.scheduleNavigation(a,uu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}G3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Kn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ln(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(IC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=uR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return dR(p,n,h,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Xa(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,uu,null,r)}navigate(n,r={skipLocationChange:!1}){return WU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Yi(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=H({},GU):r===!1?i=H({},qU):i=r,Xa(n))return GA(this.currentUrlTree,n,i);let o=this.parseUrl(n);return GA(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return TC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new re(4008,!1)}var QU=new ae("");function bC(t,...e){return ar([{provide:bu,multi:!0,useValue:t},[],{provide:$r,useFactory:YU,deps:[Fn]},{provide:Sf,multi:!0,useFactory:ZU},e.map(n=>n.\u0275providers)])}function YU(t){return t.routerState.root}function JU(t,e){return{\u0275kind:t,\u0275providers:e}}function ZU(){let t=F(Xe);return e=>{let n=t.get(Qn);if(e!==n.components[0])return;let r=t.get(Fn),i=t.get(XU);t.get(eB)===1&&r.initialNavigation(),t.get(tB,null,{optional:!0})?.setUpPreloading(),t.get(QU,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var XU=new ae("",{factory:()=>new Et}),eB=new ae("",{providedIn:"root",factory:()=>1});var tB=new ae("");function SC(t){return JU(5,[{provide:ac,useValue:t}])}var LR=()=>{};var UR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},rB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},gp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[h],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new AC;let g=o<<2|a>>4;if(r.push(g),u!==64){let v=a<<4&240|u>>2;if(r.push(v),p!==64){let w=u<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},AC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},iB=function(t){let e=UR(t);return gp.encodeByteArray(e,!0)},Du=function(t){return iB(t).replace(/\./g,"")},mp=function(t){try{return gp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function MC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var oB=()=>MC().__FIREBASE_DEFAULTS__,sB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&mp(t[1]);return e&&JSON.parse(e)},vp=()=>{try{return LR()||oB()||sB()||aB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BR=t=>{var e,n;return(n=(e=vp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$R=t=>{let e=BR(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xC=()=>{var t;return(t=vp())===null||t===void 0?void 0:t.config},HR=t=>{var e;return(e=vp())===null||e===void 0?void 0:e[`_${t}`]};var _s=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Cs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function PC(t){return I(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function zR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Du(JSON.stringify(n)),Du(JSON.stringify(s)),""].join(".")}var Su={};function cB(){let t={prod:[],emulator:[]};for(let e of Object.keys(Su))Su[e]?t.emulator.push(e):t.prod.push(e);return t}function lB(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var VR=!1;function NC(t,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||Su[t]===e||Su[t]||VR)return;Su[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=cB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{VR=!0,s()},g}function h(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=lB(r),v=n("text"),w=document.getElementById(v)||document.createElement("span"),O=n("learnmore"),P=document.getElementById(O)||document.createElement("a"),j=n("preprendIcon"),oe=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ue=g.element;a(ue),h(P,O);let ve=u();c(oe,j),ue.append(oe,w,P,ve),document.body.appendChild(ue)}o?(w.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function uB(){var t;let e=(t=vp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QR(){return!uB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Au(){try{return typeof indexedDB=="object"}catch{return!1}}function YR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var dB="FirebaseError",Zn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dB,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vr.prototype.create)}},vr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?hB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Zn(i,a,r)}};function hB(t,e){return t.replace(fB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fB=/\{\$([^}]+)}/g;function Es(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(jR(o)&&jR(s)){if(!Es(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function jR(t){return t!==null&&typeof t=="object"}function kC(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JR(t,e){let n=new RC(t,e);return n.subscribe.bind(n)}var RC=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=DC),i.error===void 0&&(i.error=DC),i.complete===void 0&&(i.complete=DC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function DC(){}var rce=14400*1e3;function wn(t){return t&&t._delegate?t._delegate:t}var hn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Is="[DEFAULT]";var OC=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new _s;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mB(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function gB(t){return t===Is?void 0:t}function mB(t){return t.instantiationMode==="EAGER"}var yp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new OC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var vB=[],Pe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(Pe||{}),yB={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},_B=Pe.INFO,CB={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},EB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=CB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Hr=class{constructor(e){this.name=e,this._logLevel=_B,this._logHandler=EB,this._userLogHandler=null,vB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};var IB=(t,e)=>e.some(n=>t instanceof n),ZR,XR;function wB(){return ZR||(ZR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TB(){return XR||(XR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var eM=new WeakMap,LC=new WeakMap,tM=new WeakMap,FC=new WeakMap,jC=new WeakMap;function bB(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&eM.set(n,t)}).catch(()=>{}),jC.set(e,t),e}function SB(t){if(LC.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});LC.set(t,e)}var VC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return LC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nM(t){VC=t(VC)}function DB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(_p(this),e,...n);return tM.set(r,e.sort?e.sort():[e]),zr(r)}:TB().includes(t)?function(...e){return t.apply(_p(this),e),zr(eM.get(this))}:function(...e){return zr(t.apply(_p(this),e))}}function AB(t){return typeof t=="function"?DB(t):(t instanceof IDBTransaction&&SB(t),IB(t,wB())?new Proxy(t,VC):t)}function zr(t){if(t instanceof IDBRequest)return bB(t);if(FC.has(t))return FC.get(t);let e=AB(t);return e!==t&&(FC.set(t,e),jC.set(e,t)),e}var _p=t=>jC.get(t);function iM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=zr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(zr(s.result),c.oldVersion,c.newVersion,zr(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var RB=["get","getKey","getAll","getAllKeys","count"],MB=["put","add","delete","clear"],UC=new Map;function rM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(UC.get(e))return UC.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=MB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RB.includes(n)))return;let o=function(s,...a){return I(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return UC.set(e,o),o}nM(t=>Ce(H({},t),{get:(e,n,r)=>rM(e,n)||t.get(e,n,r),has:(e,n)=>!!rM(e,n)||t.has(e,n)}));var $C=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function xB(t){let e=t.getComponent();return e?.type==="VERSION"}var HC="@firebase/app",oM="0.13.2";var wi=new Hr("@firebase/app"),PB="@firebase/app-compat",NB="@firebase/analytics-compat",kB="@firebase/analytics",OB="@firebase/app-check-compat",FB="@firebase/app-check",LB="@firebase/auth",VB="@firebase/auth-compat",jB="@firebase/database",UB="@firebase/data-connect",BB="@firebase/database-compat",$B="@firebase/functions",HB="@firebase/functions-compat",zB="@firebase/installations",GB="@firebase/installations-compat",qB="@firebase/messaging",WB="@firebase/messaging-compat",KB="@firebase/performance",QB="@firebase/performance-compat",YB="@firebase/remote-config",JB="@firebase/remote-config-compat",ZB="@firebase/storage",XB="@firebase/storage-compat",e$="@firebase/firestore",t$="@firebase/ai",n$="@firebase/firestore-compat",r$="firebase",i$="11.10.0";var zC="[DEFAULT]",o$={[HC]:"fire-core",[PB]:"fire-core-compat",[kB]:"fire-analytics",[NB]:"fire-analytics-compat",[FB]:"fire-app-check",[OB]:"fire-app-check-compat",[LB]:"fire-auth",[VB]:"fire-auth-compat",[jB]:"fire-rtdb",[UB]:"fire-data-connect",[BB]:"fire-rtdb-compat",[$B]:"fire-fn",[HB]:"fire-fn-compat",[zB]:"fire-iid",[GB]:"fire-iid-compat",[qB]:"fire-fcm",[WB]:"fire-fcm-compat",[KB]:"fire-perf",[QB]:"fire-perf-compat",[YB]:"fire-rc",[JB]:"fire-rc-compat",[ZB]:"fire-gcs",[XB]:"fire-gcs-compat",[e$]:"fire-fst",[n$]:"fire-fst-compat",[t$]:"fire-vertex","fire-js":"fire-js",[r$]:"fire-js-all"};var Ru=new Map,s$=new Map,GC=new Map;function sM(t,e){try{t.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yr(t){let e=t.name;if(GC.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;GC.set(e,t);for(let n of Ru.values())sM(n,t);for(let n of s$.values())sM(n,t);return!0}function Cp(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ti(t){return t==null?!1:t.settings!==void 0}var a$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new vr("app","Firebase",a$);var qC=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}};var cc=i$;function QC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:zC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw po.create("bad-app-name",{appName:String(i)});if(n||(n=xC()),!n)throw po.create("no-options");let o=Ru.get(i);if(o){if(Es(n,o.options)&&Es(r,o.config))return o;throw po.create("duplicate-app",{appName:i})}let s=new yp(i);for(let c of GC.values())s.addComponent(c);let a=new qC(n,r,s);return Ru.set(i,a),a}function lc(t=zC){let e=Ru.get(t);if(!e&&t===zC&&xC())return QC();if(!e)throw po.create("no-app",{appName:t});return e}function Ep(){return Array.from(Ru.values())}function Ct(t,e,n){var r;let i=(r=o$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(a.join(" "));return}yr(new hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var c$="firebase-heartbeat-database",l$=1,Mu="firebase-heartbeat-store",BC=null;function uM(){return BC||(BC=iM(c$,l$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw po.create("idb-open",{originalErrorMessage:t.message})})),BC}function u$(t){return I(this,null,function*(){try{let n=(yield uM()).transaction(Mu),r=yield n.objectStore(Mu).get(dM(t));return yield n.done,r}catch(e){if(e instanceof Zn)wi.warn(e.message);else{let n=po.create("idb-get",{originalErrorMessage:e?.message});wi.warn(n.message)}}})}function aM(t,e){return I(this,null,function*(){try{let r=(yield uM()).transaction(Mu,"readwrite");yield r.objectStore(Mu).put(e,dM(t)),yield r.done}catch(n){if(n instanceof Zn)wi.warn(n.message);else{let r=po.create("idb-set",{originalErrorMessage:n?.message});wi.warn(r.message)}}})}function dM(t){return`${t.name}!${t.options.appId}`}var d$=1024,h$=30,WC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new KC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>h$){let s=p$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wi.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=cM(),{heartbeatsToSend:r,unsentEntries:i}=f$(this._heartbeatsCache.heartbeats),o=Du(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return wi.warn(n),""}})}};function cM(){return new Date().toISOString().substring(0,10)}function f$(t,e=d$){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),lM(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var KC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Au()?YR().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield u$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function lM(t){return Du(JSON.stringify({version:2,heartbeats:t})).length}function p$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function g$(t){yr(new hn("platform-logger",e=>new $C(e),"PRIVATE")),yr(new hn("heartbeat",e=>new WC(e),"PRIVATE")),Ct(HC,oM,t),Ct(HC,oM,"esm2017"),Ct("fire-js","")}g$("");var m$="firebase",v$="11.10.0";Ct(m$,v$,"app");function hM(t){t===void 0&&(t=F(Xe));let e=t.get(di);return n=>new Se(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ts=new Ki("ANGULARFIRE2_VERSION");function wp(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var dc=(t,e)=>{let n=e?[e]:Ep(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},uc=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(uc||{}),fM=x_()&&typeof Zone<"u"?uc.WARN:uc.SILENT;var Ip=class{zone;delegate;constructor(e,n=jm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},bs=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=F(Le);this.outsideAngular=n.runOutsideAngular(()=>new Ip(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Ip(typeof Zone>"u"?void 0:Zone.current,Vm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pM=!1;function y$(t,e){!pM&&(fM>uc.SILENT||x_())&&(pM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),fM>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function _$(t){let e=F(Le,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ws(t){let e=F(Le,{optional:!0});return e?e.run(()=>t()):t()}var C$=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),lt(n,()=>ws(()=>t.apply(void 0,r)))),Vn=(t,e,n)=>(n||=e?uc.WARN:uc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=F(bs),s=F(di),a=F(ot)}catch{return y$(t,n),t.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ws(()=>s.add())),i[u]=C$(i[u],r,a));let c=_$(()=>t.apply(this,i));return e?c instanceof Se?c.pipe(zi(o.outsideAngular),Hi(o.insideAngular),hM(a)):c instanceof Promise?ws(()=>{let u=s.add();return new Promise((h,p)=>{c.then(g=>lt(a,()=>ws(()=>h(g))),g=>lt(a,()=>ws(()=>p(g)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ws(()=>c):c instanceof Se?c.pipe(zi(o.outsideAngular),Hi(o.insideAngular)):ws(()=>c)});var Ss=class{constructor(e){return e}},xu=class{constructor(){return Ep()}};function E$(t){return t&&t.length===1?t[0]:new Ss(lc())}var YC=new ae("angularfire2._apps"),I$={provide:Ss,useFactory:E$,deps:[[new Nr,YC]]},w$={provide:xu,deps:[[new Nr,YC]]};function T$(t){return(e,n)=>{let r=n.get(as);Ct("angularfire",Ts.full,"core"),Ct("angularfire",Ts.full,"app"),Ct("angular",rv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ss(i)}}function gM(t,...e){return ar([I$,w$,{provide:YC,useFactory:T$(t),multi:!0,deps:[Le,Xe,bs,...e]}])}var mM=Vn(QC,!0);var b$=new Map,S$={activated:!1,tokenObservers:[]},D$={initialized:!1,enabled:!1};function _r(t){return b$.get(t)||Object.assign({},S$)}function CM(){return D$}var A$="https://content-firebaseappcheck.googleapis.com/v1";var R$="exchangeDebugToken",vM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},sle=1440*60*1e3;var XC=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return I(this,null,function*(){this.stop();try{this.pending=new _s,this.pending.promise.catch(n=>{}),yield M$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new _s,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function M$(t){return new Promise(e=>{setTimeout(e,t)})}var x$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},go=new vr("appCheck","AppCheck",x$);function EM(t){if(!_r(t).activated)throw go.create("use-before-activation",{appName:t.name})}function IM(r,i){return I(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(v){throw go.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw go.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(v){throw go.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw go.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function wM(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${A$}/projects/${n}/apps/${r}:${R$}?key=${i}`,body:{debug_token:e}}}var P$="firebase-app-check-database",N$=1,e0="firebase-app-check-store";var Tp=null;function k$(){return Tp||(Tp=new Promise((t,e)=>{try{let n=indexedDB.open(P$,N$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(go.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(e0,{keyPath:"compositeKey"})}}}catch(n){e(go.create("storage-open",{originalErrorMessage:n?.message}))}}),Tp)}function O$(t,e){return F$(L$(t),e)}function F$(t,e){return I(this,null,function*(){let r=(yield k$()).transaction(e0,"readwrite"),o=r.objectStore(e0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(go.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function L$(t){return`${t.options.appId}-${t.name}`}var Pu=new Hr("@firebase/app-check");function JC(t,e){return Au()?O$(t,e).catch(n=>{Pu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function TM(){return CM().enabled}function bM(){return I(this,null,function*(){let t=CM();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var V$={error:"UNKNOWN_ERROR"};function j$(t){return gp.encodeString(JSON.stringify(t),!1)}function t0(t,e=!1,n=!1){return I(this,null,function*(){let r=t.app;EM(r);let i=_r(r),o=i.token,s;if(o&&!Nu(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(Nu(u)?o=u:yield JC(r,void 0))}if(!e&&o&&Nu(o))return{token:o.token};let a=!1;if(TM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=IM(wM(r,yield bM()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield JC(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Pu.warn(u.message):n&&Pu.error(u),ZC(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield _r(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Pu.warn(u.message):n&&Pu.error(u),s=u}let c;return o?s?Nu(o)?c={token:o.token,internalError:s}:c=ZC(s):(c={token:o.token},i.token=o,yield JC(r,o)):c=ZC(s),a&&H$(r,c),c})}function U$(t){return I(this,null,function*(){let e=t.app;EM(e);let{provider:n}=_r(e);if(TM()){let r=yield bM(),{token:i}=yield IM(wM(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function B$(t,e,n,r){let{app:i}=t,o=_r(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),yM(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>yM(t))}function SM(t,e){let n=_r(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function yM(t){let{app:e}=t,n=_r(e),r=n.tokenRefresher;r||(r=$$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $$(t){let{app:e}=t;return new XC(()=>I(null,null,function*(){let n=_r(e),r;if(n.token?r=yield t0(t,!0):r=yield t0(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=_r(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},vM.RETRIAL_MIN_WAIT,vM.RETRIAL_MAX_WAIT)}function H$(t,e){let n=_r(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Nu(t){return t.expireTimeMillis-Date.now()>0}function ZC(t){return{token:j$(V$),error:t}}var n0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=_r(this.app);for(let n of e)SM(this.app,n.next);return Promise.resolve()}};function z$(t,e){return new n0(t,e)}function G$(t){return{getToken:e=>t0(t,e),getLimitedUseToken:()=>U$(t),addTokenListener:e=>B$(t,"INTERNAL",e),removeTokenListener:e=>SM(t.app,e)}}var q$="@firebase/app-check",W$="0.10.1";var K$="app-check",_M="app-check-internal";function Q$(){yr(new hn(K$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return z$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(_M).initialize()})),yr(new hn(_M,t=>{let e=t.getProvider("app-check").getImmediate();return G$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ct(q$,W$)}Q$();var Y$="app-check";var bp=class{constructor(){return dc(Y$)}};var J$=["localhost","0.0.0.0","127.0.0.1"],_le=typeof window<"u"&&J$.includes(window.location.hostname);function kM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var OM=kM,FM=new vr("auth","Firebase",kM());var Rp=new Hr("@firebase/auth");function X$(t,...e){Rp.logLevel<=Pe.WARN&&Rp.warn(`Auth (${cc}): ${t}`,...e)}function Dp(t,...e){Rp.logLevel<=Pe.ERROR&&Rp.error(`Auth (${cc}): ${t}`,...e)}function DM(t,...e){throw p0(t,...e)}function f0(t,...e){return p0(t,...e)}function LM(t,e,n){let r=Object.assign(Object.assign({},OM()),{[e]:n});return new vr("auth","Firebase",r).create(e,{appName:t.name})}function Ap(t){return LM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p0(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FM.create(t,...e)}function He(t,e,...n){if(!t)throw p0(e,...n)}function ku(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Dp(e),new Error(e)}function Mp(t,e){t||ku(e)}function eH(){return AM()==="http:"||AM()==="https:"}function AM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function tH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eH()||WR()||"connection"in navigator)?navigator.onLine:!0}function nH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Rs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mp(n>e,"Short delay should be less than long delay!"),this.isMobile=GR()||KR()}get(){return tH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function rH(t,e){Mp(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xp=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ku("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ku("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ku("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sH=new Rs(3e4,6e4);function VM(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Fp(o,s,a,c){return I(this,arguments,function*(t,e,n,r,i={}){return jM(t,i,()=>I(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let p=kC(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:g},u);return qR()||(v.referrerPolicy="no-referrer"),t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(v.credentials="include"),xp.fetch()(yield UM(t,t.config.apiHost,n,p),v)}))})}function jM(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},iH),e);try{let i=new o0(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Sp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sp(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Sp(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Sp(t,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw LM(t,h,u);DM(t,h)}}catch(i){if(i instanceof Zn)throw i;DM(t,"network-request-failed",{message:String(i)})}})}function UM(t,e,n,r){return I(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?rH(t.config,i):`${t.config.apiScheme}://${i}`;return oH.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var o0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(f0(this.auth,"network-request-failed")),sH.get())})}};function Sp(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=f0(t,e,r);return i.customData._tokenResponse=n,i}function aH(t,e){return I(this,null,function*(){return Fp(t,"POST","/v1/accounts:delete",e)})}function Pp(t,e){return I(this,null,function*(){return Fp(t,"POST","/v1/accounts:lookup",e)})}function Ou(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function g0(t,e=!1){return I(this,null,function*(){let n=wn(t),r=yield n.getIdToken(e),i=BM(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ou(r0(i.auth_time)),issuedAtTime:Ou(r0(i.iat)),expirationTime:Ou(r0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function r0(t){return Number(t)*1e3}function BM(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dp("JWT malformed, contained fewer than 3 sections"),null;try{let i=mp(n);return i?JSON.parse(i):(Dp("Failed to decode base64 JWT payload"),null)}catch(i){return Dp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RM(t){let e=BM(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function s0(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Zn&&cH(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function cH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var a0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Np(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield s0(t,Pp(n,{idToken:r}));He(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?$M(o.providerUserInfo):[],a=lH(t.providerData,s),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!a?.length,h=c?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Lu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function m0(t){return I(this,null,function*(){let e=wn(t);yield Np(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $M(t){return t.map(e=>{var{providerId:n}=e,r=Um(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uH(t,e){return I(this,null,function*(){let n=yield jM(t,{},()=>I(null,null,function*(){let r=kC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield UM(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(c.credentials="include"),xp.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function dH(t,e){return I(this,null,function*(){return Fp(t,"POST","/v2/accounts:revokeToken",VM(t,e))})}var Fu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");let n=RM(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield uH(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(He(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(He(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ku("not implemented")}};function mo(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ds=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield s0(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return g0(this,e)}reload(){return m0(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Np(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(Ti(this.auth.app))return Promise.reject(Ap(this.auth));let e=yield this.getIdToken();return yield s0(this,aH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,O=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,j=(u=n.createdAt)!==null&&u!==void 0?u:void 0,oe=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ue,emailVerified:ve,isAnonymous:tt,providerData:Re,stsTokenManager:S}=n;He(ue&&S,e,"internal-error");let y=Fu.fromJSON(this.name,S);He(typeof ue=="string",e,"internal-error"),mo(p,e.name),mo(g,e.name),He(typeof ve=="boolean",e,"internal-error"),He(typeof tt=="boolean",e,"internal-error"),mo(v,e.name),mo(w,e.name),mo(O,e.name),mo(P,e.name),mo(j,e.name),mo(oe,e.name);let C=new t({uid:ue,auth:e,email:g,emailVerified:ve,displayName:p,isAnonymous:tt,photoURL:w,phoneNumber:v,tenantId:O,stsTokenManager:y,createdAt:j,lastLoginAt:oe});return Re&&Array.isArray(Re)&&(C.providerData=Re.map(T=>Object.assign({},T))),P&&(C._redirectEventId=P),C}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new Fu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Np(o),o})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];He(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?$M(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Fu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var MM=new Map;function As(t){Mp(t instanceof Function,"Expected a class definition");let e=MM.get(t);return e?(Mp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,MM.set(t,e),e)}var hH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),c0=hH;function i0(t,e,n){return`firebase:${t}:${e}:${n}`}var kp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=i0(this.userKey,i.apiKey,o),this.fullPersistenceKey=i0("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Pp(this.auth,{idToken:e}).catch(()=>{});return n?Ds._fromGetAccountInfoResponse(this.auth,n,e):null}return Ds._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(As(c0),e,r);let i=(yield Promise.all(n.map(u=>I(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||As(c0),s=i0(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let h=yield u._get(s);if(h){let p;if(typeof h=="string"){let g=yield Pp(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Ds._fromGetAccountInfoResponse(e,g,h)}else p=Ds._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(u=>I(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new t(o,e,r))})}};function xM(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yH(e))return"Blackberry";if(_H(e))return"Webos";if(pH(e))return"Safari";if((e.includes("chrome/")||gH(e))&&!e.includes("edge/"))return"Chrome";if(vH(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fH(t=Ln()){return/firefox\//i.test(t)}function pH(t=Ln()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gH(t=Ln()){return/crios\//i.test(t)}function mH(t=Ln()){return/iemobile/i.test(t)}function vH(t=Ln()){return/android/i.test(t)}function yH(t=Ln()){return/blackberry/i.test(t)}function _H(t=Ln()){return/webos/i.test(t)}function HM(t,e=[]){let n;switch(t){case"Browser":n=xM(Ln());break;case"Worker":n=`${xM(Ln())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cc}/${r}`}var l0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function CH(n){return I(this,arguments,function*(t,e={}){return Fp(t,"GET","/v2/passwordPolicy",VM(t,e))})}var EH=6,u0=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:EH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var d0=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Op(this),this.idTokenSubscription=new Op(this),this.beforeStateQueue=new l0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield kp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield Pp(this,{idToken:e}),r=yield Ds._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(Ti(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Np(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=nH()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(Ti(this.app))return Promise.reject(Ap(this));let n=e?wn(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return Ti(this.app)?Promise.reject(Ap(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ti(this.app)?Promise.reject(Ap(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(As(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield CH(this),n=new u0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&As(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=yield kp.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;if(Ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&X$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function IH(t){return wn(t)}var Op=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=JR(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wH={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TH(t){wH=t}function bH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function SH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(As);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var xle=bH("rcb"),Ple=new Rs(3e4,6e4);var Nle=new Rs(2e3,1e4);var kle=600*1e3;var Ole=new Rs(3e4,6e4);var Fle=new Rs(5e3,15e3);var Lle=encodeURIComponent("fac");var PM="@firebase/auth",NM="1.10.8";var h0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AH(t){yr(new hn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;He(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HM(t)},u=new d0(r,i,o,c);return SH(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yr(new hn("auth-internal",e=>{let n=IH(e.getProvider("auth").getImmediate());return(r=>new h0(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ct(PM,NM,DH(t)),Ct(PM,NM,"esm2017")}var RH=300,Vle=HR("authIdTokenMaxAge")||RH;function MH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=f0("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",MH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AH("Browser");var A4="auth";var Lp=class{constructor(){return dc(A4)}};var zM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},GM={};var bi,v0;(function(){var t;function e(S,y){function C(){}C.prototype=y.prototype,S.D=y.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(T,D,M){for(var E=Array(arguments.length-2),Xr=2;Xr<arguments.length;Xr++)E[Xr-2]=arguments[Xr];return y.prototype[D].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,y,C){C||(C=0);var T=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)T[D]=y.charCodeAt(C++)|y.charCodeAt(C++)<<8|y.charCodeAt(C++)<<16|y.charCodeAt(C++)<<24;else for(D=0;16>D;++D)T[D]=y[C++]|y[C++]<<8|y[C++]<<16|y[C++]<<24;y=S.g[0],C=S.g[1],D=S.g[2];var M=S.g[3],E=y+(M^C&(D^M))+T[0]+3614090360&4294967295;y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[1]+3905402710&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[2]+606105819&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[3]+3250441966&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(M^C&(D^M))+T[4]+4118548399&4294967295,y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[5]+1200080426&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[6]+2821735955&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[7]+4249261313&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(M^C&(D^M))+T[8]+1770035416&4294967295,y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[9]+2336552879&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[10]+4294925233&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[11]+2304563134&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(M^C&(D^M))+T[12]+1804603682&4294967295,y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[13]+4254626195&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[14]+2792965006&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[15]+1236535329&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(D^M&(C^D))+T[1]+4129170786&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[6]+3225465664&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[11]+643717713&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[0]+3921069994&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(D^M&(C^D))+T[5]+3593408605&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[10]+38016083&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[15]+3634488961&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[4]+3889429448&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(D^M&(C^D))+T[9]+568446438&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[14]+3275163606&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[3]+4107603335&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[8]+1163531501&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(D^M&(C^D))+T[13]+2850285829&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[2]+4243563512&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[7]+1735328473&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[12]+2368359562&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(C^D^M)+T[5]+4294588738&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[8]+2272392833&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[11]+1839030562&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[14]+4259657740&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(C^D^M)+T[1]+2763975236&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[4]+1272893353&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[7]+4139469664&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[10]+3200236656&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(C^D^M)+T[13]+681279174&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[0]+3936430074&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[3]+3572445317&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[6]+76029189&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(C^D^M)+T[9]+3654602809&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[12]+3873151461&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[15]+530742520&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[2]+3299628645&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(D^(C|~M))+T[0]+4096336452&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[7]+1126891415&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[14]+2878612391&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[5]+4237533241&4294967295,C=D+(E<<21&4294967295|E>>>11),E=y+(D^(C|~M))+T[12]+1700485571&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[3]+2399980690&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[10]+4293915773&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[1]+2240044497&4294967295,C=D+(E<<21&4294967295|E>>>11),E=y+(D^(C|~M))+T[8]+1873313359&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[15]+4264355552&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[6]+2734768916&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[13]+1309151649&4294967295,C=D+(E<<21&4294967295|E>>>11),E=y+(D^(C|~M))+T[4]+4149444226&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[11]+3174756917&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[2]+718787259&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var C=y-this.blockSize,T=this.B,D=this.h,M=0;M<y;){if(D==0)for(;M<=C;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<y;)if(T[D++]=S.charCodeAt(M++),D==this.blockSize){i(this,T),D=0;break}}else for(;M<y;)if(T[D++]=S[M++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var C=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=C&255,C/=256;for(this.u(S),S=Array(16),y=C=0;4>y;++y)for(var T=0;32>T;T+=8)S[C++]=this.g[y]>>>T&255;return S};function o(S,y){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=y(S)}function s(S,y){this.h=y;for(var C=[],T=!0,D=S.length-1;0<=D;D--){var M=S[D]|0;T&&M==y||(C[D]=M,T=!1)}this.g=C}var a={};function c(S){return-128<=S&&128>S?o(S,function(y){return new s([y|0],0>y?-1:0)}):new s([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return P(u(-S));for(var y=[],C=1,T=0;S>=C;T++)y[T]=S/C|0,C*=4294967296;return new s(y,0)}function h(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return P(h(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(y,8)),T=p,D=0;D<S.length;D+=8){var M=Math.min(8,S.length-D),E=parseInt(S.substring(D,D+M),y);8>M?(M=u(Math.pow(y,M)),T=T.j(M).add(u(E))):(T=T.j(C),T=T.add(u(E)))}return T}var p=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(O(this))return-P(this).m();for(var S=0,y=1,C=0;C<this.g.length;C++){var T=this.i(C);S+=(0<=T?T:4294967296+T)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(O(this))return"-"+P(this).toString(S);for(var y=u(Math.pow(S,6)),C=this,T="";;){var D=ve(C,y).g;C=j(C,D.j(y));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=D,w(C))return M+T;for(;6>M.length;)M="0"+M;T=M+T}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function O(S){return S.h==-1}t.l=function(S){return S=j(this,S),O(S)?-1:w(S)?0:1};function P(S){for(var y=S.g.length,C=[],T=0;T<y;T++)C[T]=~S.g[T];return new s(C,~S.h).add(g)}t.abs=function(){return O(this)?P(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0,D=0;D<=y;D++){var M=T+(this.i(D)&65535)+(S.i(D)&65535),E=(M>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);T=E>>>16,M&=65535,E&=65535,C[D]=E<<16|M}return new s(C,C[C.length-1]&-2147483648?-1:0)};function j(S,y){return S.add(P(y))}t.j=function(S){if(w(this)||w(S))return p;if(O(this))return O(S)?P(this).j(P(S)):P(P(this).j(S));if(O(S))return P(this.j(P(S)));if(0>this.l(v)&&0>S.l(v))return u(this.m()*S.m());for(var y=this.g.length+S.g.length,C=[],T=0;T<2*y;T++)C[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<S.g.length;D++){var M=this.i(T)>>>16,E=this.i(T)&65535,Xr=S.i(D)>>>16,Wc=S.i(D)&65535;C[2*T+2*D]+=E*Wc,oe(C,2*T+2*D),C[2*T+2*D+1]+=M*Wc,oe(C,2*T+2*D+1),C[2*T+2*D+1]+=E*Xr,oe(C,2*T+2*D+1),C[2*T+2*D+2]+=M*Xr,oe(C,2*T+2*D+2)}for(T=0;T<y;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=y;T<2*y;T++)C[T]=0;return new s(C,0)};function oe(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function ue(S,y){this.g=S,this.h=y}function ve(S,y){if(w(y))throw Error("division by zero");if(w(S))return new ue(p,p);if(O(S))return y=ve(P(S),y),new ue(P(y.g),P(y.h));if(O(y))return y=ve(S,P(y)),new ue(P(y.g),y.h);if(30<S.g.length){if(O(S)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var C=g,T=y;0>=T.l(S);)C=tt(C),T=tt(T);var D=Re(C,1),M=Re(T,1);for(T=Re(T,2),C=Re(C,2);!w(T);){var E=M.add(T);0>=E.l(S)&&(D=D.add(C),M=E),T=Re(T,1),C=Re(C,1)}return y=j(S,D.j(y)),new ue(D,y)}for(D=p;0<=S.l(y);){for(C=Math.max(1,Math.floor(S.m()/y.m())),T=Math.ceil(Math.log(C)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),M=u(C),E=M.j(y);O(E)||0<E.l(S);)C-=T,M=u(C),E=M.j(y);w(M)&&(M=g),D=D.add(M),S=j(S,E)}return new ue(D,S)}t.A=function(S){return ve(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0;T<y;T++)C[T]=this.i(T)&S.i(T);return new s(C,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0;T<y;T++)C[T]=this.i(T)|S.i(T);return new s(C,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0;T<y;T++)C[T]=this.i(T)^S.i(T);return new s(C,this.h^S.h)};function tt(S){for(var y=S.g.length+1,C=[],T=0;T<y;T++)C[T]=S.i(T)<<1|S.i(T-1)>>>31;return new s(C,S.h)}function Re(S,y){var C=y>>5;y%=32;for(var T=S.g.length-C,D=[],M=0;M<T;M++)D[M]=0<y?S.i(M+C)>>>y|S.i(M+C+1)<<32-y:S.i(M+C);return new s(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,v0=GM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,bi=GM.Integer=s}).apply(typeof zM<"u"?zM:typeof self<"u"?self:typeof window<"u"?window:{});var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Si={};var y0,R4,hc,_0,Vu,jp,C0,E0,I0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,f){return l==Array.prototype||l==Object.prototype||(l[d]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vp=="object"&&Vp];for(var d=0;d<l.length;++d){var f=l[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var f=r;l=l.split(".");for(var m=0;m<l.length-1;m++){var A=l[m];if(!(A in f))break e;f=f[A]}l=l[l.length-1],m=f[l],d=d(m),d!=m&&d!=null&&e(f,l,{configurable:!0,writable:!0,value:d})}}function o(l,d){l instanceof String&&(l+="");var f=0,m=!1,A={next:function(){if(!m&&f<l.length){var N=f++;return{value:d(N,l[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,f){return l.call.apply(l.bind,arguments)}function p(l,d,f){if(!l)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),l.apply(d,A)}}return function(){return l.apply(d,arguments)}}function g(l,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(l,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),l.apply(this,m)}}function w(l,d){function f(){}f.prototype=d.prototype,l.aa=d.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(m,A,N){for(var Q=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Q[Ze-2]=arguments[Ze];return d.prototype[A].apply(m,Q)}}function O(l){let d=l.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=l[m];return f}return[]}function P(l,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let A=l.length||0,N=m.length||0;l.length=A+N;for(let Q=0;Q<N;Q++)l[A+Q]=m[Q]}else l.push(m)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function oe(l){return/^[\s\xa0]*$/.test(l)}function ue(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ve(l){return ve[" "](l),l}ve[" "]=function(){};var tt=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function Re(l,d,f){for(let m in l)d.call(f,l[m],m,l)}function S(l,d){for(let f in l)d.call(void 0,l[f],f,l)}function y(l){let d={};for(let f in l)d[f]=l[f];return d}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,d){let f,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(f in m)l[f]=m[f];for(let N=0;N<C.length;N++)f=C[N],Object.prototype.hasOwnProperty.call(m,f)&&(l[f]=m[f])}}function D(l){var d=1;l=l.split(":");let f=[];for(;0<d&&l.length;)f.push(l.shift()),d--;return l.length&&f.push(l.join(":")),f}function M(l){a.setTimeout(()=>{throw l},0)}function E(){var l=Qg;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Xr{constructor(){this.h=this.g=null}add(d,f){let m=Wc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Wc=new j(()=>new jN,l=>l.reset());class jN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Kc,Qc=!1,Qg=new Xr,YI=()=>{let l=a.Promise.resolve(void 0);Kc=()=>{l.then(UN)}};var UN=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(f){M(f)}var d=Wc;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Qc=!1};function Li(){this.s=this.s,this.C=this.C}Li.prototype.s=!1,Li.prototype.ma=function(){this.s||(this.s=!0,this.N())},Li.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qt(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var BN=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return l})();function Yc(l,d){if(Qt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,m=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(tt){e:{try{ve(d.nodeName);var A=!0;break e}catch{}A=!1}A||(d=null)}}else f=="mouseover"?d=l.fromElement:f=="mouseout"&&(d=l.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:$N[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Yc.aa.h.call(this)}}w(Yc,Qt);var $N={2:"touch",3:"pen",4:"mouse"};Yc.prototype.h=function(){Yc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),HN=0;function zN(l,d,f,m,A){this.listener=l,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=A,this.key=++HN,this.da=this.fa=!1}function dd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function hd(l){this.src=l,this.g={},this.h=0}hd.prototype.add=function(l,d,f,m,A){var N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);var Q=Jg(l,d,m,A);return-1<Q?(d=l[Q],f||(d.fa=!1)):(d=new zN(d,this.src,N,!!m,A),d.fa=f,l.push(d)),d};function Yg(l,d){var f=d.type;if(f in l.g){var m=l.g[f],A=Array.prototype.indexOf.call(m,d,void 0),N;(N=0<=A)&&Array.prototype.splice.call(m,A,1),N&&(dd(d),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Jg(l,d,f,m){for(var A=0;A<l.length;++A){var N=l[A];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==m)return A}return-1}var Zg="closure_lm_"+(1e6*Math.random()|0),Xg={};function JI(l,d,f,m,A){if(m&&m.once)return XI(l,d,f,m,A);if(Array.isArray(d)){for(var N=0;N<d.length;N++)JI(l,d[N],f,m,A);return null}return f=rm(f),l&&l[Jc]?l.K(d,f,u(m)?!!m.capture:!!m,A):ZI(l,d,f,!1,m,A)}function ZI(l,d,f,m,A,N){if(!d)throw Error("Invalid event type");var Q=u(A)?!!A.capture:!!A,Ze=tm(l);if(Ze||(l[Zg]=Ze=new hd(l)),f=Ze.add(d,f,m,Q,N),f.proxy)return f;if(m=GN(),f.proxy=m,m.src=l,m.listener=f,l.addEventListener)BN||(A=Q),A===void 0&&(A=!1),l.addEventListener(d.toString(),m,A);else if(l.attachEvent)l.attachEvent(tw(d.toString()),m);else if(l.addListener&&l.removeListener)l.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function GN(){function l(f){return d.call(l.src,l.listener,f)}let d=qN;return l}function XI(l,d,f,m,A){if(Array.isArray(d)){for(var N=0;N<d.length;N++)XI(l,d[N],f,m,A);return null}return f=rm(f),l&&l[Jc]?l.L(d,f,u(m)?!!m.capture:!!m,A):ZI(l,d,f,!0,m,A)}function ew(l,d,f,m,A){if(Array.isArray(d))for(var N=0;N<d.length;N++)ew(l,d[N],f,m,A);else m=u(m)?!!m.capture:!!m,f=rm(f),l&&l[Jc]?(l=l.i,d=String(d).toString(),d in l.g&&(N=l.g[d],f=Jg(N,f,m,A),-1<f&&(dd(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete l.g[d],l.h--)))):l&&(l=tm(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Jg(d,f,m,A)),(f=-1<l?d[l]:null)&&em(f))}function em(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Jc])Yg(d.i,l);else{var f=l.type,m=l.proxy;d.removeEventListener?d.removeEventListener(f,m,l.capture):d.detachEvent?d.detachEvent(tw(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=tm(d))?(Yg(f,l),f.h==0&&(f.src=null,d[Zg]=null)):dd(l)}}}function tw(l){return l in Xg?Xg[l]:Xg[l]="on"+l}function qN(l,d){if(l.da)l=!0;else{d=new Yc(d,this);var f=l.listener,m=l.ha||l.src;l.fa&&em(l),l=f.call(m,d)}return l}function tm(l){return l=l[Zg],l instanceof hd?l:null}var nm="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(l){return typeof l=="function"?l:(l[nm]||(l[nm]=function(d){return l.handleEvent(d)}),l[nm])}function Yt(){Li.call(this),this.i=new hd(this),this.M=this,this.F=null}w(Yt,Li),Yt.prototype[Jc]=!0,Yt.prototype.removeEventListener=function(l,d,f,m){ew(this,l,d,f,m)};function on(l,d){var f,m=l.F;if(m)for(f=[];m;m=m.F)f.push(m);if(l=l.M,m=d.type||d,typeof d=="string")d=new Qt(d,l);else if(d instanceof Qt)d.target=d.target||l;else{var A=d;d=new Qt(m,l),T(d,A)}if(A=!0,f)for(var N=f.length-1;0<=N;N--){var Q=d.g=f[N];A=fd(Q,m,!0,d)&&A}if(Q=d.g=l,A=fd(Q,m,!0,d)&&A,A=fd(Q,m,!1,d)&&A,f)for(N=0;N<f.length;N++)Q=d.g=f[N],A=fd(Q,m,!1,d)&&A}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var f=l.g[d],m=0;m<f.length;m++)dd(f[m]);delete l.g[d],l.h--}}this.F=null},Yt.prototype.K=function(l,d,f,m){return this.i.add(String(l),d,!1,f,m)},Yt.prototype.L=function(l,d,f,m){return this.i.add(String(l),d,!0,f,m)};function fd(l,d,f,m){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,N=0;N<d.length;++N){var Q=d[N];if(Q&&!Q.da&&Q.capture==f){var Ze=Q.listener,zt=Q.ha||Q.src;Q.fa&&Yg(l.i,Q),A=Ze.call(zt,m)!==!1&&A}}return A&&!m.defaultPrevented}function nw(l,d,f){if(typeof l=="function")f&&(l=g(l,f));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function rw(l){l.g=nw(()=>{l.g=null,l.i&&(l.i=!1,rw(l))},l.l);let d=l.h;l.h=null,l.m.apply(null,d)}class WN extends Li{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zc(l){Li.call(this),this.h=l,this.g={}}w(Zc,Li);var iw=[];function ow(l){Re(l.g,function(d,f){this.g.hasOwnProperty(f)&&em(d)},l),l.g={}}Zc.prototype.N=function(){Zc.aa.N.call(this),ow(this)},Zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var im=a.JSON.stringify,KN=a.JSON.parse,QN=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function om(){}om.prototype.h=null;function sw(l){return l.h||(l.h=l.i())}function aw(){}var Xc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sm(){Qt.call(this,"d")}w(sm,Qt);function am(){Qt.call(this,"c")}w(am,Qt);var Mo={},cw=null;function pd(){return cw=cw||new Yt}Mo.La="serverreachability";function lw(l){Qt.call(this,Mo.La,l)}w(lw,Qt);function el(l){let d=pd();on(d,new lw(d))}Mo.STAT_EVENT="statevent";function uw(l,d){Qt.call(this,Mo.STAT_EVENT,l),this.stat=d}w(uw,Qt);function sn(l){let d=pd();on(d,new uw(d,l))}Mo.Ma="timingevent";function dw(l,d){Qt.call(this,Mo.Ma,l),this.size=d}w(dw,Qt);function tl(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function nl(){this.g=!0}nl.prototype.xa=function(){this.g=!1};function YN(l,d,f,m,A,N){l.info(function(){if(l.g)if(N)for(var Q="",Ze=N.split("&"),zt=0;zt<Ze.length;zt++){var Ue=Ze[zt].split("=");if(1<Ue.length){var Jt=Ue[0];Ue=Ue[1];var Zt=Jt.split("_");Q=2<=Zt.length&&Zt[1]=="type"?Q+(Jt+"="+Ue+"&"):Q+(Jt+"=redacted&")}}else Q=null;else Q=N;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+d+`
`+f+`
`+Q})}function JN(l,d,f,m,A,N,Q){l.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+d+`
`+f+`
`+N+" "+Q})}function Qs(l,d,f,m){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+XN(l,f)+(m?" "+m:"")})}function ZN(l,d){l.info(function(){return"TIMEOUT: "+d})}nl.prototype.info=function(){};function XN(l,d){if(!l.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var m=f[l];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(var Q=1;Q<A.length;Q++)A[Q]=""}}}}return im(f)}catch{return d}}var gd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cm;function md(){}w(md,om),md.prototype.g=function(){return new XMLHttpRequest},md.prototype.i=function(){return{}},cm=new md;function Vi(l,d,f,m){this.j=l,this.i=d,this.l=f,this.R=m||1,this.U=new Zc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fw}function fw(){this.i=null,this.g="",this.h=!1}var pw={},lm={};function um(l,d,f){l.L=1,l.v=Cd(ei(d)),l.m=f,l.P=!0,gw(l,null)}function gw(l,d){l.F=Date.now(),vd(l),l.A=ei(l.v);var f=l.A,m=l.R;Array.isArray(m)||(m=[String(m)]),Rw(f.i,"t",m),l.C=0,f=l.j.J,l.h=new fw,l.g=Ww(l.j,f?d:null,!l.m),0<l.O&&(l.M=new WN(g(l.Y,l,l.g),l.O)),d=l.U,f=l.g,m=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(iw[0]=A.toString()),A=iw);for(var N=0;N<A.length;N++){var Q=JI(f,A[N],m||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),el(),YN(l.i,l.u,l.A,l.l,l.R,l.m)}Vi.prototype.ca=function(l){l=l.target;let d=this.M;d&&ti(l)==3?d.j():this.Y(l)},Vi.prototype.Y=function(l){try{if(l==this.g)e:{let Zt=ti(this.g);var d=this.g.Ba();let Zs=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Fw(this.g)))){this.J||Zt!=4||d==7||(d==8||0>=Zs?el(3):el(2)),dm(this);var f=this.g.Z();this.X=f;t:if(mw(this)){var m=Fw(this.g);l="";var A=m.length,N=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xo(this),rl(this);var Q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,l+=this.h.i.decode(m[d],{stream:!(N&&d==A-1)});m.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=f==200,JN(this.i,this.u,this.A,this.l,this.R,Zt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,zt=this.g;if((Ze=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(Ze)){var Ue=Ze;break t}}Ue=null}if(f=Ue)Qs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hm(this,f);else{this.o=!1,this.s=3,sn(12),xo(this),rl(this);break e}}if(this.P){f=!0;let rr;for(;!this.J&&this.C<Q.length;)if(rr=ek(this,Q),rr==lm){Zt==4&&(this.s=4,sn(14),f=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==pw){this.s=4,sn(15),Qs(this.i,this.l,Q,"[Invalid Chunk]"),f=!1;break}else Qs(this.i,this.l,rr,null),hm(this,rr);if(mw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||Q.length!=0||this.h.h||(this.s=1,sn(16),f=!1),this.o=this.o&&f,!f)Qs(this.i,this.l,Q,"[Invalid Chunked Response]"),xo(this),rl(this);else if(0<Q.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),ym(Jt),Jt.M=!0,sn(11))}}else Qs(this.i,this.l,Q,null),hm(this,Q);Zt==4&&xo(this),this.o&&!this.J&&(Zt==4?Hw(this.j,this):(this.o=!1,vd(this)))}else vk(this.g),f==400&&0<Q.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),xo(this),rl(this)}}}catch{}finally{}};function mw(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ek(l,d){var f=l.C,m=d.indexOf(`
`,f);return m==-1?lm:(f=Number(d.substring(f,m)),isNaN(f)?pw:(m+=1,m+f>d.length?lm:(d=d.slice(m,m+f),l.C=m+f,d)))}Vi.prototype.cancel=function(){this.J=!0,xo(this)};function vd(l){l.S=Date.now()+l.I,vw(l,l.I)}function vw(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=tl(g(l.ba,l),d)}function dm(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Vi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(ZN(this.i,this.A),this.L!=2&&(el(),sn(17)),xo(this),this.s=2,rl(this)):vw(this,this.S-l)};function rl(l){l.j.G==0||l.J||Hw(l.j,l)}function xo(l){dm(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,ow(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function hm(l,d){try{var f=l.j;if(f.G!=0&&(f.g==l||fm(f.h,l))){if(!l.K&&fm(f.h,l)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)bd(f),wd(f);else break e;vm(f),sn(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=tl(g(f.Za,f),6e3));if(1>=Cw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else No(f,11)}else if((l.K||f.g==l)&&bd(f),!oe(d))for(A=f.Da.g.parse(d),d=0;d<A.length;d++){let Ue=A[d];if(f.T=Ue[0],Ue=Ue[1],f.G==2)if(Ue[0]=="c"){f.K=Ue[1],f.ia=Ue[2];let Jt=Ue[3];Jt!=null&&(f.la=Jt,f.j.info("VER="+f.la));let Zt=Ue[4];Zt!=null&&(f.Aa=Zt,f.j.info("SVER="+f.Aa));let Zs=Ue[5];Zs!=null&&typeof Zs=="number"&&0<Zs&&(m=1.5*Zs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let rr=l.g;if(rr){let Dd=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dd){var N=m.h;N.g||Dd.indexOf("spdy")==-1&&Dd.indexOf("quic")==-1&&Dd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(pm(N,N.h),N.h=null))}if(m.D){let _m=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;_m&&(m.ya=_m,it(m.I,m.D,_m))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var Q=l;if(m.qa=qw(m,m.J?m.ia:null,m.W),Q.K){Ew(m.h,Q);var Ze=Q,zt=m.L;zt&&(Ze.I=zt),Ze.B&&(dm(Ze),vd(Ze)),m.g=Q}else Bw(m);0<f.i.length&&Td(f)}else Ue[0]!="stop"&&Ue[0]!="close"||No(f,7);else f.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?No(f,7):mm(f):Ue[0]!="noop"&&f.l&&f.l.ta(Ue),f.v=0)}}el(4)}catch{}}var tk=class{constructor(l,d){this.g=l,this.map=d}};function yw(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _w(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Cw(l){return l.h?1:l.g?l.g.size:0}function fm(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function pm(l,d){l.g?l.g.add(d):l.h=d}function Ew(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}yw.prototype.cancel=function(){if(this.i=Iw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Iw(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(let f of l.g.values())d=d.concat(f.D);return d}return O(l.i)}function nk(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],f=l.length,m=0;m<f;m++)d.push(l[m]);return d}d=[],f=0;for(m in l)d[f++]=l[m];return d}function rk(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var f=0;f<l;f++)d.push(f);return d}d=[],f=0;for(let m in l)d[f++]=m;return d}}}function ww(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var f=rk(l),m=nk(l),A=m.length,N=0;N<A;N++)d.call(void 0,m[N],f&&f[N],l)}var Tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ik(l,d){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var m=l[f].indexOf("="),A=null;if(0<=m){var N=l[f].substring(0,m);A=l[f].substring(m+1)}else N=l[f];d(N,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Po(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Po){this.h=l.h,yd(this,l.j),this.o=l.o,this.g=l.g,_d(this,l.s),this.l=l.l;var d=l.i,f=new sl;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bw(this,f),this.m=l.m}else l&&(d=String(l).match(Tw))?(this.h=!1,yd(this,d[1]||"",!0),this.o=il(d[2]||""),this.g=il(d[3]||"",!0),_d(this,d[4]),this.l=il(d[5]||"",!0),bw(this,d[6]||"",!0),this.m=il(d[7]||"")):(this.h=!1,this.i=new sl(null,this.h))}Po.prototype.toString=function(){var l=[],d=this.j;d&&l.push(ol(d,Sw,!0),":");var f=this.g;return(f||d=="file")&&(l.push("//"),(d=this.o)&&l.push(ol(d,Sw,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(ol(f,f.charAt(0)=="/"?ak:sk,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",ol(f,lk)),l.join("")};function ei(l){return new Po(l)}function yd(l,d,f){l.j=f?il(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function _d(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function bw(l,d,f){d instanceof sl?(l.i=d,uk(l.i,l.h)):(f||(d=ol(d,ck)),l.i=new sl(d,l.h))}function it(l,d,f){l.i.set(d,f)}function Cd(l){return it(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function il(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ol(l,d,f){return typeof l=="string"?(l=encodeURI(l).replace(d,ok),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ok(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Sw=/[#\/\?@]/g,sk=/[#\?:]/g,ak=/[#\?]/g,ck=/[#\?@]/g,lk=/#/g;function sl(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function ji(l){l.g||(l.g=new Map,l.h=0,l.i&&ik(l.i,function(d,f){l.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=sl.prototype,t.add=function(l,d){ji(this),this.i=null,l=Ys(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(d),this.h+=1,this};function Dw(l,d){ji(l),d=Ys(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Aw(l,d){return ji(l),d=Ys(l,d),l.g.has(d)}t.forEach=function(l,d){ji(this),this.g.forEach(function(f,m){f.forEach(function(A){l.call(d,A,m,this)},this)},this)},t.na=function(){ji(this);let l=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let A=l[m];for(let N=0;N<A.length;N++)f.push(d[m])}return f},t.V=function(l){ji(this);let d=[];if(typeof l=="string")Aw(this,l)&&(d=d.concat(this.g.get(Ys(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)d=d.concat(l[f])}return d},t.set=function(l,d){return ji(this),this.i=null,l=Ys(this,l),Aw(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Rw(l,d,f){Dw(l,d),0<f.length&&(l.i=null,l.g.set(Ys(l,d),O(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let N=encodeURIComponent(String(m)),Q=this.V(m);for(m=0;m<Q.length;m++){var A=N;Q[m]!==""&&(A+="="+encodeURIComponent(String(Q[m]))),l.push(A)}}return this.i=l.join("&")};function Ys(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function uk(l,d){d&&!l.j&&(ji(l),l.i=null,l.g.forEach(function(f,m){var A=m.toLowerCase();m!=A&&(Dw(this,m),Rw(this,A,f))},l)),l.j=d}function dk(l,d){let f=new nl;if(a.Image){let m=new Image;m.onload=v(Ui,f,"TestLoadImage: loaded",!0,d,m),m.onerror=v(Ui,f,"TestLoadImage: error",!1,d,m),m.onabort=v(Ui,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=v(Ui,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=l}else d(!1)}function hk(l,d){let f=new nl,m=new AbortController,A=setTimeout(()=>{m.abort(),Ui(f,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:m.signal}).then(N=>{clearTimeout(A),N.ok?Ui(f,"TestPingServer: ok",!0,d):Ui(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),Ui(f,"TestPingServer: error",!1,d)})}function Ui(l,d,f,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(f)}catch{}}function fk(){this.g=new QN}function pk(l,d,f){let m=f||"";try{ww(l,function(A,N){let Q=A;u(A)&&(Q=im(A)),d.push(m+N+"="+encodeURIComponent(Q))})}catch(A){throw d.push(m+"type="+encodeURIComponent("_badmap")),A}}function al(l){this.l=l.Ub||null,this.j=l.eb||!1}w(al,om),al.prototype.g=function(){return new Ed(this.l,this.j)},al.prototype.i=(function(l){return function(){return l}})({});function Ed(l,d){Yt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ed,Yt),t=Ed.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,ll(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cl(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ll(this)),this.g&&(this.readyState=3,ll(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mw(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mw(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?cl(this):ll(this),this.readyState==3&&Mw(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,cl(this))},t.Qa=function(l){this.g&&(this.response=l,cl(this))},t.ga=function(){this.g&&cl(this)};function cl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ll(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=d.next();return l.join(`\r
`)};function ll(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function xw(l){let d="";return Re(l,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function gm(l,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=xw(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):it(l,d,f))}function dt(l){Yt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(dt,Yt);var gk=/^https?$/i,mk=["POST","PUT"];t=dt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cm.g(),this.v=this.o?sw(this.o):sw(cm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(N){Pw(this,N);return}if(l=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)f.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mk,d,void 0))||m||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,Q]of f)this.g.setRequestHeader(N,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ow(this),this.u=!0,this.g.send(l),this.u=!1}catch(N){Pw(this,N)}};function Pw(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Nw(l),Id(l)}function Nw(l){l.A||(l.A=!0,on(l,"complete"),on(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,on(this,"complete"),on(this,"abort"),Id(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Id(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?kw(this):this.bb())},t.bb=function(){kw(this)};function kw(l){if(l.h&&typeof s<"u"&&(!l.v[1]||ti(l)!=4||l.Z()!=2)){if(l.u&&ti(l)==4)nw(l.Ea,0,l);else if(on(l,"readystatechange"),ti(l)==4){l.h=!1;try{let Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=Q===0){var A=String(l.D).match(Tw)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),m=!gk.test(A?A.toLowerCase():"")}f=m}if(f)on(l,"complete"),on(l,"success");else{l.m=6;try{var N=2<ti(l)?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.Z()+"]",Nw(l)}}finally{Id(l)}}}}function Id(l,d){if(l.g){Ow(l);let f=l.g,m=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||on(l,"ready");try{f.onreadystatechange=m}catch{}}}function Ow(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ti(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),KN(d)}};function Fw(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function vk(l){let d={};l=(l.g&&2<=ti(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<l.length;m++){if(oe(l[m]))continue;var f=D(l[m]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[A]||[];d[A]=N,N.push(f)}S(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ul(l,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||d}function Lw(l){this.Aa=0,this.i=[],this.j=new nl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ul("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ul("baseRetryDelayMs",5e3,l),this.cb=ul("retryDelaySeedMs",1e4,l),this.Wa=ul("forwardChannelMaxRetries",2,l),this.wa=ul("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yw(l&&l.concurrentRequestLimit),this.Da=new fk,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Lw.prototype,t.la=8,t.G=1,t.connect=function(l,d,f,m){sn(0),this.W=l,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=qw(this,null,this.W),Td(this)};function mm(l){if(Vw(l),l.G==3){var d=l.U++,f=ei(l.I);if(it(f,"SID",l.K),it(f,"RID",d),it(f,"TYPE","terminate"),dl(l,f),d=new Vi(l,l.j,d),d.L=2,d.v=Cd(ei(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ww(d.j,null),d.g.ea(d.v)),d.F=Date.now(),vd(d)}Gw(l)}function wd(l){l.g&&(ym(l),l.g.cancel(),l.g=null)}function Vw(l){wd(l),l.u&&(a.clearTimeout(l.u),l.u=null),bd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Td(l){if(!_w(l.h)&&!l.s){l.s=!0;var d=l.Ga;Kc||YI(),Qc||(Kc(),Qc=!0),Qg.add(d,l),l.B=0}}function yk(l,d){return Cw(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=tl(g(l.Ga,l,d),zw(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new Vi(this,this.j,l),N=this.o;if(this.S&&(N?(N=y(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(A.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Uw(this,A,d),f=ei(this.I),it(f,"RID",l),it(f,"CVER",22),this.D&&it(f,"X-HTTP-Session-Id",this.D),dl(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(xw(N)))+"&"+d:this.m&&gm(f,this.m,N)),pm(this.h,A),this.Ua&&it(f,"TYPE","init"),this.P?(it(f,"$req",d),it(f,"SID","null"),A.T=!0,um(A,f,null)):um(A,f,d),this.G=2}}else this.G==3&&(l?jw(this,l):this.i.length==0||_w(this.h)||jw(this))};function jw(l,d){var f;d?f=d.l:f=l.U++;let m=ei(l.I);it(m,"SID",l.K),it(m,"RID",f),it(m,"AID",l.T),dl(l,m),l.m&&l.o&&gm(m,l.m,l.o),f=new Vi(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Uw(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),pm(l.h,f),um(f,m,d)}function dl(l,d){l.H&&Re(l.H,function(f,m){it(d,m,f)}),l.l&&ww({},function(f,m){it(d,m,f)})}function Uw(l,d,f){f=Math.min(l.i.length,f);var m=l.l?g(l.l.Na,l.l,l):null;e:{var A=l.i;let N=-1;for(;;){let Q=["count="+f];N==-1?0<f?(N=A[0].g,Q.push("ofs="+N)):N=0:Q.push("ofs="+N);let Ze=!0;for(let zt=0;zt<f;zt++){let Ue=A[zt].g,Jt=A[zt].map;if(Ue-=N,0>Ue)N=Math.max(0,A[zt].g-100),Ze=!1;else try{pk(Jt,Q,"req"+Ue+"_")}catch{m&&m(Jt)}}if(Ze){m=Q.join("&");break e}}}return l=l.i.splice(0,f),d.D=l,m}function Bw(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Kc||YI(),Qc||(Kc(),Qc=!0),Qg.add(d,l),l.v=0}}function vm(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=tl(g(l.Fa,l),zw(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,$w(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=tl(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),wd(this),$w(this))};function ym(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function $w(l){l.g=new Vi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=ei(l.qa);it(d,"RID","rpc"),it(d,"SID",l.K),it(d,"AID",l.T),it(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&it(d,"TO",l.ja),it(d,"TYPE","xmlhttp"),dl(l,d),l.m&&l.o&&gm(d,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Cd(ei(d)),f.m=null,f.P=!0,gw(f,l)}t.Za=function(){this.C!=null&&(this.C=null,wd(this),vm(this),sn(19))};function bd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Hw(l,d){var f=null;if(l.g==d){bd(l),ym(l),l.g=null;var m=2}else if(fm(l.h,d))f=d.D,Ew(l.h,d),m=1;else return;if(l.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var A=l.B;m=pd(),on(m,new dw(m,f)),Td(l)}else Bw(l);else if(A=d.s,A==3||A==0&&0<d.X||!(m==1&&yk(l,d)||m==2&&vm(l)))switch(f&&0<f.length&&(d=l.h,d.i=d.i.concat(f)),A){case 1:No(l,5);break;case 4:No(l,10);break;case 3:No(l,6);break;default:No(l,2)}}}function zw(l,d){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*d}function No(l,d){if(l.j.info("Error code "+d),d==2){var f=g(l.fb,l),m=l.Xa;let A=!m;m=new Po(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yd(m,"https"),Cd(m),A?dk(m.toString(),f):hk(m.toString(),f)}else sn(2);l.G=0,l.l&&l.l.sa(d),Gw(l),Vw(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function Gw(l){if(l.G=0,l.ka=[],l.l){let d=Iw(l.h);(d.length!=0||l.i.length!=0)&&(P(l.ka,d),P(l.ka,l.i),l.h.i.length=0,O(l.i),l.i.length=0),l.l.ra()}}function qw(l,d,f){var m=f instanceof Po?ei(f):new Po(f);if(m.g!="")d&&(m.g=d+"."+m.g),_d(m,m.s);else{var A=a.location;m=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var N=new Po(null);m&&yd(N,m),d&&(N.g=d),A&&_d(N,A),f&&(N.l=f),m=N}return f=l.D,d=l.ya,f&&d&&it(m,f,d),it(m,"VER",l.la),dl(l,m),m}function Ww(l,d,f){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new dt(new al({eb:f})):new dt(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kw(){}t=Kw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sd(){}Sd.prototype.g=function(l,d){return new Sn(l,d)};function Sn(l,d){Yt.call(this),this.g=new Lw(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!oe(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!oe(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Js(this)}w(Sn,Yt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){mm(this.g)},Sn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=im(l),l=f);d.i.push(new tk(d.Ya++,l)),d.G==3&&Td(d)},Sn.prototype.N=function(){this.g.l=null,delete this.j,mm(this.g),delete this.g,Sn.aa.N.call(this)};function Qw(l){sm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(let f in d){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}w(Qw,sm);function Yw(){am.call(this),this.status=1}w(Yw,am);function Js(l){this.g=l}w(Js,Kw),Js.prototype.ua=function(){on(this.g,"a")},Js.prototype.ta=function(l){on(this.g,new Qw(l))},Js.prototype.sa=function(l){on(this.g,new Yw)},Js.prototype.ra=function(){on(this.g,"b")},Sd.prototype.createWebChannel=Sd.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,I0=Si.createWebChannelTransport=function(){return new Sd},E0=Si.getStatEventTarget=function(){return pd()},C0=Si.Event=Mo,jp=Si.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gd.NO_ERROR=0,gd.TIMEOUT=8,gd.HTTP_ERROR=6,Vu=Si.ErrorCode=gd,hw.COMPLETE="complete",_0=Si.EventType=hw,aw.EventType=Xc,Xc.OPEN="a",Xc.CLOSE="b",Xc.ERROR="c",Xc.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,hc=Si.WebChannel=aw,R4=Si.FetchXmlHttpFactory=al,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,y0=Si.XhrIo=dt}).apply(typeof Vp<"u"?Vp:typeof self<"u"?self:typeof window<"u"?window:{});var qM="@firebase/firestore",WM="4.8.0";var Bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var Pc="11.10.0";var Os=new Hr("@firebase/firestore");function fc(){return Os.logLevel}function ie(t,...e){if(Os.logLevel<=Pe.DEBUG){let n=e.map(hI);Os.debug(`Firestore (${Pc}): ${t}`,...n)}}function Ai(t,...e){if(Os.logLevel<=Pe.ERROR){let n=e.map(hI);Os.error(`Firestore (${Pc}): ${t}`,...n)}}function Io(t,...e){if(Os.logLevel<=Pe.WARN){let n=e.map(hI);Os.warn(`Firestore (${Pc}): ${t}`,...n)}}function hI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Ux(t,r,n)}function Ux(t,e,n){let r=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ai(r),new Error(r)}function qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Ux(e,i,r)}function Te(t,e){return t}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Di=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var qp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},D0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}},A0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},R0=class{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Di,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>I(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Di)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new qp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}},M0=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},x0=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new M0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},P0=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);let r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function M4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Bx(){return new TextEncoder}var zu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=M4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function xe(t,e){return t<e?-1:t>e?1:0}function N0(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return xe(r,i);{let o=Bx(),s=x4(o.encode(KM(t,n)),o.encode(KM(e,n)));return s!==0?s:xe(r,i)}}n+=r>65535?2:1}return xe(t.length,e.length)}function KM(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function x4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return xe(t[n],e[n]);return xe(t.length,e.length)}function Ec(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var QM="__name__",Kp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return xe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):N0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}},ct=class t extends Kp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},P4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jn=class t extends Kp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return P4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QM}static keyField(){return new t([QM])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new ee(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ee(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var de=class t{constructor(e){this.path=e}static fromPath(e){return new t(ct.fromString(e))}static fromName(e){return new t(ct.fromString(e).popFirst(5))}static empty(){return new t(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ct(e.slice()))}};function $x(t,e,n){if(!n)throw new ee(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function N4(t,e,n,r){if(e===!0&&r===!0)throw new ee(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YM(t){if(!de.isDocumentKey(t))throw new ee(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JM(t){if(de.isDocumentKey(t))throw new ee(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Tg(t);throw new ee(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Rt(t,e){let n={typeString:t};return e&&(n.value=e),n}function nd(t,e){if(!Hx(t))throw new ee(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ee(U.INVALID_ARGUMENT,n);return!0}var ZM=-62135596800,XM=1e6,Mt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*XM);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ZM)throw new ee(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XM}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nd(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-ZM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:Rt("string",Mt._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};var De=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Mt(0,0))}static max(){return new t(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gu=-1,k0=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};k0.UNKNOWN_ID=-1;function k4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new Fs(i,de.empty(),e)}function O4(t){return new Fs(t.readTime,t.key,Gu)}var Fs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(De.min(),de.empty(),Gu)}static max(){return new t(De.max(),de.empty(),Gu)}};function F4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}var L4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",O0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Nc(t){return I(this,null,function*(){if(t.code!==U.FAILED_PRECONDITION||t.message!==L4)throw t;ie("LocalStore","Unexpectedly lost primary lease")})}var $=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function V4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kc(t){return t.name==="IndexedDbTransactionError"}var fI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),pI=-1;function bg(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function j4(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zx="";function U4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ex(e)),e=B4(t.get(n),e);return ex(e)}function B4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case zx:n+="";break;default:n+=o}}return n}function ex(t){return t+zx+""}var $4="remoteDocuments",Gx="owner";var qx="mutationQueues";var Wx="mutations";var Kx="documentMutations",H4="remoteDocumentsV14";var Qx="remoteDocumentGlobal";var Yx="targets";var Jx="targetDocuments";var Zx="targetGlobal",Xx="collectionParents";var eP="clientMetadata";var tP="bundles";var nP="namedQueries";var z4="indexConfiguration";var G4="indexState";var q4="indexEntries";var rP="documentOverlays";var W4="globals";var K4=[qx,Wx,Kx,$4,Yx,Gx,Zx,Jx,eP,Qx,Xx,tP,nP],$ue=[...K4,rP],Q4=[qx,Wx,Kx,H4,Yx,Gx,Zx,Jx,eP,Qx,Xx,tP,nP,rP],Y4=Q4,J4=[...Y4,z4,G4,q4];var Hue=[...J4,W4];function tx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var mt=class t{constructor(e,n){this.comparator=e,this.root=n||qr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}},vc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new qr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $t=class t{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qp(this.data.getIterator())}getIteratorFrom(e){return new Qp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Qp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gr=class t{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new t([])}unionWith(e){let n=new $t(jn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ec(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Yp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yp("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nn.EMPTY_BYTE_STRING=new nn("");var Z4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(t){if(qe(!!t,39018),typeof t=="string"){let e=0,n=Z4.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mi(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}var oP="server_timestamp",sP="__type__",aP="__previous_value__",cP="__local_write_time__";function gI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sP])===null||n===void 0?void 0:n.stringValue)===oP}function Sg(t){let e=t.mapValue.fields[aP];return gI(e)?Sg(e):e}function Wu(t){let e=Ri(t.mapValue.fields[cP].timestampValue);return new Mt(e.seconds,e.nanos)}var F0=class{constructor(e,n,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},Jp="(default)",Zp=class t{constructor(e,n){this.projectId=e,this.database=n||Jp}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Jp}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var mI="__type__",lP="__max__",Up={mapValue:{fields:{__type__:{stringValue:lP}}}},vI="__vector__",Ic="value";function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gI(t)?4:dP(t)?9007199254740991:uP(t)?10:11:ge(28295,{value:t})}function Qr(t,e){if(t===e)return!0;let n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ri(i.timestampValue),a=Ri(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Mi(i.bytesValue).isEqual(Mi(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return at(i.geoPointValue.latitude)===at(o.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return at(i.integerValue)===at(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=at(i.doubleValue),a=at(o.doubleValue);return s===a?qu(s)===qu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ec(t.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(tx(s)!==tx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Qr(s[c],a[c])))return!1;return!0})(t,e);default:return ge(52216,{left:t})}}function Ku(t,e){return(t.values||[]).find(n=>Qr(n,e))!==void 0}function wc(t,e){if(t===e)return 0;let n=wo(t),r=wo(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=at(o.integerValue||o.doubleValue),c=at(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return nx(t.timestampValue,e.timestampValue);case 4:return nx(Wu(t),Wu(e));case 5:return N0(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Mi(o),c=Mi(s);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=xe(a[u],c[u]);if(h!==0)return h}return xe(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=xe(at(o.latitude),at(s.latitude));return a!==0?a:xe(at(o.longitude),at(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return rx(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,h;let p=o.fields||{},g=s.fields||{},v=(a=p[Ic])===null||a===void 0?void 0:a.arrayValue,w=(c=g[Ic])===null||c===void 0?void 0:c.arrayValue,O=xe(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:rx(v,w)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Up.mapValue&&s===Up.mapValue)return 0;if(o===Up.mapValue)return 1;if(s===Up.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=N0(c[p],h[p]);if(g!==0)return g;let v=wc(a[c[p]],u[h[p]]);if(v!==0)return v}return xe(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ge(23264,{le:n})}}function nx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);let n=Ri(t),r=Ri(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function rx(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=wc(n[i],r[i]);if(o)return o}return xe(n.length,r.length)}function Tc(t){return L0(t)}function L0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Ri(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Mi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return de.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=L0(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${L0(n.fields[s])}`;return i+"}"})(t.mapValue):ge(61005,{value:t})}function Hp(t){switch(wo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Sg(t);return e?16+Hp(e):16;case 5:return 2*t.stringValue.length;case 6:return Mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Hp(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return zs(r.fields,(o,s)=>{i+=o.length+Hp(s)}),i})(t.mapValue);default:throw ge(13486,{value:t})}}function ix(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function yI(t){return!!t&&"arrayValue"in t}function ox(t){return!!t&&"nullValue"in t}function sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zp(t){return!!t&&"mapValue"in t}function uP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[mI])===null||n===void 0?void 0:n.stringValue)===vI}function Uu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return zs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lP}var Gue={mapValue:{fields:{[mI]:{stringValue:vI},[Ic]:{arrayValue:{}}}}};var Cr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(n)}setAll(e){let n=jn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Uu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());zp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zs(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Uu(this.value))}};function hP(t){let e=[];return zs(t.fields,(n,r)=>{let i=new jn([n]);if(zp(r)){let o=hP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gr(e)}var Er=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,De.min(),De.min(),De.min(),Cr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,De.min(),De.min(),Cr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,De.min(),De.min(),Cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var bc=class{constructor(e,n){this.position=e,this.inclusive=n}};function ax(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=de.comparator(de.fromName(s.referenceValue),n.key):r=wc(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function cx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qr(t.position[n],e.position[n]))return!1;return!0}var Ls=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function X4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Xp=class{},At=class t extends Xp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new U0(e,n,r):n==="array-contains"?new H0(e,r):n==="in"?new z0(e,r):n==="not-in"?new G0(e,r):n==="array-contains-any"?new q0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B0(e,r):new $0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wc(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(wc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ir=class t extends Xp{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return fP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function fP(t){return t.op==="and"}function pP(t){return ez(t)&&fP(t)}function ez(t){for(let e of t.filters)if(e instanceof Ir)return!1;return!0}function j0(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+Tc(t.value);if(pP(t))return t.filters.map(e=>j0(e)).join(",");{let e=t.filters.map(n=>j0(n)).join(",");return`${t.op}(${e})`}}function gP(t,e){return t instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&Qr(r.value,i.value)})(t,e):t instanceof Ir?(function(r,i){return i instanceof Ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gP(s,i.filters[a]),!0):!1})(t,e):void ge(19439)}function mP(t){return t instanceof At?(function(n){return`${n.field.canonicalString()} ${n.op} ${Tc(n.value)}`})(t):t instanceof Ir?(function(n){return n.op.toString()+" {"+n.getFilters().map(mP).join(" ,")+"}"})(t):"Filter"}var U0=class extends At{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){let n=de.comparator(e.key,this.key);return this.matchesComparison(n)}},B0=class extends At{constructor(e,n){super(e,"in",n),this.keys=vP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$0=class extends At{constructor(e,n){super(e,"not-in",n),this.keys=vP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function vP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}var H0=class extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return yI(n)&&Ku(n.arrayValue,this.value)}},z0=class extends At{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}},G0=class extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ku(this.value.arrayValue,n)}},q0=class extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!yI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ku(this.value.arrayValue,r))}};var W0=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function lx(t,e=null,n=[],r=[],i=null,o=null,s=null){return new W0(t,e,n,r,i,o,s)}function _I(t){let e=Te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>j0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),bg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Tc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Tc(r)).join(",")),e.Pe=n}return e.Pe}function CI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!X4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cx(t.startAt,e.startAt)&&cx(t.endAt,e.endAt)}function K0(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var To=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tz(t,e,n,r,i,o,s,a){return new To(t,e,n,r,i,o,s,a)}function EI(t){return new To(t)}function ux(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yP(t){return t.collectionGroup!==null}function Bu(t){let e=Te(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new $t(jn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ls(o,r))}),n.has(jn.keyField().canonicalString())||e.Te.push(new Ls(jn.keyField(),r))}return e.Te}function Wr(t){let e=Te(t);return e.Ie||(e.Ie=nz(e,Bu(t))),e.Ie}function nz(t,e){if(t.limitType==="F")return lx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ls(i.field,o)});let n=t.endAt?new bc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bc(t.startAt.position,t.startAt.inclusive):null;return lx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Q0(t,e){let n=t.filters.concat([e]);return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Y0(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dg(t,e){return CI(Wr(t),Wr(e))&&t.limitType===e.limitType}function _P(t){return`${_I(Wr(t))}|lt:${t.limitType}`}function pc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mP(i)).join(", ")}]`),bg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Tc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Tc(i)).join(",")),`Target(${r})`})(Wr(t))}; limitType=${t.limitType})`}function Ag(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):de.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Bu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=ax(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,Bu(r),i)||r.endAt&&!(function(s,a,c){let u=ax(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,Bu(r),i))})(t,e)}function rz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CP(t){return(e,n)=>{let r=!1;for(let i of Bu(t)){let o=iz(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iz(t,e,n){let r=t.field.isKeyField()?de.comparator(e.key,n.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?wc(c,u):ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}var xi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iP(this.inner)}size(){return this.innerSize}};var oz=new mt(de.comparator);function Pi(){return oz}var EP=new mt(de.comparator);function ju(...t){let e=EP;for(let n of t)e=e.insert(n.key,n);return e}function IP(t){let e=EP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ms(){return $u()}function wP(){return $u()}function $u(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}var sz=new mt(de.comparator),az=new $t(de.comparator);function ke(...t){let e=az;for(let n of t)e=e.add(n);return e}var cz=new $t(xe);function lz(){return cz}function II(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function TP(t){return{integerValue:""+t}}function uz(t,e){return j4(e)?TP(e):II(t,e)}var Sc=class{constructor(){this._=void 0}};function dz(t,e,n){return t instanceof Dc?(function(i,o){let s={fields:{[sP]:{stringValue:oP},[cP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gI(o)&&(o=Sg(o)),o&&(s.fields[aP]=o),{mapValue:s}})(n,e):t instanceof Vs?SP(t,e):t instanceof js?DP(t,e):(function(i,o){let s=bP(i,o),a=dx(s)+dx(i.Ee);return V0(s)&&V0(i.Ee)?TP(a):II(i.serializer,a)})(t,e)}function hz(t,e,n){return t instanceof Vs?SP(t,e):t instanceof js?DP(t,e):n}function bP(t,e){return t instanceof Ac?(function(r){return V0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Dc=class extends Sc{},Vs=class extends Sc{constructor(e){super(),this.elements=e}};function SP(t,e){let n=AP(e);for(let r of t.elements)n.some(i=>Qr(i,r))||n.push(r);return{arrayValue:{values:n}}}var js=class extends Sc{constructor(e){super(),this.elements=e}};function DP(t,e){let n=AP(e);for(let r of t.elements)n=n.filter(i=>!Qr(i,r));return{arrayValue:{values:n}}}var Ac=class extends Sc{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function dx(t){return at(t.integerValue||t.doubleValue)}function AP(t){return yI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fz(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Vs&&i instanceof Vs||r instanceof js&&i instanceof js?Ec(r.elements,i.elements,Qr):r instanceof Ac&&i instanceof Ac?Qr(r.Ee,i.Ee):r instanceof Dc&&i instanceof Dc})(t.transform,e.transform)}var J0=class{constructor(e,n){this.version=e,this.transformResults=n}},vo=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Rc=class{};function RP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qu(t.key,vo.none()):new Us(t.key,t.data,vo.none());{let n=t.data,r=Cr.empty(),i=new $t(jn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ni(t.key,r,new Gr(i.toArray()),vo.none())}}function pz(t,e,n){t instanceof Us?(function(i,o,s){let a=i.value.clone(),c=fx(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Ni?(function(i,o,s){if(!Gp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=fx(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(MP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Hu(t,e,n,r){return t instanceof Us?(function(o,s,a,c){if(!Gp(o.precondition,s))return a;let u=o.value.clone(),h=px(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ni?(function(o,s,a,c){if(!Gp(o.precondition,s))return a;let u=px(o.fieldTransforms,c,s),h=s.data;return h.setAll(MP(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Gp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function gz(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=bP(r.transform,i||null);o!=null&&(n===null&&(n=Cr.empty()),n.set(r.field,o))}return n||null}function hx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ec(r,i,(o,s)=>fz(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Us=class extends Rc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ni=class extends Rc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function MP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function fx(t,e,n){let r=new Map;qe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,hz(s,a,n[i]))}return r}function px(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,dz(o,s,e))}return r}var Qu=class extends Rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Z0=class extends Rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var X0=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&pz(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=wP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=RP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ec(this.mutations,e.mutations,(n,r)=>hx(n,r))&&Ec(this.baseMutations,e.baseMutations,(n,r)=>hx(n,r))}},eE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){qe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return sz})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var tE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var nE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var St,Fe;function mz(t){switch(t){case U.OK:return ge(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function xP(t){if(t===void 0)return Ai("GRPC error has no .code"),U.UNKNOWN;switch(t){case St.OK:return U.OK;case St.CANCELLED:return U.CANCELLED;case St.UNKNOWN:return U.UNKNOWN;case St.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case St.INTERNAL:return U.INTERNAL;case St.UNAVAILABLE:return U.UNAVAILABLE;case St.UNAUTHENTICATED:return U.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case St.NOT_FOUND:return U.NOT_FOUND;case St.ALREADY_EXISTS:return U.ALREADY_EXISTS;case St.PERMISSION_DENIED:return U.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case St.ABORTED:return U.ABORTED;case St.OUT_OF_RANGE:return U.OUT_OF_RANGE;case St.UNIMPLEMENTED:return U.UNIMPLEMENTED;case St.DATA_LOSS:return U.DATA_LOSS;default:return ge(39323,{code:t})}}(Fe=St||(St={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var gx=null;var vz=new bi([4294967295,4294967295],0);function mx(t){let e=Bx().encode(t),n=new v0;return n.update(e),new Uint8Array(n.digest())}function vx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bi([n,r],0),new bi([i,o],0)]}var rE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xs(`Invalid padding: ${n}`);if(r<0)throw new xs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xs(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=bi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(bi.fromNumber(r)));return i.compare(vz)===1&&(i=new bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=mx(e),[r,i]=vx(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=mx(e),[r,i]=vx(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},xs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var eg=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(De.min(),i,new mt(xe),Pi(),ke())}},Yu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ke(),ke(),ke())}};var yc=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},tg=class{constructor(e,n){this.targetId=e,this.De=n}},ng=class{constructor(e,n,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},rg=class{constructor(){this.ve=0,this.Ce=yx(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),r=ke();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ge(38017,{changeType:o})}}),new Yu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=yx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},iE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pi(),this.je=Bp(),this.Je=Bp(),this.He=new mt(xe)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(K0(o))if(r===0){let s=new de(o.path);this.Xe(n,s,Er.newNoDocument(s,De.min()))}else qe(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}gx?.ct((function(h,p,g,v,w){var O,P,j,oe,ue,ve;let tt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Re=p.unchangedNames;return Re&&(tt.bloomFilter={applied:w===0,hashCount:(O=Re?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(oe=(j=(P=Re?.bits)===null||P===void 0?void 0:P.bitmap)===null||j===void 0?void 0:j.length)!==null&&oe!==void 0?oe:0,padding:(ve=(ue=Re?.bits)===null||ue===void 0?void 0:ue.padding)!==null&&ve!==void 0?ve:0,mightContain:S=>{var y;return(y=v?.mightContain(S))!==null&&y!==void 0&&y}}),tt})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Mi(r).toUint8Array()}catch(c){if(c instanceof Yp)return Io("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new rE(s,i,o)}catch(c){return Io(c instanceof xs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&K0(a.target)){let c=new de(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Er.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ke();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new eg(e,n,this.He,this.ze,r);return this.ze=Pi(),this.je=Bp(),this.Je=Bp(),this.He=new mt(xe),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new rg,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new $t(xe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new $t(xe),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new rg),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Bp(){return new mt(de.comparator)}function yx(){return new mt(de.comparator)}var yz={asc:"ASCENDING",desc:"DESCENDING"},_z={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cz={and:"AND",or:"OR"},oE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function sE(t,e){return t.useProto3Json||bg(e)?e:{value:e}}function ig(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ez(t,e){return ig(t,e.toTimestamp())}function Kr(t){return qe(!!t,49232),De.fromTimestamp((function(n){let r=Ri(n);return new Mt(r.seconds,r.nanos)})(t))}function wI(t,e){return aE(t,e).canonicalString()}function aE(t,e){let n=(function(i){return new ct(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function NP(t){let e=ct.fromString(t);return qe(VP(e),10190,{key:e.toString()}),e}function cE(t,e){return wI(t.databaseId,e.path)}function w0(t,e){let n=NP(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(OP(n))}function kP(t,e){return wI(t.databaseId,e)}function Iz(t){let e=NP(t);return e.length===4?ct.emptyPath():OP(e)}function lE(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OP(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _x(t,e,n){return{name:cE(t,e),fields:n.value.mapValue.fields}}function wz(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),nn.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let h=u.code===void 0?U.UNKNOWN:xP(u.code);return new ee(h,u.message||"")})(s);n=new ng(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=w0(t,r.document.name),o=Kr(r.document.updateTime),s=r.document.createTime?Kr(r.document.createTime):De.min(),a=new Cr({mapValue:{fields:r.document.fields}}),c=Er.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new yc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=w0(t,r.document),o=r.readTime?Kr(r.readTime):De.min(),s=Er.newNoDocument(i,o),a=r.removedTargetIds||[];n=new yc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=w0(t,r.document),o=r.removedTargetIds||[];n=new yc([],o,i,null)}else{if(!("filter"in e))return ge(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new nE(i,o),a=r.targetId;n=new tg(a,s)}}return n}function Tz(t,e){let n;if(e instanceof Us)n={update:_x(t,e.key,e.value)};else if(e instanceof Qu)n={delete:cE(t,e.key)};else if(e instanceof Ni)n={update:_x(t,e.key,e.data),updateMask:Nz(e.fieldMask)};else{if(!(e instanceof Z0))return ge(16599,{Rt:e.type});n={verify:cE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Dc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof js)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ac)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ge(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Ez(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)})(t,e.precondition)),n}function bz(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Kr(i.updateTime):Kr(o);return s.isEqual(De.min())&&(s=Kr(o)),new J0(s,i.transformResults||[])})(n,e))):[]}function Sz(t,e){return{documents:[kP(t,e.path)]}}function Dz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kP(t,i);let o=(function(u){if(u.length!==0)return LP(Ir.create(u,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(h=>(function(g){return{field:gc(g.field),direction:Mz(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=sE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:n,parent:i}}function Az(t){let e=Iz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qe(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=FP(p);return g instanceof Ir&&pP(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(w){return new Ls(mc(w.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,bg(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){let g=!!p.before,v=p.values||[];return new bc(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){let g=!p.before,v=p.values||[];return new bc(v,g)})(n.endAt)),tz(e,i,s,o,a,"F",c,u)}function Rz(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=mc(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=mc(n.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=mc(n.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=mc(n.unaryFilter.field);return At.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return At.create(mc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ir.create(n.compositeFilter.filters.map(r=>FP(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(n.compositeFilter.op))})(t):ge(30097,{filter:t})}function Mz(t){return yz[t]}function xz(t){return _z[t]}function Pz(t){return Cz[t]}function gc(t){return{fieldPath:t.canonicalString()}}function mc(t){return jn.fromServerFormat(t.fieldPath)}function LP(t){return t instanceof At?(function(n){if(n.op==="=="){if(sx(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NAN"}};if(ox(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sx(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NOT_NAN"}};if(ox(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gc(n.field),op:xz(n.op),value:n.value}}})(t):t instanceof Ir?(function(n){let r=n.getFilters().map(i=>LP(i));return r.length===1?r[0]:{compositeFilter:{op:Pz(n.op),filters:r}}})(t):ge(54877,{filter:t})}function Nz(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ju=class t{constructor(e,n,r,i,o=De.min(),s=De.min(),a=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uE=class{constructor(e){this.gt=e}};function kz(t){let e=Az({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Y0(e,e.limit,"L"):e}var og=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(at(e.integerValue));else if("doubleValue"in e){let r=at(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),qu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Ri(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Mi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?dP(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):uP(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):ge(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ic,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(at(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),de.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};og.Ut=new og;var dE=class{constructor(){this.Dn=new hE}addToCollectionParentIndex(e,n){return this.Dn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Fs.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}},hE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $t(ct.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $t(ct.comparator)).toArray()}};var que=new Uint8Array(0);var Cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jP=41943040,Xn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(jP,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);var Zu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var Ex="LruGarbageCollector",Oz=1048576;function Ix([t,e],[n,r]){let i=xe(t,n);return i===0?xe(e,r):i}var fE=class{constructor(e){this.Tr=e,this.buffer=new $t(Ix),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Ix(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},pE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(Ex,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>I(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){kc(n)?ie(Ex,"Ignoring IndexedDB error during garbage collection: ",n):yield Nc(n)}yield this.Rr(3e5)}))}},gE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(fI.ue);let r=new fE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Cx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),fc()<=Pe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Fz(t,e){return new gE(t,e)}var mE=class{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var yE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hu(r.mutation,i,Gr.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){let i=Ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ju();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Pi(),s=$u(),a=(function(){return $u()})();return n.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Ni)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Hu(h.mutation,u,h.mutation.getFieldMask(),Mt.now())):s.set(u.key,Gr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var p;return a.set(u,new vE(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=$u(),i=new mt((s,a)=>s-a),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let h=r.get(c)||Gr.empty();h=a.applyToLocalView(u,h),r.set(c,h);let p=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,p=wP();h.forEach(g=>{if(!o.has(g)){let v=RP(n.get(g),r.get(g));v!==null&&p.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):$.resolve(Ms()),a=Gu,c=o;return s.next(u=>$.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ke())).next(h=>({batchId:a,changes:IP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ju();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,c=>{let u=(function(p,g){return new To(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Er.newInvalidDocument(h)))});let a=ju();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&Hu(h.mutation,u,Gr.empty(),Mt.now()),Ag(n,u)&&(a=a.insert(c,u))}),a})}};var _E=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return $.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Kr(i.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:kz(i.bundledQuery),readTime:Kr(i.readTime)}})(n)),$.resolve()}};var CE=class{constructor(){this.overlays=new mt(de.comparator),this.kr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ms();return $.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){let i=Ms(),o=n.length+1,s=new de(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new mt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Ms(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Ms(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return $.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new tE(n,r));let o=this.kr.get(n);o===void 0&&(o=ke(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var EE=class{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}};var Xu=class{constructor(){this.qr=new $t(Dt.Qr),this.$r=new $t(Dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Dt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Dt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new de(new ct([])),r=new Dt(n,e),i=new Dt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new de(new ct([])),r=new Dt(n,e),i=new Dt(n,e+1),o=ke();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Dt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Dt=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return de.comparator(e.key,n.key)||xe(e.Hr,n.Hr)}static Ur(e,n){return xe(e.Hr,n.Hr)||de.comparator(e.key,n.key)}};var IE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new $t(Dt.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new X0(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?pI:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(xe);return n.forEach(i=>{let o=new Dt(i,0),s=new Dt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),$.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;de.isDocumentKey(o)||(o=o.child(""));let s=new Dt(new de(o),0),a=new $t(xe);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),$.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){qe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return $.forEach(n.mutations,i=>{let o=new Dt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Dt(n,0),i=this.Yr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var wE=class{constructor(e){this.ni=e,this.docs=(function(){return new mt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Er.newInvalidDocument(n))}getEntries(e,n){let r=Pi();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Er.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Pi(),s=n.path,a=new de(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||F4(O4(h),r)<=0||(i.has(h.key)||Ag(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ge(9500)}ri(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TE(this)}getSize(e){return $.resolve(this.size)}},TE=class extends mE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var bE=class{constructor(e){this.persistence=e,this.ii=new xi(n=>_I(n),CI),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new Xu,this.targetCount=0,this._i=Zu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),$.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Zu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.hr(n),$.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),$.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.oi.containsKey(n))}};var sg=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new fI(0),this.ci=!1,this.ci=!0,this.li=new EE,this.referenceDelegate=e(this),this.hi=new bE(this),this.indexManager=new dE,this.remoteDocumentCache=(function(i){return new wE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new uE(n),this.Ti=new _E(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new IE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);let i=new SE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return $.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},SE=class extends O0{constructor(e){super(),this.currentSequenceNumber=e}},DE=class t{constructor(e){this.persistence=e,this.Ai=new Xu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw ge(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,r=>{let i=de.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return $.or([()=>$.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},ag=class t{constructor(e,n){this.persistence=e,this.gi=new xi(r=>U4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Fz(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return $.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hp(e.data.value)),n}Sr(e,n,r){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var AE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ke(),i=ke();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var RE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ME=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return QR()?8:V4(Ln())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new RE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(fc()<=Pe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",pc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(fc()<=Pe.DEBUG&&ie("QueryEngine","Query:",pc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(fc()<=Pe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",pc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(n))):$.resolve())}ps(e,n){if(ux(n))return $.resolve(null);let r=Wr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Y0(n,null,"F"),r=Wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ke(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,Y0(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return ux(n)||i.isEqual(De.min())?$.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?$.resolve(null):(fc()<=Pe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pc(n)),this.vs(e,s,n,k4(i,Gu)).next(a=>a))})}bs(e,n){let r=new $t(CP(e));return n.forEach((i,o)=>{Ag(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return fc()<=Pe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",pc(n)),this.gs.getDocumentsMatchingQuery(e,n,Fs.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var TI="LocalStore",Lz=3e8,xE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new mt(xe),this.Ms=new xi(o=>_I(o),CI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Vz(t,e,n,r){return new xE(t,e,n,r)}function UP(t,e){return I(this,null,function*(){let n=Te(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ke();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function jz(t,e){let n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){let p=u.batch,g=p.keys(),v=$.resolve();return g.forEach(w=>{v=v.next(()=>h.getEntry(c,w)).next(O=>{let P=u.docVersions.get(w);qe(P!==null,48541),O.version.compareTo(P)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),h.addEntry(O)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BP(t){let e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Uz(t,e){let n=Te(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),(function(O,P,j){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Lz?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,v,h)&&a.push(n.hi.updateTargetData(o,v))});let c=Pi(),u=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Bz(o,s,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(De.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}function Bz(t,e,n){let r=ke(),i=ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Pi();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ie(TI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function $z(t,e){let n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hz(t,e){let n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ju(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function PE(t,e,n){return I(this,null,function*(){let r=Te(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!kc(s))throw s;ie(TI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function wx(t,e,n){let r=Te(t),i=De.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,h){let p=Te(c),g=p.Ms.get(h);return g!==void 0?$.resolve(p.Fs.get(g)):p.hi.getTargetData(u,h)})(r,s,Wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:De.min(),n?o:ke())).next(a=>(zz(r,rz(e),a),{documents:a,qs:o})))}function zz(t,e,n){let r=t.xs.get(e)||De.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var cg=class{constructor(){this.activeTargetIds=lz()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var NE=class{constructor(){this.Fo=new cg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new cg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kE=class{xo(e){}shutdown(){}};var Tx="ConnectivityMonitor",lg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(Tx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ie(Tx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $p=null;function OE(){return $p===null?$p=(function(){return 268435456+Math.round(2147483648*Math.random())})():$p++,"0x"+$p.toString(16)}var T0="RestConnection",Gz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},FE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Jp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=OE(),a=this.Go(e,n.toUriEncodedString());ie(T0,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),h=Cs(u);return this.jo(e,a,c,r,h).then(p=>(ie(T0,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Io(T0,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=Gz[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var LE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var tn="WebChannelConnection",VE=class extends FE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=OE();return new Promise((a,c)=>{let u=new y0;u.setWithCredentials(!0),u.listenOnce(_0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vu.NO_ERROR:let p=u.getResponseJson();ie(tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Vu.TIMEOUT:ie(tn,`RPC '${e}' ${s} timed out`),c(new ee(U.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:let g=u.getStatus();if(ie(tn,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);let w=v?.error;if(w&&w.status&&w.message){let O=(function(j){let oe=j.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(oe)>=0?oe:U.UNKNOWN})(w.status);c(new ee(O,w.message))}else c(new ee(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ee(U.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ie(tn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);ie(tn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}P_(e,n,r){let i=OE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=I0(),a=E0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");ie(tn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.T_(p);let g=!1,v=!1,w=new LE({Ho:P=>{v?ie(tn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(ie(tn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ie(tn,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Yo:()=>p.close()}),O=(P,j,oe)=>{P.listen(j,ue=>{try{oe(ue)}catch(ve){setTimeout(()=>{throw ve},0)}})};return O(p,hc.EventType.OPEN,()=>{v||(ie(tn,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),O(p,hc.EventType.CLOSE,()=>{v||(v=!0,ie(tn,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),O(p,hc.EventType.ERROR,P=>{v||(v=!0,Io(tn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),w.__(new ee(U.UNAVAILABLE,"The operation could not be completed")))}),O(p,hc.EventType.MESSAGE,P=>{var j;if(!v){let oe=P.data[0];qe(!!oe,16349);let ue=oe,ve=ue?.error||((j=ue[0])===null||j===void 0?void 0:j.error);if(ve){ie(tn,`RPC '${e}' stream ${i} received error:`,ve);let tt=ve.status,Re=(function(C){let T=St[C];if(T!==void 0)return xP(T)})(tt),S=ve.message;Re===void 0&&(Re=U.INTERNAL,S="Unknown error status: "+tt+" with message "+ve.message),v=!0,w.__(new ee(Re,S)),p.close()}else ie(tn,`RPC '${e}' stream ${i} received:`,oe),w.a_(oe)}}),O(a,C0.STAT_EVENT,P=>{P.stat===jp.PROXY?ie(tn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===jp.NOPROXY&&ie(tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function b0(){return typeof document<"u"?document:null}function Rg(t){return new oE(t,!0)}var ug=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var bx="PersistentStream",dg=class{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ug(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return I(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return I(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return I(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new ee(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>I(this,null,function*(){this.state=0,this.start()}))}G_(e){return ie(bx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(bx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jE=class extends dg{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=wz(this.serializer,e),r=(function(o){if(!("targetChange"in o))return De.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?De.min():s.readTime?Kr(s.readTime):De.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=lE(this.serializer),n.addTarget=(function(o,s){let a,c=s.target;if(a=K0(c)?{documents:Sz(o,c)}:{query:Dz(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PP(o,s.resumeToken);let u=sE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(De.min())>0){a.readTime=ig(o,s.snapshotVersion.toTimestamp());let u=sE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=Rz(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=lE(this.serializer),n.removeTarget=e,this.k_(n)}},UE=class extends dg{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=bz(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=lE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Tz(this.serializer,r))};this.k_(n)}};var BE=class{},$E=class extends BE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ee(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,aE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(U.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,aE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(U.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},HE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ai(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Bs="RemoteStore",zE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>I(this,null,function*(){Gs(this)&&(ie(Bs,"Restarting streams for network reachability change."),yield(function(c){return I(this,null,function*(){let u=Te(c);u.Ia.add(4),yield rd(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield Mg(u)})})(this))}))}),this.Aa=new HE(r,i)}};function Mg(t){return I(this,null,function*(){if(Gs(t))for(let e of t.da)yield e(!0)})}function rd(t){return I(this,null,function*(){for(let e of t.da)yield e(!1)})}function $P(t,e){let n=Te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),AI(n)?DI(n):Oc(n).x_()&&SI(n,e))}function bI(t,e){let n=Te(t),r=Oc(n);n.Ta.delete(e),r.x_()&&HP(n,e),n.Ta.size===0&&(r.x_()?r.B_():Gs(n)&&n.Aa.set("Unknown"))}function SI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oc(t).H_(e)}function HP(t,e){t.Ra.$e(e),Oc(t).Y_(e)}function DI(t){t.Ra=new iE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Oc(t).start(),t.Aa.aa()}function AI(t){return Gs(t)&&!Oc(t).M_()&&t.Ta.size>0}function Gs(t){return Te(t).Ia.size===0}function zP(t){t.Ra=void 0}function qz(t){return I(this,null,function*(){t.Aa.set("Online")})}function Wz(t){return I(this,null,function*(){t.Ta.forEach((e,n)=>{SI(t,e)})})}function Kz(t,e){return I(this,null,function*(){zP(t),AI(t)?(t.Aa.la(e),DI(t)):t.Aa.set("Unknown")})}function Qz(t,e,n){return I(this,null,function*(){if(t.Aa.set("Online"),e instanceof ng&&e.state===2&&e.cause)try{yield(function(i,o){return I(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){ie(Bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hg(t,r)}else if(e instanceof yc?t.Ra.Ye(e):e instanceof tg?t.Ra.it(e):t.Ra.et(e),!n.isEqual(De.min()))try{let r=yield BP(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),HP(o,c);let p=new Ju(h.target,c,u,h.sequenceNumber);SI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){ie(Bs,"Failed to raise snapshot:",r),yield hg(t,r)}})}function hg(t,e,n){return I(this,null,function*(){if(!kc(e))throw e;t.Ia.add(1),yield rd(t),t.Aa.set("Offline"),n||(n=()=>BP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(null,null,function*(){ie(Bs,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Mg(t)}))})}function GP(t,e){return e().catch(n=>hg(t,n,e))}function xg(t){return I(this,null,function*(){let e=Te(t),n=bo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:pI;for(;Yz(e);)try{let i=yield $z(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Jz(e,i)}catch(i){yield hg(e,i)}qP(e)&&WP(e)})}function Yz(t){return Gs(t)&&t.Pa.length<10}function Jz(t,e){t.Pa.push(e);let n=bo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function qP(t){return Gs(t)&&!bo(t).M_()&&t.Pa.length>0}function WP(t){bo(t).start()}function Zz(t){return I(this,null,function*(){bo(t).na()})}function Xz(t){return I(this,null,function*(){let e=bo(t);for(let n of t.Pa)e.X_(n.mutations)})}function eG(t,e,n){return I(this,null,function*(){let r=t.Pa.shift(),i=eE.from(r,e,n);yield GP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield xg(t)})}function tG(t,e){return I(this,null,function*(){e&&bo(t).Z_&&(yield(function(r,i){return I(this,null,function*(){if((function(s){return mz(s)&&s!==U.ABORTED})(i.code)){let o=r.Pa.shift();bo(r).N_(),yield GP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield xg(r)}})})(t,e)),qP(t)&&WP(t)})}function Sx(t,e){return I(this,null,function*(){let n=Te(t);n.asyncQueue.verifyOperationInProgress(),ie(Bs,"RemoteStore received new credentials");let r=Gs(n);n.Ia.add(3),yield rd(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Mg(n)})}function nG(t,e){return I(this,null,function*(){let n=Te(t);e?(n.Ia.delete(2),yield Mg(n)):e||(n.Ia.add(2),yield rd(n),n.Aa.set("Unknown"))})}function Oc(t){return t.Va||(t.Va=(function(n,r,i){let o=Te(n);return o.ia(),new jE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:qz.bind(null,t),e_:Wz.bind(null,t),n_:Kz.bind(null,t),J_:Qz.bind(null,t)}),t.da.push(e=>I(null,null,function*(){e?(t.Va.N_(),AI(t)?DI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),zP(t))}))),t.Va}function bo(t){return t.ma||(t.ma=(function(n,r,i){let o=Te(n);return o.ia(),new UE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Zz.bind(null,t),n_:tG.bind(null,t),ea:Xz.bind(null,t),ta:eG.bind(null,t)}),t.da.push(e=>I(null,null,function*(){e?(t.ma.N_(),yield xg(t)):(yield t.ma.stop(),t.Pa.length>0&&(ie(Bs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var GE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function RI(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),kc(t))return new ee(U.UNAVAILABLE,`${e}: ${t}`);throw t}var fg=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=ju(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var pg=class{constructor(){this.fa=new mt(de.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ge(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Mc=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,fg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var qE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},WE=class{constructor(){this.queries=Dx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Te(n),o=i.queries;i.queries=Dx(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ee(U.ABORTED,"Firestore shutting down"))}};function Dx(){return new xi(t=>_P(t),Dg)}function rG(t,e){return I(this,null,function*(){let n=Te(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new qE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=RI(s,`Initialization of query '${pc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&MI(n)})}function iG(t,e){return I(this,null,function*(){let n=Te(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function oG(t,e){let n=Te(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&MI(n)}function sG(t,e,n){let r=Te(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function MI(t){t.Da.forEach(e=>{e.next()})}var KE,Ax;(Ax=KE||(KE={})).Fa="default",Ax.Cache="cache";var QE=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Mc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==KE.Cache}};var gg=class{constructor(e){this.key=e}},mg=class{constructor(e){this.key=e}},YE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=CP(e),this.eu=new fg(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new pg,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),v=Ag(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),P=!1;g&&v?g.data.isEqual(v.data)?w!==O&&(r.track({type:3,doc:v}),P=!0):this.iu(g,v)||(r.track({type:2,doc:v}),P=!0,(c&&this.Xa(v,c)>0||u&&this.Xa(v,u)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),P=!0):g&&!v&&(r.track({type:1,doc:g}),P=!0,(c||u)&&(a=!0)),P&&(v?(s=s.add(v),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(v,w){let O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{At:P})}};return O(v)-O(w)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Mc(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new pg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new mg(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new gg(r))}),n}uu(e){this.Ha=e.qs,this.Za=ke();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Mc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},xI="SyncEngine",JE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ZE=class{constructor(e){this.key=e,this.lu=!1}},XE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new xi(a=>_P(a),Dg),this.Tu=new Map,this.Iu=new Set,this.du=new mt(de.comparator),this.Eu=new Map,this.Au=new Xu,this.Ru={},this.Vu=new Map,this.mu=Zu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function aG(t,e,n=!0){return I(this,null,function*(){let r=XP(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield KP(r,e,n,!0),i})}function cG(t,e){return I(this,null,function*(){let n=XP(t);yield KP(n,e,!0,!1)})}function KP(t,e,n,r){return I(this,null,function*(){let i=yield Hz(t.localStore,Wr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield lG(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&$P(t.remoteStore,i),a})}function lG(t,e,n,r,i){return I(this,null,function*(){t.gu=(p,g,v)=>(function(O,P,j,oe){return I(this,null,function*(){let ue=P.view.nu(j);ue.Ds&&(ue=yield wx(O.localStore,P.query,!1).then(({documents:S})=>P.view.nu(S,ue)));let ve=oe&&oe.targetChanges.get(P.targetId),tt=oe&&oe.targetMismatches.get(P.targetId)!=null,Re=P.view.applyChanges(ue,O.isPrimaryClient,ve,tt);return Mx(O,P.targetId,Re._u),Re.snapshot})})(t,p,g,v);let o=yield wx(t.localStore,e,!0),s=new YE(e,o.qs),a=s.nu(o.documents),c=Yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);Mx(t,n,u._u);let h=new JE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot})}function uG(t,e,n){return I(this,null,function*(){let r=Te(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Dg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield PE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bI(r.remoteStore,i.targetId),eI(r,i.targetId)}).catch(Nc))):(eI(r,i.targetId),yield PE(r.localStore,i.targetId,!0))})}function dG(t,e){return I(this,null,function*(){let n=Te(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bI(n.remoteStore,r.targetId))})}function hG(t,e,n){return I(this,null,function*(){let r=_G(t);try{let i=yield(function(s,a){let c=Te(s),u=Mt.now(),h=a.reduce((v,w)=>v.add(w.key),ke()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Pi(),O=ke();return c.Os.getEntries(v,h).next(P=>{w=P,w.forEach((j,oe)=>{oe.isValidDocument()||(O=O.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(P=>{p=P;let j=[];for(let oe of a){let ue=gz(oe,p.get(oe.key).overlayedDocument);ue!=null&&j.push(new Ni(oe.key,ue,hP(ue.value.mapValue),vo.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,j,a)}).next(P=>{g=P;let j=P.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(v,P.batchId,j)})}).then(()=>({batchId:g.batchId,changes:IP(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new mt(xe)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,n),yield id(r,i.changes),yield xg(r.remoteStore)}catch(i){let o=RI(i,"Failed to persist write");n.reject(o)}})}function QP(t,e){return I(this,null,function*(){let n=Te(t);try{let r=yield Uz(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?qe(s.lu,14607):i.removedDocuments.size>0&&(qe(s.lu,42227),s.lu=!1))}),yield id(n,r,e)}catch(r){yield Nc(r)}})}function Rx(t,e,n){let r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Te(s);c.onlineState=a;let u=!1;c.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(u=!0)}),u&&MI(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fG(t,e,n){return I(this,null,function*(){let r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new mt(de.comparator);s=s.insert(o,Er.newNoDocument(o,De.min()));let a=ke().add(o),c=new eg(De.min(),new Map,new mt(xe),s,a);yield QP(r,c),r.du=r.du.remove(o),r.Eu.delete(e),PI(r)}else yield PE(r.localStore,e,!1).then(()=>eI(r,e,n)).catch(Nc)})}function pG(t,e){return I(this,null,function*(){let n=Te(t),r=e.batch.batchId;try{let i=yield jz(n.localStore,e);JP(n,r,null),YP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield id(n,i)}catch(i){yield Nc(i)}})}function gG(t,e,n){return I(this,null,function*(){let r=Te(t);try{let i=yield(function(s,a){let c=Te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>(qe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})})(r.localStore,e);JP(r,e,n),YP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield id(r,i)}catch(i){yield Nc(i)}})}function YP(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function JP(t,e,n){let r=Te(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function eI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||ZP(t,r)})}function ZP(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(bI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),PI(t))}function Mx(t,e,n){for(let r of n)r instanceof gg?(t.Au.addReference(r.key,e),mG(t,r)):r instanceof mg?(ie(xI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||ZP(t,r.key)):ge(19791,{yu:r})}function mG(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ie(xI,"New document in limbo: "+n),t.Iu.add(r),PI(t))}function PI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new de(ct.fromString(e)),r=t.mu.next();t.Eu.set(r,new ZE(n)),t.du=t.du.insert(n,r),$P(t.remoteStore,new Ju(Wr(EI(n.path)),r,"TargetPurposeLimboResolution",fI.ue))}}function id(t,e,n){return I(this,null,function*(){let r=Te(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);let p=AE.Es(c.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,u){return I(this,null,function*(){let h=Te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(u,g=>$.forEach(g.Is,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>$.forEach(g.ds,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!kc(p))throw p;ie(TI,"Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let v=h.Fs.get(g),w=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,O)}}})})(r.localStore,o))})}function vG(t,e){return I(this,null,function*(){let n=Te(t);if(!n.currentUser.isEqual(e)){ie(xI,"User change. New user:",e.toKey());let r=yield UP(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ee(U.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield id(n,r.Bs)}})}function yG(t,e){let n=Te(t),r=n.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function XP(t){let e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fG.bind(null,e),e.hu.J_=oG.bind(null,e.eventManager),e.hu.pu=sG.bind(null,e.eventManager),e}function _G(t){let e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gG.bind(null,e),e}var e1=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return I(this,null,function*(){this.serializer=Rg(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Vz(this.persistence,new ME,n.initialUser,this.serializer)}Du(n){return new sg(DE.Vi,this.serializer)}bu(n){return new NE}terminate(){return I(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),tI=class extends e1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){qe(this.persistence.referenceDelegate instanceof ag,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new pE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new sg(r=>ag.Vi(r,n),this.serializer)}};var CG=(()=>{class t{initialize(n,r){return I(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Rx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vG.bind(null,this.syncEngine),yield nG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new WE})()}createDatastore(n){let r=Rg(n.databaseInfo.databaseId),i=(function(s){return new VE(s)})(n.databaseInfo);return(function(s,a,c,u){return new $E(s,a,c,u)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,c){return new zE(i,o,s,a,c)})(this.localStore,this.datastore,n.asyncQueue,r=>Rx(this.syncEngine,r,0),(function(){return lg.C()?new lg:new kE})())}createSyncEngine(n,r){return(function(o,s,a,c,u,h,p){let g=new XE(o,s,a,c,u,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var n,r;yield(function(o){return I(this,null,function*(){let s=Te(o);ie(Bs,"RemoteStore shutting down."),s.Ia.add(5),yield rd(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var nI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var So="FirestoreClient",rI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=zu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){ie(So,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ie(So,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=RI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function S0(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),ie(So,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(null,null,function*(){r.isEqual(i)||(yield UP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Io("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Io("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function xx(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield EG(t);ie(So,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Sx(e.remoteStore,i)),t._onlineComponents=e})}function EG(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(So,"Using user provided OfflineComponentProvider");try{yield S0(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),yield S0(t,new e1)}}else ie(So,"Using default OfflineComponentProvider"),yield S0(t,new tI(void 0));return t._offlineComponents})}function t1(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(So,"Using user provided OnlineComponentProvider"),yield xx(t,t._uninitializedComponentsProvider._online)):(ie(So,"Using default OnlineComponentProvider"),yield xx(t,new CG))),t._onlineComponents})}function IG(t){return t1(t).then(e=>e.syncEngine)}function Px(t){return I(this,null,function*(){let e=yield t1(t),n=e.eventManager;return n.onListen=aG.bind(null,e.syncEngine),n.onUnlisten=uG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dG.bind(null,e.syncEngine),n})}function n1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Nx=new Map;var r1="firestore.googleapis.com",kx=!0,vg=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r1,this.ssl=kx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:kx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Oz)throw new ee(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new D0;switch(r.type){case"firstParty":return new x0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=Nx.get(n);r&&(ie("ComponentProvider","Removing Datastore"),Nx.delete(n),r.terminate())})(this),Promise.resolve()}};function i1(t,e,n,r={}){var i;t=Ns(t,xc);let o=Cs(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(PC(`https://${c}`),NC("Firestore",!0)),s.host!==r1&&s.host!==c&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Es(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Bt.MOCK_USER;else{h=zR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ee(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Bt(g)}t._authCredentials=new A0(new qp(h,p))}}var $s=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Kt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nd(n,t._jsonSchema))return new t(e,r||null,new de(ct.fromString(n.referencePath)))}};Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Rt("string",Kt._jsonSchemaVersion),referencePath:Rt("string")};var yo=class t extends $s{constructor(e,n,r){super(e,n,EI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new de(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function o1(t,e,...n){if(t=wn(t),$x("collection","path",e),t instanceof xc){let r=ct.fromString(e,...n);return JM(r),new yo(t,null,r)}{if(!(t instanceof Kt||t instanceof yo))throw new ee(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ct.fromString(e,...n));return JM(r),new yo(t.firestore,null,r)}}function s1(t,e,...n){if(t=wn(t),arguments.length===1&&(e=zu.newId()),$x("doc","path",e),t instanceof xc){let r=ct.fromString(e,...n);return YM(r),new Kt(t,null,new de(r))}{if(!(t instanceof Kt||t instanceof yo))throw new ee(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ct.fromString(e,...n));return YM(r),new Kt(t.firestore,t instanceof yo?t.converter:null,new de(r))}}var Ox="AsyncQueue",yg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ug(this,"async_queue_retry"),this.oc=()=>{let r=b0();r&&ie(Ox,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=b0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=b0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Di;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return I(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!kc(e))throw e;ie(Ox,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ai("INTERNAL UNHANDLED ERROR: ",Fx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=GE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ge(47125,{hc:Fx(this.tc)})}verifyOperationInProgress(){}Pc(){return I(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function Fx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function Lx(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Hs=class extends xc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yg(e),this._firestoreClient=void 0,yield e}})}};function a1(t,e){let n=typeof t=="object"?t:lc(),r=typeof t=="string"?t:e||Jp,i=Cp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=$R("firestore");o&&i1(i,...o)}return i}function c1(t){if(t._terminated)throw new ee(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wG(t),t._firestoreClient}function wG(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,c,u,h){return new F0(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,n1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new rI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}var _o=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(nn.fromBase64String(e))}catch(n){throw new ee(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nd(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};_o._jsonSchemaVersion="firestore/bytes/1.0",_o._jsonSchema={type:Rt("string",_o._jsonSchemaVersion),bytes:Rt("string")};var ed=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _g=class{constructor(e){this._methodName=e}};var Co=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(nd(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Co._jsonSchemaVersion="firestore/geoPoint/1.0",Co._jsonSchema={type:Rt("string",Co._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};var Eo=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nd(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new ee(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Eo._jsonSchemaVersion="firestore/vectorValue/1.0",Eo._jsonSchema={type:Rt("string",Eo._jsonSchemaVersion),vectorValues:Rt("object")};var TG=/^__.*__$/,iI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new Us(e,this.data,n,this.fieldTransforms)}};function l1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ec:t})}}var oI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Cg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(l1(this.Ec)&&TG.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},sI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rg(e)}Dc(e,n,r,i=!1){return new oI({Ec:e,methodName:n,bc:r,path:jn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function u1(t){let e=t._freezeSettings(),n=Rg(t._databaseId);return new sI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bG(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);f1("Data must be an object, but it was:",s,r);let a=d1(r,s),c,u;if(o.merge)c=new Gr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=DG(e,p,n);if(!s.contains(g))throw new ee(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);RG(h,g)||h.push(g)}c=new Gr(h),u=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=s.fieldTransforms;return new iI(new Cr(a),c,u)}function SG(t,e,n,r=!1){return NI(n,t.Dc(r?4:3,e))}function NI(t,e){if(h1(t=wn(t)))return f1("Unsupported field value:",e,t),d1(t,e);if(t instanceof _g)return(function(r,i){if(!l1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=NI(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Mt.fromDate(r);return{timestampValue:ig(i.serializer,o)}}if(r instanceof Mt){let o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ig(i.serializer,o)}}if(r instanceof Co)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _o)return{bytesValue:PP(i.serializer,r._byteString)};if(r instanceof Kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Eo)return(function(s,a){return{mapValue:{fields:{[mI]:{stringValue:vI},[Ic]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return II(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Tg(r)}`)})(t,e)}function d1(t,e){let n={};return iP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(t,(r,i)=>{let o=NI(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function h1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof Co||t instanceof _o||t instanceof Kt||t instanceof _g||t instanceof Eo)}function f1(t,e,n){if(!h1(n)||!Hx(n)){let r=Tg(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function DG(t,e,n){if((e=wn(e))instanceof ed)return e._internalPath;if(typeof e=="string")return p1(t,e);throw Cg("Field path arguments must be of type string or ",t,!1,void 0,n)}var AG=new RegExp("[~\\*/\\[\\]]");function p1(t,e,n){if(e.search(AG)>=0)throw Cg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ed(...e.split("."))._internalPath}catch{throw Cg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cg(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ee(U.INVALID_ARGUMENT,a+t+c)}function RG(t,e){return t.some(n=>n.isEqual(e))}var Eg=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(kI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},aI=class extends Eg{data(){return super.data()}};function kI(t,e){return typeof e=="string"?p1(t,e):e instanceof ed?e._internalPath:e._delegate._internalPath}function MG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var td=class{},Ig=class extends td{};function g1(t,e,...n){let r=[];e instanceof td&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(c=>c instanceof lI).length,a=o.filter(c=>c instanceof cI).length;if(s>1||s>0&&a>0)throw new ee(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var cI=class t extends Ig{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return v1(e._query,n),new $s(e.firestore,e.converter,Q0(e._query,n))}_parse(e){let n=u1(e.firestore);return(function(o,s,a,c,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jx(p,h);let w=[];for(let O of p)w.push(Vx(c,o,O));g={arrayValue:{values:w}}}else g=Vx(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jx(p,h),g=SG(a,s,p,h==="in"||h==="not-in");return At.create(u,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var lI=class t extends td{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ir.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)v1(s,c),s=Q0(s,c)})(e._query,n),new $s(e.firestore,e.converter,Q0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var uI=class t extends Ig{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new ee(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ls(o,s)})(e._query,this._field,this._direction);return new $s(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new To(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function m1(t,e="asc"){let n=e,r=kI("orderBy",t);return uI._create(r,n)}function Vx(t,e,n){if(typeof(n=wn(n))=="string"){if(n==="")throw new ee(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yP(e)&&n.indexOf("/")!==-1)throw new ee(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ct.fromString(n));if(!de.isDocumentKey(r))throw new ee(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ix(t,new de(r))}if(n instanceof Kt)return ix(t,n._key);throw new ee(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tg(n)}.`)}function jx(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function v1(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ee(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var dI=class{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return zs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ic].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>at(s.doubleValue));return new Eo(o)}convertGeoPoint(e){return new Co(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Sg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){let n=Ri(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ct.fromString(e);qe(VP(r),9688,{name:e});let i=new Zp(r.get(1),r.get(3)),o=new de(r.popFirst(5));return i.isEqual(n)||Ai(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function xG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ps=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ks=class t extends Eg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(kI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",ks._jsonSchema={type:Rt("string",ks._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};var _c=class extends ks{data(e={}){return super.data(e)}},Cc=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _c(this._firestore,this._userDataWriter,r.key,r,new Ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new _c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ps(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new _c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ps(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:PG(a.type),doc:c,oldIndex:u,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function PG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}Cc._jsonSchemaVersion="firestore/querySnapshot/1.0",Cc._jsonSchema={type:Rt("string",Cc._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};var wg=class extends dI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}};function y1(t,e,n){t=Ns(t,Kt);let r=Ns(t.firestore,Hs),i=xG(t.converter,e,n);return E1(r,[bG(u1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vo.none())])}function _1(t){return E1(Ns(t.firestore,Hs),[new Qu(t._key,vo.none())])}function C1(t,...e){var n,r,i;t=wn(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Lx(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Lx(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,u,h;if(t instanceof Kt)u=Ns(t.firestore,Hs),h=EI(t._key.path),c={next:p=>{e[s]&&e[s](NG(u,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ns(t,$s);u=Ns(p.firestore,Hs),h=p._query;let g=new wg(u);c={next:v=>{e[s]&&e[s](new Cc(u,g,p,v))},error:e[s+1],complete:e[s+2]},MG(t._query)}return(function(g,v,w,O){let P=new nI(O),j=new QE(v,P,w);return g.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return rG(yield Px(g),j)})),()=>{P.Ou(),g.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return iG(yield Px(g),j)}))}})(c1(u),h,a,c)}function E1(t,e){return(function(r,i){let o=new Di;return r.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return hG(yield IG(r),i,o)})),o.promise})(c1(t),e)}function NG(t,e,n){let r=n.docs.get(e._key),i=new wg(t);return new ks(t,i,e._key,r,new Ps(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Pc=i})(cc),yr(new hn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hs(new R0(r.getProvider("auth-internal")),new P0(s,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zp(u.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ct(qM,WM,e),Ct(qM,WM,"esm2017")})();var qs=class{constructor(e){return e}},I1="firestore",OI=class{constructor(){return dc(I1)}};var FI=new ae("angularfire2.firestore-instances");function kG(t,e){let n=wp(I1,t,e);return n&&new qs(n)}function OG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qs(r)}}var FG={provide:OI,deps:[[new Nr,FI]]},LG={provide:qs,useFactory:kG,deps:[[new Nr,FI],Ss]};function w1(t,...e){return Ct("angularfire",Ts.full,"fst"),ar([LG,FG,{provide:FI,useFactory:OG(t),multi:!0,deps:[Le,Xe,bs,xu,[new Nr,Lp],[new Nr,bp],...e]}])}var T1=Vn(o1,!0,2);var LI=Vn(_1,!0,2);var Pg=Vn(s1,!0,2);var b1=Vn(a1,!0);var S1=Vn(C1,!0);var D1=Vn(m1,!0,2),A1=Vn(g1,!0,2);var R1=Vn(y1,!0,2);var Ot=(()=>{let e=class e{};e.KEY_ACTIVE_APP_ID="KEY_ACTIVE_APP_ID",e.KEY_SETTINGS="KEY_SETTINGS",e.KEY_SETTINGS_ACTIVE_TAB="KEY_SETTINGS_ACTIVE_TAB",e.KEY_GOOGLE_REFRESH_TOKEN="KEY_GOOGLE_REFRESH_TOKEN",e.KEY_GOOGLE_DATA_FILE_ID="KEY_GOOGLE_DATA_FILE_ID";let t=e;return t})();var xt=class{constructor(){}static isLargeScreen(){return window.innerWidth>1280}static isElementVisible(e,n){if(e){let r=e.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(n?n.clientHeight:window.innerHeight)&&r.right<=(n?n.clientWidth:window.innerWidth)}}};var Z=class t{static isEmpty(e){return!e||!Array.isArray(e)||e.length==0}static includes(e,n,r){if(!this.isEmpty(e)&&n)return r?e.map(i=>r(i)).includes(r(n)):e.includes(n)}static push(e,n){if(Array.isArray(e))if(Array.isArray(n))for(let r of n)r!=null&&!e.includes(r)&&e.push(r);else n!=null&&!e.includes(n)&&e.push(n)}static remove(e,n,r){if(!this.isEmpty(e)&&n!==void 0){let i=e.length;if(Array.isArray(n)){if(n.length>0)if(r){let o=e.map(s=>r(s));for(let s of n.map(a=>r(a)))this._remove(e,s,o)}else for(let o of n)this._remove(e,o)}else r?this._remove(e,r(n),e.map(o=>r(o))):this._remove(e,n);return i!=e.length}}static _remove(e,n,r){let i=(r||e).indexOf(n);i!=-1&&(r?.splice(i,1),e.splice(i,1))}static toggle(e,n,r=!1){Array.isArray(e)&&n!=null&&(e.includes(n)?this._remove(e,n):r?e.unshift(n):e.push(n))}static distinct(e,n){if(!this.isEmpty(e)){let r=[],i=new Map,o;for(let s of e)o=n(s),i.has(o)||(i.set(o,!0),r.push(s));return r}return[]}static intersection(e,n){return t.isEmpty(e)?[]:t.isEmpty(n)?[]:e.filter(r=>n.includes(r))}static getFirst(e){if(!this.isEmpty(e))return e[0]}static isFirst(e,n){if(!this.isEmpty(e)&&n)return n==e[0]}static makeFirst(e,n){e&&n&&(this._remove(e,n),e.unshift(n))}static getLast(e){if(!this.isEmpty(e))return e[e.length-1]}static isLast(e,n){if(!this.isEmpty(e)&&n)return n==e[e.length-1]}static makeLast(e,n){e&&n&&(this._remove(e,n),e.push(n))}static move(e,n,r){e&&n&&Number.isInteger(r)&&(this._remove(e,n),e.splice(r,0,n))}static getPrevious(e,n,r=!1){if(!this.isEmpty(e))return e[e.indexOf(n)-1]||(r?e[e.length-1]:void 0)}static findPrevious(e,n,r,i=!1){if(!this.isEmpty(e)){let o=e.indexOf(n),s=o;for(;s>0;)if(r(e[--s]))return e[s];if(i){for(s=e.length-1;s>o;)if(r(e[--s]))return e[s]}return}}static getNext(e,n,r=!1){if(!this.isEmpty(e))return e[e.indexOf(n)+1]||(r?e[0]:void 0)}static findNext(e,n,r,i=!1){if(!this.isEmpty(e)){let o=e.indexOf(n),s=o;for(;s<e.length-1;)if(r(e[++s]))return e[s];if(i){for(s=0;s<o;)if(r(e[++s]))return e[s]}return}}static findClosest(e,n,r){if(!this.isEmpty(e)){let i=e.indexOf(n),o=0,s,a=!0,c=!0;for(;a||c;)if(o++,c&&(s=e[i+o],s||(c=!1),s&&(!r||r(s)))||a&&(s=e[i-o],s||(a=!1),s&&(!r||r(s))))return s;return}}static getRandom(e,n){return this.isEmpty(e)?null:e.length==1?e[0]:(e=e.slice(),this.remove(e,n),e[Math.floor(Math.random()*e.length)])}static nearestRightFirst(e,n,r){if(n+1<e.length){for(let i=n+1;i<e.length;i++)if(!r||r(e[i]))return e[i]}if(n>0){for(let i=n-1;i>-1;i--)if(!r||r(e[i]))return e[i]}return null}static shuffle(e){let n=e.length,r;for(;n!=0;)r=Math.floor(Math.random()*n),n--,[e[n],e[r]]=[e[r],e[n]];return e}static except(e,...n){return e||(e=[]),e.filter(r=>!n.includes(r))}};var Fc=(()=>{let e=class e{constructor(){this.stack=[]}register(r){Z.makeFirst(this.stack,r)}unregister(r){Z.remove(this.stack,r)}next(r){let i=r.target.nodeName;if(!["BODY","VIDEO"].includes(i))switch(r.key){case"Enter":Z.getFirst(this.stack)?.processKeyboardShortcut(r);break;case"Escape":document.activeElement.blur();break}else Z.getFirst(this.stack)?.processKeyboardShortcut(r)}requestFocus(r){Z.makeFirst(this.stack,r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jG=["content"];function UG(t,e){if(t&1){let n=J();pe(0,"div",8,0),Be("click",function(){L(n);let i=_(2);return V(i.overlayClick())}),he()}}function BG(t,e){if(t&1&&(pe(0,"span",10),Y(1),he()),t&2){let n=_(3);b(),Me(n.getTitle())}}function $G(t,e){if(t&1){let n=J();pe(0,"i",14),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),he()}if(t&2){let n=_(2).$implicit,r=_(4);Rf("icon-button "+r.getButtonIconClass(n)),ce("disabled",r.isDisabled(n))}}function HG(t,e){if(t&1){let n=J();pe(0,"div",15),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),Y(1),he()}if(t&2){let n=_(2).$implicit,r=_(4);ce("disabled",r.isDisabled(n)),b(),Me(r.getButtonText(n))}}function zG(t,e){if(t&1&&(G(0,$G,1,4,"i",12),G(1,HG,2,3,"div",13)),t&2){let n=_().$implicit;q(n.iconClass?0:-1),b(),q(n.text?1:-1)}}function GG(t,e){if(t&1&&G(0,zG,2,2),t&2){let n=e.$implicit,r=_(4);q(r.isHidden(n)?-1:0)}}function qG(t,e){if(t&1&&(pe(0,"div",11),te(1,GG,1,1,null,null,Cn),he()),t&2){let n=_(2);b(),ne(n.headerButtons)}}function WG(t,e){if(t&1){let n=J();pe(0,"div",9,1),Be("mousedown",function(i){L(n);let o=Pn(1),s=_(2);return V(s.onHeaderMouseDown(i,o))}),G(2,BG,2,1,"span",10),G(3,qG,3,0,"div",11),he()}if(t&2){let n=_();b(2),q(n.title?2:-1),b(),q(n.headerButtons?3:-1)}}function KG(t,e){if(t&1&&(G(0,UG,2,0,"div",6),G(1,WG,4,2,"div",7)),t&2){let n=e;q(n.hideClickOverlay?-1:0),b(),q(n.title||n.headerButtons?1:-1)}}function QG(t,e){t&1&&(pe(0,"div",4),Af(1,null,2),he())}function YG(t,e){if(t&1){let n=J();pe(0,"i",14),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),he()}if(t&2){let n=_(2).$implicit,r=_(2);Rf("icon-button "+r.getButtonIconClass(n)),ce("disabled",r.isDisabled(n))}}function JG(t,e){if(t&1){let n=J();pe(0,"div",15),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),Y(1),he()}if(t&2){let n=_(2).$implicit,r=_(2);ce("disabled",r.isDisabled(n)),b(),Me(r.getButtonText(n))}}function ZG(t,e){if(t&1&&(G(0,YG,1,4,"i",12),G(1,JG,2,3,"div",13)),t&2){let n=_().$implicit;q(n.iconClass?0:-1),b(),q(n.text?1:-1)}}function XG(t,e){if(t&1&&G(0,ZG,2,2),t&2){let n=e.$implicit,r=_(2);q(r.isHidden(n)?-1:0)}}function e6(t,e){t&1&&(pe(0,"div",5),te(1,XG,1,1,null,null,Cn),he()),t&2&&(b(),ne(e.footerButtons))}var M1=(()=>{let e=class e{constructor(r,i,o,s){this.elementRef=r,this.dialogService=i,this.keyboardShortcutService=o,this.ngZone=s,this.ScreenUtils=xt,this.hidden=!0,this.borderWarning=!1,this.isMouseDown=!1,this.onDocumentMouseMove=a=>{if(xt.isLargeScreen()){if(a.preventDefault(),!this.isMouseDown)return;let c=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();(this.left===void 0||this.left===null)&&(this.left=c.left),(this.top===void 0||this.top===null)&&(this.top=c.top);let u=a.clientX-c.left;a.movementX<0&&u<this.mouseDownOffsetX?(this.left=this.left+a.movementX,this.left<0&&(this.left=0)):a.movementX>0&&u>this.mouseDownOffsetX&&(this.left=this.left+a.movementX,this.left+c.width>window.innerWidth+1&&(this.left=window.innerWidth-c.width));let h=a.clientY-c.top;a.movementY<0&&h<this.mouseDownOffsetY?(this.top=this.top+a.movementY,this.top<0&&(this.top=0)):a.movementY>0&&h>this.mouseDownOffsetY&&(this.top=this.top+a.movementY,this.top+c.height>window.innerHeight+2&&(this.top=window.innerHeight-c.height+2)),this.applyPosition()}},this.onDocumentMouseUp=()=>{if(xt.isLargeScreen()){if(this.isMouseDown=!1,this.hasPosition()){let a=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();this.persistCenterFromRect(a)}this.detachDragListeners()}},this.result=new Promise(a=>this.resolve=a)}ngAfterViewInit(){this.dialogElement=this.elementRef.nativeElement.querySelector(".dialog-container");let r=this.containerRef.createComponent(this.contentComponentType);this.contentComponentInstance=r.instance,this.contentComponentInstance.inputs=this.inputs,this.contentComponentInstance.resolve=this.resolve;let i=r.instance.configuration?.waitForContent;i?(this.hidden=!0,i.finally(()=>{this.hidden=!1,this.schedulePositionRestore()})):this.hidden=!1,this.keyboardShortcutService.register(this.contentComponentInstance),this.result.finally(()=>{this.keyboardShortcutService.unregister(this.contentComponentInstance),r.destroy()}),r.changeDetectorRef.detectChanges(),i||this.schedulePositionRestore()}ngOnDestroy(){this.detachDragListeners()}isHidden(r){return r.hidden&&r.hidden()}isDisabled(r){return r.disabled&&r.disabled()}getTitle(){let r=this.contentComponentInstance.configuration;return r?typeof r.title=="function"?r.title():r.title:""}getButtonText(r){return typeof r.text=="function"?r.text():r.text}getButtonIconClass(r){return typeof r.iconClass=="function"?r.iconClass():r.iconClass}onHeaderMouseDown(r,i){if(xt.isLargeScreen()&&r.buttons==1&&r.target==i){if(this.isMouseDown=!0,this.mouseDownOffsetX=r.offsetX,this.mouseDownOffsetY=r.offsetY,!this.hasPosition()){let o=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();this.top=o.top,this.left=o.left,this.applyPosition(),this.persistCenterFromRect(o)}this.attachDragListeners()}}attachDragListeners(){this.ngZone.runOutsideAngular(()=>{let r=this.elementRef.nativeElement.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove),r.addEventListener("mouseup",this.onDocumentMouseUp)})}detachDragListeners(){let r=this.elementRef.nativeElement.ownerDocument;r.removeEventListener("mousemove",this.onDocumentMouseMove),r.removeEventListener("mouseup",this.onDocumentMouseUp)}applyPosition(){xt.isLargeScreen()&&this.dialogElement&&(this.top!==void 0&&(this.dialogElement.style.top=`${this.top}px`),this.left!==void 0&&(this.dialogElement.style.left=`${this.left}px`))}hasPosition(){return Number.isFinite(this.top)&&Number.isFinite(this.left)}schedulePositionRestore(){xt.isLargeScreen()&&requestAnimationFrame(()=>this.restorePositionFromStorage())}resetPosition(){this.top=null,this.left=null,this.schedulePositionRestore()}restorePositionFromStorage(){if(!this.dialogElement||this.hasPosition())return;let r=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();if(!r.width||!r.height)return;let i=this.getStoredCenter();if(i){this.left=i.x-r.width/2,this.top=i.y-r.height/2,this.applyPosition();return}this.centerInViewport(r)}getStoredCenter(){let r=this.getStoredNumber(this.getStorageKey(".centerX")),i=this.getStoredNumber(this.getStorageKey(".centerY"));return r===null||i===null?null:{x:r,y:i}}getStorageKey(r){return`${this.contentComponentType.name}${r}`}getStoredNumber(r){let i=window.localStorage.getItem(r);if(i===null)return null;let o=Number.parseFloat(i);return Number.isFinite(o)?o:null}persistCenterFromRect(r){let i=r.left+r.width/2,o=r.top+r.height/2;window.localStorage.setItem(this.getStorageKey(".centerX"),i.toString()),window.localStorage.setItem(this.getStorageKey(".centerY"),o.toString())}centerInViewport(r){let i=window.innerWidth/2,o=window.innerHeight/2;this.left=Math.max(0,i-r.width/2),this.top=Math.max(0,o-r.height/2),this.applyPosition()}overlayClick(){let r=this.dialogService.containerComponentInstances.indexOf(this);for(let i=r;i<this.dialogService.containerComponentInstances.length;i++){let o=this.dialogService.containerComponentInstances[i];o.borderWarning=!0,setTimeout(()=>o.borderWarning=!1,500)}}onClick(r){this.keyboardShortcutService.requestFocus(this.contentComponentInstance)}};e.\u0275fac=function(i){return new(i||e)(k(jt),k(Qe),k(Fc),k(Le))},e.\u0275cmp=se({type:e,selectors:[["app-dialog-container"]],viewQuery:function(i,o){if(i&1&&ql(jG,5,gr),i&2){let s;Wl(s=Kl())&&(o.containerRef=s.first)}},hostVars:2,hostBindings:function(i,o){i&1&&B("click",function(a){return o.onClick(a)}),i&2&&ce("display-none",o.hidden)},decls:4,vars:9,consts:[["overlay",""],["header",""],["content",""],[1,"dialog-container"],[1,"content"],[1,"buttons"],[1,"overlay-effect"],[1,"header"],[1,"overlay-effect",3,"click"],[1,"header",3,"mousedown"],[1,"header-title"],[1,"flex","gap"],[3,"class","disabled"],[1,"button",3,"disabled"],[3,"click"],[1,"button",3,"click"]],template:function(i,o){if(i&1&&(pe(0,"div",3),G(1,KG,2,2),G(2,QG,3,0,"div",4),G(3,e6,3,0,"div",5),he()),i&2){let s,a;gt("top",o.top,"px")("left",o.left,"px"),ce("border-warning",o.borderWarning),b(),q((s=o.contentComponentInstance==null?null:o.contentComponentInstance.configuration)?1:-1,s),b(),q(o.contentComponentType?2:-1),b(),q((a=o.contentComponentInstance==null?null:o.contentComponentInstance.configuration)?3:-1,a)}},styles:["[_nghost-%COMP%]{width:100vw;height:100vh;position:absolute;top:0;left:0;z-index:200;overflow:hidden;pointer-events:none}.dialog-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;border:1px solid var(--color-border);border-radius:.66666666rem;min-width:300px;background-color:var(--color-surface-100);pointer-events:all}@media screen and (max-width: 1280px){.dialog-container[_ngcontent-%COMP%]{max-width:calc(100% - .66666666rem);max-height:calc(100% - .66666666rem);top:50%!important;left:50%!important;transform:translate(-50%,-50%)}}@media screen and (min-width: 1280px){.dialog-container[_ngcontent-%COMP%]{max-width:80%;max-height:80%}}.dialog-container.border-warning[_ngcontent-%COMP%]{border-color:var(--color-negative)}.dialog-container[_ngcontent-%COMP%]:not(.border-warning){transition:border-color .5s}.dialog-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;overflow:auto;justify-content:center}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none;padding:1rem;gap:.33333333rem;border-bottom:1px solid var(--color-border)}.header[_ngcontent-%COMP%]:has(i){padding:.33333333rem .33333333rem .33333333rem 1rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{pointer-events:none}.buttons[_ngcontent-%COMP%]{gap:.33333333rem;padding:.33333333rem;height:3rem;display:flex;align-items:center;justify-content:space-evenly;border-top:1px solid var(--color-border)}.button[_ngcontent-%COMP%]{flex:1;transition:.5s;white-space:nowrap;min-width:auto}.overlay-effect[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:-1;-webkit-user-select:none;user-select:none}"]});let t=e;return t})();var rt=class{submit(){this.close()}processKeyboardShortcut(e){if(e.target.nodeName=="BODY")switch(e.key){case"Enter":this.submit();return;case"Escape":this.close();return}}};function t6(t,e){if(t&1&&(pe(0,"span"),Y(1),he()),t&2){let n=e.$implicit;b(),Me(n)}}var x1=(()=>{let e=class e extends rt{ngOnInit(){this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>this.inputs.positiveButtonText||"Yes",click:()=>this.resolve(!0)},{text:()=>this.inputs.negativeButtonText||"Cancel",click:()=>this.resolve(!1)}]}}submit(){this.resolve(!0)}close(){this.resolve(!1)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=se({type:e,selectors:[["app-confirmation-dialog"]],features:[Ve],decls:3,vars:0,consts:[[1,"container"]],template:function(i,o){i&1&&(pe(0,"div",0),te(1,t6,2,1,"span",null,Yn),he()),i&2&&(b(),ne(o.inputs.messages))},styles:[".container[_ngcontent-%COMP%]{padding:1rem}"]});let t=e;return t})();var U1=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(k(so),k(jt))};static \u0275dir=kt({type:t})}return t})(),zI=(()=>{class t extends U1{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275dir=kt({type:t,features:[Ve]})}return t})(),Lg=new ae("");var n6={provide:Lg,useExisting:si(()=>er),multi:!0};function r6(){let t=Jn()?Jn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var i6=new ae(""),er=(()=>{class t extends U1{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!r6())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(k(so),k(jt),k(i6,8))};static \u0275dir=kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[$a([n6]),Ve]})}return t})();var o6=new ae(""),s6=new ae("");function B1(t){return t!=null}function $1(t){return ls(t)?st(t):t}function H1(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function z1(t,e){return e.map(n=>n(t))}function a6(t){return!t.validate}function G1(t){return t.map(e=>a6(e)?e:n=>e.validate(n))}function c6(t){if(!t)return null;let e=t.filter(B1);return e.length==0?null:function(n){return H1(z1(n,e))}}function q1(t){return t!=null?c6(G1(t)):null}function l6(t){if(!t)return null;let e=t.filter(B1);return e.length==0?null:function(n){let r=z1(n,e).map($1);return $m(r).pipe(Ie(H1))}}function W1(t){return t!=null?l6(G1(t)):null}function P1(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function u6(t){return t._rawValidators}function d6(t){return t._rawAsyncValidators}function jI(t){return t?Array.isArray(t)?t:[t]:[]}function kg(t,e){return Array.isArray(t)?t.includes(e):t===e}function N1(t,e){let n=jI(e);return jI(t).forEach(i=>{kg(n,i)||n.push(i)}),n}function k1(t,e){return jI(e).filter(n=>!kg(t,n))}var Og=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=q1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=W1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},UI=class extends Og{name;get formDirective(){return null}get path(){return null}},ld=class extends Og{_parent=null;name=null;valueAccessor=null},BI=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},h6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Rhe=Ce(H({},h6),{"[class.ng-submitted]":"isSubmitted"}),tr=(()=>{class t extends BI{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(k(ld,2))};static \u0275dir=kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ce("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ve]})}return t})();var od="VALID",Ng="INVALID",Lc="PENDING",sd="DISABLED",Ws=class{},Fg=class extends Ws{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ad=class extends Ws{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},cd=class extends Ws{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Vc=class extends Ws{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var $I=class extends Ws{source;constructor(e){super(),this.source=e}};function f6(t){return(Vg(t)?t.validators:t)||null}function p6(t){return Array.isArray(t)?q1(t):t||null}function g6(t,e){return(Vg(e)?e.asyncValidators:t)||null}function m6(t){return Array.isArray(t)?W1(t):t||null}function Vg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var HI=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ln(this.statusReactive)}set status(e){ln(()=>this.statusReactive.set(e))}_status=vi(()=>this.statusReactive());statusReactive=nt(void 0);get valid(){return this.status===od}get invalid(){return this.status===Ng}get pending(){return this.status==Lc}get disabled(){return this.status===sd}get enabled(){return this.status!==sd}errors;get pristine(){return ln(this.pristineReactive)}set pristine(e){ln(()=>this.pristineReactive.set(e))}_pristine=vi(()=>this.pristineReactive());pristineReactive=nt(!0);get dirty(){return!this.pristine}get touched(){return ln(this.touchedReactive)}set touched(e){ln(()=>this.touchedReactive.set(e))}_touched=vi(()=>this.touchedReactive());touchedReactive=nt(!1);get untouched(){return!this.touched}_events=new Et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(N1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(N1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(k1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(k1(e,this._rawAsyncValidators))}hasValidator(e){return kg(this._rawValidators,e)}hasAsyncValidator(e){return kg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ce(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new cd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new cd(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ce(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ad(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ad(!0,r))}markAsPending(e={}){this.status=Lc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ce(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=sd,this.errors=null,this._forEachChild(i=>{i.disable(Ce(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fg(this.value,r)),this._events.next(new Vc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ce(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=od,this._forEachChild(r=>{r.enable(Ce(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ce(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===od||this.status===Lc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fg(this.value,n)),this._events.next(new Vc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ce(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sd:od}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Lc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=$1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Vc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?sd:this.errors?Ng:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lc)?Lc:this._anyControlsHaveStatus(Ng)?Ng:od}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ad(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new cd(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=p6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=m6(this._rawAsyncValidators)}};var K1=new ae("",{providedIn:"root",factory:()=>GI}),GI="always";function v6(t,e){return[...e.path,t]}function y6(t,e,n=GI){C6(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),E6(t,e),w6(t,e),I6(t,e),_6(t,e)}function O1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function _6(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function C6(t,e){let n=u6(t);e.validator!==null?t.setValidators(P1(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=d6(t);e.asyncValidator!==null?t.setAsyncValidators(P1(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();O1(e._rawValidators,i),O1(e._rawAsyncValidators,i)}function E6(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Q1(t,e)})}function I6(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Q1(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Q1(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function w6(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function T6(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function b6(t){return Object.getPrototypeOf(t.constructor)===zI}function S6(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===er?n=o:b6(o)?r=o:i=o}),i||r||n||null}function F1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function L1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var D6=class extends HI{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(f6(n),g6(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(L1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new $I(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){F1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){F1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){L1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var A6={provide:ld,useExisting:si(()=>Bn)},V1=Promise.resolve(),Bn=(()=>{class t extends ld{_changeDetectorRef;callSetDisabledState;control=new D6;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ut;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=S6(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),T6(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){y6(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){V1.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&P_(r);V1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?v6(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(k(UI,9),k(o6,10),k(s6,10),k(Lg,10),k(lo,8),k(K1,8))};static \u0275dir=kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[$a([A6]),Ve,La]})}return t})();var R6={provide:Lg,useExisting:si(()=>jg),multi:!0};function Y1(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function M6(t){return t.split(":")[0]}var jg=(()=>{class t extends zI{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=F(Qn).injector;destroyRef=F(yn);cdr=F(lo);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Bl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Y1(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=M6(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275dir=kt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$a([R6]),Ve]})}return t})(),J1=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Y1(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(k(jt),k(so),k(jg,9))};static \u0275dir=kt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),x6={provide:Lg,useExisting:si(()=>Z1),multi:!0};function j1(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function P6(t){return t.split(":")[0]}var Z1=(()=>{class t extends zI{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=P6(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275dir=kt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$a([x6]),Ve]})}return t})(),X1=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(j1(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(j1(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(k(jt),k(so),k(Z1,9))};static \u0275dir=kt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var N6=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=mi({type:t});static \u0275inj=br({})}return t})();var rn=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:K1,useValue:n.callSetDisabledState??GI}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=mi({type:t});static \u0275inj=br({imports:[N6]})}return t})();var eN=(()=>{let e=class e extends rt{ngOnInit(){this.value=this.inputs.defaultValue,this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.resolve(void 0)},{text:()=>this.inputs.positiveButtonText||"Submit",disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}canSubmit(){return!(this.inputs.validationFn&&!this.inputs.validationFn(this.value))}submit(){this.canSubmit()&&this.resolve(this.value)}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=se({type:e,selectors:[["app-input-dialog"]],features:[Ve],decls:1,vars:2,consts:[["autofocus","",3,"ngModelChange","ngModel","placeholder"]],template:function(i,o){i&1&&(R(0,"input",0),In("ngModelChange",function(a){return Nn(o.value,a)||(o.value=a),a}),x()),i&2&&(En("ngModel",o.value),X("placeholder",o.inputs.placeholder))},dependencies:[rn,er,tr,Bn],styles:["[_nghost-%COMP%]{display:block;width:650px;padding:.33333333rem}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();function k6(t,e){if(t&1&&(pe(0,"span"),Y(1),he()),t&2){let n=e.$implicit;b(),Me(n)}}var tN=(()=>{let e=class e extends rt{ngOnInit(){this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"OK",click:()=>this.resolve()}]}}close(){this.resolve()}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=se({type:e,selectors:[["app-message-dialog"]],features:[Ve],decls:3,vars:0,consts:[[1,"container"]],template:function(i,o){i&1&&(pe(0,"div",0),te(1,k6,2,1,"span",null,Yn),he()),i&2&&(b(),ne(o.inputs.messages))},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}"]});let t=e;return t})();function O6(t,e){if(t&1){let n=J();R(0,"div",7),B("click",function(){let i=L(n).$implicit,o=_();return V(o.toggle(i))}),K(1,"i",8),R(2,"span"),Y(3),x(),K(4,"i",9),x()}if(t&2){let n=e.$implicit,r=_();b(3),Me(r.getText(n))}}function F6(t,e){t&1&&K(0,"div",4)}function L6(t,e){if(t&1){let n=J();R(0,"div",7),B("click",function(){let i=L(n).$implicit,o=_();return V(o.toggle(i))}),K(1,"i",9),R(2,"span"),Y(3),x(),K(4,"i",9),x()}if(t&2){let n=e.$implicit,r=_();ce("disabled",r.inputs.disableFn&&r.inputs.disableFn(n,r.selection))("unavailable",!r.isAvailable(n)),b(3),Me(r.getText(n))}}var nN=(()=>{let e=class e extends rt{constructor(){super(...arguments),this.query="",this.selection=[]}ngOnInit(){this.selection=this.inputs.defaultSelection?[...this.inputs.defaultSelection]:[],this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:"Cancel",click:()=>this.resolve(void 0)},{text:()=>{let r;return this.inputs.positiveButtonText?typeof this.inputs.positiveButtonText=="string"?r=this.inputs.positiveButtonText:r=this.inputs.positiveButtonText():r="Submit",r+" ("+this.selection.length+")"},disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}isAvailable(r){return this.getText(r).toLocaleLowerCase().includes(this.query.toLocaleLowerCase())}getText(r){return this.inputs.getText?this.inputs.getText(r):r}toggle(r){Z.toggle(this.selection,r,!0),this.inputs.onSelectionChange&&this.inputs.onSelectionChange(this.selection,r)}canSubmit(){return!0}submit(){this.canSubmit()&&this.resolve(this.selection)}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=se({type:e,selectors:[["app-multi-select-dialog"]],features:[Ve],decls:9,vars:2,consts:[["placeholder","Search","autofocus","",3,"ngModelChange","ngModel"],[1,"content-container"],[1,"y-scrollbar-container","selection-container"],[1,"flex-1","flex","gap","align-items-center","cursor-pointer","hover-brighten"],[1,"h-separator"],[1,"y-scrollbar-container","options-container"],[1,"flex-1","flex","gap","align-items-center","cursor-pointer","hover-brighten",3,"disabled","unavailable"],[1,"flex-1","flex","gap","align-items-center","cursor-pointer","hover-brighten",3,"click"],[1,"fa-solid","fa-check",2,"margin-top","1px"],[1,"fa-solid","fa-check","opacity-0"]],template:function(i,o){i&1&&(R(0,"input",0),In("ngModelChange",function(a){return Nn(o.query,a)||(o.query=a),a}),x(),R(1,"div",1)(2,"div",2),te(3,O6,5,1,"div",3,Yn),x(),G(5,F6,1,0,"div",4),R(6,"div",5),te(7,L6,5,5,"div",6,Yn),x()()),i&2&&(En("ngModel",o.query),b(3),ne(o.selection),b(2),q(o.selection.length?5:-1),b(2),ne(o.inputs.options))},dependencies:[rn,er,tr,Bn],styles:["[_nghost-%COMP%]{display:block;padding:.33333333rem .33333333rem 0;line-height:24px;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]{height:50vh}}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .selection-container[_ngcontent-%COMP%]{max-height:50%}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]{height:0;opacity:0;pointer-events:none}"]});let t=e;return t})();function V6(t,e){if(t&1&&(R(0,"option",1),Y(1),x()),t&2){let n=_();X("ngValue",null)("selected",!n.value),b(),Me(n.inputs.nullOption)}}function j6(t,e){if(t&1&&(R(0,"option",1),Y(1),x()),t&2){let n=e.$implicit,r=_();X("ngValue",n)("selected",r.value===n),b(),Me(r.getText(n))}}var rN=(()=>{let e=class e extends rt{ngOnInit(){this.value=this.inputs.defaultValue,this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.resolve(void 0)},{text:()=>this.inputs.positiveButtonText||"Submit",disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}getText(r){return this.inputs.getText?this.inputs.getText(r):r}canSubmit(){return this.value!==void 0}submit(){this.canSubmit()&&this.resolve(this.value)}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=se({type:e,selectors:[["app-select-dialog"]],features:[Ve],decls:4,vars:2,consts:[[3,"ngModelChange","ngModel"],[3,"ngValue","selected"]],template:function(i,o){i&1&&(R(0,"select",0),In("ngModelChange",function(a){return Nn(o.value,a)||(o.value=a),a}),G(1,V6,2,3,"option",1),te(2,j6,2,3,"option",1,Yn),x()),i&2&&(En("ngModel",o.value),b(),q(o.inputs.nullOption!==void 0?1:-1),b(),ne(o.inputs.options))},dependencies:[rn,J1,X1,jg,tr,Bn],styles:["[_nghost-%COMP%]{display:block;padding:.33333333rem}[_nghost-%COMP%]   select[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();var Tn=class{static format(e,...n){do e=e.replace("%s",n.shift()||"");while(e.includes("%s"));return e}static capitalize(e){if(!this.isEmpty(e))return e.substring(0,1).toUpperCase()+e.substring(1)}static isEmpty(e){return!e||typeof e!="string"||e.trim().length==0}static getWordCount(e){return e.split(new RegExp(`[^ /
]+`,"g")).length-1}};var Ug=(()=>{let e=class e{constructor(r){this.elementRef=r,this.create=new ut}ngOnInit(){this.create.emit(this.elementRef)}};e.\u0275fac=function(i){return new(i||e)(k(jt))},e.\u0275dir=kt({type:e,selectors:[["","create",""]],outputs:{create:"create"}});let t=e;return t})();function U6(t,e){if(t&1){let n=J();R(0,"div",1)(1,"span"),Y(2),x(),R(3,"i",3),B("click",function(){let i=L(n).$implicit,o=_();return V(o.remove(i))}),x()()}if(t&2){let n=e.$implicit;b(2),Me(n)}}var iN=(()=>{let e=class e extends rt{constructor(){super(...arguments),this.values=[],this.inputValue=""}ngOnInit(){this.values=[...this.inputs.defaultValues],this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.resolve(void 0)},{text:()=>this.inputs.positiveButtonText||"Submit",disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}remove(r){Z.remove(this.values,r)}onInputKeyPress(r){r.key==="Enter"&&(Tn.isEmpty(this.inputValue)?this.resolve(this.values):(this.values.push(this.inputValue),this.inputValue=""))}canSubmit(){return!0}submit(){this.canSubmit()&&(Tn.isEmpty(this.inputValue)||this.values.push(this.inputValue),this.resolve(this.values))}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=se({type:e,selectors:[["app-multi-input-dialog"]],features:[Ve],decls:4,vars:1,consts:[["tagsInput",""],[1,"tag"],["placeholder","Start typing and press enter",3,"ngModelChange","keypress","create","focus","ngModel"],[1,"fa-solid","fa-times","cursor-pointer","hover-brighten",3,"click"]],template:function(i,o){if(i&1){let s=J();te(0,U6,4,1,"div",1,Yn),R(2,"input",2,0),In("ngModelChange",function(c){return L(s),Nn(o.inputValue,c)||(o.inputValue=c),V(c)}),B("keypress",function(c){return L(s),V(o.onInputKeyPress(c))})("create",function(){L(s);let c=Pn(3);return V(c.focus())})("focus",function(){L(s);let c=Pn(3);return V(c.select())}),x()}i&2&&(ne(o.values),b(2),En("ngModel",o.inputValue))},dependencies:[rn,er,tr,Bn,Ug],styles:["[_nghost-%COMP%]{width:650px;padding:.33333333rem;display:flex;flex-direction:row;flex-wrap:wrap;gap:.33333333rem}[_nghost-%COMP%]   .tag[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:.33333333rem;padding:.2rem .33333333rem;display:flex;align-items:center;gap:.2rem}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:220px;min-height:0;border:none;caret-color:var(--color-text-secondary);font-variant-numeric:tabular-nums;-webkit-user-select:none;user-select:none}"]});let t=e;return t})();var Qe=(()=>{let e=class e{constructor(r,i){this.applicationRef=r,this.injector=i,this.containerComponentInstances=[]}createMessage(r){return this.create(tN,r)}createConfirmation(r){return this.create(x1,r)}createInput(r){return this.create(eN,r)}createMultiInput(r){return this.create(iN,r)}createSelect(r){return this.create(rN,r)}createMultiSelect(r){return this.create(nN,r)}create(r,i){let o=Z.getLast(this.containerComponentInstances.filter(c=>c.contentComponentType==r));if(o&&!o.contentComponentInstance.configuration.allowMultiple)return;let s=hA(M1,{environmentInjector:this.injector}),a=s.instance;return a.contentComponentType=r,a.inputs=i,a.result.finally(()=>{Z.remove(this.containerComponentInstances,a),this.applicationRef.detachView(s.hostView),s.destroy()}),o&&(a.top=o.top+10,a.left=o.left+10),this.containerComponentInstances.push(a),this.applicationRef.attachView(s.hostView),document.body.firstElementChild.appendChild(s.location.nativeElement),s.changeDetectorRef.detectChanges(),a.result}};e.\u0275fac=function(i){return new(i||e)(z(Qn),z(ot))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ye=(()=>{let e=class e{constructor(r){this.dialogService=r,this.headerSections=["start","center","end"],this.headerState=this.createEmptyHeader(),this.headerCollector=nt(this.createEmptyHeader()),this.header=this.headerCollector.asReadonly(),this.appSettings=nt(this.loadAppSettings()),this.applicationSettings={id:"app",label:"Application",items:[{id:"dark-theme",type:"toggle",label:"Dark Theme",getValue:()=>this.darkTheme,onChange:i=>this.darkTheme=i},{id:"reduce-data-usage",type:"toggle",label:"Reduce Data Usage",getValue:()=>this.reduceDataUsage,onChange:i=>this.reduceDataUsage=i},{id:"reset-dialog-positions",type:"action",label:"Reset Dialog Positions",onClick:()=>this.resetDialogPositions()}]},this.moduleSettingsProviders=[],this.loading=nt(!0),this.changes=nt(void 0),this.errors=nt(void 0),this.applyTheme(this.appSettings().darkTheme),this.persistSettings(this.appSettings()),this.updateHeader()}get darkTheme(){return this.appSettings().darkTheme}set darkTheme(r){this.setAppSettings({darkTheme:r})}toggleTheme(){this.setAppSettings({darkTheme:!this.appSettings().darkTheme})}get reduceDataUsage(){return this.appSettings().reduceDataUsage}set reduceDataUsage(r){this.setAppSettings({reduceDataUsage:r})}addHeaderButton(r,i,o="last"){this.addHeaderButtons(r,[i],o)}addHeaderButtons(r,i,o=r==="end"?"first":"last"){let a=(this.headerState[r]??[]).filter(c=>!i.some(u=>u.id===c.id));o==="first"?this.headerState[r]=[...i,...a]:this.headerState[r]=[...a,...i],this.updateHeader()}removeHeaderButtons(r){let i=!1;this.headerSections.forEach(o=>{let s=this.headerState[o]??[],a=s.filter(c=>!r.includes(c.id));a.length!==s.length&&(this.headerState[o]=a,i=!0)}),i&&this.updateHeader()}registerModuleSettings(r){let i=this.moduleSettingsProviders.findIndex(o=>o.id===r.id);i>=0?this.moduleSettingsProviders[i]=r:this.moduleSettingsProviders.push(r)}getRegisteredModuleSettings(){return this.moduleSettingsProviders}getApplicationSettings(){return this.applicationSettings}getApplicationSettingsState(){return this.appSettings.asReadonly()}getApplicationSettingsItems(){return this.applicationSettings.items}updateHeader(){this.headerCollector.set({start:[...this.headerState.start??[]],center:[...this.headerState.center??[]],end:[...this.headerState.end??[]]})}createEmptyHeader(){return{start:[],center:[],end:[]}}setAppSettings(r){let i=H(H({},this.appSettings()),r);this.appSettings.set(i),this.persistSettings(i),this.applyTheme(i.darkTheme)}loadAppSettings(){let r=localStorage.getItem(Ot.KEY_SETTINGS);if(r)try{let i=JSON.parse(r);if(i&&typeof i.darkTheme=="boolean"&&typeof i.reduceDataUsage=="boolean")return i}catch{}return{darkTheme:!1,reduceDataUsage:!1}}persistSettings(r){localStorage.setItem(Ot.KEY_SETTINGS,JSON.stringify(r))}applyTheme(r){document.body.classList.toggle("dark-theme",r),document.body.classList.toggle("light-theme",!r),document.body.style.colorScheme=r?"dark":"light"}resetDialogPositions(){for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);(i.endsWith(".centerX")||i.endsWith(".centerY"))&&localStorage.removeItem(i)}this.dialogService.containerComponentInstances.forEach(r=>r.resetPosition())}};e.\u0275fac=function(i){return new(i||e)(z(Qe))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qI=(t,e)=>e.id;function B6(t,e){if(t&1&&K(0,"i",7),t&2){let n=e.$implicit;X("ngClass",n)}}function $6(t,e){if(t&1){let n=J();R(0,"span",5),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),R(1,"span",6),te(2,B6,1,1,"i",7,Cn),x()()}if(t&2){_();let n=co(0),r=_().$implicit,i=_();ce("disabled",i.isDisabled(r)),X("title",i.getTooltip(r)),b(2),ne(n)}}function H6(t,e){if(t&1){let n=J();R(0,"i",8),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),x()}if(t&2){_();let n=co(0),r=_().$implicit,i=_();ce("disabled",i.isDisabled(r)),X("ngClass",n)("title",i.getTooltip(r))}}function z6(t,e){if(t&1&&(Ba(0),G(1,$6,4,3,"span",3)(2,H6,1,4,"i",4)),t&2){let n=_().$implicit,r=_(),i=Ql(r.resolveClasses(n.classes));b(),q(r.isStackedClasses(i)?1:2)}}function G6(t,e){if(t&1&&G(0,z6,3,2),t&2){let n=e.$implicit,r=_();q(r.isHidden(n)?-1:0)}}function q6(t,e){if(t&1&&K(0,"i",7),t&2){let n=e.$implicit;X("ngClass",n)}}function W6(t,e){if(t&1){let n=J();R(0,"span",5),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),R(1,"span",6),te(2,q6,1,1,"i",7,Cn),x()()}if(t&2){_();let n=co(0),r=_().$implicit,i=_();ce("disabled",i.isDisabled(r)),X("title",i.getTooltip(r)),b(2),ne(n)}}function K6(t,e){if(t&1){let n=J();R(0,"i",8),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),x()}if(t&2){_();let n=co(0),r=_().$implicit,i=_();ce("disabled",i.isDisabled(r)),X("ngClass",n)("title",i.getTooltip(r))}}function Q6(t,e){if(t&1&&(Ba(0),G(1,W6,4,3,"span",3)(2,K6,1,4,"i",4)),t&2){let n=_().$implicit,r=_(),i=Ql(r.resolveClasses(n.classes));b(),q(r.isStackedClasses(i)?1:2)}}function Y6(t,e){if(t&1&&G(0,Q6,3,2),t&2){let n=e.$implicit,r=_();q(r.isHidden(n)?-1:0)}}function J6(t,e){if(t&1&&K(0,"i",7),t&2){let n=e.$implicit;X("ngClass",n)}}function Z6(t,e){if(t&1){let n=J();R(0,"span",5),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),R(1,"span",6),te(2,J6,1,1,"i",7,Cn),x()()}if(t&2){_();let n=co(0),r=_().$implicit,i=_();ce("disabled",i.isDisabled(r)),X("title",i.getTooltip(r)),b(2),ne(n)}}function X6(t,e){if(t&1){let n=J();R(0,"i",8),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),x()}if(t&2){_();let n=co(0),r=_().$implicit,i=_();ce("disabled",i.isDisabled(r)),X("ngClass",n)("title",i.getTooltip(r))}}function eq(t,e){if(t&1&&(Ba(0),G(1,Z6,4,3,"span",3)(2,X6,1,4,"i",4)),t&2){let n=_().$implicit,r=_(),i=Ql(r.resolveClasses(n.classes));b(),q(r.isStackedClasses(i)?1:2)}}function tq(t,e){if(t&1&&G(0,eq,3,2),t&2){let n=e.$implicit,r=_();q(r.isHidden(n)?-1:0)}}var oN=(()=>{let e=class e{constructor(r){this.applicationService=r}resolveClasses(r){if(r)return typeof r=="function"?r():r}isStackedClasses(r){return Array.isArray(r)&&r.length>1}isDisabled(r){let i=r.disabled;return typeof i=="function"?i():!!i}isHidden(r){let i=r.hidden;return typeof i=="function"?i():!!i}getTooltip(r){let i=r.tooltip;return typeof i=="function"?i():i}onClick(r){r.onClick&&!this.isDisabled(r)&&!this.isHidden(r)&&r.onClick()}};e.\u0275fac=function(i){return new(i||e)(k(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-header"]],decls:9,vars:0,consts:[[1,"header-start"],[1,"header-center"],[1,"header-end"],[1,"icon-button",3,"disabled","title"],[1,"icon-button",3,"ngClass","disabled","title"],[1,"icon-button",3,"click","title"],[1,"fa-stack"],[1,"fa-stack-1x","pointer-events-none",3,"ngClass"],[1,"icon-button",3,"click","ngClass","title"]],template:function(i,o){if(i&1&&(R(0,"div",0),te(1,G6,1,1,null,null,qI),x(),R(3,"div",1),te(4,Y6,1,1,null,null,qI),x(),R(6,"div",2),te(7,tq,1,1,null,null,qI),x()),i&2){let s=o.applicationService.header();b(),ne(s.start),b(3),ne(s.center),b(3),ne(s.end)}},dependencies:[Wt],styles:["[_nghost-%COMP%]{padding:.33333333rem;border-bottom:1px solid var(--color-border);display:grid;grid-template-columns:1fr 1fr 1fr}[_nghost-%COMP%]   .header-start[_ngcontent-%COMP%], [_nghost-%COMP%]   .header-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .header-end[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.33333333rem}[_nghost-%COMP%]   .header-start[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .header-center[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .header-end[_ngcontent-%COMP%]{justify-content:end}"]});let t=e;return t})();var Yr=class{constructor(e,n){this.length=e,n&&n>e&&(this.maxLength=n)}restart(e){clearTimeout(this.timeout),this.runnable=e,this.timeout=setTimeout(()=>{e&&e(),this.timeout=null,this.maxLengthTimeout&&(clearTimeout(this.maxLengthTimeout),this.maxLengthTimeout=null)},this.length),this.maxLength&&!this.maxLengthTimeout&&(this.maxLengthTimeout=setTimeout(()=>{e&&e(),this.maxLengthTimeout=null,clearTimeout(this.timeout),this.timeout=null},this.maxLength))}abort(){clearTimeout(this.timeout),this.timeout=null,clearTimeout(this.maxLengthTimeout),this.maxLengthTimeout=null}complete(){this.abort(),this.runnable&&this.runnable()}isActive(){return this.timeout!=null}};function nq(t,e){t&1&&(R(0,"div",1),_n("anim-fade-out"),K(1,"span",3),x())}var sN=(()=>{let e=class e{constructor(r,i){this.keyboardShortcutService=r,this.applicationService=i,this.hideLoadingBarDelay=new Yr(1500),un(()=>{this.applicationService.changes()!==void 0&&this.hideLoadingBarDelay.restart()})}getLoadingBarColor(){return this.applicationService.changes()?"orange":this.applicationService.errors()?"red":this.hideLoadingBarDelay.isActive()?"limegreen":"transparent"}onKeyDown(r){this.keyboardShortcutService.next(r)}};e.\u0275fac=function(i){return new(i||e)(k(Fc),k(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-root"]],hostBindings:function(i,o){i&1&&B("keydown",function(a){return o.onKeyDown(a)},t_)},decls:5,vars:3,consts:[[1,"loading-overlay-bar"],[1,"loading-overlay-container","anim-fade-in"],[1,"app-content","center"],[1,"loading-spinner"]],template:function(i,o){i&1&&(K(0,"div",0),G(1,nq,2,0,"div",1),K(2,"app-header"),R(3,"div",2),K(4,"router-outlet"),x()),i&2&&(gt("background-color",o.getLoadingBarColor()),b(),q(o.applicationService.loading()?1:-1))},dependencies:[wu,oN],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;color:var(--color-text-secondary);position:relative}.app-content[_ngcontent-%COMP%]{flex:1;display:flex;min-height:0;min-width:0;position:relative}.loading-overlay-bar[_ngcontent-%COMP%]{width:100%;height:1px;position:absolute;pointer-events:none;z-index:101;background-color:transparent;transition-property:background-color;transition-duration:.5s}.loading-overlay-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);z-index:100;inset:0}.loading-overlay-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:75px;height:75px;border-width:3px;border-color:var(--color-surface-200);border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s infinite linear;border-radius:50%;border-style:solid}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]});let t=e;return t})();var We=class{static isImage(e){return e.mimeType.includes("image")&&e.thumbnailLink!=null}static isVideo(e){return e.mimeType.includes("video")&&e.thumbnailLink!=null}static isFolder(e){return e.mimeType=="application/vnd.google-apps.folder"}};var Uc=class{constructor(e){this.http=e,this.API_KEY="AIzaSyBLAfLb8QHSIqXPFTh2YJEMfMoW8EhJpRU"}createFile(e,n,r){let i="https://content.googleapis.com/drive/v3/files?key="+this.API_KEY;return mn(this.http.post(i,{name:e,parents:n,mimeType:r}))}createFolder(e,n){let r="https://content.googleapis.com/drive/v3/files?key="+this.API_KEY;return mn(this.http.post(r,{name:e,mimeType:"application/vnd.google-apps.folder",parents:[n]}))}getFolderMetadata(e="root"){let r="https://content.googleapis.com/drive/v3/files?pageSize=1000&q="+("'"+e+"' in parents and trashed=false")+"&fields=files("+this.FIELDS+")&key="+this.API_KEY;return this.getFileArrayPromise(r)}getEntityMetadata(e){let n="https://content.googleapis.com/drive/v3/files/"+e+"?fields="+this.FIELDS+"&key="+this.API_KEY;return mn(this.http.get(n))}getContent(e){let n="https://www.googleapis.com/drive/v3/files/"+e;return mn(this.http.get(n,{params:{alt:"media"},responseType:"json"}))}updateContent(e,n){let r="https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=media";return mn(this.http.patch(r,n))}move(e,n,r){let i="https://www.googleapis.com/drive/v3/files/"+e+"?removeParents="+n+"&addParents="+r+"&key="+this.API_KEY;return mn(this.http.patch(i,{}))}trash(e){return this.updateMetadata(e,{trashed:!0})}updateProperty(e,n,r){return this.updateMetadata(e,{appProperties:{[n]:r}})}updateProperties(e,n){return this.updateMetadata(e,{appProperties:n})}download(e){return I(this,null,function*(){let n="https://www.googleapis.com/drive/v3/files/"+e.id,r=yield mn(this.http.get(n,{params:{alt:"media"},responseType:"blob"})),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e.name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)})}openFolderById(e){let n="https://drive.google.com/drive/folders/"+e;window.open(n,"_blank")}openSearch(e){let n="https://drive.google.com/drive/search?q="+e+"%20title:"+e;window.open(n,"_blank")}updateMetadata(e,n){let r="https://content.googleapis.com/drive/v3/files/"+e+"?fields="+this.FIELDS+"&key="+this.API_KEY;return mn(this.http.patch(r,n))}getFileArrayPromise(e,n){return n?mn(this.http.post(e,n).pipe(Ie(r=>r?r.files:[]))):mn(this.http.get(e).pipe(Ie(r=>r?r.files:[])))}};var Jr=(()=>{let e=class e extends Uc{constructor(r){super(r),this.http=r,this.FIELDS="id,name,mimeType,size,thumbnailLink,imageMediaMetadata,videoMediaMetadata"}get dataFileId(){return sessionStorage.getItem(Ot.KEY_GOOGLE_DATA_FILE_ID)}set dataFileId(r){sessionStorage.setItem(Ot.KEY_GOOGLE_DATA_FILE_ID,r)}getData(){return I(this,null,function*(){let r="https://www.googleapis.com/drive/v3/files/"+this.dataFileId;return yield mn(this.http.get(r,{params:{alt:"media"},responseType:"json"})).catch(i=>i)})}getBase64(r){return I(this,null,function*(){return new Promise(i=>{let o="https://www.googleapis.com/drive/v3/files/"+r;this.http.get(o,{params:{alt:"media"},responseType:"blob"}).subscribe(s=>{let a=new FileReader;a.onload=c=>i(c.target.result),a.readAsDataURL(s)})})})}};e.\u0275fac=function(i){return new(i||e)(z(uo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aN=(t,e)=>e.id;function rq(t,e){if(t&1){let n=J();pe(0,"span",1),Be("click",function(){let i=L(n).$implicit,o=_();return V(o.onDataFileClick(i))}),Y(1),he()}if(t&2){let n=e.$implicit;b(),Me(n.name.substring(0,n.name.length-10))}}function iq(t,e){if(t&1){let n=J();pe(0,"span",1),Be("click",function(){let i=L(n).$implicit,o=_();return V(o.onFolderClick(i))}),Y(1),he()}if(t&2){let n=e.$implicit;b(),Me(n.name)}}var cN=(()=>{let e=class e extends rt{constructor(r,i){super(),this.googleService=r,this.applicationService=i,this.configuration={title:"Select a Google Drive Folder",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.close()}],waitForContent:new Promise(o=>this.ready=o)},this.FOLDER_ROOT="root",this.FOLDER_GALLERY_DATA="gallerydata",this.SUFFIX_DATA_FILE="-data.json",this.SUFFIX_ARCHIVE_FOLDER="-archive",this.loading=!0,this.applicationService.loading.set(!0)}ngOnInit(){return I(this,null,function*(){let r=yield this.googleService.getFolderMetadata();this.dataFolder=r.find(s=>s.name==this.FOLDER_GALLERY_DATA),this.dataFolder||(this.dataFolder=yield this.googleService.createFolder(this.FOLDER_GALLERY_DATA,this.FOLDER_ROOT));let i=yield this.googleService.getFolderMetadata(this.dataFolder.id);this.dataFiles=i.filter(s=>s.name.endsWith(this.SUFFIX_DATA_FILE));let o=this.dataFiles.map(s=>s.name.substring(0,s.name.indexOf(this.SUFFIX_DATA_FILE)));this.folders=r.filter(s=>We.isFolder(s)&&!o.includes(s.name)&&s.name!=this.FOLDER_GALLERY_DATA),this.applicationService.loading.set(!1),this.loading=!1,this.ready()})}onDataFileClick(r){this.applicationService.loading.set(!0),this.googleService.dataFileId=r.id,this.resolve()}onFolderClick(r){return I(this,null,function*(){this.applicationService.loading.set(!0);let i=yield this.googleService.createFile(r.name+this.SUFFIX_DATA_FILE,[this.dataFolder.id],"application/json"),o=yield this.googleService.createFolder(r.name+this.SUFFIX_ARCHIVE_FOLDER,this.dataFolder.id);this.googleService.dataFileId=i.id,yield this.googleService.updateContent(i.id,{dataFolderId:r.id,archiveFolderId:o.id}),this.resolve()})}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Jr),k(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-folder-picker"]],features:[Ve],decls:4,vars:0,consts:[[1,"button","fluid"],[1,"button","fluid",3,"click"]],template:function(i,o){i&1&&(te(0,rq,2,1,"span",0,aN),te(2,iq,2,1,"span",0,aN)),i&2&&(ne(o.dataFiles),b(2),ne(o.folders))},dependencies:[Ge],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.33333333rem;padding:.33333333rem}"]});let t=e;return t})();var lN=(()=>{let e=class e{constructor(){this.valueChange=new ut}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["app-checkbox"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[[1,"cursor-pointer","fa-regular",3,"click","ngClass"]],template:function(i,o){i&1&&(R(0,"i",0),B("click",function(){return o.value=!o.value,o.valueChange.emit(o.value)}),x()),i&2&&X("ngClass",o.value?"fa-circle-check":"fa-circle")},dependencies:[Ge,Wt],encapsulation:2});let t=e;return t})();var WI=(t,e)=>e.id;function oq(t,e){if(t&1){let n=J();R(0,"div",6),B("click",function(){let i=L(n).$implicit,o=_();return V(o.setActiveTabId(i.id))}),Y(1),x()}if(t&2){let n=e.$implicit,r=_();ce("active",n.id===r.activeTabId),b(),Me(n.label)}}function sq(t,e){if(t&1){let n=J();R(0,"div",10),B("click",function(){L(n);let i=_().$implicit;return V(i.onChange(!i.getValue()))}),R(1,"span",8),Y(2),x(),K(3,"app-checkbox",11),x()}if(t&2){let n=_().$implicit;b(2),Me(n.label),b(),X("value",n.getValue())}}function aq(t,e){if(t&1){let n=J();R(0,"div",10),B("click",function(){L(n);let i=_().$implicit;return V(i.onClick())}),Y(1),K(2,"i",12),x()}if(t&2){let n=_().$implicit;b(),Me(n.label)}}function cq(t,e){if(t&1&&G(0,sq,4,2,"div",9)(1,aq,3,1,"div",9),t&2){let n=e.$implicit;q(n.type==="toggle"?0:n.type==="action"?1:-1)}}function lq(t,e){if(t&1&&te(0,cq,2,1,null,null,WI),t&2){let n=_().$implicit;ne(n.items)}}function uq(t,e){t&1&&(R(0,"span",8),Y(1,"No settings available."),x())}function dq(t,e){if(t&1&&(R(0,"div",7),G(1,lq,2,0)(2,uq,2,0,"span",8),x()),t&2){let n=e.$implicit,r=_();ce("is-active",n.id===r.activeTabId),b(),q(n.items!=null&&n.items.length?1:2)}}var Do=(()=>{let e=class e extends rt{constructor(r){super(),this.applicationService=r,this.configuration={title:"Settings",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:"Close",click:()=>this.close()}]},this.tabs=[];let i=this.applicationService.getApplicationSettings();this.tabs=[i,...this.applicationService.getRegisteredModuleSettings()],this.activeTabId=sessionStorage.getItem(Ot.KEY_SETTINGS_ACTIVE_TAB)??i.id}get activeTab(){return this.tabs.find(r=>r.id===this.activeTabId)}setActiveTabId(r){this.activeTabId=r,sessionStorage.setItem(Ot.KEY_SETTINGS_ACTIVE_TAB,r)}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-application-settings"]],features:[Ve],decls:8,vars:0,consts:[[1,"settings-layout"],[1,"tabs"],[1,"button","smaller","fluid",3,"active"],[1,"v-separator"],[1,"tab-content"],[1,"tab-panel",3,"is-active"],[1,"button","smaller","fluid",3,"click"],[1,"tab-panel"],[1,"nowrap","user-select-none"],[1,"button","smaller","fluid","option-container"],[1,"button","smaller","fluid","option-container",3,"click"],[3,"value"],[1,"fa-solid","fa-play","fa-sm"]],template:function(i,o){i&1&&(R(0,"div",0)(1,"div",1),te(2,oq,2,3,"div",2,WI),x(),K(4,"div",3),R(5,"div",4),te(6,dq,3,3,"div",5,WI),x()()),i&2&&(b(2),ne(o.tabs),b(4),ne(o.tabs))},dependencies:[Ge,lN],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem;width:100%;height:100%;box-sizing:border-box}.settings-layout[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;flex:1;min-height:0}.tabs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem}.tab-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr);grid-template-rows:minmax(0,1fr);flex:1;min-width:0}.tab-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;flex:1;min-width:0;grid-area:1/1;visibility:hidden;pointer-events:none}.tab-panel.is-active[_ngcontent-%COMP%]{visibility:visible;pointer-events:auto}.option-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.33333333rem}.full-width[_ngcontent-%COMP%]{width:100%;justify-content:center}"]});let t=e;return t})();var ki=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var Ao=class{get colorClass(){switch(this.state){case 1:return"positive";case-1:return"negative";default:return""}}constructor(e=0){this.state=e}};var Oi=class extends Ao{get pseudo(){return!this.group&&this.children.length!=0}getNameWithParents(e=" | "){return this.collectParents().concat(this).map(n=>n.name).join(e)}getCount(e){return this.group?null:this.pseudo?e.filter(n=>Z.intersection(n.tags,this.children).length).length:e.filter(n=>n.tags.includes(this)).length}collectParents(){return this._collectParents(this,[])}_collectParents(e,n){return e.parent&&(n.unshift(e.parent),this._collectParents(e.parent,n)),n}collectChildren(){return this._collectChildren(this,[])}_collectChildren(e,n){if(e.group)for(let r of e.children)n.push(r),this._collectChildren(r,n);return n}};var Bc=class{static number(e,n){return Math.random()*(n?n-e:e)+(n?e:0)}static boolean(){return this.from([!0,!1])}static from(e,n){return n&&(Array.isArray(n)?e=e.filter(r=>!n.includes(r)):e=e.filter(r=>r!=n)),e[Math.floor(this.number(e.length))]}static percentage(e){return Math.random()<e/100}static oneIn(e){return Math.random()<1/e}static color(){let e=(Math.random()+.618033988749895)%1,n=this.number(.4,.6),r=.95,i=Math.floor(e*6),o=e*6-i,s=r*(1-n),a=r*(1-o*n),c=r*(1-(1-o)*n),u,h,p;switch(i%6){case 0:u=r,h=c,p=s;break;case 1:u=a,h=r,p=s;break;case 2:u=s,h=r,p=c;break;case 3:u=s,h=a,p=r;break;case 4:u=c,h=s,p=r;break;case 5:u=r,h=s,p=a;break}return"#"+Math.round(u*255).toString(16)+Math.round(h*255).toString(16)+Math.round(p*255).toString(16)}};var $c=class{constructor(){this.images=[],this.imagesToCompare=[],this.graph=new Map,this.imageById=new Map,this.imageByIdSize=0,this.imageByIdSource=null,this.comparisonAdjacency=null,this.comparisonAdjacencySource=null,this.comparisonAdjacencyCount=0,this.comparison=nt(null),this.availableComparisonsCount=null,this.totalComparisons=0,this.remainingComparisons=0,this.completeComparisons=0,this.estimateComparisons=0}start(e,n,r){this.estimateComparisons=this.calculateEstimateComparisons(n.length),this.comparisons=[],this.availableComparisons=[],this.availableKeyToIndex=new Map,this.availableComparisonsCount=null,this.graph=new Map,this.images=e??[],this.imagesToCompare=n??[],Z.shuffle(this.imagesToCompare);let i={};for(let o of this.images)this.graph.set(o,new Set),i[o.id]=o;if(r){let o=this.images.map(s=>s.id);r.comparisons.filter(([s,a])=>o.includes(s)&&o.includes(a)).map(([s,a])=>[i[s],i[a]]).forEach(([s,a])=>this.handleUserInput(s,a))}this.rebuildAvailableComparisons(),this.comparison.set(this.getNextComparison())}matchesImagesToCompare(e){if(!e)return this.imagesToCompare.length===0;if(e.length!==this.imagesToCompare.length)return!1;let n=new Set(this.imagesToCompare.map(r=>r.id));for(let r of e)if(!n.delete(r.id))return!1;return n.size===0}get progressPercent(){return this.totalComparisons===0?0:this.completeComparisons/this.totalComparisons*100}get estimateProgressPercent(){return this.estimateComparisons===0?0:Math.min(100,this.completeComparisons/this.estimateComparisons*100)}calculateEstimateComparisons(e){return e<=1?0:Math.round(e*(.914*Math.log2(e)+.734))}updateProgress(){if(!this.comparisons){this.completeComparisons=0,this.remainingComparisons=0,this.totalComparisons=0;return}let e=this.getComparisonProgress();this.completeComparisons=e.completed,this.remainingComparisons=e.remaining,this.totalComparisons=e.total}getNextComparison(){let e=this.collectAvailableComparisons();if(e.length===0)return null;let n=this.getImageSelectionStats(),r=this.pickMostUncertainComparison(e,n);return this.withRandomOrder(r??this.getRandomAvailableComparison(e))}getComparisonProgress(){this.availableComparisonsCount===null&&this.collectAvailableComparisons();let e=this.comparisons.length,n=this.availableComparisonsCount??0;return{completed:e,remaining:n,total:e+n}}collectAvailableComparisons(){return this.availableComparisonsCount===null&&this.rebuildAvailableComparisons(),this.availableComparisons}getRandomAvailableComparison(e){return Z.isEmpty(e)?null:Bc.from(e)}withRandomOrder(e){return e?Bc.boolean()?[e[0],e[1]]:[e[1],e[0]]:null}getImageSelectionStats(){let e=new Set(this.imagesToCompare.map(o=>o.id)),n=this.imagesToCompare.length,r=new Map,i=Math.max(1,n-1);for(let o of this.imagesToCompare){let s=this.countKnownWins(o,e),a=this.countKnownLosses(o),c=s+a,u=(s+1)/(s+a+2),h=c/i;r.set(o.id,{knownWins:s,knownLosses:a,strength:u,predCount:a+1,succCount:s+1,certainty:h,relations:c})}return r}countKnownWins(e,n){let r=0;for(let i of this.graph.get(e)??[])i.id!==e.id&&n.has(i.id)&&r++;return r}countKnownLosses(e){let n=0;for(let r of this.imagesToCompare)r!==e&&this.graph.get(r)?.has(e)&&n++;return n}getPairSelectionStats(e,n){let r=n.get(e[0].id),i=n.get(e[1].id),o=this.imagesToCompare.length;if(!r||!i)return{pair:e,gainIfLeftWins:0,gainIfRightWins:0,guaranteedGain:0,expectedGain:0,strengthGap:0,isStrictBridge:!1,score:0};let s=r.predCount*i.succCount,a=i.predCount*r.succCount,c=Math.min(s,a),u=.5*(s+a),h=Math.abs(r.strength-i.strength),p=this.isLowRelationImage(r,o)&&this.isStrictHubImage(i,o)||this.isLowRelationImage(i,o)&&this.isStrictHubImage(r,o);return{pair:e,gainIfLeftWins:s,gainIfRightWins:a,guaranteedGain:c,expectedGain:u,strengthGap:h,isStrictBridge:p,score:0}}isLowRelationImage(e,n){let r=Math.max(1,Math.floor(.08*Math.max(0,n-1)));return e.relations<=r}isStrictHubImage(e,n){let r=Math.max(4,Math.floor(.3*Math.max(0,n-1)));return e.knownWins>=2&&e.knownLosses>=2&&e.relations>=r}pickMostUncertainComparison(e,n){let r=e.map(o=>this.getPairSelectionStats(o,n));return r.length?r.reduce((o,s)=>!o||s.strengthGap<o.strengthGap?s:s.strengthGap>o.strengthGap?o:s.guaranteedGain>o.guaranteedGain?s:s.guaranteedGain<o.guaranteedGain?o:Bc.boolean()?s:o,null)?.pair??null:null}hasPath(e,n){return this.graph.get(e)?.has(n)??!1}handleUserInput(e,n){if(!n){let r=this.comparison();if(!r)return;n=r[0]===e?r[1]:r[0]}this.graph.get(e).add(n),this.comparisons.push([e,n]),this.updateTransitiveRelations(e,n),this.comparison.set(this.getNextComparison()),this.updateProgress()}updateTransitiveRelations(e,n){let r=new Set(this.graph.get(n));r.add(n);let i=[];for(let[o,s]of this.graph.entries())(o===e||s.has(e))&&i.push(o);for(let o of i){let s=this.graph.get(o);for(let a of r)s.add(a)}this.pruneAvailableComparisons(i,r)}pruneAvailableComparisons(e,n){for(let r of e)for(let i of n)this.removeAvailablePair(r,i);this.availableComparisonsCount=this.availableComparisons.length}getRanking(){return this.getRankingFor(this.imagesToCompare)}getImagesToCompare(){return this.imagesToCompare??[]}getNearestWinners(e){if(!e)return[];let n=this.getRankingFor(this.images),r=n.indexOf(e);if(r===-1)return[];let i=[];for(let o=r-1;o>=0;o--){let s=n[o];this.graph.get(s)?.has(e)&&i.push(s)}return i}getNearestLosers(e){if(!e)return[];let n=this.graph.get(e);if(!n||n.size===0)return[];let r=this.getRankingFor(this.images),i=r.indexOf(e);if(i===-1)return[];let o=[];for(let s=i+1;s<r.length;s++){let a=r[s];n.has(a)&&o.push(a)}return o}getRankingFor(e){let n=e??[],r=new Map;n.forEach(s=>r.set(s,0));for(let[,s]of this.graph.entries())for(let a of s)r.has(a)&&r.set(a,(r.get(a)??0)+1);let i=n.filter(s=>(r.get(s)??0)===0),o=[];for(;i.length;){let s=i.shift();o.push(s);for(let a of this.graph.get(s))r.set(a,r.get(a)-1),r.get(a)===0&&i.push(a)}return o}undo(){if(Z.isEmpty(this.comparisons))return null;this.comparison.set(this.comparisons.pop()??null),this.graph=new Map,this.images.forEach(e=>this.graph.set(e,new Set)),this.availableComparisons=[],this.availableKeyToIndex=new Map;for(let[e,n]of this.comparisons)this.graph.get(e).add(n),this.updateTransitiveRelations(e,n);this.rebuildAvailableComparisons(),this.updateProgress()}getState(){return{comparisons:this.comparisons.map(([e,n])=>[e.id,n.id])}}rebuildAvailableComparisons(){this.availableComparisons=[],this.availableKeyToIndex=new Map;for(let e=0;e<this.imagesToCompare.length;e++)for(let n=e+1;n<this.imagesToCompare.length;n++){let r=this.imagesToCompare[e],i=this.imagesToCompare[n];!this.hasPath(r,i)&&!this.hasPath(i,r)&&this.addAvailablePair(r,i)}this.availableComparisonsCount=this.availableComparisons.length}addAvailablePair(e,n){let r=this.makePairKey(e,n);this.availableKeyToIndex.has(r)||(this.availableKeyToIndex.set(r,this.availableComparisons.length),this.availableComparisons.push([e,n]))}removeAvailablePair(e,n){let r=this.makePairKey(e,n),i=this.availableKeyToIndex.get(r);if(i===void 0)return;let o=this.availableComparisons.length-1;if(o>-1){if(i!==o){let s=this.availableComparisons[o];this.availableComparisons[i]=s,this.availableKeyToIndex.set(this.makePairKey(s[0],s[1]),i)}this.availableComparisons.pop()}this.availableKeyToIndex.delete(r)}makePairKey(e,n){let[r,i]=[e.id,n.id].sort();return`${r}|${i}`}getImageByIdMap(e){if(this.imageByIdSource!==e||this.imageByIdSize!==e.length){this.imageById.clear();for(let n of e)this.imageById.set(n.id,n);this.imageByIdSource=e,this.imageByIdSize=e.length}return this.imageById}getComparisonAdjacency(e){if(this.comparisonAdjacency&&this.comparisonAdjacencySource===e&&this.comparisonAdjacencyCount===e.length)return this.comparisonAdjacency;let n=new Map;for(let[r,i]of e){let o=n.get(r);o?o.push(i):n.set(r,[i])}return this.comparisonAdjacency=n,this.comparisonAdjacencySource=e,this.comparisonAdjacencyCount=e.length,n}};var je=(()=>{let e=class e{constructor(){this.viewMode="masonry",this.images=[],this.imageGroups=[],this.fullscreenImage=nt(null),this.filterVisible=xt.isLargeScreen(),this.tournament=new $c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Je=(()=>{let e=class e{constructor(r,i){this.stateService=r,this.tagService=i,this.images=nt([]),this.masonryImages=vi(()=>this.images().filter(o=>o.group?o==o.group.images.find(s=>s.passesFilters):!0)),this.favoritesFilter=new Ao(0),this.bookmarksFilter=new Ao(0),this.groupsFilter=new Ao(0)}updateFilters(...r){(Z.isEmpty(r)?this.stateService.images:r).forEach(i=>i.passesFilters=this.doesPassFilters(i)),this.images.set(this.stateService.images.filter(i=>i.passesFilters))}doesPassFilters(r){return!r||!this.doesPassFilter(this.favoritesFilter,r.heart)||!this.doesPassFilter(this.bookmarksFilter,r.bookmark)||!this.doesPassFilter(this.groupsFilter,r.group!=null)||!this.stateService.settings.showVideos&&We.isVideo(r)?!1:this.doesPassTagsCheck(r,this.tagService.getRootTags())}doesPassFilter(r,i){return!(r.state==-1&&i||r.state==1&&!i)}doesPassTagsCheck(r,i){for(let o of i)if(o.state==0){if(o.group&&!this.doesPassTagsCheck(r,o.children))return!1}else if(o.group){let s=Z.intersection(r.tags,o.collectChildren().concat(o));if(o.state==-1&&s.length!=0||o.state==1&&s.length==0)return!1}else if(o.pseudo){let s=Z.intersection(r.tags,o.children);if(o.state==-1&&s.length!=0||o.state==1&&s.length==0)return!1}else{let s=r.tags.includes(o);if(o.state==-1&&s||o.state==1&&!s)return!1}return!0}};e.\u0275fac=function(i){return new(i||e)(z(je),z(Ft))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bg=class{};var $g=class{};var Hg=class extends $g{};var Ht=(()=>{let e=class e{constructor(r,i,o,s){this.injector=r,this.sanitizer=i,this.applicationService=o,this.googleService=s,this.saveDelay=new Yr(5e3)}processData(){return I(this,null,function*(){let r=this.injector.get(je),i=yield this.googleService.getData();r.dataFolderId=i.dataFolderId,r.archiveFolderId=i.archiveFolderId,r.tournamentState=i.tournamentState,r.settings=i.settings??{};let o=this.injector.get(Je);o.favoritesFilter.state=i.heartsFilter||0,o.bookmarksFilter.state=i.bookmarksFilter||0,o.groupsFilter.state=i.filterGroups||0,i.imageProperties||(i.imageProperties=[]),i.groupProperties||(i.groupProperties=[]),i.tagProperties||(i.tagProperties=[]);let s=this.injector.get(Ft);Z.push(s.tags,i.tagProperties.map(c=>this.parseTag(c))),s.tags.forEach(c=>c.children=i.tagProperties.find(u=>u.id==c.id).childIds.map(u=>s.tags.find(h=>h.id==u))),s.tags.forEach(c=>c.parent=s.tags.find(u=>u.children.includes(c)));let a=new Set;yield this.processImages(i,r.dataFolderId,r.images,s.tags,a),yield Promise.all(a);for(let c of i.imageProperties.filter(u=>!r.images.some(h=>u.id==h.id)))console.log(c),console.log("This image does not exist, but has a data entry. Removing image entry from data."),Z.remove(r.images,r.images.find(u=>u.id==c.id));Z.push(r.imageGroups,i.groupProperties.map(c=>{let u=new Bg;return u.images=r.images.filter(h=>c.imageIds.includes(h.id)),u.images.sort((h,p)=>c.imageIds.indexOf(h.id)-c.imageIds.indexOf(p.id)),u.images.forEach(h=>h.group=u),u})),o.updateFilters(),this.applicationService.loading.set(!1)})}processImages(r,i,o,s,a){return I(this,null,function*(){let c=yield this.googleService.getFolderMetadata(i);for(let u of c.filter(h=>We.isFolder(h)))a.add(this.processImages(r,u.id,o,s,a));Z.push(o,c.filter(u=>We.isImage(u)||We.isVideo(u)).map(u=>this.metaToImage(u,r.imageProperties.find(h=>h.id==u.id),i,s,this.applicationService.reduceDataUsage)))})}metaToImage(r,i,o,s,a){let c=new Hg;return c.id=r.id,c.name=r.name,c.mimeType=r.mimeType,c.parentFolderId=o,c.size=r.size?Number(r.size):void 0,a?c.thumbnailLink=r.thumbnailLink:c.thumbnailLink=r.thumbnailLink.replace("=s220","=w440"),We.isImage(c)?(c.imageMediaMetadata=r.imageMediaMetadata,c.aspectRatio=c.imageMediaMetadata.width/c.imageMediaMetadata.height,c.contentLink=r.thumbnailLink.replace("=s220","=s"+Math.max(window.screen.width,window.screen.height))):We.isVideo(c)&&(c.videoMediaMetadata=r.videoMediaMetadata,c.videoMediaMetadata||(c.videoMediaMetadata={}),(!c.videoMediaMetadata.width||c.videoMediaMetadata.width==0)&&(c.videoMediaMetadata.width=1920),(!c.videoMediaMetadata.height||c.videoMediaMetadata.height==0)&&(c.videoMediaMetadata.height=1080),c.aspectRatio=c.videoMediaMetadata.width/c.videoMediaMetadata.height,c.contentLink=this.sanitizer.bypassSecurityTrustResourceUrl("https://drive.google.com/file/d/"+c.id+"/preview")),i?(c.heart=i.heart,c.bookmark=i.bookmark,c.tags=i.tagIds.map(u=>s.find(h=>h.id==u)),c.note=i.note??""):(c.heart=!1,c.bookmark=!0,c.tags=[],c.note=""),c}parseTag(r){let i=new Oi;return i.id=r.id,i.name=r.name,i.group=r.group,i.state=r.state,i.open=!1,i}save(r=!1){this.applicationService.changes.set(!0),this.saveDelay.restart(()=>this.serialize()),r&&this.saveDelay.complete()}serialize(){let r=this.injector.get(je),i=this.injector.get(Je),o=this.injector.get(Ft),s={};s.dataFolderId=r.dataFolderId,s.archiveFolderId=r.archiveFolderId,s.heartsFilter=i.favoritesFilter.state,s.bookmarksFilter=i.bookmarksFilter.state,s.filterGroups=i.groupsFilter.state,s.settings=r.settings,s.tournamentState=r.tournamentState,s.imageProperties=r.images.map(a=>this.serializeImage(a)),s.groupProperties=r.imageGroups.filter(a=>!Z.isEmpty(a.images)).map(a=>this.serializeGroup(a)),s.tagProperties=o.tags.map(a=>this.serializeTag(a)),this.googleService.updateContent(this.googleService.dataFileId,s).then(a=>{a||this.applicationService.errors.set(!0)}).finally(()=>{this.applicationService.changes.set(!1)})}serializeImage(r){let i={};return i.id=r.id,i.heart=r.heart,i.bookmark=r.bookmark,i.tagIds=r.tags.map(o=>o.id),i.note=r.note??"",i}serializeGroup(r){let i={};return i.imageIds=r.images.map(o=>o.id),i}serializeTag(r){let i={};return i.id=r.id,i.name=r.name,i.group=r.group,i.state=r.state,i.childIds=r.children.map(o=>o.id),i}};e.\u0275fac=function(i){return new(i||e)(z(Xe),z(tC),z(Ye),z(Jr))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ft=(()=>{let e=class e{constructor(r,i,o,s){this.injector=r,this.dialogService=i,this.stateService=o,this.serializationService=s,this.tags=[]}getRootTags(){return this.tags.filter(r=>!r.parent)}getParentPseudoTags(r){return this.tags.filter(i=>i.pseudo&&i.children.includes(r))}sort(r,i=!1){r&&(i?r.sort((o,s)=>o.getNameWithParents().localeCompare(s.getNameWithParents())):r.sort((o,s)=>o.name.localeCompare(s.name)))}openTagCreate(r){return I(this,null,function*(){if(r){let i=yield this.dialogService.createInput({title:"Create Tag: "+r.getNameWithParents(),placeholder:"Name",validationFn:o=>!r.children.filter(s=>!s.group).map(s=>s.name).includes(o)});if(!Tn.isEmpty(i)){let o=new Oi;o.id=ki(),o.name=i,o.group=!1,o.state=0,o.parent=r,o.children=[],r.children.push(o),this.sort(r.children),this.tags.push(o),this.sort(this.tags),this.serializationService.save()}}})}openTagGroupCreate(r){return I(this,null,function*(){if(r){let i=yield this.dialogService.createInput({title:"Create Tag Group: "+r.getNameWithParents(),placeholder:"Name",validationFn:o=>!r.children.filter(s=>s.group).map(s=>s.name).includes(o)});if(!Tn.isEmpty(i)){let o=new Oi;o.id=ki(),o.name=i,o.group=!0,o.state=0,o.parent=r,o.children=[],o.open=!0,r.children.push(o),this.sort(r.children),this.tags.push(o),this.sort(this.tags),this.serializationService.save()}}else{let i=yield this.dialogService.createInput({title:"Create Tag Group: Root",placeholder:"Name",validationFn:o=>!this.tags.filter(s=>!s.parent).map(s=>s.name).includes(o)});if(!Tn.isEmpty(i)){let o=new Oi;o.id=ki(),o.name=i,o.group=!0,o.state=0,o.parent=r,o.children=[],o.open=!0,this.tags.push(o),this.sort(this.tags),this.serializationService.save()}}})}insertTagGroup(r){return I(this,null,function*(){if(r&&(yield this.dialogService.createConfirmation({title:"Confirmation",messages:["Insert Tag Group between '"+r.getNameWithParents()+"' and its parent?"]}))){let i=new Oi;i.id=ki(),i.name=r.name,i.group=!0,i.state=0,i.parent=r.parent,i.children=[r],i.open=!0,Z.remove(r.parent.children,r),Z.push(r.parent.children,i),this.sort(r.parent.children),r.parent=i,this.tags.push(i),this.serializationService.save()}})}openTagRename(r){return I(this,null,function*(){let i=yield this.dialogService.createInput({title:"Rename: "+r.getNameWithParents(),placeholder:"Name",defaultValue:r.name,validationFn:o=>r.parent?!r.parent.children.map(s=>s.name).includes(o):!this.tags.filter(s=>!s.parent).map(s=>s.name).includes(o)});Tn.isEmpty(i)||(r.name=i,this.sort(r.parent?.children),this.sort(this.tags),this.serializationService.save())})}openTagDelete(r){return I(this,null,function*(){let i;if(r.group?i="Delete '"+r.getNameWithParents()+"' and its descendants?":i="Delete '"+r.getNameWithParents()+"'",yield this.dialogService.createConfirmation({title:"Confirmation",messages:[i]})){Z.remove(r.parent?.children,r);let o=r.collectChildren().concat(r);Z.remove(this.tags,o);for(let s of this.stateService.images)Z.remove(s.tags,o);this.injector.get(Je).updateFilters(),this.serializationService.save()}})}openTagParentChange(r){return I(this,null,function*(){let i=r.collectChildren(),o=this.tags.filter(a=>!(!a.group||a==r||a==r.parent||i.includes(a)||a.children.map(c=>c.name).includes(r.name))),s=yield this.dialogService.createSelect({title:"Change Parent: "+r.getNameWithParents(),options:o,nullOption:r.parent?"Root":null,defaultValue:r.parent,getText:a=>a.getCompleteName()});this.changeParent(r,s)})}changeParent(r,i){r.group&&i===null?(Z.remove(r.parent?.children,r),r.parent=null,this.injector.get(Je).updateFilters(...this.stateService.images.filter(o=>o.tags.includes(r))),this.serializationService.save()):i&&(Z.remove(r.parent?.children,r),r.parent=i,r.parent.open=!0,r.parent.children.push(r),this.sort(r.parent.children),this.injector.get(Je).updateFilters(...this.stateService.images.filter(o=>o.tags.includes(r))),this.serializationService.save())}editPseudoList(r){return I(this,null,function*(){if(!r.group){let i=this.tags.filter(s=>!(s==r||s.group||s.pseudo));this.sort(i,!0);let o=yield this.dialogService.createMultiSelect({title:"Edit Pseudo List: "+r.getNameWithParents(),options:i,getText:s=>s.getNameWithParents(),defaultSelection:r.children,disableFn:(s,a)=>{for(let c of a)if(c.collectChildren().includes(s))return!0},onSelectionChange:(s,a)=>{let c=a.collectChildren();for(let u of s)c.includes(u)&&Z.remove(s,u)}});o&&(Z.isEmpty(r.children)&&this.stateService.images.forEach(s=>Z.remove(s.tags,r)),r.children=o,this.sort(r.children,!0),this.injector.get(Je).updateFilters(),this.serializationService.save())}})}};e.\u0275fac=function(i){return new(i||e)(z(Xe),z(Qe),z(je),z(Ht))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uN=(()=>{let e=class e{constructor(r){let i=r.element.nativeElement;i.draggable=!0,i.ondragstart=()=>e.onDragStart(this.array,this.array.indexOf(this.object)),i.ondragenter=()=>e.onDragEnter(this.array,this.array.indexOf(this.object)),i.ondragend=()=>e.onDragEnd(this.array),i.ondragover=o=>o.preventDefault()}static onDragStart(r,i){this.currentArray==null&&this.currentIndex==null&&(this.currentArray=r,this.currentIndex=i)}static onDragEnter(r,i){this.currentArray==r&&this.currentIndex!=i&&(this.currentArray.splice(i,0,this.currentArray.splice(this.currentIndex,1)[0]),this.currentIndex=i)}static onDragEnd(r){this.currentArray==r&&(console.log("onDragEnd"),this.currentArray=null,this.currentIndex=null)}};e.\u0275fac=function(i){return new(i||e)(k(gr))},e.\u0275dir=kt({type:e,selectors:[["","dragdrop",""]],inputs:{object:[0,"dragdrop","object"],array:[0,"dragdropParent","array"]}});let t=e;return t})();var hq=(t,e)=>e.id;function fq(t,e){t&1&&(R(0,"span"),Y(1,"No Images"),x())}function pq(t,e){if(t&1){let n=J();R(0,"div",3),B("click",function(){let i=L(n).$implicit,o=_(3);return V(o.stateService.fullscreenImage.set(i))}),R(1,"i",4),B("click",function(i){let o=L(n).$implicit,s=_(3);return i.stopPropagation(),V(s.removeImage(o))}),x(),R(2,"img",5,0),B("load",function(){L(n);let i=Pn(3);return V(i.style.opacity="1")}),x()()}if(t&2){let n=e.$implicit,r=_(3);X("dragdrop",n)("dragdropParent",r.stateService.groupEditorGroup.images),b(2),gt("width",120*n.aspectRatio,"px"),X("src",n.thumbnailLink,_t)}}function gq(t,e){if(t&1&&(R(0,"div",1),te(1,pq,4,5,"div",2,hq),x()),t&2){let n=_(2);b(),ne(n.stateService.groupEditorGroup.images)}}function mq(t,e){if(t&1&&G(0,fq,2,0,"span")(1,gq,3,0,"div",1),t&2){let n=_();q(n.stateService.groupEditorGroup.images.length==0?0:1)}}var dN=(()=>{let e=class e extends rt{constructor(r,i,o,s){super(),this.filterService=r,this.serializationService=i,this.stateService=o,this.dialogService=s,this.configuration={title:"Image Group Manager",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Disband",hidden:()=>this.inputs.sourceGroup==null,click:()=>{this.dialogService.createConfirmation({title:"Confirmation: Disband Image Group",messages:["Are you sure you want to disband this group of images?"]}).then(a=>{a&&this.disband()})}},{text:()=>"Cancel",click:()=>this.close()},{text:()=>"Save",disabled:()=>this.stateService.groupEditorGroup.images.length<2,click:()=>this.submit()}],hideClickOverlay:!0}}ngOnInit(){this.stateService.groupEditorGroup={images:this.inputs.sourceGroup?[...this.inputs.sourceGroup.images]:[]},this.filterService.updateFilters()}removeImage(r){Z.remove(this.stateService.groupEditorGroup.images,r)}disband(){let r=this.inputs.sourceGroup;if(r){Z.remove(this.stateService.imageGroups,r);for(let i of r.images)delete i.group;this.serializationService.save(!0),this.close()}}submit(){let r=this.inputs.sourceGroup,i=this.stateService.groupEditorGroup;i.images.length>0&&(r?(r.images.forEach(o=>o.group=null),r.images=[...i.images],r.images.forEach(o=>o.group=r)):(this.stateService.imageGroups.push(i),i.images.forEach(o=>o.group=i)),this.serializationService.save(!0),this.close())}close(){this.stateService.groupEditorGroup=null,this.filterService.updateFilters(),this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Je),k(Ht),k(je),k(Qe))},e.\u0275cmp=se({type:e,selectors:[["app-group-manager"]],features:[Ve],decls:1,vars:1,consts:[["imageElement",""],[1,"order-container"],[1,"image-container",3,"dragdrop","dragdropParent"],[1,"image-container",3,"click","dragdrop","dragdropParent"],["title","Remove",1,"icon-button","smaller","fa-solid","fa-times",3,"click"],[3,"load","src"]],template:function(i,o){i&1&&G(0,mq,2,1),i&2&&q(o.stateService.groupEditorGroup?0:-1)},dependencies:[uN],styles:["[_nghost-%COMP%]{height:120px;min-height:120px;display:flex;align-items:center;justify-content:center;padding:.33333333rem;flex:1}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]{height:120px;min-height:120px;display:flex;gap:.33333333rem;overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:center;align-items:center;border-radius:.33333333rem;cursor:pointer}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{opacity:0;pointer-events:none;position:absolute;top:0;right:0}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;border-radius:.33333333rem;opacity:0;transition-property:opacity;transition-duration:.5s}"]});let t=e;return t})();function vq(t,e){if(t&1){let n=J();pe(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.createTag())}),Y(1,"Create Tag"),he(),pe(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.createTagGroup())}),Y(3,"Create Tag Group"),he()}}function yq(t,e){if(t&1){let n=J();pe(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.editPseudoList())}),Y(1,"Edit Pseudo List"),he(),pe(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.insertTagGroup())}),Y(3,"Insert Tag Group"),he()}if(t&2){let n=_();ce("disabled",n.isEditPseudoListDisabled())}}var hN=(()=>{let e=class e extends rt{constructor(r,i){super(),this.tagService=r,this.stateService=i,this.configuration={title:()=>"Tag: "+this.inputs.tag.getNameWithParents(),headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.close()}]}}renameTag(){this.tagService.openTagRename(this.inputs.tag),this.close()}deleteTag(){this.tagService.openTagDelete(this.inputs.tag),this.close()}changeTagParent(){this.tagService.openTagParentChange(this.inputs.tag),this.close()}createTag(){this.tagService.openTagCreate(this.inputs.tag),this.close()}createTagGroup(){this.tagService.openTagGroupCreate(this.inputs.tag),this.close()}getPseudoListEditDisabledMessage(){if(this.stateService.images.some(i=>i.tags.includes(this.inputs.tag)))return"Disabled: Tag is in use";let r=this.tagService.getParentPseudoTags(this.inputs.tag);return r.length==0?null:`Disabled: Tag is in a pseudo list of '${r.map(i=>i.getNameWithParents()).join("; ")}'`}isEditPseudoListDisabled(){return!!(this.stateService.images.some(r=>r.tags.includes(this.inputs.tag))||this.tagService.getParentPseudoTags(this.inputs.tag).length)}editPseudoList(){this.tagService.editPseudoList(this.inputs.tag),this.close()}insertTagGroup(){this.tagService.insertTagGroup(this.inputs.tag),this.close()}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Ft),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-tag-manager"]],features:[Ve],decls:8,vars:1,consts:[[1,"button","action-button",3,"click"]],template:function(i,o){i&1&&(pe(0,"div",0),Be("click",function(){return o.renameTag()}),Y(1,"Rename"),he(),pe(2,"div",0),Be("click",function(){return o.deleteTag()}),Y(3,"Delete"),he(),pe(4,"div",0),Be("click",function(){return o.changeTagParent()}),Y(5,"Change Parent"),he(),G(6,vq,4,0)(7,yq,4,2)),i&2&&(b(6),q(o.inputs.tag.group?6:7))},styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .button.action-button[_ngcontent-%COMP%]{min-height:initial;padding:.33333333rem 0}"]});let t=e;return t})();var nr=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.serializationService=r,this.dialogService=i,this.filterService=o,this.stateService=s,this.applicationService=a,this.googleService=c,this.googleLensProxyUrl="https://image-proxy.mazak-miso.workers.dev/img"}openImageGroupEditor(r){this.dialogService.create(dN,{sourceGroup:r})}openTagOptions(r){this.dialogService.create(hN,{tag:r})}openYandexRIS(r,i){window.open("https://yandex.com/images/search?rpt=imageview&url="+encodeURIComponent(i.thumbnailLink.replace(/=s\d+/u,"=s9999")),"_blank")}openGoogleRIS(r,i){let o=i.contentLink.replace(/=s\d+/u,"=s9999"),s=this.googleLensProxyUrl+"?url="+encodeURIComponent(o);window.open("https://lens.google.com/uploadbyurl?url="+encodeURIComponent(s),"_blank")}delete(r,i,o=!0){return I(this,null,function*(){if(o&&!(yield this.dialogService.createConfirmation({title:"Confirmation",messages:["Are you sure you want to "+(i?"archive":"delete")+" this image?"],positiveButtonText:"Delete",negativeButtonText:"Cancel"})))return;this.applicationService.loading.set(!0),i?yield this.googleService.move(r.id,r.parentFolderId,this.stateService.archiveFolderId):yield this.googleService.trash(r.id),Z.remove(this.stateService.images,this.stateService.images.find(a=>a.id==r.id));let s=null;if(r.group){let a=r.group.images.indexOf(r);if(s=r.group.images[a+1]||r.group.images[a-1],r.group.images.length>2)Z.remove(r.group.images,r);else{Z.remove(this.stateService.imageGroups,r.group);for(let c of r.group.images)delete c.group}}if(this.stateService.tournamentState!=null)for(let a of Object.values(this.stateService.tournamentState))a.includes(r.id)&&Z.remove(a,r.id);if(this.filterService.images.set(this.stateService.images.filter(a=>a.passesFilters)),this.stateService.viewMode==="tournament"){let a=this.stateService.images.filter(h=>We.isImage(h)),c=this.stateService.tournament.getImagesToCompare()??[],u=this.filterService.images().filter(h=>We.isImage(h));this.stateService.tournament.start(a,c.length?c:u,this.stateService.tournamentState),this.stateService.tournament.updateProgress(),this.stateService.tournamentState!=null&&(this.stateService.tournamentState=this.stateService.tournament.getState())}this.stateService.fullscreenImage.set(s),this.serializationService.save(!0),this.applicationService.loading.set(!1)})}toggleFavorite(r){r.heart=!r.heart,this.filterService.updateFilters(r),this.serializationService.save()}toggleBookmark(r){r.bookmark=!r.bookmark,this.filterService.updateFilters(r),this.serializationService.save()}updateNote(r,i){r.note=i,this.serializationService.save()}};e.\u0275fac=function(i){return new(i||e)(z(Ht),z(Qe),z(Je),z(je),z(Ye),z(Jr))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _q=()=>[],fN=(t,e)=>e.id;function Cq(t,e){t&1&&K(0,"i",2)}function Eq(t,e){if(t&1&&K(0,"i",3),t&2){let n=_(2);X("ngClass",n.tag.open?"fa-angle-down":"fa-angle-right")}}function Iq(t,e){t&1&&K(0,"i",2)}function wq(t,e){if(t&1&&(R(0,"span",7),Y(1),x()),t&2){let n=_(2);b(),Ua(" ",n.tag.pseudo?"\u279D":"\u2022"," ",e)}}function Tq(t,e){if(t&1){let n=J();R(0,"i",12),B("click",function(){L(n);let i=_(2);return V(i.toggleTagState())}),x()}}function bq(t,e){if(t&1&&K(0,"app-filter-row",14),t&2){let n=e.$implicit;X("tag",n)}}function Sq(t,e){if(t&1&&K(0,"app-filter-row",14),t&2){let n=e.$implicit;X("tag",n)}}function Dq(t,e){if(t&1&&(R(0,"div",13),te(1,bq,1,1,"app-filter-row",14,fN),te(3,Sq,1,1,"app-filter-row",14,fN),x()),t&2){let n=_(2);ce("open",n.tag.open),b(),ne(n.getTagGroups()),b(2),ne(n.getTags())}}function Aq(t,e){if(t&1){let n=J();R(0,"div",0),B("drop",function(i){L(n);let o=_();return V(o.drop(i,o.tag))}),R(1,"div",1),B("click",function(){L(n);let i=_();return V(i.onTagClick())}),te(2,Cq,1,0,"i",2,Cn),G(4,Eq,1,1,"i",3)(5,Iq,1,0,"i",2),R(6,"div",4),B("dragstart",function(i){L(n);let o=_();return V(o.start(i,o.tag))})("dragenter",function(i){L(n);let o=_();return V(o.enter(i,o.tag))})("dragleave",function(i){L(n);let o=_();return V(o.leave(i,o.tag))})("dragend",function(i){L(n);let o=_();return V(o.end(i,o.tag))}),R(7,"div",5)(8,"span",6),Y(9),x(),G(10,wq,2,2,"span",7),x()()(),R(11,"div",8),G(12,Tq,1,0,"i",9),R(13,"i",10),B("click",function(){L(n);let i=_();return V(i.galleryService.openTagOptions(i.tag))}),x()()(),G(14,Dq,5,2,"div",11)}if(t&2){let n,r=_();b(2),ne(ds(6,_q).constructor(r.tag.collectParents().length)),b(2),q(r.tag.group?4:5),b(2),X("ngClass",r.getTextClass()),b(3),Me(r.tag.name),b(),q((n=r.stateService.settings.showTagCount&&r.tag.getCount(r.stateService.images))?10:-1,n),b(2),q(r.tag.group?12:-1),b(2),q(r.tag.group?14:-1)}}var pN=(()=>{let e=class e{constructor(r,i,o,s,a){this.tagService=r,this.filterService=i,this.serializationService=o,this.galleryService=s,this.stateService=a}onTagClick(){this.tag.group?this.tag.open=!this.tag.open:this.toggleTagState()}toggleTagState(){this.tag.state=this.tag.state==0?1:this.tag.state==1?-1:0,this.filterService.updateFilters(),this.serializationService.save()}getTextClass(){let r=[];return this.tag.state==1?r.push("positive"):this.tag.state==-1&&r.push("negative"),this.tag.collectChildren().some(i=>i.state)&&r.push("underline-dashed"),r.join(" ")}getTagGroups(){return this.tag.children.filter(r=>r.group)}getTags(){return this.tag.children.filter(r=>!r.group)}start(r,i){console.log("start: "+i.name),e.startObject=i}enter(r,i){console.log("enter: "+i.name)}leave(r,i){console.log("leave: "+i.name)}drop(r,i){console.log("drop: "+i.name),i!=e.startObject&&i.parent!=e.startObject&&this.tagService.changeParent(e.startObject,i.group?i:i.parent)}end(r,i){console.log("end: "+i.name)}};e.\u0275fac=function(i){return new(i||e)(k(Ft),k(Je),k(Ht),k(nr),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-filter-row"]],inputs:{tag:"tag"},decls:1,vars:1,consts:[["ondragover","event.preventDefault()",1,"flex","gap","cursor-pointer","hover-brighten","hover-container",2,"line-height","24px",3,"drop"],[1,"flex","gap","flex-1","width-100","min-width-0","align-items-center",3,"click"],[1,"fa-solid","fa-angle-down","opacity-0"],[1,"fa-solid",2,"margin-top","1px",3,"ngClass"],["draggable","true","ondragover","event.preventDefault()",1,"flex-1","overflow-hidden",3,"dragstart","dragenter","dragleave","dragend","ngClass"],[1,"flex","pointer-events-none"],[1,"ellipsis"],[1,"pointer-events-none",2,"white-space","pre"],[1,"flex","gap","align-items-center","hover-visible"],[1,"hover-positive","fa-solid","fa-check-double"],[1,"hover-positive","fa-solid","fa-ellipsis-vertical",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer",3,"open"],[1,"hover-positive","fa-solid","fa-check-double",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer"],[3,"tag"]],template:function(i,o){i&1&&G(0,Aq,15,7),i&2&&q(o.tag?0:-1)},dependencies:[e,Ge,Wt],encapsulation:2});let t=e;return t})();var Rq=(t,e)=>e.id;function Mq(t,e){if(t&1&&K(0,"app-filter-row",11),t&2){let n=e.$implicit;X("tag",n)}}var gN=(()=>{let e=class e{constructor(r,i,o,s){this.serializationService=r,this.tagService=i,this.filterService=o,this.stateService=s}getFilterClass(r){switch(r.state){case 1:return"positive";case-1:return"negative"}}getFilterIconClass(r){switch(r.state){case 1:return"positive fa-solid";case-1:return"negative fa-solid";default:return"fa-regular"}}toggleFilter(r){r.state=r.state==0?1:r.state==1?-1:0,this.filterService.updateFilters(),this.serializationService.save()}clearFilters(){this.tagService.tags.forEach(r=>r.state=0),this.filterService.updateFilters(),this.serializationService.save()}canClear(){return this.tagService.tags.some(r=>r.state!=0)}};e.\u0275fac=function(i){return new(i||e)(k(Ht),k(Ft),k(Je),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-filter"]],hostVars:2,hostBindings:function(i,o){i&2&&ce("hidden",!o.stateService.filterVisible)},decls:30,vars:9,consts:[[1,"filter-container"],[1,"flex","center","gap-3","margins-2-v"],[1,"h-separator","margins"],[1,"flex","center","gap-3","margins-3-v"],[1,"flex","center","gap","cursor-pointer","hover-brighten",3,"click"],[1,"fa-heart",2,"margin-top","1px",3,"ngClass"],[3,"ngClass"],[1,"fa-bookmark",2,"margin-top","1px",3,"ngClass"],[1,"fa-object-group",2,"margin-top","1px",3,"ngClass"],[1,"filters-container","y-scrollbar-container"],[1,"flex","column","margins-1-h"],[3,"tag"],[1,"h-separator","gap-1-bottom","margins"],[1,"buttons-container"],[1,"button",3,"click"],[1,"v-separator","desktop-only"]],template:function(i,o){i&1&&(R(0,"div",0)(1,"div",1)(2,"span"),Y(3),x()(),K(4,"div",2),R(5,"div",3)(6,"div",4),B("click",function(){return o.toggleFilter(o.filterService.favoritesFilter)}),K(7,"i",5),R(8,"span",6),Y(9,"Favorites"),x()(),R(10,"div",4),B("click",function(){return o.toggleFilter(o.filterService.bookmarksFilter)}),K(11,"i",7),R(12,"span",6),Y(13,"Bookmarks"),x()(),R(14,"div",4),B("click",function(){return o.toggleFilter(o.filterService.groupsFilter)}),K(15,"i",8),R(16,"span",6),Y(17,"Groups"),x()()(),K(18,"div",2),R(19,"div",9)(20,"div",10),te(21,Mq,1,1,"app-filter-row",11,Rq),x()(),K(23,"div",12),R(24,"div",13)(25,"div",14),B("click",function(){return o.tagService.openTagGroupCreate()}),Y(26,"Create Tag"),x(),R(27,"div",14),B("click",function(){return o.clearFilters()}),Y(28,"Clear Filter"),x()()(),K(29,"div",15)),i&2&&(b(3),us("Filter: ",o.filterService.images().length," images"),b(4),X("ngClass",o.getFilterIconClass(o.filterService.favoritesFilter)),b(),X("ngClass",o.getFilterClass(o.filterService.favoritesFilter)),b(3),X("ngClass",o.getFilterIconClass(o.filterService.bookmarksFilter)),b(),X("ngClass",o.getFilterClass(o.filterService.bookmarksFilter)),b(3),X("ngClass",o.getFilterIconClass(o.filterService.groupsFilter)),b(),X("ngClass",o.getFilterClass(o.filterService.groupsFilter)),b(5),ne(o.tagService.getRootTags()),b(6),ce("disabled",!o.canClear()))},dependencies:[Ge,Wt,pN],styles:["[_nghost-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;overflow:hidden;height:100%;transition-property:margin-left opacity;transition-duration:.5s}.hidden[_nghost-%COMP%]{opacity:0;pointer-events:none}@media screen and (max-width: 1280px){[_nghost-%COMP%]{position:absolute;z-index:1;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background-color:color-mix(in srgb,var(--color-surface-0) 65%,transparent)}}@media screen and (min-width: 1280px){[_nghost-%COMP%]{width:300.8px;min-width:300.8px}.hidden[_nghost-%COMP%]{margin-left:-300.8px}}[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]{width:100vw;min-width:100vw}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]{width:300px;min-width:300px}}[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{flex:1;scrollbar-gutter:stable}[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;margin-top:1px}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;margin:0 .33333333rem .33333333rem}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;gap:.33333333rem}"]});let t=e;return t})();var xq=(t,e)=>e.trackBy;function Pq(t,e){if(t&1&&(pe(0,"img",1),_n("anim-fade-out"),he()),t&2){let n=e.$implicit;ao("src",n.src,_t)}}var zc=(()=>{let e=class e{constructor(){this.src=Jl.required(),this.placeholderSrc=Jl(),this.trackBy=0,this.images=[],un(()=>this.next(this.src(),this.placeholderSrc()))}next(r,i){if(!r)return;let o=++this.trackBy,s=!1,a=new Image;if(a.src=r,a.complete){this.images=[{trackBy:o,src:r}];return}if(a.decode().finally(()=>{o==this.trackBy&&(s=!0,this.images=[{trackBy:o,src:r}])}),i){let c=new Image;if(c.src=i,c.complete){this.images=[{trackBy:o,src:i}];return}c.decode().finally(()=>{o==this.trackBy&&!s&&(this.images=[{trackBy:o,src:i}])})}this.images=[]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=se({type:e,selectors:[["app-image"]],inputs:{src:[1,"src"],placeholderSrc:[1,"placeholderSrc"]},decls:3,vars:0,consts:[[1,"stack-container-alt","width-100","height-100"],[1,"anim-fade-in",3,"src"]],template:function(i,o){i&1&&(pe(0,"div",0),te(1,Pq,1,1,"img",1,xq),he()),i&2&&(b(),ne(o.images))},dependencies:[Ge],styles:["[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;-webkit-user-select:none;user-select:none;object-fit:contain}"]});let t=e;return t})();var Nq=(t,e)=>e.id;function kq(t,e){if(t&1){let n=J();pe(0,"span",3),Be("click",function(){L(n);let i=_().$index,o=_(2);return V(o.toggleRemoval(i))}),ja(1,"i",4)(2,"i",5),he()}if(t&2){let n=_().$index,r=_(2);ce("pending",r.isRemovalPending(n))}}function Oq(t,e){if(t&1){let n=J();pe(0,"img",1),Be("click",function(){let i=L(n).$implicit,o=_(2);return V(o.openFullscreen(i))}),he(),G(1,kq,3,2,"span",2)}if(t&2){let n=e.$implicit,r=e.$index,i=e.$count;ao("src",n.thumbnailLink,_t),b(),q(r!==i-1?1:-1)}}function Fq(t,e){if(t&1&&(pe(0,"div",0),te(1,Oq,2,2,null,null,Nq),he()),t&2){let n=_();b(),ne(n.path)}}var zg=(()=>{let e=class e extends rt{constructor(r,i,o){super(),this.stateService=r,this.serializationService=i,this.filterService=o,this.configuration={title:()=>"Comparison Path",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>this.hasPendingChanges?"Save":"Close",click:()=>this.saveOrClose()}]},this.path=[],this.pendingRemovals=new Set}ngOnInit(){this.buildPath()}close(){this.resolve(!1)}toggleRemoval(r){if(!this.path||r<0||r>=this.path.length-1)return;let i=this.path[r].id,o=this.path[r+1].id,s=this.makeEdgeKey(i,o);this.pendingRemovals.has(s)?this.pendingRemovals.delete(s):this.pendingRemovals.add(s)}isRemovalPending(r){if(!this.path||r<0||r>=this.path.length-1)return!1;let i=this.path[r].id,o=this.path[r+1].id;return this.pendingRemovals.has(this.makeEdgeKey(i,o))}get hasPendingChanges(){return this.pendingRemovals.size>0}openFullscreen(r){r&&this.stateService.fullscreenImage.set(r)}saveOrClose(){if(!this.hasPendingChanges){this.close();return}let r=this.stateService.tournament.comparison(),i=r?[r[0]?.id,r[1]?.id]:null,o=this.stateService.tournamentState?.comparisons??[],s=!1;if(o.length){let a=o.filter(([c,u])=>!this.pendingRemovals.has(this.makeEdgeKey(c,u)));if(s=a.length!==o.length,s){this.stateService.tournamentState={comparisons:a},this.serializationService.save();let c=this.stateService.images.filter(p=>We.isImage(p)),u=this.stateService.tournament.getImagesToCompare(),h=this.filterService.images().filter(p=>We.isImage(p));if(this.stateService.tournament.start(c,u.length?u:h,this.stateService.tournamentState),i?.[0]&&i?.[1]){let p=this.stateService.tournament.getImageByIdMap(c),g=p.get(i[0]),v=p.get(i[1]);g&&v&&this.stateService.tournament.comparison.set([g,v])}}}this.resolve(s)}buildPath(){this.path=[];let r=this.inputs?.start,i=this.inputs?.end;if(!r||!i)return;if(r.id===i.id){this.path=[r];return}let o=this.stateService.tournament.getComparisonAdjacency(this.stateService.tournamentState?.comparisons??[]);if(o.size===0)return;let s=[r.id],a=new Set([r.id]),c=new Map;for(let g=0;g<s.length;g++){let v=s[g];if(v===i.id)break;for(let w of o.get(v)??[])a.has(w)||(a.add(w),c.set(w,v),s.push(w))}if(!a.has(i.id))return;let u=[],h=i.id;for(;h&&(u.unshift(h),h!==r.id);)h=c.get(h);if(u[0]!==r.id)return;let p=this.stateService.tournament.getImageByIdMap(this.stateService.images);this.path=u.map(g=>p.get(g)??(g===r.id?r:g===i.id?i:void 0)).filter(Boolean)}makeEdgeKey(r,i){return`${r}|${i}`}};e.\u0275fac=function(i){return new(i||e)(k(je),k(Ht),k(Je))},e.\u0275cmp=se({type:e,selectors:[["app-comparison-path"]],features:[Ve],decls:1,vars:1,consts:[[1,"path-row"],["loading","lazy",1,"path-thumb",3,"click","src"],[1,"path-separator",3,"pending"],[1,"path-separator",3,"click"],[1,"fa-solid","fa-angle-right"],[1,"fa-solid","fa-trash"]],template:function(i,o){i&1&&G(0,Fq,3,0,"div",0),i&2&&q(o.path.length?0:-1)},styles:["[_nghost-%COMP%]{display:flex;overflow:auto}.path-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.33333333rem;padding:.33333333rem;overflow-x:auto;overflow-y:hidden}.path-thumb[_ngcontent-%COMP%]{height:256px;border-radius:.33333333rem;border:1px solid var(--color-border)}.path-separator[_ngcontent-%COMP%]{display:grid;place-items:center;width:18px;height:18px;cursor:pointer}.path-separator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{grid-area:1/1;color:var(--color-text-secondary);transition:opacity .25s ease,color .25s ease}.path-separator[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]{opacity:0}.path-separator.pending[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]{opacity:1;color:var(--color-negative)}.path-separator.pending[_ngcontent-%COMP%]   .fa-angle-right[_ngcontent-%COMP%]{opacity:0}@media (hover: hover) and (pointer: fine){.path-separator[_ngcontent-%COMP%]:hover   .fa-trash[_ngcontent-%COMP%]{opacity:1}.path-separator[_ngcontent-%COMP%]:hover   .fa-angle-right[_ngcontent-%COMP%]{opacity:0}}"]});let t=e;return t})();var Gg=(()=>{let e=class e{static getPlaceholderSrc(r){if(r&&!(r.size!=null&&r.size<this.thumbnailSkipThresholdBytes))return r.thumbnailLink}};e.thumbnailSkipThresholdBytes=1048576;let t=e;return t})();var mN=(t,e)=>e.id;function Lq(t,e){if(t&1){let n=J();R(0,"img",6),B("click",function(){let i=L(n).$implicit,o=_(2),s=_();return V(s.openComparisonPath(i,o))}),x()}if(t&2){let n=e.$implicit;gt("aspect-ratio",n.aspectRatio),X("src",n.thumbnailLink,_t)}}function Vq(t,e){if(t&1&&te(0,Lq,1,3,"img",5,mN),t&2){let n=_(2);ne(n.comparisonWinners)}}function jq(t,e){if(t&1){let n=J();R(0,"img",6),B("click",function(){let i=L(n).$implicit,o=_(2),s=_();return V(s.openComparisonPath(o,i))}),x()}if(t&2){let n=e.$implicit;gt("aspect-ratio",n.aspectRatio),X("src",n.thumbnailLink,_t)}}function Uq(t,e){if(t&1&&te(0,jq,1,3,"img",5,mN),t&2){let n=_(2);ne(n.comparisonLosers)}}function Bq(t,e){if(t&1){let n=J();R(0,"img",0),B("load",function(){L(n);let i=_();return V(i.loadingT=!1)}),x(),R(1,"img",0),B("load",function(){L(n);let i=_();return V(i.loadingC=!1)}),x(),R(2,"div",1),_n("anim-fade-out"),R(3,"div",2),G(4,Vq,2,0),x(),R(5,"app-image",3),B("click",function(){let i=L(n),o=_();return V(o.onImageClick(i))}),x(),R(6,"div",4),G(7,Uq,2,0),x()()}if(t&2){let n=e,r=_();X("src",n.thumbnailLink,_t),b(),X("src",n.contentLink,_t),b(),ce("hide-comparison-relations",!r.stateService.settings.showFullscreenComparisonRelations),b(2),q(r.comparisonWinners.length?4:-1),b(),X("src",n.contentLink)("placeholderSrc",r.galleryUtils.getPlaceholderSrc(n)),b(2),q(r.comparisonLosers.length?7:-1)}}var vN=(()=>{let e=class e{constructor(r,i,o,s,a,c,u){this.applicationService=r,this.dialogService=i,this.googleService=o,this.stateService=s,this.galleryService=a,this.tagService=c,this.filterService=u,this.galleryUtils=Gg,this.loadingT=!0,this.loadingC=!0,this.video=!1,this.comparisonWinners=[],this.comparisonLosers=[],un(()=>{let h=this.stateService.fullscreenImage();h?(We.isVideo(h)?this.video=!0:(this.video=!1,this.loadingT=!0,this.loadingC=!0),this.ensureTournamentInitialized(),this.refreshComparisonRelations(h)):(this.comparisonWinners=[],this.comparisonLosers=[])})}openComparisonPath(r,i){if(!r||!i)return;let o=this.dialogService.create(zg,{start:r,end:i});o&&o.then(s=>{if(s){let a=this.stateService.fullscreenImage();a?this.refreshComparisonRelations(a):(this.comparisonWinners=[],this.comparisonLosers=[])}})}refreshComparisonRelations(r){this.comparisonWinners=this.stateService.tournament.getNearestWinners(r),this.comparisonLosers=this.stateService.tournament.getNearestLosers(r)}ensureTournamentInitialized(){if(this.stateService.tournament.comparisons!=null)return;let r=this.stateService.images.filter(s=>We.isImage(s)),i=this.filterService.images().filter(s=>We.isImage(s)),o=i.length?i:r;this.stateService.tournament.start(r,o,this.stateService.tournamentState)}getSrc(r){if(!this.loadingC)return r.contentLink;if(!this.loadingT)return r.thumbnailLink}onImageClick(r){this.applicationService.reduceDataUsage&&(r.thumbnailLink=r.thumbnailLink.replace("=s220","=s440"))}snapshot(){let r=document.getElementById("video-element");if(r){let i=document.createElement("canvas");i.width=r.videoWidth,i.height=r.videoHeight,i.getContext("2d").drawImage(r,0,0),window.open("about:blank","Video Snapshot").document.write("<img src='"+i.toDataURL("image/png")+"' alt='from canvas'/>")}}};e.\u0275fac=function(i){return new(i||e)(k(Ye),k(Qe),k(Jr),k(je),k(nr),k(Ft),k(Je))},e.\u0275cmp=se({type:e,selectors:[["app-fullscreen"]],decls:1,vars:1,consts:[[2,"display","none",3,"load","src"],[1,"fullscreen-container","anim-fade-in"],[1,"comparison-winners"],[3,"click","src","placeholderSrc"],[1,"comparison-losers"],["loading","lazy",3,"src","aspect-ratio"],["loading","lazy",3,"click","src"]],template:function(i,o){if(i&1&&G(0,Bq,8,8),i&2){let s;q((s=o.stateService.fullscreenImage())?0:-1,s)}},dependencies:[Ge,zc],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}@media screen and (max-width: 1280px){[_nghost-%COMP%]{min-width:100%}}[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:space-between;position:relative}[_nghost-%COMP%]   .fullscreen-container.hide-comparison-relations[_ngcontent-%COMP%]   .comparison-winners[_ngcontent-%COMP%]{transform:translate(-100%)}[_nghost-%COMP%]   .fullscreen-container.hide-comparison-relations[_ngcontent-%COMP%]   .comparison-losers[_ngcontent-%COMP%]{transform:translate(100%)}[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem;z-index:1;transform:translate(0);transition:transform .5s ease;overflow:auto;max-height:100%;width:fit-content}[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;border-radius:.33333333rem;border:1px solid var(--color-border);cursor:pointer}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:96px}}[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]{left:0}[_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]{right:0}"]});let t=e;return t})();var $q=(t,e)=>e.id;function Hq(t,e){if(t&1){let n=J();R(0,"i",12),B("click",function(i){L(n);let o=_(2).$implicit;return _().galleryService.openImageGroupEditor(o.group),V(i.stopPropagation())}),x()}}function zq(t,e){if(t&1){let n=J();R(0,"div",7)(1,"i",8),B("click",function(i){L(n);let o=_().$implicit,s=_();return i.stopPropagation(),V(s.galleryService.toggleFavorite(o))}),x(),R(2,"i",9),B("click",function(i){L(n);let o=_().$implicit,s=_();return i.stopPropagation(),V(s.galleryService.toggleBookmark(o))}),x(),G(3,Hq,1,0,"i",10),x(),K(4,"div",11)}if(t&2){let n=_().$implicit;b(),X("ngClass",n.heart?"fa-solid active":"fa-regular"),b(),X("ngClass",n.bookmark?"fa-solid active":"fa-regular"),b(),q(n.group?3:-1)}}function Gq(t,e){if(t&1){let n=J();R(0,"div",4),_n("anim-fade-out"),B("click",function(){let i=L(n).$implicit,o=_();return V(o.onImageClick(i))}),R(1,"div",5)(2,"img",6,0),B("create",function(i){let o=L(n).$implicit,s=_();return V(s.masonryBricks[o.id]=i.nativeElement)})("load",function(){L(n);let i=Pn(3);return V(i.style.opacity="1")}),x()(),G(4,zq,5,3),x()}if(t&2){let n=e.$implicit,r=_();gt("width",n.masonryWidth,"px")("height",n.masonryHeight,"px")("top",n.masonryTop,"px")("left",n.masonryLeft,"px")("opacity",n.group&&r.stateService.groupEditorGroup&&!r.stateService.groupEditorGroup.images.includes(n)?"0.15":"1"),b(2),X("src",n.thumbnailLink,_t),b(2),q(r.areBrickButtonsVisible()?4:-1)}}var yN=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.cdr=i,this.tagService=o,this.filterService=s,this.stateService=a,this.galleryService=c,this.masonryBricks={},this.layoutUpdateDelay=new Yr(100),un(()=>this.updateLayout(this.filterService.masonryImages())),new ResizeObserver(()=>{xt.isLargeScreen()&&this.requestLayoutUpdate()}).observe(r.nativeElement)}requestLayoutUpdate(){this.layoutUpdateDelay.restart(()=>{let r=this.masonryScrollContainer.scrollTop/(this.masonryScrollContainer.scrollHeight-this.masonryScrollContainer.clientHeight);this.updateLayout();let i=(this.masonryScrollContainer.scrollHeight-this.masonryScrollContainer.clientHeight)*r;setTimeout(()=>this.masonryScrollContainer.scrollTo({top:i,behavior:"smooth"}),500),this.cdr.detectChanges()})}updateLayout(r=this.filterService.masonryImages()){if(this.masonryContainer&&!Z.isEmpty(r)){let i=xt.isLargeScreen()?250:200,o=xt.isLargeScreen()?9.6666666666:4.3333333333,s=this.masonryContainer.clientWidth,a=Math.max(Math.floor(s/i),2),c=(s-o*(a-1))/a,u=[],h=[];for(let p=0;p<a;p++)u[p]=0,h[p]=p*(c+o);for(let p of this.filterService.masonryImages()){p.masonryWidth!=c&&(p.masonryWidth=c,p.masonryHeight=c/p.aspectRatio);let g=u.indexOf(Math.min(...u));p.masonryTop=u[g],p.masonryLeft=h[g],u[g]=u[g]+p.masonryHeight+o}}}scrollTo(r){if(r){let i=r.group?r.group.images.find(s=>s.passesFilters):r;this.masonryBricks[i?.id].scrollIntoView()}}onImageClick(r){let i=this.stateService.groupEditorGroup;if(i){if(r.group&&i!=r.group)return;Z.toggle(i.images,r);return}this.stateService.fullscreenImage.set(r)}areBrickButtonsVisible(){return xt.isLargeScreen()&&!this.stateService.groupEditorGroup}};e.\u0275fac=function(i){return new(i||e)(k(jt),k(lo),k(Ft),k(Je),k(je),k(nr))},e.\u0275cmp=se({type:e,selectors:[["app-masonry"]],decls:4,vars:0,consts:[["imageElement",""],[1,"masonry-scroll-container",3,"create"],[1,"masonry-container",3,"create"],[1,"masonry-brick","anim-fade-in",3,"width","height","top","left","opacity"],[1,"masonry-brick","anim-fade-in",3,"click"],[1,"brick-container"],["loading","lazy",3,"create","load","src"],[1,"brick-header"],["title","Favorite",1,"icon-button","fa-heart",3,"click","ngClass"],["title","Bookmark",1,"icon-button","fa-bookmark",3,"click","ngClass"],["title","Group Manager",1,"icon-button","active","fa-solid","fa-object-group"],[1,"brick-footer"],["title","Group Manager",1,"icon-button","active","fa-solid","fa-object-group",3,"click"]],template:function(i,o){i&1&&(R(0,"div",1),B("create",function(a){return o.masonryScrollContainer=a.nativeElement}),R(1,"div",2),B("create",function(a){return o.masonryContainer=a.nativeElement,o.updateLayout()}),te(2,Gq,5,12,"div",3,$q),x()()),i&2&&(b(2),ne(o.filterService.masonryImages()))},dependencies:[Ge,Wt,Ug],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:scroll;height:100%;padding:.33333333rem}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]{position:absolute;transition-property:top,left,width,height,opacity;transition-duration:.5s;padding-bottom:.33333333rem;cursor:pointer}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-container[_ngcontent-%COMP%]{border-radius:.33333333rem;width:100%;height:100%;display:flex;background-color:var(--color-surface-200);transition-property:outline,background-color;transition-duration:.5s;outline:1px solid transparent}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;-webkit-user-select:none;user-select:none;border-radius:.33333333rem;contain:size;opacity:0;transition:opacity .5s ease}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]:hover   .brick-header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]:hover   .brick-footer[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{opacity:1;pointer-events:all}}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]{width:100%;position:absolute;display:flex;padding:.33333333rem;box-sizing:border-box;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;gap:.33333333rem}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;background-color:transparent;border-color:transparent}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]:hover{border-color:var(--color-border);-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]   .icon-button.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]   .icon-button.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]{top:0}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]{bottom:0;padding-bottom:.66666666rem}"]});let t=e;return t})();var qq=()=>[],_N=(t,e)=>e.id;function Wq(t,e){t&1&&K(0,"i",2)}function Kq(t,e){if(t&1&&K(0,"i",3),t&2){let n=_(2);X("ngClass",n.tag.open?"fa-angle-down":"fa-angle-right")}}function Qq(t,e){t&1&&K(0,"i",2)}function Yq(t,e){if(t&1&&(R(0,"span",7),Y(1),x()),t&2){let n=_(2);b(),Ua(" ",n.tag.pseudo?"\u279D":"\u2022"," ",e)}}function Jq(t,e){if(t&1&&K(0,"app-tagger-row",12),t&2){let n=e.$implicit,r=_(3);X("tag",n)("target",r.target)("groupMode",r.groupMode)}}function Zq(t,e){if(t&1&&K(0,"app-tagger-row",12),t&2){let n=e.$implicit,r=_(3);X("tag",n)("target",r.target)("groupMode",r.groupMode)}}function Xq(t,e){if(t&1&&(R(0,"div",11),te(1,Jq,1,3,"app-tagger-row",12,_N),te(3,Zq,1,3,"app-tagger-row",12,_N),x()),t&2){let n=_(2);ce("open",n.tag.open),b(),ne(n.getTagGroups()),b(2),ne(n.getTags())}}function e5(t,e){if(t&1){let n=J();R(0,"div",0),B("drop",function(i){L(n);let o=_();return V(o.drop(i,o.tag))}),R(1,"div",1),B("click",function(){L(n);let i=_();return V(i.onTagClick())}),te(2,Wq,1,0,"i",2,Cn),G(4,Kq,1,1,"i",3)(5,Qq,1,0,"i",2),R(6,"div",4),B("dragstart",function(i){L(n);let o=_();return V(o.start(i,o.tag))})("dragenter",function(i){L(n);let o=_();return V(o.enter(i,o.tag))})("dragleave",function(i){L(n);let o=_();return V(o.leave(i,o.tag))})("dragend",function(i){L(n);let o=_();return V(o.end(i,o.tag))}),R(7,"div",5)(8,"span",6),Y(9),x(),G(10,Yq,2,2,"span",7),x()()(),R(11,"div",8)(12,"i",9),B("click",function(){L(n);let i=_();return V(i.galleryService.openTagOptions(i.tag))}),x()()(),G(13,Xq,5,2,"div",10)}if(t&2){let n,r=_();b(),ce("disabled",r.tag.pseudo)("cursor-pointer",!r.tag.pseudo),b(),ne(ds(9,qq).constructor(r.tag.collectParents().length)),b(2),q(r.tag.group?4:5),b(2),X("ngClass",r.getTextClass()),b(3),Me(r.tag.name),b(),q((n=r.stateService.settings.showTagCount&&r.tag.getCount(r.stateService.images))?10:-1,n),b(3),q(r.tag.group?13:-1)}}var CN=(()=>{let e=class e{constructor(r,i,o,s,a){this.tagService=r,this.filterService=i,this.serializationService=o,this.galleryService=s,this.stateService=a}onTagClick(){this.tag.group?this.tag.open=!this.tag.open:this.tag.pseudo||(this.groupMode&&this.target.group?this.target.group.images.every(r=>r.tags.includes(this.tag))?this.target.group.images.forEach(r=>Z.remove(r.tags,this.tag)):this.target.group.images.forEach(r=>Z.push(r.tags,this.tag)):Z.toggle(this.target.tags,this.tag),this.serializationService.save(),this.filterService.updateFilters())}getTextClass(){if(this.tag.pseudo)return"";let r=[];if(this.target)if(this.target.group)if(this.groupMode)if(this.tag.group){let i=this.tag.collectChildren();this.target.group.images.every(o=>i.some(s=>o.tags.includes(s)))?r.push("positive"):this.target.group.images.some(o=>i.some(s=>o.tags.includes(s)))&&r.push("underline-positive")}else this.target.group.images.every(i=>i.tags.includes(this.tag))?r.push("positive"):this.target.group.images.some(i=>i.tags.includes(this.tag))&&r.push("underline-positive");else{let i=Z.except(this.target.group.images,this.target);if(this.tag.group){let o=this.tag.collectChildren();this.target.tags.some(s=>o.includes(s))?r.push("positive"):i.some(s=>s.tags.some(a=>o.includes(a)))&&r.push("underline-dashed-positive")}else this.target.group.images.every(o=>o.tags.includes(this.tag))?r.push("underline-positive"):i.some(o=>o.tags.includes(this.tag))&&r.push("underline-dashed-positive"),this.target.tags.includes(this.tag)&&r.push("positive")}else this.tag.group?this.tag.collectChildren().some(i=>this.target.tags.includes(i))&&r.push("underline-positive"):this.target.tags.includes(this.tag)&&r.push("positive");return r.join(" ")}getTagGroups(){return this.tag.children.filter(r=>r.group)}getTags(){return this.tag.children.filter(r=>!r.group)}start(r,i){console.log("start: "+i.name),e.startObject=i}enter(r,i){console.log("enter: "+i.name),console.log(r.target)}leave(r,i){console.log("leave: "+i.name)}drop(r,i){console.log("drop: "+i.name),i!=e.startObject&&i.parent!=e.startObject&&this.tagService.changeParent(e.startObject,i.group?i:i.parent)}end(r,i){console.log("end: "+i.name)}};e.\u0275fac=function(i){return new(i||e)(k(Ft),k(Je),k(Ht),k(nr),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-tagger-row"]],inputs:{tag:"tag",target:"target",groupMode:"groupMode"},decls:1,vars:1,consts:[["ondragover","event.preventDefault()",1,"flex","gap","hover-brighten","hover-container",2,"line-height","24px",3,"drop"],[1,"flex","gap","flex-1","width-100","min-width-0","align-items-center",3,"click"],[1,"fa-solid","fa-angle-down","opacity-0"],[1,"fa-solid",2,"margin-top","1px",3,"ngClass"],["draggable","true","ondragover","event.preventDefault()",1,"flex-1","overflow-hidden",3,"dragstart","dragenter","dragleave","dragend","ngClass"],[1,"flex","pointer-events-none"],[1,"ellipsis"],[1,"pointer-events-none",2,"white-space","pre"],[1,"flex","gap","align-items-center","cursor-pointer","hover-visible"],[1,"hover-positive","fa-solid","fa-ellipsis-vertical",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer",3,"open"],[1,"flex","column","overflow-hidden","anim-drawer"],[3,"tag","target","groupMode"]],template:function(i,o){i&1&&G(0,e5,14,10),i&2&&q(o.tag?0:-1)},dependencies:[e,Ge,Wt],encapsulation:2});let t=e;return t})();var t5=t=>[t],EN=(t,e)=>e.id;function n5(t,e){return this.groupTracker}function r5(t,e){if(t&1){let n=J();R(0,"div",27),B("click",function(){let i=L(n).$implicit,o=_(3);return V(o.stateService.fullscreenImage.set(i))}),K(1,"app-image",28)(2,"div",29),x()}if(t&2){let n=e.$implicit,r=_(3);b(),gt("width",120*n.aspectRatio,"px"),ce("grayscale",!n.passesFilters),X("src",n.thumbnailLink),b(),ce("target",n==r.target)}}function i5(t,e){if(t&1&&(R(0,"div",25),_n("anim-fade-out"),te(1,r5,3,7,"div",26,EN),x()),t&2){let n=e.$implicit;b(),ne(n.images)}}function o5(t,e){if(t&1&&(R(0,"div",24),te(1,i5,3,0,"div",25,n5,!0),x(),K(3,"div",4)),t&2){let n=_();b(),ne(S_(0,t5,n.target.group))}}function s5(t,e){t&1&&(R(0,"span",31),Y(1,"Size"),x(),R(2,"span",32),Y(3),x()),t&2&&(b(3),Me(e))}function a5(t,e){t&1&&(R(0,"span",31),Y(1,"Resolution"),x(),R(2,"span",32),Y(3),x()),t&2&&(b(3),Me(e))}function c5(t,e){if(t&1&&(R(0,"div",3)(1,"div",30),Y(2),x(),G(3,s5,4,1),G(4,a5,4,1),x()),t&2){let n,r,i=_();b(),X("title",i.target.name),b(),Me(i.target.name),b(),q((n=i.getFileSize(i.target))?3:-1,n),b(),q((r=i.getResolution(i.target))?4:-1,r)}}function l5(t,e){if(t&1){let n=J();R(0,"input",33),B("input",function(i){L(n);let o=_();return V(o.onNoteInput(i))}),x(),K(1,"div",4)}if(t&2){let n=_();X("value",n.target.note)}}function u5(t,e){if(t&1&&K(0,"app-tagger-row",20),t&2){let n=e.$implicit,r=_();X("tag",n)("target",r.target)("groupMode",r.groupMode)}}var IN=(()=>{let e=class e{constructor(r,i,o,s){this.tagService=r,this.galleryService=i,this.googleService=o,this.stateService=s,this.groupMode=!1,this.groupTracker=0,un(()=>{if(this.target=this.stateService.fullscreenImage(),this.target==null){this.groupMode=!1;return}this.currentGroup!=this.target.group&&(this.currentGroup=this.target.group,this.groupTracker++)})}getFileSize(r){let i=Number(r?.size);return!r||Number.isNaN(i)?null:(i/1024).toLocaleString(void 0,{maximumFractionDigits:1})+" KB"}getResolution(r){return r?.imageMediaMetadata?.width&&r?.imageMediaMetadata?.height?r.imageMediaMetadata.width+" x "+r.imageMediaMetadata.height:r?.videoMediaMetadata?.width&&r?.videoMediaMetadata?.height?r.videoMediaMetadata.width+" x "+r.videoMediaMetadata.height:null}onNoteInput(r){if(!this.target)return;let i=r.target?.value??"";this.target.note!==i&&this.galleryService.updateNote(this.target,i)}};e.\u0275fac=function(i){return new(i||e)(k(Ft),k(nr),k(Jr),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-tagger"]],decls:38,vars:11,consts:[[1,"v-separator","desktop-only"],[1,"tagger-container"],[1,"overflow-hidden"],[1,"file-information"],[1,"h-separator","margins"],[1,"flex","gap","center","padding-1"],[1,"flex","gap"],["title","Download",1,"icon-button","fa-solid","fa-download",3,"click"],["title","Google Drive",1,"icon-button","fa-brands","fa-google-drive",3,"click"],[1,"v-separator"],["title","Google Lens",1,"icon-button","fa-brands","fa-google",3,"click"],["title","Yandex RIS",1,"icon-button","fa-brands","fa-yandex-international",3,"click"],["title","Archive",1,"icon-button","fa-solid","fa-box",3,"click"],["title","Delete",1,"icon-button","fa-solid","fa-trash",3,"click"],[1,"flex",2,"justify-content","space-evenly"],[1,"flex","center","gap","cursor-pointer","hover-brighten","padding-2",3,"click"],[1,"fa-heart",2,"margin-top","1px",3,"ngClass"],[1,"fa-bookmark",2,"margin-top","1px",3,"ngClass"],[1,"filters-container","y-scrollbar-container"],[1,"flex","column","margins-1-h"],[3,"tag","target","groupMode"],[1,"h-separator","gap-1-bottom","margins"],[1,"buttons-container"],[1,"button",3,"click"],[1,"group-images-container","x-scrollbar-container","height-auto"],[1,"group-images-scroll-container","anim-fade-in"],[1,"group-image-container"],[1,"group-image-container",3,"click"],[3,"src"],[1,"target-border"],[1,"file-name",3,"title"],[1,"label"],[1,"value"],["type","text","placeholder","Note",1,"note-input",3,"input","value"]],template:function(i,o){i&1&&(K(0,"div",0),R(1,"div",1),G(2,o5,4,2),R(3,"div",2),G(4,c5,5,4,"div",3),x(),K(5,"div",4),G(6,l5,2,1),R(7,"div",5)(8,"div",6)(9,"i",7),B("click",function(){return o.googleService.download(o.target)}),x(),R(10,"i",8),B("click",function(a){return a.stopPropagation(),o.googleService.openSearch(o.target.name)}),x(),K(11,"div",9),R(12,"i",10),B("click",function(a){return a.stopPropagation(),o.galleryService.openGoogleRIS(a,o.target)}),x(),R(13,"i",11),B("click",function(a){return a.stopPropagation(),o.galleryService.openYandexRIS(a,o.target)}),x(),K(14,"div",9),x(),R(15,"i",12),B("click",function(){return o.galleryService.delete(o.target,!0)}),x(),R(16,"i",13),B("click",function(){return o.galleryService.delete(o.target,!1)}),x()(),K(17,"div",4),R(18,"div",14)(19,"div",15),B("click",function(){return o.galleryService.toggleFavorite(o.target)}),K(20,"i",16),R(21,"span"),Y(22,"Favorite"),x()(),R(23,"div",15),B("click",function(){return o.galleryService.toggleBookmark(o.target)}),K(24,"i",17),R(25,"span"),Y(26,"Bookmark"),x()()(),K(27,"div",4),R(28,"div",18)(29,"div",19),te(30,u5,1,3,"app-tagger-row",20,EN),x()(),K(32,"div",21),R(33,"div",22)(34,"div",23),B("click",function(){return o.tagService.openTagGroupCreate()}),Y(35,"Create Tag"),x(),R(36,"div",23),B("click",function(){return o.groupMode=!o.groupMode}),Y(37,"Group Mode"),x()()()),i&2&&(b(2),q(o.target!=null&&o.target.group?2:-1),b(2),q(o.target?4:-1),b(2),q(o.target?6:-1),b(13),ce("positive",o.target==null?null:o.target.heart),b(),X("ngClass",o.target!=null&&o.target.heart?"fa-solid":"fa-regular"),b(3),ce("positive",o.target==null?null:o.target.bookmark),b(),X("ngClass",o.target!=null&&o.target.bookmark?"fa-solid":"fa-regular"),b(6),ne(o.tagService.getRootTags()),b(6),ce("positive",o.groupMode))},dependencies:[Ge,Wt,CN,zc],styles:["[_nghost-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;transition:.5s;overflow:hidden;height:100%;background-color:color-mix(in srgb,var(--color-surface-0) 65%,transparent);scroll-snap-align:center}[_nghost-%COMP%]   .note-input[_ngcontent-%COMP%]{height:auto;border:0;border-radius:0;padding:.33333333rem .66666666rem}@media screen and (max-width: 1280px){[_nghost-%COMP%]{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:1;position:relative}}@media screen and (min-width: 1280px){[_nghost-%COMP%]{width:300.8px;min-width:300.8px}}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]{display:grid;padding:.66666666rem;column-gap:.33333333rem;row-gap:.33333333rem;grid-template-columns:auto 1fr;position:relative}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;grid-column:1/3}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.02em;font-size:.75rem;opacity:.8;white-space:nowrap;align-content:center}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;font-size:.95rem;align-content:center}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]{width:100vw;min-width:100vw}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]{width:300px;min-width:300px}}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]{height:120px;display:flex;align-items:center;overflow-x:auto;overflow-y:hidden;margin:.33333333rem;scrollbar-gutter:stable}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;height:100%;flex:0 0 auto;width:max-content;margin:0 auto}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:0 0 auto;height:100%;position:relative;border-radius:.33333333rem;cursor:pointer;overflow:hidden}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]{flex:0 0 auto;height:100%}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   app-image.grayscale[_ngcontent-%COMP%]{opacity:.5!important;filter:grayscale(1)}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   .target-border[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:inherit;pointer-events:none}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   .target-border.target[_ngcontent-%COMP%]{box-sizing:border-box;border:2px solid var(--color-positive)}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{flex:1;scrollbar-gutter:stable}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;margin-top:1px}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;margin:0 .33333333rem .33333333rem}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;gap:.33333333rem}"]});let t=e;return t})();var d5=(t,e)=>e.id;function h5(t,e){t&1&&ja(0,"i",5)}function f5(t,e){if(t&1){let n=J();pe(0,"div",3)(1,"img",4),Be("click",function(){let i=L(n).$implicit,o=_(2);return V(o.openFullscreen(i))}),he(),G(2,h5,1,0,"i",5),he()}if(t&2){let n=e.$implicit,r=e.$index,i=e.$count;b(),gt("aspect-ratio",n.aspectRatio),ao("src",n.thumbnailLink,_t),b(),q(r!==i-1?2:-1)}}function p5(t,e){if(t&1&&(pe(0,"div",1),te(1,f5,3,4,"div",3,d5),he()),t&2){let n=_();b(),ne(n.longestChain)}}function g5(t,e){t&1&&(pe(0,"div",2),Y(1,"No comparison chain available yet."),he())}var wN=(()=>{let e=class e{constructor(r){this.stateService=r,this.longestChain=[],un(()=>{this.stateService.tournament.comparison(),this.refresh()})}refresh(){this.longestChain=this.getLongestChain(this.stateService.tournament.comparisons??[])}openFullscreen(r){r&&this.stateService.fullscreenImage.set(r)}getLongestChain(r){if(!r.length)return[];let i=new Map,o=new Map,s=[],a=g=>{i.has(g)||(i.set(g,new Set),s.push(g))};for(let[g,v]of r)!g||!v||(o.set(g.id,g),o.set(v.id,v),a(g.id),a(v.id),i.get(g.id).add(v.id));let c=new Map,u=new Set,h=g=>{let v=c.get(g);if(v)return v;if(u.has(g))return[];u.add(g);let w=[];for(let P of i.get(g)??[]){let j=h(P);j.length>w.length&&(w=j)}u.delete(g);let O=[g,...w];return c.set(g,O),O},p=[];for(let g of s){let v=h(g);v.length>p.length&&(p=v)}return p.map(g=>o.get(g)).filter(g=>!!g)}};e.\u0275fac=function(i){return new(i||e)(k(je))},e.\u0275cmp=se({type:e,selectors:[["app-image-tournament-longest-chain"]],decls:3,vars:1,consts:[[1,"longest-chain-wrapper"],[1,"longest-chain"],[1,"chain-empty"],[1,"chain-segment"],["loading","lazy",1,"chain-image",3,"click","src"],[1,"fa-solid","fa-chevron-right","chain-arrow"]],template:function(i,o){i&1&&(pe(0,"div",0),G(1,p5,3,0,"div",1)(2,g5,2,0,"div",2),he()),i&2&&(b(),q(o.longestChain.length?1:2))},styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .longest-chain-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;padding:.66666666rem}[_nghost-%COMP%]   .longest-chain[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.33333333rem;margin:auto 0;max-width:100%;justify-content:space-between}[_nghost-%COMP%]   .chain-segment[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.33333333rem}[_nghost-%COMP%]   .chain-image[_ngcontent-%COMP%]{height:330px;border-radius:.33333333rem;border:1px solid var(--color-border);cursor:pointer}[_nghost-%COMP%]   .chain-arrow[_ngcontent-%COMP%]{color:var(--color-text-secondary)}[_nghost-%COMP%]   .chain-empty[_ngcontent-%COMP%]{margin:auto;color:var(--color-text-secondary)}"]});let t=e;return t})();var qg=(t,e)=>e.id;function m5(t,e){if(t&1){let n=J();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(i,o.comparison[0]))}),x()}if(t&2){let n=e.$implicit;gt("aspect-ratio",n.aspectRatio),X("src",n.thumbnailLink,_t)}}function v5(t,e){if(t&1&&(R(0,"div",6),te(1,m5,1,3,"img",8,qg),x()),t&2){let n=_(3);b(),ne(n.winnersLeft)}}function y5(t,e){if(t&1){let n=J();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(o.comparison[0],i))}),x()}if(t&2){let n=e.$implicit;gt("aspect-ratio",n.aspectRatio),X("src",n.thumbnailLink,_t)}}function _5(t,e){if(t&1&&(R(0,"div",7),te(1,y5,1,3,"img",8,qg),x()),t&2){let n=_(3);b(),ne(n.losersLeft)}}function C5(t,e){if(t&1&&(G(0,v5,3,0,"div",6),G(1,_5,3,0,"div",7)),t&2){let n=_(2);q(n.winnersLeft.length?0:-1),b(),q(n.losersLeft.length?1:-1)}}function E5(t,e){if(t&1){let n=J();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(i,o.comparison[1]))}),x()}if(t&2){let n=e.$implicit;gt("aspect-ratio",n.aspectRatio),X("src",n.thumbnailLink,_t)}}function I5(t,e){if(t&1&&(R(0,"div",6),te(1,E5,1,3,"img",8,qg),x()),t&2){let n=_(3);b(),ne(n.winnersRight)}}function w5(t,e){if(t&1){let n=J();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(o.comparison[1],i))}),x()}if(t&2){let n=e.$implicit;gt("aspect-ratio",n.aspectRatio),X("src",n.thumbnailLink,_t)}}function T5(t,e){if(t&1&&(R(0,"div",7),te(1,w5,1,3,"img",8,qg),x()),t&2){let n=_(3);b(),ne(n.losersRight)}}function b5(t,e){if(t&1&&(G(0,I5,3,0,"div",6),G(1,T5,3,0,"div",7)),t&2){let n=_(2);q(n.winnersRight.length?0:-1),b(),q(n.losersRight.length?1:-1)}}function S5(t,e){if(t&1){let n=J();R(0,"div",1)(1,"div",3)(2,"app-image",4),B("click",function(){L(n);let i=_();return V(i.onImageClick(i.comparison[0]))})("contextmenu",function(i){L(n);let o=_();return V(o.onImageContextMenu(o.comparison[0],i))})("touchstart",function(){L(n);let i=_();return V(i.onImageTouchStart(i.comparison[0]))})("touchend",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchcancel",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchmove",function(){L(n);let i=_();return V(i.onImageTouchMove())}),x(),G(3,C5,2,2),x(),K(4,"div",5),R(5,"div",3)(6,"app-image",4),B("click",function(){L(n);let i=_();return V(i.onImageClick(i.comparison[1]))})("contextmenu",function(i){L(n);let o=_();return V(o.onImageContextMenu(o.comparison[1],i))})("touchstart",function(){L(n);let i=_();return V(i.onImageTouchStart(i.comparison[1]))})("touchend",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchcancel",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchmove",function(){L(n);let i=_();return V(i.onImageTouchMove())}),x(),G(7,b5,2,2),x()()}if(t&2){let n=_();b(2),X("src",n.comparison[0].contentLink)("placeholderSrc",n.galleryUtils.getPlaceholderSrc(n.comparison[0])),b(),q(n.stateService.settings!=null&&n.stateService.settings.showComparisonRelations?3:-1),b(3),X("src",n.comparison[1].contentLink)("placeholderSrc",n.galleryUtils.getPlaceholderSrc(n.comparison[1])),b(),q(n.stateService.settings!=null&&n.stateService.settings.showComparisonRelations?7:-1)}}function D5(t,e){t&1&&(R(0,"div",2),Y(1," No comparisons remaining. "),x())}function A5(t,e){if(t&1&&(K(0,"div",10),R(1,"div",11),Y(2),x()),t&2){let n=_();b(2),us(" ",n.stateService.tournament.remainingComparisons," relations to resolve ")}}var KI=(()=>{let e=class e{constructor(r,i,o,s){this.filterService=r,this.serializationService=i,this.dialogService=o,this.stateService=s,this.galleryUtils=Gg,this.comparison=null,this.winnersLeft=[],this.losersLeft=[],this.winnersRight=[],this.losersRight=[],this.longPressTimer=null,this.suppressNextClick=!1,this.longPressDelayMs=500,this.autoPickDebugEnabled=!1,un(()=>{this.stateService.tournament.comparison(),this.refreshComparisonRelations()})}onImageClick(r){if(this.suppressNextClick){this.suppressNextClick=!1;return}this.stateService.tournament.handleUserInput(r),this.stateService.tournamentState=this.stateService.tournament.getState(),this.serializationService.save(),this.refreshComparisonRelations()}onEnterTournament(){let r=this.stateService.images.filter(s=>We.isImage(s)),i=this.filterService.images().filter(s=>We.isImage(s)),o=this.stateService.tournament;!o.comparisons||!o.matchesImagesToCompare(i)?this.restartTournament(r,i):this.refreshComparisonRelations(),this.logTournamentSimulationComparisonCount(r,i)}undo(){this.stateService.tournament.undo(),this.stateService.tournamentState=this.stateService.tournament.getState(),this.serializationService.save(),this.refreshComparisonRelations()}toggleRelations(){this.stateService.settings.showComparisonRelations=!this.stateService.settings.showComparisonRelations,this.serializationService.save(),this.refreshComparisonRelations()}onImageContextMenu(r,i){i.preventDefault(),i.stopPropagation(),this.openFullscreen(r)}onImageTouchStart(r){r&&(this.clearLongPressTimer(),this.longPressTimer=window.setTimeout(()=>{this.suppressNextClick=!0,this.openFullscreen(r)},this.longPressDelayMs))}onImageTouchEnd(){this.clearLongPressTimer()}onImageTouchMove(){this.clearLongPressTimer()}openComparisonPath(r,i){if(!r||!i)return;let o=this.dialogService.create(zg,{start:r,end:i});o&&o.then(s=>{s&&this.refreshComparisonRelations()})}openFullscreen(r){r&&this.stateService.fullscreenImage.set(r)}clearLongPressTimer(){this.longPressTimer!==null&&(window.clearTimeout(this.longPressTimer),this.longPressTimer=null)}restartTournament(r,i){this.stateService.tournament.start(r,i,this.stateService.tournamentState),this.refreshComparisonRelations()}refreshComparisonRelations(){this.stateService.tournament.updateProgress(),this.comparison=this.stateService.tournament.comparison()??null,this.comparison?(this.stateService.settings?.showComparisonRelations?(this.winnersLeft=this.stateService.tournament.getNearestWinners(this.comparison[0]),this.losersLeft=this.stateService.tournament.getNearestLosers(this.comparison[0]),this.winnersRight=this.stateService.tournament.getNearestWinners(this.comparison[1]),this.losersRight=this.stateService.tournament.getNearestLosers(this.comparison[1])):(this.winnersLeft=[],this.losersLeft=[],this.winnersRight=[],this.losersRight=[]),this.filterSharedComparisonRelations()):(this.winnersLeft=[],this.losersLeft=[],this.winnersRight=[],this.losersRight=[])}filterSharedComparisonRelations(){if(!this.stateService.settings?.hideComparisonSharedRelations)return;let r=this.collectSharedIds(this.winnersLeft,this.winnersRight);r.size&&(this.winnersLeft=this.winnersLeft.filter(o=>!r.has(o.id)),this.winnersRight=this.winnersRight.filter(o=>!r.has(o.id)));let i=this.collectSharedIds(this.losersLeft,this.losersRight);i.size&&(this.losersLeft=this.losersLeft.filter(o=>!i.has(o.id)),this.losersRight=this.losersRight.filter(o=>!i.has(o.id)))}collectSharedIds(r,i){if(!r.length||!i.length)return new Set;let o=new Set(r.map(a=>a.id)),s=new Set;return i.forEach(a=>{o.has(a.id)&&s.add(a.id)}),s}logTournamentSimulationComparisonCount(r,i){if(!this.autoPickDebugEnabled)return;let o=new $c,s=this.stateService.tournament.getState();o.start(r,i,s);let a=o.comparison(),c=0,u=i.length*i.length+1e3;for(;a;){let h=this.pickSimulatedWinner(a,o.comparisons);if(o.handleUserInput(h),a=o.comparison(),c++,c>u)break}console.log("[ImageTournament] simulated comparisons",o.comparisons.length)}pickSimulatedWinner(r,i){let[o,s]=r,a=this.getWinLossCounts(o,i),c=this.getWinLossCounts(s,i);return a.wins!==c.wins?a.wins>c.wins?o:s:a.losses!==c.losses?a.losses<c.losses?o:s:Math.random()<.5?o:s}getWinLossCounts(r,i){let o=0,s=0;for(let[a,c]of i)a?.id===r.id&&o++,c?.id===r.id&&s++;return{wins:o,losses:s}}};e.\u0275fac=function(i){return new(i||e)(k(Je),k(Ht),k(Qe),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-image-tournament"]],decls:4,vars:2,consts:[[1,"comparison-wrapper"],[1,"comparison"],[1,"comparison","comparison-empty"],[1,"comparison-column"],[1,"image-container",3,"click","contextmenu","touchstart","touchend","touchcancel","touchmove","src","placeholderSrc"],[1,"h-separator","v-separator"],[1,"side-column","winners-column"],[1,"side-column","losers-column"],["loading","lazy",1,"side-image",3,"src","aspect-ratio"],["loading","lazy",1,"side-image",3,"click","src"],[1,"h-separator"],[1,"progress-remaining"]],template:function(i,o){i&1&&(R(0,"div",0),G(1,S5,8,6,"div",1)(2,D5,2,0,"div",2),G(3,A5,3,1),x()),i&2&&(b(),q(o.comparison?1:2),b(2),q(o.stateService.settings!=null&&o.stateService.settings.showComparisonRelations?3:-1))},dependencies:[zc],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .comparison-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;justify-content:end;overflow:auto}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}@media (orientation: portrait){[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]{flex-direction:column}}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .comparison-column[_ngcontent-%COMP%]{display:flex;flex:1;min-width:0;position:relative}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;cursor:pointer}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover{background-color:var(--color-border)}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;position:absolute;align-items:center;top:0;bottom:0;padding:.33333333rem;overflow:auto}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-column.winners-column[_ngcontent-%COMP%]{left:0}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-column.losers-column[_ngcontent-%COMP%]{right:0}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-image[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:.33333333rem;cursor:pointer}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-image[_ngcontent-%COMP%]{width:64px}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-image[_ngcontent-%COMP%]{width:96px}}[_nghost-%COMP%]   .comparison.comparison-empty[_ngcontent-%COMP%]{align-items:center;justify-content:center;padding:.66666666rem;border:1px dashed var(--color-border);border-radius:.33333333rem;color:var(--color-text-secondary)}[_nghost-%COMP%]   .progress-remaining[_ngcontent-%COMP%]{height:1.5rem;display:flex;align-items:center;justify-content:center;color:var(--color-text-secondary);font-weight:500;font-size:small}"]});let t=e;return t})();function R5(t,e){if(t&1&&(R(0,"div",0)(1,"div",1),K(2,"app-filter")(3,"app-masonry"),x(),K(4,"app-image-tournament")(5,"app-image-tournament-longest-chain"),R(6,"div",2),K(7,"app-fullscreen"),R(8,"div",3),K(9,"div",4)(10,"app-tagger"),x()()()),t&2){let n=_();b(),ce("transparent",n.viewMode!="masonry"),b(3),ce("transparent",n.viewMode!="tournament"||n.tournamentSubview!="comparison"),b(),ce("transparent",n.viewMode!="tournament"||n.tournamentSubview!="chain"),b(),ce("transparent",!n.stateService.fullscreenImage())}}var TN=(()=>{let e=class e{get viewMode(){return this.stateService.viewMode}set viewMode(r){let i=this.stateService.viewMode;this.stateService.viewMode=r,r==="tournament"&&i!=="tournament"&&this.imageTournamentComponent?.onEnterTournament()}constructor(r,i,o,s,a,c,u){this.serializationService=r,this.applicationService=i,this.keyboardShortcutService=o,this.galleryService=s,this.filterService=a,this.dialogService=c,this.stateService=u,this.tournamentSubview="comparison",this.loading=!0,this.applicationService.loading.set(!0)}ngOnInit(){this.configureHeader(),this.registerModuleSettings(),this.serializationService.processData().then(()=>{this.keyboardShortcutService.register(this),this.loading=!1})}ngOnDestroy(){this.keyboardShortcutService.unregister(this)}processKeyboardShortcut(r){if(this.stateService.fullscreenImage())switch(r.code){case"Escape":this.stateService.fullscreenImage.set(null);break;case"KeyR":this.setRandomTarget();break;case"KeyG":this.setRandomGroupTarget();break}}configureHeader(){let r=()=>this.stateService.viewMode==="masonry"&&!i()&&!o(),i=()=>!!this.stateService.fullscreenImage(),o=()=>this.stateService.viewMode==="masonry"&&!xt.isLargeScreen()&&this.stateService.filterVisible,s=()=>this.stateService.viewMode==="tournament"&&!i(),a=()=>s()&&this.tournamentSubview==="comparison";this.applicationService.addHeaderButtons("start",[{id:"open-filter",tooltip:"Open Filter",classes:"fa-solid fa-filter",hidden:()=>!r()||this.stateService.filterVisible,onClick:()=>this.stateService.filterVisible=!0},{id:"create-group",tooltip:"Create Image Group",classes:"fa-solid fa-folder-plus",hidden:()=>!r(),onClick:()=>this.galleryService.openImageGroupEditor()},{id:"random-image",tooltip:"Random Image",classes:"fa-solid fa-shuffle",hidden:()=>!i(),onClick:()=>this.setRandomTarget()},{id:"random-group-image",tooltip:"Random Image from Group",classes:"fa-solid fa-arrows-spin",hidden:()=>!i()||!this.stateService.fullscreenImage().group,onClick:()=>this.setRandomGroupTarget()},{id:"group-comparison",tooltip:"Open Group Comparison",classes:"fa-solid fa-code-compare",hidden:()=>!i()||!this.stateService.fullscreenImage().group,onClick:()=>this.openGroupComparison()},{id:"group-manager",tooltip:"Open Image Group Manager",classes:"fa-solid fa-object-group",hidden:()=>!i()||!this.stateService.fullscreenImage().group,onClick:()=>this.galleryService.openImageGroupEditor(this.stateService.fullscreenImage().group)},{id:"comparison-chain-toggle",tooltip:()=>this.tournamentSubview==="comparison"?"Open Longest Comparison Chain":"Open Tournament Comparisons",classes:()=>this.tournamentSubview==="chain"?"fa-solid fa-link active":"fa-solid fa-link",hidden:()=>!s(),onClick:()=>this.toggleTournamentSubview()}]),this.applicationService.addHeaderButtons("center",[{id:"comparison-undo",tooltip:"Undo Comparison",classes:"fa-solid fa-delete-left",hidden:()=>!a(),onClick:()=>this.imageTournamentComponent?.undo(),disabled:()=>!this.stateService.tournament||this.stateService.tournament.comparisons.length==0},{id:"comparison-relations",tooltip:"Toggle Comparison Relations and Progress Bar",classes:()=>this.stateService.settings?.showComparisonRelations?["fa-solid fa-code-compare","fa-solid fa-slash"]:["fa-solid fa-code-compare"],hidden:()=>!a(),onClick:()=>this.imageTournamentComponent?.toggleRelations()},{id:"fullscreen-comparison-relations",tooltip:"Toggle Comparison Relations",classes:()=>this.stateService.settings?.showFullscreenComparisonRelations?["fa-solid fa-code-compare","fa-solid fa-slash"]:["fa-solid fa-code-compare"],hidden:()=>!i(),onClick:()=>{this.stateService.settings.showFullscreenComparisonRelations=!this.stateService.settings.showFullscreenComparisonRelations,this.serializationService.save()}}]),this.applicationService.addHeaderButtons("end",[{id:"close-fullscreen",tooltip:"Close Fullscreen",classes:"fa-solid fa-times",onClick:()=>this.stateService.fullscreenImage.set(null),hidden:()=>!i()},{id:"close-filter",tooltip:"Close Filter",classes:"fa-solid fa-times",onClick:()=>this.stateService.filterVisible=!1,hidden:()=>!o()},{id:"toggle-view-mode",tooltip:()=>this.viewMode==="masonry"?"Open Comparison":"Open Masonry",classes:()=>this.viewMode==="tournament"?"fa-solid fa-images":"fa-solid fa-code-compare",onClick:()=>{if(this.viewMode==="masonry"){this.tournamentSubview="comparison",this.viewMode="tournament";return}this.viewMode="masonry"},hidden:()=>!r()&&!s()},{id:"open-settings",tooltip:"Open Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Do),hidden:()=>!r()&&!s()}])}registerModuleSettings(){this.stateService.settings||(this.stateService.settings={}),this.applicationService.registerModuleSettings({id:"gallery-settings",label:"Gallery",items:[{id:"show-tag-count",type:"toggle",label:"Show Tag Count",getValue:()=>!!this.stateService.settings?.showTagCount,onChange:r=>{this.stateService.settings.showTagCount=r,this.serializationService.save()}},{id:"show-videos",type:"toggle",label:"Show Videos",getValue:()=>!!this.stateService.settings?.showVideos,onChange:r=>{this.stateService.settings.showVideos=r,this.filterService.updateFilters(),this.serializationService.save()}},{id:"auto-bookmark",type:"toggle",label:"Auto Bookmark",getValue:()=>!!this.stateService.settings?.autoBookmark,onChange:r=>{this.stateService.settings.autoBookmark=r,this.serializationService.save()}},{id:"bookmark-all",type:"action",label:"Bookmark All Images",onClick:()=>this.bookmarkAllImages()}]}),this.applicationService.registerModuleSettings({id:"comparison-settings",label:"Comparison",items:[{id:"show-comparison-relations",type:"toggle",label:"Show Comparison Relations",getValue:()=>this.stateService.settings?.showComparisonRelations,onChange:r=>{this.stateService.settings.showComparisonRelations=r,this.serializationService.save(),this.stateService.viewMode==="tournament"&&this.imageTournamentComponent?.refreshComparisonRelations()}},{id:"hide-shared-comparison-relations",type:"toggle",label:"Hide Shared Relations",getValue:()=>this.stateService.settings?.hideComparisonSharedRelations,onChange:r=>{this.stateService.settings.hideComparisonSharedRelations=r,this.serializationService.save(),this.stateService.viewMode==="tournament"&&this.imageTournamentComponent?.refreshComparisonRelations()}},{id:"reset-comparison",type:"action",label:"Reset Comparison",onClick:()=>{this.dialogService.createConfirmation({title:"Reset Comparison",messages:["Are you sure?"]}).then(r=>{if(r){this.stateService.tournamentState=null,this.serializationService.save();let i=this.stateService.images.filter(s=>We.isImage(s)),o=this.filterService.images().filter(s=>We.isImage(s));this.stateService.tournament.start(i,o,this.stateService.tournamentState)}})}}]}),this.applicationService.registerModuleSettings({id:"fullscreen-settings",label:"Fullscreen",items:[{id:"show-fullscreen-comparison-relations",type:"toggle",label:"Show Comparison Relations",getValue:()=>this.stateService.settings?.showFullscreenComparisonRelations,onChange:r=>{this.stateService.settings.showFullscreenComparisonRelations=r,this.serializationService.save()}}]})}setRandomTarget(){let r=this.filterService.images();if(!Z.isEmpty(r)){let i,o=this.stateService.fullscreenImage();o?o.group?i=Z.getRandom(r,o.group.images):i=Z.getRandom(r,[o]):i=Z.getRandom(r),i&&this.stateService.fullscreenImage.set(i)}}setRandomGroupTarget(){let r=this.stateService.fullscreenImage();r?.group&&this.stateService.fullscreenImage.set(Z.getRandom(r.group.images,[r]))}openGroupComparison(){let r=this.stateService.fullscreenImage();if(r?.group){this.tournamentSubview="comparison",this.stateService.viewMode="tournament";let i=this.stateService.images.filter(s=>We.isImage(s)),o=r.group.images.filter(s=>We.isImage(s));this.stateService.tournament.start(i,o,this.stateService.tournamentState)}}toggleTournamentSubview(){this.tournamentSubview=this.tournamentSubview==="comparison"?"chain":"comparison"}bookmarkAllImages(){this.dialogService.createConfirmation({title:"Confirmation: Bookmark All Images",messages:["Are you sure you want to bookmark all images?"]}).then(r=>{r&&(this.stateService.images.forEach(i=>i.bookmark=!0),this.filterService.updateFilters(),this.serializationService.save())})}};e.\u0275fac=function(i){return new(i||e)(k(Ht),k(Ye),k(Fc),k(nr),k(Je),k(Qe),k(je))},e.\u0275cmp=se({type:e,selectors:[["app-gallery"]],viewQuery:function(i,o){if(i&1&&ql(KI,5),i&2){let s;Wl(s=Kl())&&(o.imageTournamentComponent=s.first)}},decls:1,vars:1,consts:[[1,"stack-container-alt","height-100"],[1,"flex"],[1,"fullscreen-container","glass-effect","height-100"],[1,"tagger-container"],[1,"tagger-scroll-offset-helper"]],template:function(i,o){i&1&&G(0,R5,11,8,"div",0),i&2&&q(o.loading?-1:0)},dependencies:[gN,yN,KI,wN,vN,IN],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]{display:flex;overflow:hidden;transition:.5s;z-index:1}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]   .tagger-container[_ngcontent-%COMP%]{height:100%;position:absolute;overflow:auto;scroll-snap-type:y mandatory}[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .tagger-scroll-offset-helper[_ngcontent-%COMP%]{height:100%;scroll-snap-align:center}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]   .tagger-container[_ngcontent-%COMP%]{display:contents}}"]});let t=e;return t})();var M5=(t,e)=>e.id;function x5(t,e){if(t&1){let n=J();pe(0,"span",1),Be("click",function(){let i=L(n).$implicit,o=_();return V(o.navigate(i))}),Y(1),he()}if(t&2){let n=e.$implicit;b(),Me(n.label)}}var bN=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.applicationService=i,this.dialogService=o,this.apps=[{id:"gallery",label:"Gallery"},{id:"story-manager",label:"Notes"},{id:"shopping-list",label:"Shopping List"}],this.applicationService.loading.set(!1)}ngOnInit(){this.configureHeader()}navigate(r){sessionStorage.setItem(Ot.KEY_ACTIVE_APP_ID,r.id),sessionStorage.removeItem(Ot.KEY_GOOGLE_DATA_FILE_ID),this.applicationService.loading.set(!0),this.router.navigate([r.id])}configureHeader(){this.applicationService.addHeaderButtons("end",[{id:"open-settings",tooltip:"Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Do)}],"last")}};e.\u0275fac=function(i){return new(i||e)(k(Fn),k(Ye),k(Qe))},e.\u0275cmp=se({type:e,selectors:[["app-landing"]],decls:2,vars:0,consts:[[1,"button","fluid"],[1,"button","fluid",3,"click"]],template:function(i,o){i&1&&te(0,x5,2,1,"span",0,M5),i&2&&ne(o.apps)},dependencies:[Ge],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.33333333rem}"]});let t=e;return t})();var SN="https://mazacik.github.io",Ks={production:!0,baseUrl:SN,redirectUrl:SN+"/login",firebase:{apiKey:"AIzaSyDOAks7IYxZn0CfhQfDYp06r5rP9B-4Jc8",authDomain:"mazacik-69cda.firebaseapp.com",projectId:"mazacik-69cda",appId:"1:43148772573:web:86c8a9749dd20d99260734",storageBucket:"mazacik-69cda.appspot.com",messagingSenderId:"43148772573"}};var Gc=(()=>{let e=class e{constructor(r){this.http=r,this.CLIENT_ID="692582629035-s6vftm7t7erhlblg9iekl0fhfhdskq25.apps.googleusercontent.com",this.CLIENT_SECRET="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"}getAccessToken(){return this.accessToken}startAuthentication(){let s="https://accounts.google.com/o/oauth2/v2/auth?redirect_uri="+Ks.redirectUrl+"&prompt=consent&response_type=code&client_id="+"692582629035-s6vftm7t7erhlblg9iekl0fhfhdskq25.apps.googleusercontent.com"+"&scope="+"https://www.googleapis.com/auth/drive"+"&access_type=offline";location.href=s}requestTokens(r){return I(this,null,function*(){let i="https://accounts.google.com/o/oauth2/token",o={"content-type":"form-data",grant_type:"authorization_code",code:r,client_id:this.CLIENT_ID,client_secret:this.CLIENT_SECRET,redirect_uri:Ks.redirectUrl,plugin_name:"TagalleryWeb"};yield ih(this.http.post(i,o)).then(s=>{s&&(this.accessToken=s.access_token,this.refreshToken=s.refresh_token,localStorage.setItem(Ot.KEY_GOOGLE_REFRESH_TOKEN,this.refreshToken))}).catch(s=>s)})}requestAccessToken(){return I(this,null,function*(){let r="https://accounts.google.com/o/oauth2/token",i={grant_type:"refresh_token",refresh_token:this.getRefreshToken(),client_id:this.CLIENT_ID,client_secret:this.CLIENT_SECRET};return yield ih(this.http.post(r,i)).then(o=>{o&&(this.accessToken=o.access_token)}).catch(o=>o),this.accessToken})}getRefreshToken(){return this.refreshToken||(this.refreshToken=localStorage.getItem(Ot.KEY_GOOGLE_REFRESH_TOKEN)),this.refreshToken}};e.\u0275fac=function(i){return new(i||e)(z(uo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function N5(t,e){if(t&1){let n=J();R(0,"div",1),B("click",function(){L(n);let i=_();return V(i.authenticationService.startAuthentication())}),K(1,"img",2),R(2,"span",3),Y(3,"Sign in with Google"),x()()}}var DN=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.authenticationService=o,this.applicationService=s,this.applicationService.loading.set(!0)}ngAfterViewInit(){return I(this,null,function*(){let r=this.route.snapshot.queryParams.code;r?(yield this.authenticationService.requestTokens(r),this.router.navigate([""])):this.applicationService.loading.set(!1)})}};e.\u0275fac=function(i){return new(i||e)(k($r),k(Fn),k(Gc),k(Ye))},e.\u0275cmp=se({type:e,selectors:[["app-login"]],standalone:!1,decls:1,vars:1,consts:[[1,"sign-in-button"],[1,"sign-in-button",3,"click"],["src","assets/google-logo.svg"],[1,"sign-in-text"]],template:function(i,o){i&1&&G(0,N5,4,0,"div",0),i&2&&q(o.applicationService.loading()?-1:0)},styles:["[_nghost-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{width:18px;height:18px}.sign-in-button[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;gap:8px;padding:0 12px;cursor:pointer;background-color:#fff;border:1px solid #dadce0;border-radius:4px;-webkit-user-select:none;user-select:none}.sign-in-button[_ngcontent-%COMP%]:hover{background:#f8faff;border-color:#d2e3fc}.sign-in-text[_ngcontent-%COMP%]{color:#3c4043;font-family:Google Sans,arial,sans-serif;font-size:14px;letter-spacing:.25px}"]});let t=e;return t})();var AN=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.injector=i,this.collectionPath="shopping-list",this.itemsSignal=nt([]),this.connectionSignal=nt("disconnected"),this.items=this.itemsSignal.asReadonly(),this.connectionState=this.connectionSignal.asReadonly()}connect(){this.unsubscribe||this.ensureConfigured()&&(this.connectionSignal.set("connecting"),this.unsubscribe=this.runInContext(()=>{let r=A1(T1(this.firestore,this.collectionPath),D1("position","desc"));return S1(r,i=>{let o=i.docs.map(s=>H({id:s.id},s.data()));this.applyRemote(o),this.connectionSignal.set(i.metadata.fromCache?"connecting":"connected")},()=>{this.connectionSignal.set("disconnected")})}))}disconnect(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0,this.connectionSignal.set("disconnected"))}addItem(r){let i=this.normalizeText(r);if(!i||!this.ensureConfigured())return;let o=this.itemsSignal();if(o.some(a=>a.text===i))return;let s={text:i,check:!1,position:this.nextPosition(o)};this.applyLocal([...o,s]),this.writeItem(s,!1)}toggleItem(r){if(!this.ensureConfigured())return;let i=this.normalizeText(r);if(!i)return;let o=this.itemsSignal(),s=o.findIndex(u=>u.text===i);if(s===-1)return;let a=Ce(H({},o[s]),{check:!o[s].check}),c=[...o];c[s]=a,this.applyLocal(c),this.writeItem(a,!0)}removeItem(r){if(!this.ensureConfigured())return;let i=this.normalizeText(r);if(!i)return;let o=this.itemsSignal().filter(s=>s.text!==i);this.applyLocal(o),this.deleteItem(i)}clearCompleted(){if(!this.ensureConfigured())return;let r=this.itemsSignal(),i=r.filter(s=>s.check),o=r.filter(s=>!s.check);this.applyLocal(o),this.deleteItems(i.map(s=>s.text))}applyLocal(r){this.itemsSignal.set(this.sortItems(r))}applyRemote(r){let i=this.sanitizeItems(r);this.itemsSignal.set(this.sortItems(i))}ensureConfigured(){let r=this.isFirebaseConfigured();return r||this.connectionSignal.set("disconnected"),r}isFirebaseConfigured(){let r=Ks.firebase;return r?["apiKey","projectId","appId"].every(o=>{let s=r[o];return!!s&&!s.startsWith("YOUR_")}):!1}sanitizeItems(r){if(!Array.isArray(r))return this.itemsSignal();let i=[];for(let o of r){if(!o||typeof o!="object")continue;let s=o,a=typeof s.text=="string"?this.normalizeText(s.text):"";if(!a)continue;let c=typeof s.check=="boolean"?s.check:!1,u=typeof s.position=="number"&&Number.isFinite(s.position)?s.position:0;i.push({text:a,check:c,position:u})}return i}sortItems(r){return r.slice().sort((i,o)=>{let s=o.position-i.position;return s!==0?s:i.text.localeCompare(o.text)})}normalizeText(r){return r.trim().replace(/\s+/gu," ").slice(0,20)}nextPosition(r){let i=r.map(o=>o.position).filter(o=>Number.isFinite(o));return i.length===0?1:Math.max(...i)+1}encodeId(r){return encodeURIComponent(r)}runInContext(r){return lt(this.injector,r)}writeItem(r,i){this.runInContext(()=>R1(Pg(this.firestore,this.collectionPath,this.encodeId(r.text)),{text:r.text,check:r.check,position:r.position},{merge:i}))}deleteItem(r){this.runInContext(()=>LI(Pg(this.firestore,this.collectionPath,this.encodeId(r))))}deleteItems(r){this.runInContext(()=>Promise.all(r.map(i=>LI(Pg(this.firestore,this.collectionPath,this.encodeId(i))))))}};e.\u0275fac=function(i){return new(i||e)(z(qs),z(ot))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var O5=(t,e)=>e.text;function F5(t,e){t&1&&K(0,"div",7)}function L5(t,e){if(t&1){let n=J();R(0,"div",9)(1,"button",10),B("click",function(){let i=L(n).$implicit,o=_(2);return V(o.toggleItem(i))}),K(2,"i",11),x(),R(3,"span",12),Y(4),x(),R(5,"button",13),B("click",function(){let i=L(n).$implicit,o=_(2);return V(o.removeItem(i))}),K(6,"i",14),x()(),G(7,F5,1,0,"div",7)}if(t&2){let n=e.$implicit,r=e.$index,i=e.$count;ce("checked",n.check),b(),ce("checked",n.check),b(3),Me(n.text),b(),ce("transparent",!n.check),b(2),q(r!==i-1?7:-1)}}function V5(t,e){if(t&1&&(K(0,"div",7),R(1,"div",8),te(2,L5,8,8,null,null,O5),x()),t&2){let n=_();b(2),ne(n.items())}}function j5(t,e){t&1&&(R(0,"div",6),Y(1,"List is empty."),x())}var RN=(()=>{let e=class e{constructor(r,i,o){this.shoppingListService=r,this.applicationService=i,this.dialogService=o,this.draft="",this.items=this.shoppingListService.items,this.connectionState=this.shoppingListService.connectionState,this.completedCount=vi(()=>this.items().filter(s=>s.check).length),this.applicationService.loading.set(!1)}ngOnInit(){this.shoppingListService.connect(),this.configureHeader()}ngOnDestroy(){this.shoppingListService.disconnect(),this.applicationService.removeHeaderButtons(["shopping-reset","shopping-status"])}addItem(){let r=this.draft.trim();r&&(this.shoppingListService.addItem(r),this.draft="")}toggleItem(r){this.shoppingListService.toggleItem(r.text)}removeItem(r){this.shoppingListService.removeItem(r.text)}clearCompleted(){this.shoppingListService.clearCompleted()}getConnectionLabel(){switch(this.connectionState()){case"connected":return"Live";case"connecting":return"Connecting";default:return"Offline"}}getConnectionClass(){switch(this.connectionState()){case"connected":return"positive";case"connecting":return"highlight";default:return"negative"}}configureHeader(){this.applicationService.addHeaderButtons("center",[{id:"shopping-status",tooltip:()=>this.getConnectionLabel(),classes:()=>`fa-solid fa-circle fa-sm border-transparent pointer-events-none ${this.getConnectionClass()}`}]),this.applicationService.addHeaderButtons("end",[{id:"shopping-reset",tooltip:"Reset",classes:"fa-solid fa-trash",onClick:()=>this.clearCompleted(),disabled:()=>this.completedCount()===0},{id:"open-settings",tooltip:"Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Do)}])}};e.\u0275fac=function(i){return new(i||e)(k(AN),k(Ye),k(Qe))},e.\u0275cmp=se({type:e,selectors:[["app-shopping-list"]],decls:8,vars:2,consts:[[1,"shopping-list"],[1,"flex","column","gap-1","margins-1-v"],[1,"input-row"],["type","text","placeholder","...",3,"ngModelChange","keydown.enter","ngModel"],["aria-label","Add item",1,"icon-button",3,"click"],[1,"fa-solid","fa-plus"],[1,"empty"],[1,"h-separator","subtle"],[1,"list"],[1,"item"],["aria-label","Mark item",1,"icon-button","check-button",3,"click"],[1,"fa-solid","fa-check"],[1,"label"],["aria-label","Remove item",1,"icon-button",3,"click"],[1,"fa-solid","fa-times"]],template:function(i,o){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),In("ngModelChange",function(a){return Nn(o.draft,a)||(o.draft=a),a}),B("keydown.enter",function(){return o.addItem()}),x(),R(4,"button",4),B("click",function(){return o.addItem()}),K(5,"i",5),x()()(),G(6,V5,4,0)(7,j5,2,0,"div",6),x()),i&2&&(b(3),En("ngModel",o.draft),b(3),q(o.items().length?6:7))},dependencies:[Ge,rn,er,tr,Bn],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}.shopping-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;max-height:100%;height:fit-content;padding:0 .33333333rem}@media screen and (min-width: 1280px){.shopping-list[_ngcontent-%COMP%]{margin:0 auto;max-width:400px}}.input-row[_ngcontent-%COMP%]{display:flex;gap:.33333333rem}.input-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;height:3rem;padding:0 1rem}.input-row[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{height:3rem}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;background-color:var(--color-surface-100);gap:.33333333rem;overflow-y:auto;max-height:100%;padding:.33333333rem 0}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:1rem;align-items:center}.item[_ngcontent-%COMP%]:last-child{border-bottom:0}.check-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:0}.check-button.checked[_ngcontent-%COMP%]{background-color:var(--color-surface-200);border-color:var(--color-border-darker)}.check-button.checked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:1}.item.checked[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--color-text-secondary)}.label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.empty[_ngcontent-%COMP%]{border:1px dashed var(--color-border);border-radius:.33333333rem;padding:.66666666rem;text-align:center;color:var(--color-text-secondary)}"]});let t=e;return t})();var QI=(t,e)=>I(null,null,function*(){let n=F(Fn);console.log("guard: start");let r=F(Gc);if(r.getAccessToken())return console.log("guard: has access token, return true"),!0;if(console.log("guard: no access token"),r.getRefreshToken()){if(console.log("guard: has refresh token"),yield r.requestAccessToken())return console.log("guard: got access token from refresh token, return true"),!0;console.log("guard: could not get access token from refresh token")}return console.log("guard: return false"),n.navigate(["login"])});var Wg=(()=>{let e=class e extends Uc{constructor(r,i,o){super(r),this.http=r,this.applicationService=i,this.dialogService=o,this.FILE_ID="1ydFjvWYG3p-m3S_gDodNJbc0Cyeqv82Z",this.FIELDS="id,name,mimeType,appProperties"}request(){let r=this.getContent(this.FILE_ID);return r.catch(i=>{this.applicationService.errors.set(!0),this.dialogService.createMessage({title:"Error",messages:["Google Drive Error, check console."]}),console.log(i)}),r}update(r){this.applicationService.changes.set(!0),this.updateContent(this.FILE_ID,JSON.stringify(r)).then(()=>{this.applicationService.errors.set(!1)}).catch(i=>{this.applicationService.errors.set(!0),this.dialogService.createMessage({title:"Error",messages:["Google Drive Error, check console."]}),console.log(i)}).finally(()=>{this.applicationService.changes.set(!1)})}};e.\u0275fac=function(i){return new(i||e)(z(uo),z(Ye),z(Qe))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function U5(t,e){if(t&1){let n=J();pe(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.create(!1))}),Y(1,"Create Note"),he(),pe(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.create(!0))}),Y(3,"Create Folder"),he()}}function B5(t,e){if(t&1){let n=J();pe(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.rename())}),Y(1,"Rename"),he(),pe(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.delete())}),Y(3,"Delete"),he()}}var xN=(()=>{let e=class e extends rt{constructor(r){super(),this.stateService=r,this.configuration={title:()=>this.inputs.article?this.inputs.article.title:"Root",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.close()}]}}rename(){return I(this,null,function*(){this.close(),this.stateService.rename(this.inputs.article)})}create(r){return I(this,null,function*(){this.close(),this.stateService.create(this.inputs.article,r)})}delete(){return I(this,null,function*(){this.close(),this.stateService.delete(this.inputs.article)})}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(wr))},e.\u0275cmp=se({type:e,selectors:[["app-story-options"]],features:[Ve],decls:2,vars:2,consts:[[1,"button","action-button",3,"click"]],template:function(i,o){i&1&&(G(0,U5,4,0),G(1,B5,4,0)),i&2&&(q(!o.inputs.article||o.inputs.article.folder?0:-1),b(),q(o.inputs.article?1:-1))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem;flex:1}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .button.action-button[_ngcontent-%COMP%]{min-height:initial;padding:.33333333rem 0}"]});let t=e;return t})();var qc=class{getNameWithParents(e=" | "){return this.collectParents().concat(this).map(n=>n.title).join(e)}collectParents(){return this._collectParents(this,[])}_collectParents(e,n){return e.parent&&(n.unshift(e.parent),this._collectParents(e.parent,n)),n}collectChildren(){return this._collectChildren(this,[])}_collectChildren(e,n){if(e.children.length)for(let r of e.children)n.push(r),this._collectChildren(r,n);return n}};var PN=(()=>{let e=class e{constructor(r,i,o){this.injector=r,this.applicationService=i,this.googleService=o,this.saveDelay=new Yr(5e3),this.applicationService.loading.set(!0),this.load().finally(()=>this.applicationService.loading.set(!1))}save(r=!1){this.applicationService.changes.set(!0),this.saveDelay.restart(()=>this._save()),r&&this.saveDelay.complete()}_save(){let r={},i=this.injector.get(wr);r.articles=i.articles.filter(o=>o.id!="placeholder").map(o=>this.serializeArticle(o)),this.googleService.update(r)}serializeArticle(r){let i={};return i.id=r.id,i.title=r.title,i.text=r.text,i.childIds=r.children.map(o=>o.id),i.folder=r.folder,i}load(){return I(this,null,function*(){let r=yield this.googleService.request(),i=this.injector.get(wr);i.articles=r.articles.map(o=>this.parseArticle(o)),i.articles.forEach(o=>o.children=r.articles.find(s=>s.id==o.id).childIds.map(s=>i.articles.find(a=>a.id==s))),i.articles.forEach(o=>o.parent=i.articles.find(s=>s.children.includes(o)))})}parseArticle(r){let i=new qc;return i.id=r.id||ki(),i.title=r.title,i.text=r.text,i.open=!1,i.folder=r.folder,i}};e.\u0275fac=function(i){return new(i||e)(z(Xe),z(Ye),z(Wg))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wr=(()=>{let e=class e{constructor(r,i){this.dialogService=r,this.serializationService=i,this.searchResults=[]}getRoot(){return this.articles?.filter(r=>!r.parent)}collectArticles(){let r=[];for(let i of this.articles)r.push(i),r.push(i.collectChildren());return r}save(r=!1){this.serializationService.save(r)}create(r,i){return I(this,null,function*(){let o=yield this.dialogService.createInput({title:i?"Create Folder":"Create Note",placeholder:"Title"});if(o){let s=new qc;s.id=ki(),s.title=o,s.text="",s.children=[],s.parent=r,s.parent?.children.push(s),s.folder=i,this.articles.push(s),this.serializationService.save(!0)}})}rename(r){this.dialogService.createInput({title:"Rename: "+r.getNameWithParents(),placeholder:"Text",defaultValue:r.title}).then(i=>{Tn.isEmpty(i)||(r.title=i,this.serializationService.save(!0))})}delete(r){this.dialogService.createConfirmation({title:"Delete: "+r.getNameWithParents(),messages:['Are you sure you want to delete "'+r.title+'"?']}).then(i=>{i&&(r==this.current&&(this.current=Z.nearestRightFirst(this.articles,this.articles.indexOf(r))),Z.remove(this.articles,r),Z.remove(r.parent?.children,r),this.serializationService.save(!0))})}options(r){this.dialogService.create(xN,{article:r})}};e.\u0275fac=function(i){return new(i||e)(z(Qe),z(PN))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var H5=()=>[],z5=(t,e)=>e.id;function G5(t,e){t&1&&K(0,"i",2)}function q5(t,e){if(t&1&&K(0,"i",3),t&2){let n=_(2);X("ngClass",n.article.open?"fa-angle-down":"fa-angle-right")}}function W5(t,e){t&1&&K(0,"i",2)}function K5(t,e){if(t&1&&K(0,"app-sidebar-row",8),t&2){let n=e.$implicit;X("article",n)}}function Q5(t,e){if(t&1){let n=J();R(0,"div",0),B("drop",function(i){L(n);let o=_();return V(o.drop(i,o.article))}),R(1,"div",1),B("click",function(){L(n);let i=_();return V(i.onClick())}),te(2,G5,1,0,"i",2,Cn),G(4,q5,1,1,"i",3)(5,W5,1,0,"i",2),R(6,"span",4),B("dragstart",function(i){L(n);let o=_();return V(o.start(i,o.article))})("dragenter",function(i){L(n);let o=_();return V(o.enter(i,o.article))})("dragleave",function(i){L(n);let o=_();return V(o.leave(i,o.article))})("dragend",function(i){L(n);let o=_();return V(o.end(i,o.article))}),Y(7),x()(),R(8,"div",5)(9,"i",6),B("click",function(){L(n);let i=_();return V(i.stateService.options(i.article))}),x()()(),R(10,"div",7),te(11,K5,1,1,"app-sidebar-row",8,z5),x()}if(t&2){let n=_();b(2),ne(ds(8,H5).constructor(n.article.collectParents().length)),b(2),q(n.article.folder?4:5),b(2),ce("highlight",n.isCurrent())("positive",n.isSearchResult()),b(),Me(n.article.title),b(3),ce("open",n.article.open),b(),ne(n.article.children)}}var NN=(()=>{let e=class e{constructor(r,i){this.googleService=r,this.stateService=i}isCurrent(){return this.article.collectChildren().concat(this.article).some(r=>r==this.stateService.current)}isSearchResult(){return this.article.collectChildren().concat(this.article).some(r=>this.stateService.searchResults.includes(r))}onClick(){this.article.folder?this.article.open=!this.article.open:this.stateService.current=this.article}start(r,i){if(console.log("start: "+i.title),r.dataTransfer.setDragImage(new Image,0,0),e.object=i,i.parent)e.array=i.parent.children,e.index=i.parent.children.indexOf(i);else{let o=this.stateService.articles;e.array=o,e.index=o.indexOf(i)}}enter(r,i){console.log("enter: "+i.title),(!i.parent||i.parent.children==e.array)&&Z.move(e.array,e.object,e.array.indexOf(i))}leave(r,i){console.log("leave: "+i.title)}drop(r,i){console.log("drop: "+i.title),e.array.indexOf(e.object)!=e.index&&this.stateService.save(),e.object=null,e.array=null,e.index=null}end(r,i){console.log("end: "+i.title),e.object&&Z.move(e.array,e.object,e.index)}isDraggingSome(){return e.object!=null}isDraggingThis(){return e.object==this.article}};e.\u0275fac=function(i){return new(i||e)(k(Wg),k(wr))},e.\u0275cmp=se({type:e,selectors:[["app-sidebar-row"]],inputs:{article:"article"},decls:1,vars:1,consts:[["ondragover","event.preventDefault()",1,"flex","gap","cursor-pointer","hover-brighten","hover-container",2,"line-height","24px",3,"drop"],[1,"flex","gap","flex-1","width-100","min-width-0","align-items-center",3,"click"],[1,"fa-solid","fa-angle-down","opacity-0"],[1,"fa-solid",3,"ngClass"],["draggable","true","ondragover","event.preventDefault()",1,"ellipsis","flex-1","width-0",3,"dragstart","dragenter","dragleave","dragend"],[1,"article-buttons","hover-positive","hover-visible"],[1,"fa-solid","fa-ellipsis-vertical",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer"],[3,"article"]],template:function(i,o){i&1&&G(0,Q5,13,9),i&2&&q(o.article?0:-1)},dependencies:[e,Ge,Wt,rn],encapsulation:2});let t=e;return t})();var Y5=(t,e)=>e.id;function J5(t,e){t&1&&K(0,"div",9)}function Z5(t,e){if(t&1&&(G(0,J5,1,0,"div",9),K(1,"app-sidebar-row",10)),t&2){let n=e.$implicit,r=e.$index;q(r!=0?0:-1),b(),X("article",n)}}var kN=(()=>{let e=class e{constructor(r){this.stateService=r}onSearchInputChange(r){if(this.stateService.searchQuery=r.value,this.stateService.searchResults.length=0,!Tn.isEmpty(this.stateService.searchQuery))for(let i of this.stateService.collectArticles())!i.folder&&i.text?.match(new RegExp(this.stateService.searchQuery,"i"))&&Z.push(this.stateService.searchResults,i)}};e.\u0275fac=function(i){return new(i||e)(k(wr))},e.\u0275cmp=se({type:e,selectors:[["app-sidebar"]],decls:12,vars:0,consts:[["searchInput",""],[1,"sidebar-container"],["placeholder","Search",1,"search-input",3,"input","focus"],[1,"h-separator","margins","subtle"],[1,"items-container","y-scrollbar-container"],[1,"flex","column","margins-1-h"],[1,"h-separator","gap-1-bottom","margins","subtle"],[1,"buttons-container"],[1,"button",3,"click"],[1,"h-separator","subtle"],[3,"article"]],template:function(i,o){if(i&1){let s=J();R(0,"div",1)(1,"input",2,0),B("input",function(){L(s);let c=Pn(2);return V(o.onSearchInputChange(c))})("focus",function(){L(s);let c=Pn(2);return V(c.select())}),x(),K(3,"div",3),R(4,"div",4)(5,"div",5),te(6,Z5,2,2,null,null,Y5),x()(),K(8,"div",6),R(9,"div",7)(10,"div",8),B("click",function(){return L(s),V(o.stateService.options(null))}),Y(11,"Create"),x()()()}i&2&&(b(6),ne(o.stateService.getRoot()))},dependencies:[rn,NN],styles:["[_nghost-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;overflow:hidden;height:100%;width:300px;min-width:300px}@media screen and (max-width: 1280px){[_nghost-%COMP%]{width:100%;min-width:100%}}.sidebar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;width:100%}.search-input[_ngcontent-%COMP%]{border:none;caret-color:var(--color-text-secondary);font-variant-numeric:tabular-nums;-webkit-user-select:none;user-select:none;padding:.66666666rem;border-radius:.33333333rem;border:1px solid var(--color-border);margin:.33333333rem}.items-container[_ngcontent-%COMP%]{flex:1}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;margin:0 .33333333rem .33333333rem}.buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;gap:.33333333rem}"]});let t=e;return t})();function X5(t,e){if(t&1){let n=J();R(0,"textarea",4),In("ngModelChange",function(i){L(n);let o=_();return Nn(o.stateService.current.text,i)||(o.stateService.current.text=i),V(i)}),B("ngModelChange",function(){L(n);let i=_();return V(i.stateService.save())}),x()}if(t&2){let n=_();En("ngModel",n.stateService.current.text)}}var ON=(()=>{let e=class e{constructor(r,i,o){this.stateService=r,this.applicationService=i,this.dialogService=o}ngOnInit(){this.configureHeader()}configureHeader(){this.applicationService.addHeaderButtons("start",[{id:"show-sidebar",tooltip:"Show Notes",classes:"fa-solid fa-angle-left mobile-only",onClick:()=>this.stateService.current=null,hidden:()=>!this.stateService.current}],"first"),this.applicationService.addHeaderButtons("end",[{id:"open-settings",tooltip:"Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Do)}],"last")}isMobileView(){return!xt.isLargeScreen()}};e.\u0275fac=function(i){return new(i||e)(k(wr),k(Ye),k(Qe))},e.\u0275cmp=se({type:e,selectors:[["app-story-manager"]],decls:5,vars:5,consts:[[1,"story-manager-container"],[1,"v-separator","desktop-only"],[1,"content"],["spellcheck","false","placeholder","Text",1,"note-content",3,"ngModel"],["spellcheck","false","placeholder","Text",1,"note-content",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(R(0,"div",0),K(1,"app-sidebar")(2,"div",1),R(3,"div",2),G(4,X5,1,1,"textarea",3),x()()),i&2&&(b(),ce("display-none",o.isMobileView()&&o.stateService.current),b(2),ce("display-none",o.isMobileView()&&!o.stateService.current),b(),q(o.stateService.current?4:-1))},dependencies:[Ge,rn,er,tr,Bn,kN],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .story-manager-container[_ngcontent-%COMP%]{display:flex;height:100%;overflow:hidden}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{flex:1;resize:none;border:none;line-height:1.5rem;padding:.33333333rem;overflow-wrap:normal}"]});let t=e;return t})();var e8=(t,e)=>sessionStorage.getItem(Ot.KEY_ACTIVE_APP_ID)?!0:F(Fn).navigate([""]),t8=(t,e)=>I(null,null,function*(){let n=F(Fn);return sessionStorage.getItem(Ot.KEY_GOOGLE_DATA_FILE_ID)?!0:(yield F(Qe).create(cN),sessionStorage.getItem(Ot.KEY_GOOGLE_DATA_FILE_ID)?!0:n.navigate([""]))}),FN=[{path:"login",canActivate:[e8],component:DN},{path:"gallery",canActivateChild:[QI],children:[{path:"",canActivate:[t8],component:TN}]},{path:"story-manager",canActivate:[QI],component:ON},{path:"shopping-list",component:RN},{path:"",component:bN},{path:"**",redirectTo:""}];var VN=(t,e)=>{let n=F(Gc);return e(LN(n,t)).pipe(or(r=>{if(r.url.includes("googleapis.com")&&n.getRefreshToken())return console.log(r),st(n.requestAccessToken()).pipe(Lt(()=>e(LN(n,t))),or(i=>Gi(()=>i)))}))},LN=(t,e)=>e.url.includes("googleapis.com")?e.clone({headers:e.headers.set("authorization","Bearer "+t.getAccessToken())}):e;eC(sN,{providers:[bC(FN,SC({paramsInheritanceStrategy:"always"})),j_(B_(),U_([VN])),gM(()=>mM(Ks.firebase)),w1(()=>b1())]}).catch(t=>console.error(t));
