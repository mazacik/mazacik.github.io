var $k=Object.defineProperty,Hk=Object.defineProperties;var zk=Object.getOwnPropertyDescriptors;var CT=Object.getOwnPropertySymbols;var Gk=Object.prototype.hasOwnProperty,qk=Object.prototype.propertyIsEnumerable;var ET=(t,e,n)=>e in t?$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})Gk.call(e,n)&&ET(t,n,e[n]);if(CT)for(var n of CT(e))qk.call(e,n)&&ET(t,n,e[n]);return t},Ee=(t,e)=>Hk(t,zk(e));var w=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(u){i(u)}},s=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var Lm;function kd(){return Lm}function br(t){let e=Lm;return Lm=t,e}var IT=Symbol("NotFound");function ra(t){return t===IT||t?.name==="\u0275NotFound"}var en=null,Od=!1,Vm=1,Wk=null,tn=Symbol("SIGNAL");function _e(t){let e=en;return en=t,e}function jd(){return en}var jo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ia(t){if(Od)throw new Error("");if(en===null)return;en.consumerOnSignalRead(t);let e=en.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=en.recomputing;if(r&&(n=e!==void 0?e.nextProducer:en.producers,n!==void 0&&n.producer===t)){en.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===en&&(!r||Qk(i,en)))return;let o=aa(en),s={producer:t,consumer:en,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};en.producersTail=s,e!==void 0?e.nextProducer=s:en.producers=s,o&&ST(t,s)}function wT(){Vm++}function Ud(t){if(!(aa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Vm)){if(!t.producerMustRecompute(t)&&!sa(t)){Vd(t);return}t.producerRecomputeValue(t),Vd(t)}}function jm(t){if(t.consumers===void 0)return;let e=Od;Od=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Kk(r)}}finally{Od=e}}function Um(){return en?.consumerAllowSignalWrites!==!1}function Kk(t){t.dirty=!0,jm(t),t.consumerMarkedDirty?.(t)}function Vd(t){t.dirty=!1,t.lastCleanEpoch=Vm}function Uo(t){return t&&TT(t),_e(t)}function TT(t){t.producersTail=void 0,t.recomputing=!0}function oa(t,e){_e(e),t&&bT(t)}function bT(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(aa(t))do n=Bm(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function sa(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Ud(n),r!==n.version))return!0}return!1}function Bo(t){if(aa(t)){let e=t.producers;for(;e!==void 0;)e=Bm(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function ST(t,e){let n=t.consumersTail,r=aa(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)ST(i.producer,i)}function Bm(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!aa(e)){let o=e.producers;for(;o!==void 0;)o=Bm(o)}return n}function aa(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Bd(t){Wk?.(t)}function Qk(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function $d(t,e){return Object.is(t,e)}function Hd(t,e){let n=Object.create(Yk);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Ud(n),ia(n),n.value===pl)throw n.error;return n.value};return r[tn]=n,Bd(n),r}var Fd=Symbol("UNSET"),Ld=Symbol("COMPUTING"),pl=Symbol("ERRORED"),Yk=Ee(H({},jo),{value:Fd,dirty:!0,error:null,equal:$d,kind:"computed",producerMustRecompute(t){return t.value===Fd||t.value===Ld},producerRecomputeValue(t){if(t.value===Ld)throw new Error("");let e=t.value;t.value=Ld;let n=Uo(t),r,i=!1;try{r=t.computation(),_e(null),i=e!==Fd&&e!==pl&&r!==pl&&t.equal(e,r)}catch(o){r=pl,t.error=o}finally{oa(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Jk(){throw new Error}var DT=Jk;function AT(t){DT(t)}function $m(t){DT=t}var Zk=null;function Hm(t,e){let n=Object.create(zd);n.value=t,e!==void 0&&(n.equal=e);let r=()=>RT(n);return r[tn]=n,Bd(n),[r,s=>ca(n,s),s=>zm(n,s)]}function RT(t){return ia(t),t.value}function ca(t,e){Um()||AT(t),t.equal(t.value,e)||(t.value=e,Xk(t))}function zm(t,e){Um()||AT(t),ca(t,e(t.value))}var zd=Ee(H({},jo),{equal:$d,value:void 0,kind:"signal"});function Xk(t){t.version++,wT(),jm(t),Zk?.(t)}function be(t){return typeof t=="function"}function la(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Gd=la(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function $o(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var gt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(be(r))try{r()}catch(o){e=o instanceof Gd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{MT(o)}catch(s){e=e??[],s instanceof Gd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Gd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)MT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&$o(n,e)}remove(e){let{_finalizers:n}=this;n&&$o(n,e),e instanceof t&&e._removeParent(this)}};gt.EMPTY=(()=>{let t=new gt;return t.closed=!0,t})();var Gm=gt.EMPTY;function qd(t){return t instanceof gt||t&&"closed"in t&&be(t.remove)&&be(t.add)&&be(t.unsubscribe)}function MT(t){be(t)?t():t.unsubscribe()}var ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ua={setTimeout(t,e,...n){let{delegate:r}=ua;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ua;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wd(t){ua.setTimeout(()=>{let{onUnhandledError:e}=ar;if(e)e(t);else throw t})}function gl(){}var xT=qm("C",void 0,void 0);function PT(t){return qm("E",void 0,t)}function NT(t){return qm("N",t,void 0)}function qm(t,e,n){return{kind:t,value:e,error:n}}var Ho=null;function da(t){if(ar.useDeprecatedSynchronousErrorHandling){let e=!Ho;if(e&&(Ho={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ho;if(Ho=null,n)throw r}}else t()}function kT(t){ar.useDeprecatedSynchronousErrorHandling&&Ho&&(Ho.errorThrown=!0,Ho.error=t)}var zo=class extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qd(e)&&e.add(this)):this.destination=nO}static create(e,n,r){return new Gi(e,n,r)}next(e){this.isStopped?Km(NT(e),this):this._next(e)}error(e){this.isStopped?Km(PT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Km(xT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eO=Function.prototype.bind;function Wm(t,e){return eO.call(t,e)}var Qm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Kd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Kd(r)}else Kd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Kd(n)}}},Gi=class extends zo{constructor(e,n,r){super();let i;if(be(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wm(e.next,o),error:e.error&&Wm(e.error,o),complete:e.complete&&Wm(e.complete,o)}):i=e}this.destination=new Qm(i)}};function Kd(t){ar.useDeprecatedSynchronousErrorHandling?kT(t):Wd(t)}function tO(t){throw t}function Km(t,e){let{onStoppedNotification:n}=ar;n&&ua.setTimeout(()=>n(t,e))}var nO={closed:!0,next:gl,error:tO,complete:gl};var ha=typeof Symbol=="function"&&Symbol.observable||"@@observable";function An(t){return t}function Ym(...t){return Jm(t)}function Jm(t){return t.length===0?An:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=iO(n)?n:new Gi(n,r,i);return da(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=OT(r),new r((i,o)=>{let s=new Gi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ha](){return this}pipe(...n){return Jm(n)(this)}toPromise(n){return n=OT(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function OT(t){var e;return(e=t??ar.Promise)!==null&&e!==void 0?e:Promise}function rO(t){return t&&be(t.next)&&be(t.error)&&be(t.complete)}function iO(t){return t&&t instanceof zo||rO(t)&&qd(t)}function Zm(t){return be(t?.lift)}function Oe(t){return e=>{if(Zm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(t,e,n,r,i){return new Xm(t,e,n,r,i)}var Xm=class extends zo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fa(){return Oe((t,e)=>{let n=null;t._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var pa=class extends Se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Zm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gt;let n=this.getSubject();e.add(this.source.subscribe(Ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gt.EMPTY)}return e}refCount(){return fa()(this)}};var FT=la(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Et=(()=>{class t extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Qd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new FT}next(n){da(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){da(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){da(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Gm:(this.currentObservers=null,o.push(n),new gt(()=>{this.currentObservers=null,$o(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Se;return n.source=this,n}}return t.create=(e,n)=>new Qd(e,n),t})(),Qd=class extends Et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Gm}};var qt=class extends Et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ev={now(){return(ev.delegate||Date).now()},delegate:void 0};var Yd=class extends gt{constructor(e,n){super()}schedule(e,n=0){return this}};var ml={setInterval(t,e,...n){let{delegate:r}=ml;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ml;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ga=class extends Yd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ml.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ml.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,$o(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ma=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ma.now=ev.now;var va=class extends ma{constructor(e,n=ma.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var tv=new va(ga);var Jd=class extends ga{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Zd=class extends va{};var nv=new Zd(Jd);var gn=new Se(t=>t.complete());function LT(t){return t&&be(t.schedule)}function VT(t){return t[t.length-1]}function Xd(t){return be(VT(t))?t.pop():void 0}function qi(t){return LT(VT(t))?t.pop():void 0}function rv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function UT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function c(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function jT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Go(t){return this instanceof Go?(this.v=t,this):new Go(t)}function BT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(I){return Promise.resolve(I).then(m,p)}}function a(m,I){r[m]&&(i[m]=function(O){return new Promise(function(x,j){o.push([m,O,x,j])>1||c(m,O)})},I&&(i[m]=I(i[m])))}function c(m,I){try{u(r[m](I))}catch(O){g(o[0][3],O)}}function u(m){m.value instanceof Go?Promise.resolve(m.value.v).then(h,p):g(o[0][2],m)}function h(m){c("next",m)}function p(m){c("throw",m)}function g(m,I){m(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function $T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jT=="function"?jT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var eh=t=>t&&typeof t.length=="number"&&typeof t!="function";function th(t){return be(t?.then)}function nh(t){return be(t[ha])}function rh(t){return Symbol.asyncIterator&&be(t?.[Symbol.asyncIterator])}function ih(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oh=oO();function sh(t){return be(t?.[oh])}function ah(t){return BT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Go(n.read());if(i)return yield Go(void 0);yield yield Go(r)}}finally{n.releaseLock()}})}function ch(t){return be(t?.getReader)}function It(t){if(t instanceof Se)return t;if(t!=null){if(nh(t))return sO(t);if(eh(t))return aO(t);if(th(t))return cO(t);if(rh(t))return HT(t);if(sh(t))return lO(t);if(ch(t))return uO(t)}throw ih(t)}function sO(t){return new Se(e=>{let n=t[ha]();if(be(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aO(t){return new Se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function cO(t){return new Se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wd)})}function lO(t){return new Se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function HT(t){return new Se(e=>{dO(t,e).catch(n=>e.error(n))})}function uO(t){return HT(ah(t))}function dO(t,e){var n,r,i,o;return UT(this,void 0,void 0,function*(){try{for(n=$T(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function mn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Wi(t,e=0){return Oe((n,r)=>{n.subscribe(Ne(r,i=>mn(r,t,()=>r.next(i),e),()=>mn(r,t,()=>r.complete(),e),i=>mn(r,t,()=>r.error(i),e)))})}function Ki(t,e=0){return Oe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zT(t,e){return It(t).pipe(Ki(e),Wi(e))}function GT(t,e){return It(t).pipe(Ki(e),Wi(e))}function qT(t,e){return new Se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function WT(t,e){return new Se(n=>{let r;return mn(n,e,()=>{r=t[oh](),mn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>be(r?.return)&&r.return()})}function lh(t,e){if(!t)throw new Error("Iterable cannot be null");return new Se(n=>{mn(n,e,()=>{let r=t[Symbol.asyncIterator]();mn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function KT(t,e){return lh(ah(t),e)}function QT(t,e){if(t!=null){if(nh(t))return zT(t,e);if(eh(t))return qT(t,e);if(th(t))return GT(t,e);if(rh(t))return lh(t,e);if(sh(t))return WT(t,e);if(ch(t))return KT(t,e)}throw ih(t)}function st(t,e){return e?QT(t,e):It(t)}function ye(...t){let e=qi(t);return st(t,e)}function Qi(t,e){let n=be(t)?t:()=>t,r=i=>i.error(n());return new Se(e?i=>e.schedule(r,0,i):r)}function iv(t){return!!t&&(t instanceof Se||be(t.lift)&&be(t.subscribe))}var Rn=la(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function vn(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=!1,s;t.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(e.defaultValue):i(new Rn)}})})}function uh(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new Gi({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new Rn)}});t.subscribe(o)})}function Ie(t,e){return Oe((n,r)=>{let i=0;n.subscribe(Ne(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:hO}=Array;function fO(t,e){return hO(e)?t(...e):t(e)}function dh(t){return Ie(e=>fO(t,e))}var{isArray:pO}=Array,{getPrototypeOf:gO,prototype:mO,keys:vO}=Object;function hh(t){if(t.length===1){let e=t[0];if(pO(e))return{args:e,keys:null};if(yO(e)){let n=vO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function yO(t){return t&&typeof t=="object"&&gO(t)===mO}function fh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ph(...t){let e=qi(t),n=Xd(t),{args:r,keys:i}=hh(t);if(r.length===0)return st([],e);let o=new Se(_O(r,e,i?s=>fh(i,s):An));return n?o.pipe(dh(n)):o}function _O(t,e,n=An){return r=>{YT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)YT(e,()=>{let u=st(t[c],e),h=!1;u.subscribe(Ne(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function YT(t,e,n){t?mn(n,t,e):e()}function JT(t,e,n,r,i,o,s,a){let c=[],u=0,h=0,p=!1,g=()=>{p&&!c.length&&!u&&e.complete()},m=O=>u<r?I(O):c.push(O),I=O=>{o&&e.next(O),u++;let x=!1;It(n(O,h++)).subscribe(Ne(e,j=>{i?.(j),o?m(j):e.next(j)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){let j=c.shift();s?mn(e,s,()=>I(j)):I(j)}g()}catch(j){e.error(j)}}))};return t.subscribe(Ne(e,m,()=>{p=!0,g()})),()=>{a?.()}}function Pt(t,e,n=1/0){return be(e)?Pt((r,i)=>Ie((o,s)=>e(r,o,i,s))(It(t(r,i))),n):(typeof e=="number"&&(n=e),Oe((r,i)=>JT(r,i,t,n)))}function ZT(t=1/0){return Pt(An,t)}function XT(){return ZT(1)}function ya(...t){return XT()(st(t,qi(t)))}function vl(t){return new Se(e=>{It(t()).subscribe(e)})}function ov(...t){let e=Xd(t),{args:n,keys:r}=hh(t),i=new Se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let p=!1;It(n[h]).subscribe(Ne(o,g=>{p||(p=!0,u--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(u||o.next(r?fh(r,a):a),o.complete())}))}});return e?i.pipe(dh(e)):i}function yn(t,e){return Oe((n,r)=>{let i=0;n.subscribe(Ne(r,o=>t.call(e,o,i++)&&r.next(o)))})}function cr(t){return Oe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ne(n,void 0,void 0,s=>{o=It(t(s,cr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function eb(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Ne(s,h=>{let p=u++;c=a?t(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yi(t,e){return be(e)?Pt(t,e,1):Pt(t,1)}function Ji(t){return Oe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function si(t){return t<=0?()=>gn:Oe((e,n)=>{let r=0;e.subscribe(Ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gh(t=CO){return Oe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function CO(){return new Rn}function qo(t){return Oe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ai(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yn((i,o)=>t(i,o,r)):An,si(1),n?Ji(e):gh(()=>new Rn))}function _a(t){return t<=0?()=>gn:Oe((e,n)=>{let r=[];e.subscribe(Ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function sv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yn((i,o)=>t(i,o,r)):An,_a(1),n?Ji(e):gh(()=>new Rn))}function av(t,e){return Oe(eb(t,e,arguments.length>=2,!0))}function cv(...t){let e=qi(t);return Oe((n,r)=>{(e?ya(t,n,e):ya(t,n)).subscribe(r)})}function Vt(t,e){return Oe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ne(r,c=>{i?.unsubscribe();let u=0,h=o++;It(t(c,h)).subscribe(i=Ne(r,p=>r.next(e?e(c,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function mh(t){return Oe((e,n)=>{It(t).subscribe(Ne(n,()=>n.complete(),gl)),!n.closed&&e.subscribe(n)})}function jt(t,e,n){let r=be(t)||e||n?{next:t,error:e,complete:n}:t;return r?Oe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ne(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):An}function tb(t){let e=_e(null);try{return t()}finally{_e(e)}}var nb=Ee(H({},jo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function rb(t){if(t.dirty=!1,t.version>0&&!sa(t))return;t.version++;let e=Uo(t);try{t.cleanup(),t.fn()}finally{oa(t,e)}}var Zi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Cv=new Zi("20.3.12");var Ch="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",J=class extends Error{code;constructor(e,n){super(ui(e,n)),this.code=e}};function EO(t){return`NG0${Math.abs(t)}`}function ui(t,e){return`${EO(t)}${e?": "+e:""}`}var Sr=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("")}function sb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function li(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(li).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Eh(t,e){return t?e?`${t} ${e}`:t:e||""}var IO=ze({__forward_ref__:ze});function di(t){return t.__forward_ref__=di,t.toString=function(){return li(this())},t}function Wt(t){return Ev(t)?t():t}function Ev(t){return typeof t=="function"&&t.hasOwnProperty(IO)&&t.__forward_ref__===di}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Il(t){return wO(t,Ih)}function Iv(t){return Il(t)!==null}function wO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function TO(t){let e=t?.[Ih]??null;return e||null}function uv(t){return t&&t.hasOwnProperty(yh)?t[yh]:null}var Ih=ze({\u0275prov:ze}),yh=ze({\u0275inj:ze}),se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wv(t){return t&&!!t.\u0275providers}var Tv=ze({\u0275cmp:ze}),bv=ze({\u0275dir:ze}),Sv=ze({\u0275pipe:ze}),Dv=ze({\u0275mod:ze}),_l=ze({\u0275fac:ze}),Jo=ze({__NG_ELEMENT_ID__:ze}),ib=ze({__NG_ENV_ID__:ze});function Mn(t){return typeof t=="string"?t:t==null?"":String(t)}function ab(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Mn(t)}var cb=ze({ngErrorCode:ze}),bO=ze({ngErrorMessage:ze}),SO=ze({ngTokenPath:ze});function Av(t,e){return lb("",-200,e)}function wh(t,e){throw new J(-201,!1)}function lb(t,e,n){let r=new J(e,t);return r[cb]=e,r[bO]=t,n&&(r[SO]=n),r}function DO(t){return t[cb]}var dv;function ub(){return dv}function ln(t){let e=dv;return dv=t,e}function Rv(t,e,n){let r=Il(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;wh(t,"Injector")}var AO={},Wo=AO,hv="__NG_DI_FLAG__",fv=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ko(n)||0;try{return this.injector.get(e,r&8?null:Wo,r)}catch(i){if(ra(i))return i;throw i}}};function RO(t,e=0){let n=kd();if(n===void 0)throw new J(-203,!1);if(n===null)return Rv(t,void 0,e);{let r=MO(e),i=n.retrieve(t,r);if(ra(i)){if(r.optional)return null;throw i}return i}}function z(t,e=0){return(ub()||RO)(Wt(t),e)}function F(t,e){return z(t,Ko(e))}function Ko(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function MO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function pv(t){let e=[];for(let n=0;n<t.length;n++){let r=Wt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=xO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function db(t,e){return t[hv]=e,t.prototype[hv]=e,t}function xO(t){return t[hv]}function Xi(t,e){let n=t.hasOwnProperty(_l);return n?t[_l]:null}function hb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function fb(t){return t.flat(Number.POSITIVE_INFINITY)}function Th(t,e){t.forEach(n=>Array.isArray(n)?Th(n,e):e(n))}function Mv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function bh(t,e,n){let r=Ea(t,e);return r>=0?t[r|1]=n:(r=~r,pb(t,r,e,n)),r}function Sh(t,e){let n=Ea(t,e);if(n>=0)return t[n|1]}function Ea(t,e){return PO(t,e,1)}function PO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var to={},un=[],hi=new se(""),xv=new se("",-1),Pv=new se(""),Cl=class{get(e,n=Wo){if(n===Wo){let i=lb("",-201);throw i.name="\u0275NotFound",i}return n}};function Nv(t){return t[Dv]||null}function fi(t){return t[Tv]||null}function kv(t){return t[bv]||null}function gb(t){return t[Sv]||null}function ur(t){return{\u0275providers:t}}function mb(...t){return{\u0275providers:Ov(!0,t),\u0275fromNgModule:!0}}function Ov(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Th(e,s=>{let a=s;_h(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&vb(i,o),n}function vb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Fv(i,o=>{e(o,r)})}}function _h(t,e,n,r){if(t=Wt(t),!t)return!1;let i=null,o=uv(t),s=!o&&fi(t);if(!o&&!s){let c=t.ngModule;if(o=uv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)_h(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Th(o.imports,h=>{_h(h,e,n,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&vb(u,e)}if(!a){let u=Xi(i)||(()=>new i);e({provide:i,useFactory:u,deps:un},i),e({provide:Pv,useValue:i,multi:!0},i),e({provide:hi,useValue:()=>z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Fv(c,h=>{e(h,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Fv(t,e){for(let n of t)wv(n)&&(n=n.\u0275providers),Array.isArray(n)?Fv(n,e):e(n)}var NO=ze({provide:String,useValue:ze});function yb(t){return t!==null&&typeof t=="object"&&NO in t}function kO(t){return!!(t&&t.useExisting)}function OO(t){return!!(t&&t.useFactory)}function Qo(t){return typeof t=="function"}function _b(t){return!!t.useClass}var Tl=new se(""),vh={},ob={},lv;function Ia(){return lv===void 0&&(lv=new Cl),lv}var ot=class{},Yo=class extends ot{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,mv(e,s=>this.processProvider(s)),this.records.set(xv,Ca(void 0,this)),i.has("environment")&&this.records.set(ot,Ca(void 0,this));let o=this.records.get(Tl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Pv,un,{self:!0}))}retrieve(e,n){let r=Ko(n)||0;try{return this.get(e,Wo,r)}catch(i){if(ra(i))return i;throw i}}destroy(){yl(this),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return yl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){yl(this);let n=br(this),r=ln(void 0),i;try{return e()}finally{br(n),ln(r)}}get(e,n=Wo,r){if(yl(this),e.hasOwnProperty(ib))return e[ib](this);let i=Ko(r),o,s=br(this),a=ln(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=UO(e)&&Il(e);h&&this.injectableDefInScope(h)?u=Ca(gv(e),vh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Ia():this.parent;return n=i&8&&n===Wo?null:n,c.get(e,n)}catch(c){let u=DO(c);throw u===-200||u===-201?new J(u,null):c}finally{ln(a),br(s)}}resolveInjectorInitializers(){let e=_e(null),n=br(this),r=ln(void 0),i;try{let o=this.get(hi,un,{self:!0});for(let s of o)s()}finally{br(n),ln(r),_e(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(li(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Wt(e);let n=Qo(e)?e:Wt(e&&e.provide),r=LO(e);if(!Qo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ca(void 0,vh,!0),i.factory=()=>pv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=_e(null);try{if(n.value===ob)throw Av(li(e));return n.value===vh&&(n.value=ob,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&jO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{_e(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Wt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function gv(t){let e=Il(t),n=e!==null?e.factory:Xi(t);if(n!==null)return n;if(t instanceof se)throw new J(204,!1);if(t instanceof Function)return FO(t);throw new J(204,!1)}function FO(t){if(t.length>0)throw new J(204,!1);let n=TO(t);return n!==null?()=>n.factory(t):()=>new t}function LO(t){if(yb(t))return Ca(void 0,t.useValue);{let e=Lv(t);return Ca(e,vh)}}function Lv(t,e,n){let r;if(Qo(t)){let i=Wt(t);return Xi(i)||gv(i)}else if(yb(t))r=()=>Wt(t.useValue);else if(OO(t))r=()=>t.useFactory(...pv(t.deps||[]));else if(kO(t))r=(i,o)=>z(Wt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Wt(t&&(t.useClass||t.provide));if(VO(t))r=()=>new i(...pv(t.deps));else return Xi(i)||gv(i)}return r}function yl(t){if(t.destroyed)throw new J(205,!1)}function Ca(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function VO(t){return!!t.deps}function jO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function UO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function mv(t,e){for(let n of t)Array.isArray(n)?mv(n,e):n&&wv(n)?mv(n.\u0275providers,e):e(n)}function ut(t,e){let n;t instanceof Yo?(yl(t),n=t):n=new fv(t);let r,i=br(n),o=ln(void 0);try{return e()}finally{br(i),ln(o)}}function Cb(){return ub()!==void 0||kd()!=null}var dr=0,he=1,Ce=2,Nt=3,qn=4,Wn=5,wa=6,Ta=7,yt=8,Kn=9,Ar=10,tt=11,ba=12,Vv=13,Zo=14,xn=15,pi=16,Xo=17,Rr=18,bl=19,jv=20,ci=21,Dh=22,gi=23,Pn=24,es=25,no=26,dt=27,Eb=1,Uv=6,ro=7,Sl=8,ts=9,mt=10;function Mr(t){return Array.isArray(t)&&typeof t[Eb]=="object"}function hr(t){return Array.isArray(t)&&t[Eb]===!0}function Bv(t){return(t.flags&4)!==0}function io(t){return t.componentOffset>-1}function Ah(t){return(t.flags&1)===1}function xr(t){return!!t.template}function Sa(t){return(t[Ce]&512)!==0}function ns(t){return(t[Ce]&256)===256}var Ib="svg",wb="math";function Qn(t){for(;Array.isArray(t);)t=t[dr];return t}function $v(t,e){return Qn(e[t])}function fr(t,e){return Qn(e[t.index])}function Dl(t,e){return t.data[e]}function Rh(t,e){return t[e]}function Al(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Yn(t,e){let n=e[t];return Mr(n)?n:n[dr]}function Tb(t){return(t[Ce]&4)===4}function Mh(t){return(t[Ce]&128)===128}function bb(t){return hr(t[Nt])}function Pr(t,e){return e==null?null:t[e]}function Hv(t){t[Xo]=0}function zv(t){t[Ce]&1024||(t[Ce]|=1024,Mh(t)&&oo(t))}function Sb(t,e){for(;t>0;)e=e[Zo],t--;return e}function Rl(t){return!!(t[Ce]&9216||t[Pn]?.dirty)}function xh(t){t[Ar].changeDetectionScheduler?.notify(8),t[Ce]&64&&(t[Ce]|=1024),Rl(t)&&oo(t)}function oo(t){t[Ar].changeDetectionScheduler?.notify(0);let e=eo(t);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!Mh(e)));)e=eo(e)}function Gv(t,e){if(ns(t))throw new J(911,!1);t[ci]===null&&(t[ci]=[]),t[ci].push(e)}function Db(t,e){if(t[ci]===null)return;let n=t[ci].indexOf(e);n!==-1&&t[ci].splice(n,1)}function eo(t){let e=t[Nt];return hr(e)?e[Nt]:e}function qv(t){return t[Ta]??=[]}function Wv(t){return t.cleanup??=[]}function Ab(t,e,n,r){let i=qv(e);i.push(n),t.firstCreatePass&&Wv(t).push(r,i.length-1)}var Ae={lFrame:Bb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vv=!1;function Rb(){return Ae.lFrame.elementDepthCount}function Mb(){Ae.lFrame.elementDepthCount++}function Kv(){Ae.lFrame.elementDepthCount--}function xb(){return Ae.bindingsEnabled}function Pb(){return Ae.skipHydrationRootTNode!==null}function Qv(t){return Ae.skipHydrationRootTNode===t}function Yv(){Ae.skipHydrationRootTNode=null}function ve(){return Ae.lFrame.lView}function ht(){return Ae.lFrame.tView}function L(t){return Ae.lFrame.contextLView=t,t[yt]}function V(t){return Ae.lFrame.contextLView=null,t}function wt(){let t=Jv();for(;t!==null&&t.type===64;)t=t.parent;return t}function Jv(){return Ae.lFrame.currentTNode}function Nb(){let t=Ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function rs(t,e){let n=Ae.lFrame;n.currentTNode=t,n.isParent=e}function Zv(){return Ae.lFrame.isParent}function kb(){Ae.lFrame.isParent=!1}function Xv(){return Ae.lFrame.contextLView}function ey(){return vv}function Da(t){let e=vv;return vv=t,e}function Ph(){let t=Ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Nh(){return Ae.lFrame.bindingIndex}function Ob(t){return Ae.lFrame.bindingIndex=t}function is(){return Ae.lFrame.bindingIndex++}function Aa(t){let e=Ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Fb(){return Ae.lFrame.inI18n}function Lb(t,e){let n=Ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,kh(e)}function Vb(){return Ae.lFrame.currentDirectiveIndex}function kh(t){Ae.lFrame.currentDirectiveIndex=t}function jb(t){let e=Ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ty(){return Ae.lFrame.currentQueryIndex}function Oh(t){Ae.lFrame.currentQueryIndex=t}function BO(t){let e=t[he];return e.type===2?e.declTNode:e.type===1?t[Wn]:null}function ny(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=BO(o),i===null||(o=o[Zo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ae.lFrame=Ub();return r.currentTNode=e,r.lView=t,!0}function Fh(t){let e=Ub(),n=t[he];Ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ub(){let t=Ae.lFrame,e=t===null?null:t.child;return e===null?Bb(t):e}function Bb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $b(){let t=Ae.lFrame;return Ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ry=$b;function Lh(){let t=$b();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Hb(t){return(Ae.lFrame.contextLView=Sb(t,Ae.lFrame.contextLView))[yt]}function Nn(){return Ae.lFrame.selectedIndex}function so(t){Ae.lFrame.selectedIndex=t}function Vh(){let t=Ae.lFrame;return Dl(t.tView,t.selectedIndex)}function zb(){return Ae.lFrame.currentNamespace}var Gb=!0;function jh(){return Gb}function Ml(t){Gb=t}function yv(t,e=null,n=null,r){let i=iy(t,e,n,r);return i.resolveInjectorInitializers(),i}function iy(t,e=null,n=null,r,i=new Set){let o=[n||un,mb(t)];return r=r||(typeof t=="object"?void 0:li(t)),new Yo(o,e||Ia(),r||null,i)}var et=class t{static THROW_IF_NOT_FOUND=Wo;static NULL=new Cl;static create(e,n){if(Array.isArray(e))return yv({name:""},n,e,"");{let r=e.name??"";return yv({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:t,providedIn:"any",factory:()=>z(xv)});static __NG_ELEMENT_ID__=-1},Tt=new se(""),_n=(()=>{class t{static __NG_ELEMENT_ID__=$O;static __NG_ENV_ID__=n=>n}return t})(),El=class extends _n{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ns(this._lView)}onDestroy(e){let n=this._lView;return Gv(n,e),()=>Db(n,e)}};function $O(){return new El(ve())}var Gn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},kn=new se("",{providedIn:"root",factory:()=>{let t=F(ot),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Gn),e.handleError(n))}}}),qb={provide:hi,useValue:()=>void F(Gn),multi:!0};function oy(t){return typeof t=="function"&&t[tn]!==void 0}function nt(t,e){let[n,r,i]=Hm(t,e?.equal),o=n,s=o[tn];return o.set=r,o.update=i,o.asReadonly=sy.bind(o),o}function sy(){let t=this[tn];if(t.readonlyFn===void 0){let e=()=>this();e[tn]=t,t.readonlyFn=e}return t.readonlyFn}function ay(t){return oy(t)&&typeof t.set=="function"}var Ra=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=HO}return t})();function HO(){return new Ra(ve(),wt())}var lr=class{},xl=new se("",{providedIn:"root",factory:()=>!1});var cy=new se(""),ly=new se(""),Nr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new qt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Se(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),mi=(()=>{class t{internalPendingTasks=F(Nr);scheduler=F(lr);errorHandler=F(kn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})();function os(...t){}var Pl=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>new _v})}return t})(),_v=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Va(t){return{toString:t}.toString()}var Uh="__parameters__";function JO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ZO(t,e,n){return Va(()=>{let r=JO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,h){let p=c.hasOwnProperty(Uh)?c[Uh]:Object.defineProperty(c,Uh,{value:[]})[Uh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Fr=db(ZO("Optional"),8);function XO(t){return typeof t=="function"}var Yh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function RS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ja=(()=>{let t=()=>MS;return t.ngInherit=!0,t})();function MS(t){return t.type.prototype.ngOnChanges&&(t.setInput=tF),eF}function eF(){let t=PS(this),e=t?.current;if(e){let n=t.previous;if(n===to)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function tF(t,e,n,r,i){let o=this.declaredInputs[r],s=PS(t)||nF(t,{previous:to,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Yh(u&&u.currentValue,n,c===to),RS(t,e,i,n)}var xS="__ngSimpleChanges__";function PS(t){return t[xS]||null}function nF(t,e){return t[xS]=e}var Wb=[];var Qe=function(t,e=null,n){for(let r=0;r<Wb.length;r++){let i=Wb[r];i(t,e,n)}};function rF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MS(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function iF(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Gh(t,e,n){NS(t,e,3,n)}function qh(t,e,n,r){(t[Ce]&3)===n&&NS(t,e,n,r)}function uy(t,e){let n=t[Ce];(n&3)===e&&(n&=16383,n+=1,t[Ce]=n)}function NS(t,e,n,r){let i=r!==void 0?t[Xo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Xo]+=65536),(a<o||o==-1)&&(oF(t,n,e,c),t[Xo]=(t[Xo]&4294901760)+c+2),c++}function Kb(t,e){Qe(4,t,e);let n=_e(null);try{e.call(t)}finally{_e(n),Qe(5,t,e)}}function oF(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Ce]>>14<t[Xo]>>16&&(t[Ce]&3)===e&&(t[Ce]+=16384,Kb(a,o)):Kb(a,o)}var xa=-1,as=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function sF(t){return(t.flags&8)!==0}function aF(t){return(t.flags&16)!==0}function cF(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];uF(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function lF(t){return t===3||t===4||t===6}function uF(t){return t.charCodeAt(0)===64}function ka(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Qb(t,n,i,null,e[++r]):Qb(t,n,i,null,null))}}return t}function Qb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function kS(t){return t!==xa}function Jh(t){return t&32767}function dF(t){return t>>16}function Zh(t,e){let n=dF(t),r=e;for(;n>0;)r=r[Zo],n--;return r}var Ey=!0;function Xh(t){let e=Ey;return Ey=t,e}var hF=256,OS=hF-1,FS=5,fF=0,kr={};function pF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jo)&&(r=n[Jo]),r==null&&(r=n[Jo]=fF++);let i=r&OS,o=1<<i;e.data[t+(i>>FS)]|=o}function ef(t,e){let n=LS(t,e);if(n!==-1)return n;let r=e[he];r.firstCreatePass&&(t.injectorIndex=e.length,dy(r.data,t),dy(e,null),dy(r.blueprint,null));let i=a_(t,e),o=t.injectorIndex;if(kS(i)){let s=Jh(i),a=Zh(i,e),c=a[he].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function dy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function a_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=$S(i),r===null)return xa;if(n++,i=i[Zo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return xa}function Iy(t,e,n){pF(t,e,n)}function VS(t,e,n){if(n&8||t!==void 0)return t;wh(e,"NodeInjector")}function jS(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Kn],o=ln(void 0);try{return i?i.get(e,r,n&8):Rv(e,r,n&8)}finally{ln(o)}}return VS(r,e,n)}function US(t,e,n,r=0,i){if(t!==null){if(e[Ce]&2048&&!(r&2)){let s=yF(t,e,n,r,kr);if(s!==kr)return s}let o=BS(t,e,n,r,kr);if(o!==kr)return o}return jS(e,n,r,i)}function BS(t,e,n,r,i){let o=mF(n);if(typeof o=="function"){if(!ny(e,t,r))return r&1?VS(i,n,r):jS(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))wh(n);else return s}finally{ry()}}else if(typeof o=="number"){let s=null,a=LS(t,e),c=xa,u=r&1?e[xn][Wn]:null;for((a===-1||r&4)&&(c=a===-1?a_(t,e):e[a+8],c===xa||!Jb(r,!1)?a=-1:(s=e[he],a=Jh(c),e=Zh(c,e)));a!==-1;){let h=e[he];if(Yb(o,a,h.data)){let p=gF(a,e,n,s,r,u);if(p!==kr)return p}c=e[a+8],c!==xa&&Jb(r,e[he].data[a+8]===u)&&Yb(o,a,e)?(s=h,a=Jh(c),e=Zh(c,e)):a=-1}}return i}function gF(t,e,n,r,i,o){let s=e[he],a=s.data[t+8],c=r==null?io(a)&&Ey:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=Wh(a,s,n,c,u);return h!==null?Fl(e,s,h,a,i):kr}function Wh(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:u;for(let m=p;m<g;m++){let I=s[m];if(m<c&&n===I||m>=c&&I.type===n)return m}if(i){let m=s[c];if(m&&xr(m)&&m.type===n)return c}return null}function Fl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof as){let a=o;if(a.resolving){let m=ab(s[n]);throw Av(m)}let c=Xh(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],h,p=a.injectImpl?ln(a.injectImpl):null,g=ny(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&rF(n,s[n],e)}finally{p!==null&&ln(p),Xh(c),a.resolving=!1,ry()}}return o}function mF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Jo)?t[Jo]:void 0;return typeof e=="number"?e>=0?e&OS:vF:e}function Yb(t,e,n){let r=1<<t;return!!(n[e+(t>>FS)]&r)}function Jb(t,e){return!(t&2)&&!(t&1&&e)}var ss=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return US(this._tNode,this._lView,e,Ko(r),n)}};function vF(){return new ss(wt(),ve())}function bt(t){return Va(()=>{let e=t.prototype.constructor,n=e[_l]||wy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[_l]||wy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function wy(t){return Ev(t)?()=>{let e=wy(Wt(t));return e&&e()}:Xi(t)}function yF(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Ce]&2048&&!Sa(s);){let a=BS(o,s,n,r|2,kr);if(a!==kr)return a;let c=o.parent;if(!c){let u=s[jv];if(u){let h=u.get(n,kr,r);if(h!==kr)return h}c=$S(s),s=s[Zo]}o=c}return i}function $S(t){let e=t[he],n=e.type;return n===2?e.declTNode:n===1?t[Wn]:null}function _F(){return Ua(wt(),ve())}function Ua(t,e){return new Ut(fr(t,e))}var Ut=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=_F}return t})();function CF(t){return t instanceof Ut?t.nativeElement:t}function EF(){return this._results[Symbol.iterator]()}var tf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=fb(e);(this._changesDetected=!hb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=EF};function HS(t){return(t.flags&128)===128}var c_=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(c_||{}),zS=new Map,IF=0;function wF(){return IF++}function TF(t){zS.set(t[bl],t)}function Ty(t){zS.delete(t[bl])}var Zb="__ngContext__";function Oa(t,e){Mr(e)?(t[Zb]=e[bl],TF(e)):t[Zb]=e}function GS(t){return WS(t[ba])}function qS(t){return WS(t[qn])}function WS(t){for(;t!==null&&!hr(t);)t=t[qn];return t}var by;function l_(t){by=t}function KS(){if(by!==void 0)return by;if(typeof document<"u")return document;throw new J(210,!1)}var _f=new se("",{providedIn:"root",factory:()=>bF}),bF="ng",Cf=new se(""),hs=new se("",{providedIn:"platform",factory:()=>"unknown"});var Ef=new se("",{providedIn:"root",factory:()=>KS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var SF="h",DF="b";var QS="r";var YS="di";var JS=!1,ZS=new se("",{providedIn:"root",factory:()=>JS});var AF=(t,e,n,r)=>{};function RF(t,e,n,r){AF(t,e,n,r)}function u_(t){return(t.flags&32)===32}var MF=()=>null;function XS(t,e,n=!1){return MF(t,e,n)}function eD(t,e){let n=t.contentQueries;if(n!==null){let r=_e(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Oh(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Sy(t,e,n){Oh(0);let r=_e(null);try{e(t,n)}finally{_e(r)}}function tD(t,e,n){if(Bv(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{_e(r)}}}var vi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(vi||{}),Bh;function xF(){if(Bh===void 0&&(Bh=null,Sr.trustedTypes))try{Bh=Sr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bh}function If(t){return xF()?.createHTML(t)||t}var yi=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ch})`}},Dy=class extends yi{getTypeName(){return"HTML"}},Ay=class extends yi{getTypeName(){return"Style"}},Ry=class extends yi{getTypeName(){return"Script"}},My=class extends yi{getTypeName(){return"URL"}},xy=class extends yi{getTypeName(){return"ResourceURL"}};function Lr(t){return t instanceof yi?t.changingThisBreaksApplicationSecurity:t}function lo(t,e){let n=nD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ch})`)}return n===e}function nD(t){return t instanceof yi&&t.getTypeName()||null}function d_(t){return new Dy(t)}function h_(t){return new Ay(t)}function f_(t){return new Ry(t)}function p_(t){return new My(t)}function g_(t){return new xy(t)}function PF(t){let e=new Ny(t);return NF()?new Py(e):e}var Py=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(If(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},Ny=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=If(e),n}};function NF(){try{return!!new window.DOMParser().parseFromString(If(""),"text/html")}catch{return!1}}var kF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hl(t){return t=String(t),t.match(kF)?t:"unsafe:"+t}function _i(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function zl(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var rD=_i("area,br,col,hr,img,wbr"),iD=_i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oD=_i("rp,rt"),OF=zl(oD,iD),FF=zl(iD,_i("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),LF=zl(oD,_i("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xb=zl(rD,FF,LF,OF),sD=_i("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),VF=_i("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jF=_i("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),UF=zl(sD,VF,jF),BF=_i("script,style,template"),ky=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=zF(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=HF(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=eS(e).toLowerCase();if(!Xb.hasOwnProperty(n))return this.sanitizedSomething=!0,!BF.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!UF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;sD[a]&&(c=Hl(c)),this.buf.push(" ",s,'="',tS(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=eS(e).toLowerCase();Xb.hasOwnProperty(n)&&!rD.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(tS(e))}};function $F(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function HF(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw aD(e);return e}function zF(t){let e=t.firstChild;if(e&&$F(t,e))throw aD(e);return e}function eS(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function aD(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var GF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qF=/([^\#-~ |!])/g;function tS(t){return t.replace(/&/g,"&amp;").replace(GF,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(qF,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var $h;function m_(t,e){let n=null;try{$h=$h||PF(t);let r=e?String(e):"";n=$h.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=$h.getInertBodyElement(r)}while(r!==o);let a=new ky().sanitizeChildren(nS(n)||n);return If(a)}finally{if(n){let r=nS(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function nS(t){return"content"in t&&WF(t)?t.content:null}function WF(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Vr=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Vr||{});function _t(t){let e=KF();return e?e.sanitize(Vr.URL,t)||"":lo(t,"URL")?Lr(t):Hl(Mn(t))}function KF(){let t=ve();return t&&t[Ar].sanitizer}var QF=/^>|^->|<!--|-->|--!>|<!-$/g,YF=/(<|>)/g,JF="\u200B$1\u200B";function ZF(t){return t.replace(QF,e=>e.replace(YF,JF))}function v_(t){return t.ownerDocument.defaultView}function cD(t){return t instanceof Function?t():t}function XF(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var lD="ng-template";function eL(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&XF(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(y_(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function y_(t){return t.type===4&&t.value!==lD}function tL(t,e,n){let r=t.type===4&&!n?lD:t.value;return e===r}function nL(t,e,n){let r=4,i=t.attrs,o=i!==null?oL(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!pr(r)&&!pr(c))return!1;if(s&&pr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!tL(t,c,n)||c===""&&e.length===1){if(pr(r))return!1;s=!0}}else if(r&8){if(i===null||!eL(t,i,c,n)){if(pr(r))return!1;s=!0}}else{let u=e[++a],h=rL(c,i,y_(t),n);if(h===-1){if(pr(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(pr(r))return!1;s=!0}}}}return pr(r)||s}function pr(t){return(t&1)===0}function rL(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return sL(e,t)}function iL(t,e,n=!1){for(let r=0;r<e.length;r++)if(nL(t,e[r],n))return!0;return!1}function oL(t){for(let e=0;e<t.length;e++){let n=t[e];if(lF(n))return e}return t.length}function sL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rS(t,e){return t?":not("+e.trim()+")":e}function aL(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pr(s)&&(e+=rS(o,i),i=""),r=s,o=o||!pr(r);n++}return i!==""&&(e+=rS(o,i)),e}function cL(t){return t.map(aL).join(",")}function lL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!pr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var kt={};function uL(t,e){return t.createText(e)}function dL(t,e,n){t.setValue(e,n)}function hL(t,e){return t.createComment(ZF(e))}function uD(t,e,n){return t.createElement(e,n)}function nf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function dD(t,e,n){t.appendChild(e,n)}function iS(t,e,n,r,i){r!==null?nf(t,e,n,r,i):dD(t,e,n)}function hD(t,e,n,r){t.removeChild(null,e,n,r)}function fL(t,e,n){t.setAttribute(e,"style",n)}function pL(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function fD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&cF(t,e,r),i!==null&&pL(t,e,i),o!==null&&fL(t,e,o)}function __(t,e,n,r,i,o,s,a,c,u,h){let p=dt+r,g=p+i,m=gL(p,g),I=typeof u=="function"?u():u;return m[he]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:h}}function gL(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:kt);return n}function mL(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=__(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function C_(t,e,n,r,i,o,s,a,c,u,h){let p=e.blueprint.slice();return p[dr]=i,p[Ce]=r|4|128|8|64|1024,(u!==null||t&&t[Ce]&2048)&&(p[Ce]|=2048),Hv(p),p[Nt]=p[Zo]=t,p[yt]=n,p[Ar]=s||t&&t[Ar],p[tt]=a||t&&t[tt],p[Kn]=c||t&&t[Kn]||null,p[Wn]=o,p[bl]=wF(),p[wa]=h,p[jv]=u,p[xn]=e.type==2?t[xn]:p,p}function vL(t,e,n){let r=fr(e,t),i=mL(n),o=t[Ar].rendererFactory,s=E_(t,C_(t,i,null,pD(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function pD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function gD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function E_(t,e){return t[ba]?t[Vv][qn]=e:t[ba]=e,t[Vv]=e,e}function b(t=1){mD(ht(),ve(),Nn()+t,!1)}function mD(t,e,n,r){if(!r)if((e[Ce]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Gh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&qh(e,o,0,n)}so(n)}var wf=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(wf||{});function Oy(t,e,n,r){let i=_e(null);try{let[o,s,a]=t.inputs[n],c=null;(s&wf.SignalBased)!==0&&(c=e[o][tn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):RS(e,c,o,r)}finally{_e(i)}}var Or=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Or||{}),yL;function I_(t,e){return yL(t,e)}function rf(t){if(!t)return 0;let e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function Pa(t,e){return t.getPropertyValue(e).split(",").map(r=>r.trim())}function _L(t){let e=Pa(t,"transition-property"),n=Pa(t,"transition-duration"),r=Pa(t,"transition-delay"),i={propertyName:"",duration:0,animationName:void 0};for(let o=0;o<e.length;o++){let s=rf(r[o])+rf(n[o]);s>i.duration&&(i.propertyName=e[o],i.duration=s)}return i}function CL(t){let e=Pa(t,"animation-name"),n=Pa(t,"animation-delay"),r=Pa(t,"animation-duration"),i={animationName:"",propertyName:void 0,duration:0};for(let o=0;o<e.length;o++){let s=rf(n[o])+rf(r[o]);s>i.duration&&(i.animationName=e[o],i.duration=s)}return i}function vD(t,e){return t!==void 0&&t.duration>e.duration}function yD(t){return(t.animationName!=null||t.propertyName!=null)&&t.duration>0}function EL(t,e){let n=getComputedStyle(t),r=CL(n),i=_L(n),o=r.duration>i.duration?r:i;vD(e.get(t),o)||yD(o)&&e.set(t,o)}function IL(t,e,n){if(!n)return;let r=t.getAnimations();return r.length===0?EL(t,e):wL(t,e,r)}function wL(t,e,n){let r={animationName:void 0,propertyName:void 0,duration:0};for(let i of n){let o=i.effect?.getTiming(),s=typeof o?.duration=="number"?o.duration:0,a=(o?.delay??0)+s,c,u;i.animationName?u=i.animationName:c=i.transitionProperty,a>=r.duration&&(r={animationName:u,propertyName:c,duration:a})}vD(e.get(t),r)||yD(r)&&e.set(t,r)}var ao=new Set,Tf=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Tf||{}),fs=new se(""),oS=new Set;function jr(t){oS.has(t)||(oS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var _D=!1,Fy=class extends Et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Cb()&&(this.destroyRef=F(_n,{optional:!0})??void 0,this.pendingTasks=F(Nr,{optional:!0})??void 0)}emit(e){let n=_e(null);try{super.next(e)}finally{_e(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof gt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ft=Fy;function CD(t){let e,n;function r(){t=os;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function sS(t){return queueMicrotask(()=>t()),()=>{t=os}}var w_="isAngularZone",of=w_+"_ID",TL=0,Le=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ft(!1);onMicrotaskEmpty=new ft(!1);onStable=new ft(!1);onError=new ft(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_D}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,DL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(w_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,bL,os,os);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},bL={};function T_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function SL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){CD(()=>{t.callbackScheduled=!1,Ly(t),t.isCheckStableRunning=!0,T_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Ly(t)}function DL(t){let e=()=>{SL(t)},n=TL++;t._inner=t._inner.fork({name:"angular",properties:{[w_]:!0,[of]:n,[of+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(AL(c))return r.invokeTask(o,s,a,c);try{return aS(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),cS(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return aS(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!RL(c)&&e(),cS(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ly(t),T_(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ly(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function aS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cS(t){t._nesting--,T_(t)}var sf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ft;onMicrotaskEmpty=new ft;onStable=new ft;onError=new ft;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function AL(t){return ED(t,"__ignore_ng_zone__")}function RL(t){return ED(t,"__scheduler_tick__")}function ED(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var b_=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),ID=[0,1,2,3],wD=(()=>{class t{ngZone=F(Le);scheduler=F(lr);errorHandler=F(Gn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(fs,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Qe(16),this.executing=!0;for(let r of ID)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Qe(17)}register(n){let{view:r}=n;r!==void 0?((r[es]??=[]).push(n),oo(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Tf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),af=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[es];e&&(this.view[es]=e.filter(n=>n!==this))}};function Gl(t,e){let n=e?.injector??F(et);return jr("NgAfterNextRender"),xL(t,n,e,!0)}function ML(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function xL(t,e,n,r){let i=e.get(b_);i.impl??=e.get(wD);let o=e.get(fs,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(_n):null,a=e.get(Ra,null,{optional:!0}),c=new af(i.impl,ML(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var bf=new se("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function TD(t,e,n){let r=t.get(bf);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function PL(t,e){let n=t.get(bf);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function NL(t){let e=t.get(bf);e.isScheduled||(Gl(()=>{e.isScheduled=!1;for(let n of e.queue)n();e.queue.clear()},{injector:t}),e.isScheduled=!0)}function kL(t){let e=t.get(bf);e.scheduler=NL,e.scheduler(t)}function OL(t,e){for(let[n,r]of e)TD(t,r.animateFns)}function lS(t,e,n,r){let i=t?.[no]?.enter;e!==null&&i&&i.has(n.index)&&OL(r,i)}function Ma(t,e,n,r,i,o,s,a){if(i!=null){let c,u=!1;hr(i)?c=i:Mr(i)&&(u=!0,i=i[dr]);let h=Qn(i);t===0&&r!==null?(lS(a,r,o,n),s==null?dD(e,r,h):nf(e,r,h,s||null,!0)):t===1&&r!==null?(lS(a,r,o,n),nf(e,r,h,s||null,!0)):t===2?uS(a,o,n,p=>{hD(e,h,u,p)}):t===3&&uS(a,o,n,()=>{e.destroyNode(h)}),c!=null&&KL(e,t,n,c,o,r,s)}}function FL(t,e){bD(t,e),e[dr]=null,e[Wn]=null}function LL(t,e,n,r,i,o){r[dr]=i,r[Wn]=e,Df(t,r,n,1,i,o)}function bD(t,e){e[Ar].changeDetectionScheduler?.notify(9),Df(t,e,e[tt],2,null,null)}function VL(t){let e=t[ba];if(!e)return hy(t[he],t);for(;e;){let n=null;if(Mr(e))n=e[ba];else{let r=e[mt];r&&(n=r)}if(!n){for(;e&&!e[qn]&&e!==t;)Mr(e)&&hy(e[he],e),e=e[Nt];e===null&&(e=t),Mr(e)&&hy(e[he],e),n=e&&e[qn]}e=n}}function S_(t,e){let n=t[ts],r=n.indexOf(e);n.splice(r,1)}function Sf(t,e){if(ns(e))return;let n=e[tt];n.destroyNode&&Df(t,e,n,3,null,null),VL(e)}function hy(t,e){if(ns(e))return;let n=_e(null);try{e[Ce]&=-129,e[Ce]|=256,e[Pn]&&Bo(e[Pn]),BL(t,e),UL(t,e),e[he].type===1&&e[tt].destroy();let r=e[pi];if(r!==null&&hr(e[Nt])){r!==e[Nt]&&S_(r,e);let i=e[Rr];i!==null&&i.detachView(t)}Ty(e)}finally{_e(n)}}function uS(t,e,n,r){let i=t?.[no];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ao.add(t),TD(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:h}=u();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),jL(t,r)}else t&&ao.delete(t),r(!1)},i)}function jL(t,e){let n=t[no]?.running;if(n){n.then(()=>{t[no].running=void 0,ao.delete(t),e(!0)});return}e(!1)}function UL(t,e){let n=t.cleanup,r=e[Ta];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ta]=null);let i=e[ci];if(i!==null){e[ci]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[gi];if(o!==null){e[gi]=null;for(let s of o)s.destroy()}}function BL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof as)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Qe(4,a,c);try{c.call(a)}finally{Qe(5,a,c)}}else{Qe(4,i,o);try{o.call(i)}finally{Qe(5,i,o)}}}}}function $L(t,e,n){return HL(t,e.parent,n)}function HL(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[dr];if(io(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===vi.None||i===vi.Emulated)return null}return fr(r,n)}function zL(t,e,n){return qL(t,e,n)}function GL(t,e,n){return t.type&40?fr(t,n):null}var qL=GL,dS;function D_(t,e,n,r){let i=$L(t,r,e),o=e[tt],s=r.parent||e[Wn],a=zL(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)iS(o,i,n[c],a,!1);else iS(o,i,n,a,!1);dS!==void 0&&dS(o,r,e,n,i)}function Nl(t,e){if(e!==null){let n=e.type;if(n&3)return fr(e,t);if(n&4)return cf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Nl(t,r);{let i=t[e.index];return hr(i)?cf(-1,i):Qn(i)}}else{if(n&128)return Nl(t,e.next);if(n&32)return I_(e,t)()||Qn(t[e.index]);{let r=SD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=eo(t[xn]);return Nl(i,r)}else return Nl(t,e.next)}}}return null}function SD(t,e){if(e!==null){let r=t[xn][Wn],i=e.projection;return r.projection[i]}return null}function cf(t,e){let n=mt+t+1;if(n<e.length){let r=e[n],i=r[he].firstChild;if(i!==null)return Nl(r,i)}return e[ro]}function A_(t,e,n,r,i,o,s){for(;n!=null;){let a=r[Kn];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Oa(Qn(c),r),n.flags|=2),!u_(n))if(u&8)A_(t,e,n.child,r,i,o,!1),Ma(e,t,a,i,c,n,o,r);else if(u&32){let h=I_(n,r),p;for(;p=h();)Ma(e,t,a,i,p,n,o,r);Ma(e,t,a,i,c,n,o,r)}else u&16?WL(t,e,r,n,i,o):Ma(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Df(t,e,n,r,i,o){A_(n,r,t.firstChild,e,i,o,!1)}function WL(t,e,n,r,i,o){let s=n[xn],c=s[Wn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];Ma(e,t,n[Kn],i,h,r,o,n)}else{let u=c,h=s[Nt];HS(r)&&(u.flags|=128),A_(t,e,u,h,i,o,!0)}}function KL(t,e,n,r,i,o,s){let a=r[ro],c=Qn(r);a!==c&&Ma(e,t,n,o,a,i,s);for(let u=mt;u<r.length;u++){let h=r[u];Df(h[he],h,t,e,o,a)}}function QL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Or.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Or.Important),t.setStyle(n,r,i,o))}}function DD(t,e,n,r,i){let o=Nn(),s=r&2;try{so(-1),s&&e.length>dt&&mD(t,e,dt,!1),Qe(s?2:0,i,n),n(r,i)}finally{so(o),Qe(s?3:1,i,n)}}function AD(t,e,n){tV(t,e,n),(n.flags&64)===64&&nV(t,e,n)}function Af(t,e,n=fr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function YL(t,e,n,r){let o=r.get(ZS,JS)||n===vi.ShadowDom,s=t.selectRootElement(e,o);return JL(s),s}function JL(t){ZL(t)}var ZL=()=>null;function XL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function RD(t,e,n,r,i,o){let s=e[he];if(M_(t,s,e,n,r)){io(t)&&eV(e,t.index);return}t.type&3&&(n=XL(n)),MD(t,e,n,r,i,o)}function MD(t,e,n,r,i,o){if(t.type&3){let s=fr(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function eV(t,e){let n=Yn(e,t);n[Ce]&16||(n[Ce]|=64)}function tV(t,e,n){let r=n.directiveStart,i=n.directiveEnd;io(n)&&vL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ef(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=Fl(e,t,s,n);if(Oa(c,e),o!==null&&oV(e,s-r,c,a,n,o),xr(a)){let u=Yn(n.index,e);u[yt]=Fl(e,t,s,n)}}}function nV(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vb();try{so(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];kh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&rV(c,u)}}finally{so(-1),kh(s)}}function rV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function iV(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];iL(e,o.selectors,!1)&&(r??=[],xr(o)?r.unshift(o):r.push(o))}return r}function oV(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Oy(r,n,c,u)}}function R_(t,e,n,r,i){let o=dt+n,s=e[he],a=i(s,e,t,r,n);e[o]=a,rs(t,!0);let c=t.type===2;return c?(fD(e[tt],a,t),(Rb()===0||Ah(t))&&Oa(a,e),Mb()):Oa(a,e),jh()&&(!c||!u_(t))&&D_(s,e,a,t),t}function Rf(t){let e=t;return Zv()?kb():(e=e.parent,rs(e,!1)),e}function sV(t,e){let n=t[Kn];if(!n)return;let r;try{r=n.get(kn,null)}catch{r=null}r?.(e)}function M_(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],h=s[c+1],p=e.data[u];Oy(p,n[u],h,i),a=!0}if(o)for(let c of o){let u=n[c],h=e.data[c];Oy(h,u,r,i),a=!0}return a}function aV(t,e){let n=Yn(e,t),r=n[he];cV(r,n);let i=n[dr];i!==null&&n[wa]===null&&(n[wa]=XS(i,n[Kn])),Qe(18),x_(r,n,n[yt]),Qe(19,n[yt])}function cV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function x_(t,e,n){Fh(e);try{let r=t.viewQuery;r!==null&&Sy(1,r,n);let i=t.template;i!==null&&DD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Rr]?.finishViewCreation(t),t.staticContentQueries&&eD(t,e),t.staticViewQueries&&Sy(2,t.viewQuery,n);let o=t.components;o!==null&&lV(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ce]&=-5,Lh()}}function lV(t,e){for(let n=0;n<e.length;n++)aV(t,e[n])}function Mf(t,e,n,r){let i=_e(null);try{let o=e.tView,a=t[Ce]&4096?4096:16,c=C_(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[pi]=u;let h=t[Rr];return h!==null&&(c[Rr]=h.createEmbeddedView(o)),x_(o,c,n),c}finally{_e(i)}}function Ll(t,e){return!e||e.firstChild===null||HS(t)}function Vl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Qn(o)),hr(o)&&xD(o,r);let s=n.type;if(s&8)Vl(t,e,n.child,r);else if(s&32){let a=I_(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=SD(e,n);if(Array.isArray(a))r.push(...a);else{let c=eo(e[xn]);Vl(c[he],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function xD(t,e){for(let n=mt;n<t.length;n++){let r=t[n],i=r[he].firstChild;i!==null&&Vl(r[he],r,i,e)}t[ro]!==t[dr]&&e.push(t[ro])}function PD(t){if(t[es]!==null){for(let e of t[es])e.impl.addSequence(e);t[es].length=0}}var ND=[];function uV(t){return t[Pn]??dV(t)}function dV(t){let e=ND.pop()??Object.create(fV);return e.lView=t,e}function hV(t){t.lView[Pn]!==t&&(t.lView=null,ND.push(t))}var fV=Ee(H({},jo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{oo(t.lView)},consumerOnSignalRead(){this.lView[Pn]=this}});function pV(t){let e=t[Pn]??Object.create(gV);return e.lView=t,e}var gV=Ee(H({},jo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=eo(t.lView);for(;e&&!kD(e[he]);)e=eo(e);e&&zv(e)},consumerOnSignalRead(){this.lView[Pn]=this}});function kD(t){return t.type!==2}function OD(t){if(t[gi]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[gi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Ce]&8192)}}var mV=100;function FD(t,e=0){let r=t[Ar].rendererFactory,i=!1;i||r.begin?.();try{vV(t,e)}finally{i||r.end?.()}}function vV(t,e){let n=ey();try{Da(!0),Vy(t,e);let r=0;for(;Rl(t);){if(r===mV)throw new J(103,!1);r++,Vy(t,1)}}finally{Da(n)}}function yV(t,e,n,r){if(ns(e))return;let i=e[Ce],o=!1,s=!1;Fh(e);let a=!0,c=null,u=null;o||(kD(t)?(u=uV(e),c=Uo(u)):jd()===null?(a=!1,u=pV(e),c=Uo(u)):e[Pn]&&(Bo(e[Pn]),e[Pn]=null));try{Hv(e),Ob(t.bindingStartIndex),n!==null&&DD(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let m=t.preOrderCheckHooks;m!==null&&Gh(e,m,null)}else{let m=t.preOrderHooks;m!==null&&qh(e,m,0,null),uy(e,0)}if(s||_V(e),OD(e),LD(e,0),t.contentQueries!==null&&eD(t,e),!o)if(h){let m=t.contentCheckHooks;m!==null&&Gh(e,m)}else{let m=t.contentHooks;m!==null&&qh(e,m,1),uy(e,1)}EV(t,e);let p=t.components;p!==null&&jD(e,p,0);let g=t.viewQuery;if(g!==null&&Sy(2,g,r),!o)if(h){let m=t.viewCheckHooks;m!==null&&Gh(e,m)}else{let m=t.viewHooks;m!==null&&qh(e,m,2),uy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dh]){for(let m of e[Dh])m();e[Dh]=null}o||(PD(e),e[Ce]&=-73)}catch(h){throw o||oo(e),h}finally{u!==null&&(oa(u,c),a&&hV(u)),Lh()}}function LD(t,e){for(let n=GS(t);n!==null;n=qS(n))for(let r=mt;r<n.length;r++){let i=n[r];VD(i,e)}}function _V(t){for(let e=GS(t);e!==null;e=qS(e)){if(!(e[Ce]&2))continue;let n=e[ts];for(let r=0;r<n.length;r++){let i=n[r];zv(i)}}}function CV(t,e,n){Qe(18);let r=Yn(e,t);VD(r,n),Qe(19,r[yt])}function VD(t,e){Mh(t)&&Vy(t,e)}function Vy(t,e){let r=t[he],i=t[Ce],o=t[Pn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&sa(o)),s||=!1,o&&(o.dirty=!1),t[Ce]&=-9217,s)yV(r,t,r.template,t[yt]);else if(i&8192){let a=_e(null);try{OD(t),LD(t,1);let c=r.components;c!==null&&jD(t,c,1),PD(t)}finally{_e(a)}}}function jD(t,e,n){for(let r=0;r<e.length;r++)CV(t,e[r],n)}function EV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)so(~i);else{let o=i,s=n[++r],a=n[++r];Lb(s,o);let c=e[o];Qe(24,c),a(2,c),Qe(25,c)}}}finally{so(-1)}}function P_(t,e){let n=ey()?64:1088;for(t[Ar].changeDetectionScheduler?.notify(e);t;){t[Ce]|=n;let r=eo(t);if(Sa(t)&&!r)return t;t=r}return null}function UD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function BD(t,e){let n=mt+e;if(n<t.length)return t[n]}function xf(t,e,n,r=!0){let i=e[he];if(IV(i,e,t,n),r){let s=cf(n,t),a=e[tt],c=a.parentNode(t[ro]);c!==null&&LL(i,t[Wn],a,e,c,s)}let o=e[wa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $D(t,e){let n=jl(t,e);return n!==void 0&&Sf(n[he],n),n}function jl(t,e){if(t.length<=mt)return;let n=mt+e,r=t[n];if(r){let i=r[pi];i!==null&&i!==t&&S_(i,r),e>0&&(t[n-1][qn]=r[qn]);let o=wl(t,mt+e);FL(r[he],r);let s=o[Rr];s!==null&&s.detachView(o[he]),r[Nt]=null,r[qn]=null,r[Ce]&=-129}return r}function IV(t,e,n,r){let i=mt+r,o=n.length;r>0&&(n[i-1][qn]=e),r<o-mt?(e[qn]=n[i],Mv(n,mt+r,e)):(n.push(e),e[qn]=null),e[Nt]=n;let s=e[pi];s!==null&&n!==s&&HD(s,e);let a=e[Rr];a!==null&&a.insertView(t),xh(e),e[Ce]|=128}function HD(t,e){let n=t[ts],r=e[Nt];if(Mr(r))t[Ce]|=2;else{let i=r[Nt][xn];e[xn]!==i&&(t[Ce]|=2)}n===null?t[ts]=[e]:n.push(e)}var co=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[he];return Vl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[yt]}set context(e){this._lView[yt]=e}get destroyed(){return ns(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(hr(e)){let n=e[Sl],r=n?n.indexOf(this):-1;r>-1&&(jl(e,r),wl(n,r))}this._attachedToViewContainer=!1}Sf(this._lView[he],this._lView)}onDestroy(e){Gv(this._lView,e)}markForCheck(){P_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){xh(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,FD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Sa(this._lView),n=this._lView[pi];n!==null&&!e&&S_(n,this._lView),bD(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let n=Sa(this._lView),r=this._lView[pi];r!==null&&!n&&HD(r,this._lView),xh(this._lView)}};var Fa=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=wV;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Mf(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new co(o)}}return t})();function wV(){return N_(wt(),ve())}function N_(t,e){return t.type&4?new Fa(e,t,Ua(t,e)):null}function ql(t,e,n,r,i){let o=t.data[e];if(o===null)o=TV(t,e,n,r,i),Fb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Nb();o.injectorIndex=s===null?-1:s.injectorIndex}return rs(o,!0),o}function TV(t,e,n,r,i){let o=Jv(),s=Zv(),a=s?o:o&&o.parent,c=t.data[e]=SV(t,a,n,e,r,i);return bV(t,c,o,s),c}function bV(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function SV(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Pb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HZ=new RegExp(`^(\\d+)*(${DF}|${SF})*(.*)`);function DV(t){let e=t[Uv]??[],r=t[Nt][tt],i=[];for(let o of e)o.data[YS]!==void 0?i.push(o):AV(o,r);t[Uv]=i}function AV(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[QS];for(;n<i;){let o=r.nextSibling;hD(e,r,!1),r=o,n++}}}var RV=()=>null,MV=()=>null;function jy(t,e){return RV(t,e)}function zD(t,e,n){return MV(t,e,n)}var GD=class{},Pf=class{},Uy=class{resolveComponentFactory(e){throw new J(917,!1)}},Wl=class{static NULL=new Uy},cs=class{},uo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>xV()}return t})();function xV(){let t=ve(),e=wt(),n=Yn(e.index,t);return(Mr(n)?n:t)[tt]}var qD=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>null})}return t})();var Kh={},By=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Kh,r);return i!==Kh||n===Kh?i:this.parentInjector.get(e,n,r)}};function lf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Eh(i,a);else if(o==2){let c=a,u=e[++s];r=Eh(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function k(t,e=0){let n=ve();if(n===null)return z(t,e);let r=wt();return US(r,n,Wt(t),e)}function PV(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,u]=h.resolveHostDirectives(s);break}OV(t,e,n,a,o,c,u)}o!==null&&r!==null&&NV(n,r,o)}function NV(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}function kV(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function OV(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let m=r[g];!c&&xr(m)&&(c=!0,kV(t,n,g)),Iy(ef(n,e),t,m.type)}BV(n,t.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let u=!1,h=!1,p=gD(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(n.mergedAttrs=ka(n.mergedAttrs,m.hostAttrs),LV(t,n,e,p,m),UV(p,m,i),s!==null&&s.has(m)){let[O,x]=s.get(m);n.directiveToIndex.set(m.type,[p,O+n.directiveStart,x+n.directiveStart])}else(o===null||!o.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let I=m.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}FV(t,n,o)}function FV(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))hS(0,e,i,r),hS(1,e,i,r),pS(e,r,!1);else{let o=n.get(i);fS(0,e,o,r),fS(1,e,o,r),pS(e,r,!0)}}}function hS(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),WD(e,o)}}function fS(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),WD(e,s)}}function WD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function pS(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||y_(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function LV(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Xi(i.type,!0)),s=new as(o,xr(i),k,null);t.blueprint[r]=s,n[r]=s,VV(t,e,r,gD(t,n,i.hostVars,kt),i)}function VV(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;jV(s)!=a&&s.push(a),s.push(n,r,o)}}function jV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function UV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xr(e)&&(n[""]=t)}}function BV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function KD(t,e,n,r,i,o,s,a){let c=e[he],u=c.consts,h=Pr(u,s),p=ql(c,t,n,r,h);return o&&PV(c,e,p,Pr(u,a),i),p.mergedAttrs=ka(p.mergedAttrs,p.attrs),p.attrs!==null&&lf(p,p.attrs,!1),p.mergedAttrs!==null&&lf(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function k_(t,e){iF(t,e),Bv(e)&&t.queries.elementEnd(e)}function QD(t,e,n,r,i,o){let s=e.consts,a=Pr(s,i),c=ql(e,t,n,r,a);if(c.mergedAttrs=ka(c.mergedAttrs,c.attrs),o!=null){let u=Pr(s,o);c.localNames=[];for(let h=0;h<u.length;h+=2)c.localNames.push(u[h],-1)}return c.attrs!==null&&lf(c,c.attrs,!1),c.mergedAttrs!==null&&lf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function O_(t,e,n){return t[e]=n}function $V(t,e){return t[e]}function Jn(t,e,n){if(n===kt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ul(t,e,n,r){let i=Jn(t,e,n);return Jn(t,e+1,r)||i}function HV(t,e,n,r,i){let o=Ul(t,e,n,r);return Jn(t,e+2,i)||o}function zV(t,e,n,r,i,o){let s=Ul(t,e,n,r);return Ul(t,e+2,i,o)||s}function Qh(t,e,n){return function r(i){let o=io(t)?Yn(t.index,e):e;P_(o,5);let s=e[yt],a=gS(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=gS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function gS(t,e,n,r){let i=_e(null);try{return Qe(6,e,n),n(r)!==!1}catch(o){return sV(t,o),!1}finally{Qe(7,e,n),_e(i)}}function YD(t,e,n,r,i,o,s,a){let c=Ah(t),u=!1,h=null;if(!r&&c&&(h=qV(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=fr(t,n),g=r?r(p):p;RF(n,g,o,a);let m=i.listen(g,o,a);if(!GV(o)){let I=r?O=>r(Qn(O[t.index])):t.index;JD(I,e,n,o,a,m,!1)}}return u}function GV(t){return t.startsWith("animation")||t.startsWith("transition")}function qV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ta],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function JD(t,e,n,r,i,o,s){let a=e.firstCreatePass?Wv(e):null,c=qv(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function mS(t,e,n,r,i,o){let s=e[n],a=e[he],u=a.data[n].outputs[r],p=s[u].subscribe(o);JD(t.index,a,e,i,o,p,!0)}var $y=Symbol("BINDING");var uf=class extends Wl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fi(e);return new ls(n,this.ngModule)}};function WV(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&wf.SignalBased)!==0};return i&&(o.transform=i),o})}function KV(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function QV(t,e,n){let r=e instanceof ot?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new By(n,r):n}function YV(t){let e=t.get(cs,null);if(e===null)throw new J(407,!1);let n=t.get(qD,null),r=t.get(lr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function JV(t,e){let n=ZD(t);return uD(e,n,n==="svg"?Ib:n==="math"?wb:null)}function ZD(t){return(t.selectors[0][0]||"div").toLowerCase()}var ls=class extends Pf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=WV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=KV(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=cL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Qe(22);let a=_e(null);try{let c=this.componentDef,u=ZV(r,c,s,o),h=QV(c,i||this.ngModule,e),p=YV(h),g=p.rendererFactory.createRenderer(null,c),m=r?YL(g,r,c.encapsulation,h):JV(c,g),I=s?.some(vS)||o?.some(j=>typeof j!="function"&&j.bindings.some(vS)),O=C_(null,u,null,512|pD(c),null,null,p,g,h,null,XS(m,h,!0));O[dt]=m,Fh(O);let x=null;try{let j=KD(dt,O,2,"#host",()=>u.directiveRegistry,!0,0);fD(g,m,j),Oa(m,O),AD(u,O,j),tD(u,j,O),k_(u,j),n!==void 0&&e2(j,this.ngContentSelectors,n),x=Yn(j.index,O),O[yt]=x[yt],x_(u,O,null)}catch(j){throw x!==null&&Ty(x),Ty(O),j}finally{Qe(23),Lh()}return new df(this.componentType,O,!!I)}finally{_e(a)}}};function ZV(t,e,n,r){let i=t?["ng-version","20.3.12"]:lL(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[$y].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[$y].requiredVars;let m=h+1;g.create&&(g.targetIdx=m,(o??=[]).push(g)),g.update&&(g.targetIdx=m,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=kv(p);c.push(g)}return __(0,null,XV(o,s),1,a,c,null,null,null,[i],null)}function XV(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function vS(t){let e=t[$y].kind;return e==="input"||e==="twoWay"}var df=class extends GD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Dl(n[he],dt),this.location=Ua(this._tNode,n),this.instance=Yn(this._tNode.index,n)[yt],this.hostView=this.changeDetectorRef=new co(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=M_(r,i[he],i,e,n);this.previousInputValues.set(e,n);let s=Yn(r.index,i);P_(s,1)}get injector(){return new ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function e2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var mr=(()=>{class t{static __NG_ELEMENT_ID__=t2}return t})();function t2(){let t=wt();return eA(t,ve())}var n2=mr,XD=class extends n2{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ua(this._hostTNode,this._hostLView)}get injector(){return new ss(this._hostTNode,this._hostLView)}get parentInjector(){let e=a_(this._hostTNode,this._hostLView);if(kS(e)){let n=Zh(e,this._hostLView),r=Jh(e),i=n[he].data[r+8];return new ss(i,n)}else return new ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=yS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-mt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ll(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!XO(e),u;if(c)u=n;else{let x=n||{};u=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,a=x.bindings}let h=c?e:new ls(fi(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(c?p:this.parentInjector).get(ot,null);j&&(o=j)}let g=fi(h.componentType??{}),m=jy(this._lContainer,g?.id??null),I=m?.firstChild??null,O=h.create(p,i,I,o,s,a);return this.insertImpl(O.hostView,u,Ll(this._hostTNode,m)),O}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Nt],u=new XD(c,c[Wn],c[Nt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return xf(s,i,o,r),e.attachToViewContainerRef(),Mv(fy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=yS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=jl(this._lContainer,n);r&&(wl(fy(this._lContainer),n),Sf(r[he],r))}detach(e){let n=this._adjustIndex(e,-1),r=jl(this._lContainer,n);return r&&wl(fy(this._lContainer),n)!=null?new co(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function yS(t){return t[Sl]}function fy(t){return t[Sl]||(t[Sl]=[])}function eA(t,e){let n,r=e[t.index];return hr(r)?n=r:(n=UD(r,e,null,t),e[t.index]=n,E_(e,n)),i2(n,e,t,r),new XD(n,t,e)}function r2(t,e){let n=t[tt],r=n.createComment(""),i=fr(e,t),o=n.parentNode(i);return nf(n,o,r,n.nextSibling(i),!1),r}var i2=a2,o2=()=>!1;function s2(t,e,n){return o2(t,e,n)}function a2(t,e,n,r){if(t[ro])return;let i;n.type&8?i=Qn(r):i=r2(e,n),t[ro]=i}var Hy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},zy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)F_(e,n).matches!==null&&this.queries[n].setDirty()}},Gy=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=g2(e):this.predicate=e}},qy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Wy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,c2(n,o)),this.matchTNodeWithReadOption(e,n,Wh(n,e,o,!1,!1))}else r===Fa?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Wh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ut||i===mr||i===Fa&&n.type&4)this.addMatch(n.index,-2);else{let o=Wh(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function c2(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function l2(t,e){return t.type&11?Ua(t,e):t.type&4?N_(t,e):null}function u2(t,e,n,r){return n===-1?l2(e,t):n===-2?d2(t,e,r):Fl(t,t[he],n,e)}function d2(t,e,n){if(n===Ut)return Ua(e,t);if(n===Fa)return N_(e,t);if(n===mr)return eA(e,t)}function tA(t,e,n,r){let i=e[Rr].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let h=o[u];a.push(u2(e,h,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Ky(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=tA(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],h=e[-c];for(let p=mt;p<h.length;p++){let g=h[p];g[pi]===g[Nt]&&Ky(g[he],g,u,r)}if(h[ts]!==null){let p=h[ts];for(let g=0;g<p.length;g++){let m=p[g];Ky(m[he],m,u,r)}}}}}return r}function h2(t,e){return t[Rr].queries[e].queryList}function f2(t,e,n){let r=new tf((n&4)===4);return Ab(t,e,r,r.destroy),(e[Rr]??=new zy).queries.push(new Hy(r))-1}function p2(t,e,n){let r=ht();return r.firstCreatePass&&(m2(r,new Gy(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),f2(r,ve(),e)}function g2(t){return t.split(",").map(e=>e.trim())}function m2(t,e,n){t.queries===null&&(t.queries=new qy),t.queries.track(new Wy(e,n))}function F_(t,e){return t.queries.getByIndex(e)}function v2(t,e){let n=t[he],r=F_(n,e);return r.crossesNgTemplate?Ky(n,t,e,[]):tA(n,t,r,e)}var us=class{},Nf=class{};var hf=class extends us{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new uf(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Nv(e);this._bootstrapComponents=cD(o.bootstrap),this._r3Injector=iy(e,n,[{provide:us,useValue:this},{provide:Wl,useValue:this.componentFactoryResolver},...r],li(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ff=class extends Nf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hf(this.moduleType,e,[])}};var Bl=class extends us{injector;componentFactoryResolver=new uf(this);instance=null;constructor(e){super();let n=new Yo([...e.providers,{provide:us,useValue:this},{provide:Wl,useValue:this.componentFactoryResolver}],e.parent||Ia(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kl(t,e,n=null){return new Bl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var y2=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Ov(!1,n.type),i=r.length>0?Kl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:t,providedIn:"environment",factory:()=>new t(z(ot))})}return t})();function ae(t){return Va(()=>{let e=nA(t),n=Ee(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===c_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(y2).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vi.Emulated,styles:t.styles||un,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&jr("NgStandalone"),rA(n);let r=t.dependencies;return n.directiveDefs=_S(r,_2),n.pipeDefs=_S(r,gb),n.id=I2(n),n})}function _2(t){return fi(t)||kv(t)}function Ci(t){return Va(()=>({type:t.type,bootstrap:t.bootstrap||un,declarations:t.declarations||un,imports:t.imports||un,exports:t.exports||un,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function C2(t,e){if(t==null)return to;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=wf.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function E2(t){if(t==null)return to;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ot(t){return Va(()=>{let e=nA(t);return rA(e),e})}function L_(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function nA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||to,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||un,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:C2(t.inputs,e),outputs:E2(t.outputs),debugInfo:null}}function rA(t){t.features?.forEach(e=>e(t))}function _S(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function I2(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function w2(t){return Object.getPrototypeOf(t.prototype).constructor}function Ve(t){let e=w2(t.type),n=!0,r=[t];for(;e;){let i;if(xr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=py(t.inputs),s.declaredInputs=py(t.declaredInputs),s.outputs=py(t.outputs);let a=i.hostBindings;a&&A2(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&S2(t,c),u&&D2(t,u),T2(t,i),sb(t.outputs,i.outputs),xr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ve&&(n=!1)}}e=Object.getPrototypeOf(e)}b2(r)}function T2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function b2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ka(i.hostAttrs,n=ka(n,i.hostAttrs))}}function py(t){return t===to?{}:t===un?[]:t}function S2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function D2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function A2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function R2(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ka(t.mergedAttrs,t.attrs);let h=t.tView=__(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),rs(t,!1);let c=M2(n,e,t,r);jh()&&D_(n,e,c,t),Oa(c,e);let u=UD(c,e,c,t);e[r+dt]=u,E_(e,u),s2(u,t,e)}function pf(t,e,n,r,i,o,s,a,c,u,h){let p=n+dt,g;if(e.firstCreatePass){if(g=ql(e,p,4,s||null,a||null),u!=null){let m=Pr(e.consts,u);g.localNames=[];for(let I=0;I<m.length;I+=2)g.localNames.push(m[I],-1)}}else g=e.data[p];return R2(g,t,e,n,r,i,o,c),u!=null&&Af(t,g,h),g}var M2=x2;function x2(t,e,n,r){return Ml(!0),e[tt].createComment("")}var kf=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var V_=new se("");function ho(t){return!!t&&typeof t.then=="function"}function j_(t){return!!t&&typeof t.subscribe=="function"}var iA=new se("");var U_=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=F(iA,{optional:!0})??[];injector=F(et);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ut(this.injector,i);if(ho(o))n.push(o);else if(j_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Of=new se("");function oA(){$m(()=>{let t="";throw new J(600,t)})}function sA(t){return t.isBoundToModule}var P2=10;var Zn=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(kn);afterRenderManager=F(b_);zonelessEnabled=F(xl);rootEffectScheduler=F(Pl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(Nr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ie(n=>!n))}constructor(){F(fs,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=F(ot);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=et.NULL){return this._injector.get(Le).run(()=>{Qe(10);let s=n instanceof Pf;if(!this._injector.get(U_).done){let I="";throw new J(405,I)}let c;s?c=n:c=this._injector.get(Wl).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=sA(c)?void 0:this._injector.get(us),h=r||c.selector,p=c.create(i,[],h,u),g=p.location.nativeElement,m=p.injector.get(V_,null);return m?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),kl(this.components,p),m?.unregisterApplication(g)}),this._loadComponent(p),Qe(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Qe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Tf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new J(101,!1);let n=_e(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,_e(n),this.afterTick.next(),Qe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(cs,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<P2;)Qe(14),this.synchronizeOnce(),Qe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Rl(i))continue;let o=r&&!this.zonelessEnabled?0:1;FD(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Rl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;kl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Of,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>kl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new J(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function N2(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}var aA=new se("",{providedIn:"root",factory:()=>!1});var k2=!1,B_=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function O2(t){return t[Kn].get(aA,k2)}function F2(t){let e=Qy.get(t);if(e){for(let n of e.cleanupFns)n();Qy.delete(t)}Ol.delete(t)}var Qy=new WeakMap,Ol=new WeakMap,Na=new WeakMap;function CS(t,e){let n=Na.get(t);if(n&&n.length>0){let r=n.findIndex(i=>i===e);r>-1&&n.splice(r,1)}n?.length===0&&Na.delete(t)}function L2(t,e){let n=Na.get(t)?.shift(),r=e[pi];if(r){let o=cf(t.index,r)?.previousSibling;n&&o&&n===o&&n.dispatchEvent(new CustomEvent("animationend",{detail:{cancel:!0}}))}}function V2(t,e){Na.has(t)?Na.get(t)?.push(e):Na.set(t,[e])}function Ff(t){let e=t[no]??={};return e.leave??=new Map}function j2(t){let e=typeof t=="function"?t():t,n=Array.isArray(e)?e:null;return typeof e=="string"&&(n=e.trim().split(/\s+/).filter(r=>r)),n}function U2(t,e){if(!B_)return;let n=Qy.get(t);if(n&&n.classList.length>0&&B2(t,n.classList))for(let r of n.classList)e.removeClass(t,r);F2(t)}function B2(t,e){for(let n of e)if(t.classList.contains(n))return!0;return!1}function $2(t,e){let n=Ol.get(e);return n===void 0?!0:e===t.target&&(n.animationName!==void 0&&t.animationName===n.animationName||n.propertyName!==void 0&&t.propertyName===n.propertyName)}function H2(t,e,n){let r=t.get(e.index)??{animateFns:[]};r.animateFns.push(n),t.set(e.index,r)}function ES(t,e){if(t)for(let n of t)n();for(let n of e)n()}function IS(t,e){let n=Ff(t).get(e.index);n&&(n.resolvers=void 0)}function Cn(t){if(jr("NgAnimateLeave"),!B_)return Cn;let e=ve();if(O2(e))return Cn;let r=wt();return L2(r,e),H2(Ff(e),r,()=>z2(e,r,t)),kL(e[Kn]),Cn}function z2(t,e,n){let{promise:r,resolve:i}=N2(),o=fr(e,t),s=t[tt],a=t[Kn].get(Le);ao.add(t),(Ff(t).get(e.index).resolvers??=[]).push(i);let c=j2(n);return c&&c.length>0?G2(o,e,t,c,s,a):i(),{promise:r,resolve:i}}function G2(t,e,n,r,i,o){U2(t,i);let s=[],a=Ff(n).get(e.index)?.resolvers,c=u=>{if(u.target===t&&(u instanceof CustomEvent||$2(u,t))){if(u.stopImmediatePropagation(),Ol.delete(t),CS(e,t),Array.isArray(e.projection))for(let h of r)i.removeClass(t,h);ES(a,s),IS(n,e)}};o.runOutsideAngular(()=>{s.push(i.listen(t,"animationend",c)),s.push(i.listen(t,"transitionend",c))}),V2(e,t);for(let u of r)i.addClass(t,u);o.runOutsideAngular(()=>{requestAnimationFrame(()=>{IL(t,Ol,B_),Ol.has(t)||(CS(e,t),ES(a,s),IS(n,e))})})}var Yy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function gy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function q2(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=t.at(o),h=e[o],p=gy(o,u,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),m=e[c],I=gy(s,g,c,m,n);if(I!==0){I<0&&t.updateValue(s,m),s--,c--;continue}let O=n(o,u),x=n(s,g),j=n(o,h);if(Object.is(j,x)){let Z=n(c,m);Object.is(Z,O)?(t.swap(o,s),t.updateValue(s,m),c--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new gf,i??=TS(t,o,s,n),Jy(t,r,o,j))t.updateValue(o,h),o++,s++;else if(i.has(j))r.set(O,t.detach(o)),s--;else{let Z=t.create(o,e[o]);t.attach(o,Z),o++,s++}}for(;o<=c;)wS(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let h=t.at(o),p=u.value,g=gy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,u=c.next();else{r??=new gf,i??=TS(t,o,s,n);let m=n(o,p);if(Jy(t,r,o,m))t.updateValue(o,p),o++,s++,u=c.next();else if(!i.has(m))t.attach(o,t.create(o,p)),o++,s++,u=c.next();else{let I=n(o,h);r.set(I,t.detach(o)),s--}}}for(;!u.done;)wS(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function Jy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function wS(t,e,n,r,i){if(Jy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function TS(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var gf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function G(t,e,n,r,i,o,s,a){jr("NgControlFlow");let c=ve(),u=ht(),h=Pr(u.consts,o);return pf(c,u,t,e,n,r,i,h,256,s,a),$_}function $_(t,e,n,r,i,o,s,a){jr("NgControlFlow");let c=ve(),u=ht(),h=Pr(u.consts,o);return pf(c,u,t,e,n,r,i,h,512,s,a),$_}function q(t,e){jr("NgControlFlow");let n=ve(),r=is(),i=n[r]!==kt?n[r]:-1,o=i!==-1?mf(n,dt+i):void 0,s=0;if(Jn(n,r,t)){let a=_e(null);try{if(o!==void 0&&$D(o,s),t!==-1){let c=dt+t,u=mf(n,c),h=t_(n[he],c),p=zD(u,h,n),g=Mf(n,h,e,{dehydratedView:p});xf(u,g,s,Ll(h,p))}}finally{_e(a)}}else if(o!==void 0){let a=BD(o,s);a!==void 0&&(a[yt]=e)}}var Zy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-mt}};function En(t){return t}function Xn(t,e){return e}var Xy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function ne(t,e,n,r,i,o,s,a,c,u,h,p,g){jr("NgControlFlow");let m=ve(),I=ht(),O=c!==void 0,x=ve(),j=a?s.bind(x[xn][yt]):s,Z=new Xy(O,j);x[dt+t]=Z,pf(m,I,t+1,e,n,r,i,Pr(I.consts,o),256),O&&pf(m,I,t+2,c,u,h,p,Pr(I.consts,g),512)}var e_=class extends Yy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-mt}at(e){return this.getLView(e)[yt].$implicit}attach(e,n){let r=n[wa];this.needsIndexUpdate||=e!==this.length,xf(this.lContainer,n,e,Ll(this.templateTNode,r)),W2(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,K2(this.lContainer,e),Q2(this.lContainer,e)}create(e,n){let r=jy(this.lContainer,this.templateTNode.tView.ssrId),i=Mf(this.hostLView,this.templateTNode,new Zy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Sf(e[he],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[yt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[yt].$index=e}getLView(e){return Y2(this.lContainer,e)}};function re(t){let e=_e(null),n=Nn();try{let r=ve(),i=r[he],o=r[n],s=n+1,a=mf(r,s);if(o.liveCollection===void 0){let u=t_(i,s);o.liveCollection=new e_(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(q2(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=is(),h=c.length===0;if(Jn(r,u,h)){let p=n+2,g=mf(r,p);if(h){let m=t_(i,p),I=zD(g,m,r),O=Mf(r,m,void 0,{dehydratedView:I});xf(g,O,0,Ll(m,I))}else i.firstUpdatePass&&DV(g),$D(g,0)}}}finally{_e(e)}}function mf(t,e){return t[e]}function W2(t,e){if(t.length<=mt)return;let n=mt+e,r=t[n],i=r?r[no]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Kn];PL(o,i),ao.delete(r),i.detachedLeaveAnimationFns=void 0}}function K2(t,e){if(t.length<=mt)return;let n=mt+e,r=t[n],i=r?r[no]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Q2(t,e){return jl(t,e)}function Y2(t,e){return BD(t,e)}function t_(t,e){return Dl(t,e)}function ie(t,e,n){let r=ve(),i=is();if(Jn(r,i,e)){let o=ht(),s=Vh();RD(s,r,t,e,r[tt],n)}return ie}function n_(t,e,n,r,i){M_(e,t,n,i?"class":"style",r)}function R(t,e,n,r){let i=ve(),o=i[he],s=t+dt,a=o.firstCreatePass?KD(s,i,2,e,iV,xb(),n,r):o.data[s];if(R_(a,i,t,e,cA),Ah(a)){let c=i[he];AD(c,i,a),tD(c,a,i)}return r!=null&&Af(i,a),R}function P(){let t=ht(),e=wt(),n=Rf(e);return t.firstCreatePass&&k_(t,n),Qv(n)&&Yv(),Kv(),n.classesWithoutHost!=null&&sF(n)&&n_(t,n,ve(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&aF(n)&&n_(t,n,ve(),n.stylesWithoutHost,!1),P}function W(t,e,n,r){return R(t,e,n,r),P(),W}function ge(t,e,n,r){let i=ve(),o=i[he],s=t+dt,a=o.firstCreatePass?QD(s,o,2,e,n,r):o.data[s];return R_(a,i,t,e,cA),r!=null&&Af(i,a),ge}function fe(){let t=wt(),e=Rf(t);return Qv(e)&&Yv(),Kv(),fe}function Ba(t,e,n,r){return ge(t,e,n,r),fe(),Ba}var cA=(t,e,n,r,i)=>(Ml(!0),uD(e[tt],r,zb()));function H_(){let t=ht(),e=wt(),n=Rf(e);return t.firstCreatePass&&k_(t,n),H_}function z_(t,e,n){let r=ve(),i=r[he],o=t+dt,s=i.firstCreatePass?QD(o,i,8,"ng-container",e,n):i.data[o];return R_(s,r,t,"ng-container",J2),n!=null&&Af(r,s),z_}function lA(){let t=wt(),e=Rf(t);return H_}function Lf(t,e,n){return z_(t,e,n),lA(),Lf}var J2=(t,e,n,r,i)=>(Ml(!0),hL(e[tt],""));function X(){return ve()}function fo(t,e,n){let r=ve(),i=is();if(Jn(r,i,e)){let o=ht(),s=Vh();MD(s,r,t,e,r[tt],n)}return fo}var Hh=void 0;function Z2(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var X2=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hh,"{1} 'at' {0}",Hh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Z2],my={};function Vf(t){let e=ej(t),n=bS(e);if(n)return n;let r=e.split("-")[0];if(n=bS(r),n)return n;if(r==="en")return X2;throw new J(701,!1)}function bS(t){return t in my||(my[t]=Sr.ng&&Sr.ng.common&&Sr.ng.common.locales&&Sr.ng.common.locales[t]),my[t]}var ps=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(ps||{});function ej(t){return t.toLowerCase().replace(/_/g,"-")}var Ql="en-US";var tj=Ql;function uA(t){typeof t=="string"&&(tj=t.toLowerCase().replace(/_/g,"-"))}function B(t,e,n){let r=ve(),i=ht(),o=wt();return dA(i,r,r[tt],o,t,e,n),B}function Be(t,e,n){let r=ve(),i=ht(),o=wt();return(o.type&3||n)&&YD(o,i,r,n,r[tt],t,e,Qh(o,r,e)),Be}function dA(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Qh(r,e,o),YD(r,t,e,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],m=h[p+1];c??=Qh(r,e,o),mS(r,e,g,m,i,c)}if(u&&u.length)for(let p of u)c??=Qh(r,e,o),mS(r,e,p,i,i,c)}}function _(t=1){return Hb(t)}function Yl(t,e,n){p2(t,e,n)}function Jl(t){let e=ve(),n=ht(),r=ty();Oh(r+1);let i=F_(n,r);if(t.dirty&&Tb(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=v2(e,r);t.reset(o,CF),t.notifyOnChanges()}return!0}return!1}function Zl(){return h2(ve(),ty())}function On(t){let e=Xv();return Rh(e,dt+t)}function zh(t,e){return t<<17|e<<2}function ds(t){return t>>17&32767}function nj(t){return(t&2)==2}function rj(t,e){return t&131071|e<<17}function r_(t){return t|2}function La(t){return(t&131068)>>2}function vy(t,e){return t&-131069|e<<2}function ij(t){return(t&1)===1}function i_(t){return t|1}function oj(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ds(s),c=La(s);t[r]=n;let u=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ea(p,h)>0)&&(u=!0)}else h=n;if(i)if(c!==0){let g=ds(t[a+1]);t[r+1]=zh(g,a),g!==0&&(t[g+1]=vy(t[g+1],r)),t[a+1]=rj(t[a+1],r)}else t[r+1]=zh(a,0),a!==0&&(t[a+1]=vy(t[a+1],r)),a=r;else t[r+1]=zh(c,0),a===0?a=r:t[c+1]=vy(t[c+1],r),c=r;u&&(t[r+1]=r_(t[r+1])),SS(t,h,r,!0),SS(t,h,r,!1),sj(e,h,t,r,o),s=zh(a,c),o?e.classBindings=s:e.styleBindings=s}function sj(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ea(o,e)>=0&&(n[r+1]=i_(n[r+1]))}function SS(t,e,n,r){let i=t[n+1],o=e===null,s=r?ds(i):La(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];aj(c,e)&&(a=!0,t[s+1]=r?i_(u):r_(u)),s=r?ds(u):La(u)}a&&(t[n+1]=r?r_(i):i_(i))}function aj(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ea(t,e)>=0:!1}var gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cj(t){return t.substring(gr.key,gr.keyEnd)}function lj(t){return uj(t),hA(t,fA(t,0,gr.textEnd))}function hA(t,e){let n=gr.textEnd;return n===e?-1:(e=gr.keyEnd=dj(t,gr.key=e,n),fA(t,e,n))}function uj(t){gr.key=0,gr.keyEnd=0,gr.value=0,gr.valueEnd=0,gr.textEnd=t.length}function fA(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function dj(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function at(t,e,n){return pA(t,e,n,!1),at}function le(t,e){return pA(t,e,null,!0),le}function jf(t){fj(_j,hj,t,!0)}function hj(t,e){for(let n=lj(e);n>=0;n=hA(e,n))bh(t,cj(e),!0)}function pA(t,e,n,r){let i=ve(),o=ht(),s=Aa(2);if(o.firstUpdatePass&&mA(o,t,s,r),e!==kt&&Jn(i,s,e)){let a=o.data[Nn()];vA(o,a,i,i[tt],t,i[s+1]=Ej(e,n),r,s)}}function fj(t,e,n,r){let i=ht(),o=Aa(2);i.firstUpdatePass&&mA(i,null,o,r);let s=ve();if(n!==kt&&Jn(s,o,n)){let a=i.data[Nn()];if(yA(a,r)&&!gA(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Eh(c,n||"")),n_(i,a,s,n,r)}else Cj(i,a,s,s[tt],s[o+1],s[o+1]=yj(t,e,n),r,o)}}function gA(t,e){return e>=t.expandoStartIndex}function mA(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Nn()],s=gA(t,n);yA(o,r)&&e===null&&!s&&(e=!1),e=pj(i,o,e,r),oj(i,o,e,n,s,r)}}function pj(t,e,n,r){let i=jb(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=yy(null,t,e,n,r),n=$l(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=yy(i,t,e,n,r),o===null){let c=gj(t,e,r);c!==void 0&&Array.isArray(c)&&(c=yy(null,t,e,c[1],r),c=$l(c,e.attrs,r),mj(t,e,r,c))}else o=vj(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function gj(t,e,n){let r=n?e.classBindings:e.styleBindings;if(La(r)!==0)return t[ds(r)]}function mj(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ds(i)]=r}function vj(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=$l(r,s,n)}return $l(r,e.attrs,n)}function yy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=$l(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function $l(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),bh(t,s,n?!0:e[++o]))}return t===void 0?null:t}function yj(t,e,n){if(n==null||n==="")return un;let r=[],i=Lr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function _j(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&bh(t,r,n)}function Cj(t,e,n,r,i,o,s,a){i===kt&&(i=un);let c=0,u=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=c<i.length?i[c+1]:void 0,m=u<o.length?o[u+1]:void 0,I=null,O;h===p?(c+=2,u+=2,g!==m&&(I=p,O=m)):p===null||h!==null&&h<p?(c+=2,I=h):(u+=2,I=p,O=m),I!==null&&vA(t,e,n,r,I,O,s,a),h=c<i.length?i[c]:null,p=u<o.length?o[u]:null}}function vA(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],h=ij(u)?DS(c,e,n,i,La(u),s):void 0;if(!vf(h)){vf(o)||nj(u)&&(o=DS(c,null,n,i,a,s));let p=$v(Nn(),n);QL(r,s,p,i,o)}}function DS(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),h=u?c[1]:c,p=h===null,g=n[i+1];g===kt&&(g=p?un:void 0);let m=p?Sh(g,r):h===r?g:void 0;if(u&&!vf(m)&&(m=Sh(c,r)),vf(m)&&(a=m,s))return a;let I=t[i+1];i=s?ds(I):La(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Sh(c,r))}return a}function vf(t){return t!==void 0}function Ej(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=li(Lr(t)))),t}function yA(t,e){return(t.flags&(e?8:16))!==0}function Y(t,e=""){let n=ve(),r=ht(),i=t+dt,o=r.firstCreatePass?ql(r,i,1,e,null):r.data[i],s=Ij(r,n,o,e,t);n[i]=s,jh()&&D_(r,n,s,o),rs(o,!1)}var Ij=(t,e,n,r,i)=>(Ml(!0),uL(e[tt],r));function wj(t,e,n,r=""){return Jn(t,is(),n)?e+Mn(n)+r:kt}function Tj(t,e,n,r,i,o=""){let s=Nh(),a=Ul(t,s,n,i);return Aa(2),a?e+Mn(n)+r+Mn(i)+o:kt}function bj(t,e,n,r,i,o,s,a=""){let c=Nh(),u=HV(t,c,n,i,s);return Aa(3),u?e+Mn(n)+r+Mn(i)+o+Mn(s)+a:kt}function Sj(t,e,n,r,i,o,s,a,c,u=""){let h=Nh(),p=zV(t,h,n,i,s,c);return Aa(4),p?e+Mn(n)+r+Mn(i)+o+Mn(s)+a+Mn(c)+u:kt}function Me(t){return G_("",t),Me}function G_(t,e,n){let r=ve(),i=wj(r,t,e,n);return i!==kt&&$f(r,Nn(),i),G_}function $a(t,e,n,r,i){let o=ve(),s=Tj(o,t,e,n,r,i);return s!==kt&&$f(o,Nn(),s),$a}function Uf(t,e,n,r,i,o,s){let a=ve(),c=bj(a,t,e,n,r,i,o,s);return c!==kt&&$f(a,Nn(),c),Uf}function Bf(t,e,n,r,i,o,s,a,c){let u=ve(),h=Sj(u,t,e,n,r,i,o,s,a,c);return h!==kt&&$f(u,Nn(),h),Bf}function $f(t,e,n){let r=$v(e,t);dL(t[tt],r,n)}function In(t,e,n){ay(e)&&(e=e());let r=ve(),i=is();if(Jn(r,i,e)){let o=ht(),s=Vh();RD(s,r,t,e,r[tt],n)}return In}function Fn(t,e){let n=ay(t);return n&&t.set(e),n}function wn(t,e){let n=ve(),r=ht(),i=wt();return dA(r,n,n[tt],i,t,e),wn}var _A={};function Ha(t){let e=ht(),n=ve(),r=t+dt,i=ql(e,r,128,null,null);return rs(i,!1),Al(e,n,r,_A),Ha}function Xl(t){jr("NgLet");let e=ht(),n=ve(),r=Nn();return Al(e,n,r,t),t}function po(t){let e=Xv(),n=Rh(e,dt+t);if(n===_A)throw new J(314,!1);return n}function Dj(t,e,n){let r=ht();if(r.firstCreatePass){let i=xr(t);o_(n,r.data,r.blueprint,i,!0),o_(e,r.data,r.blueprint,i,!1)}}function o_(t,e,n,r,i){if(t=Wt(t),Array.isArray(t))for(let o=0;o<t.length;o++)o_(t[o],e,n,r,i);else{let o=ht(),s=ve(),a=wt(),c=Qo(t)?t:Wt(t.provide),u=Lv(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Qo(t)||!t.multi){let m=new as(u,i,k,null),I=Cy(c,e,i?h:h+g,p);I===-1?(Iy(ef(a,s),o,c),_y(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[I]=m,s[I]=m)}else{let m=Cy(c,e,h+g,p),I=Cy(c,e,h,h+g),O=m>=0&&n[m],x=I>=0&&n[I];if(i&&!x||!i&&!O){Iy(ef(a,s),o,c);let j=Mj(i?Rj:Aj,n.length,i,r,u,t);!i&&x&&(n[I].providerFactory=j),_y(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=CA(n[i?I:m],u,!i&&r);_y(o,t,m>-1?m:I,j)}!i&&r&&x&&n[I].componentProviders++}}}function _y(t,e,n,r){let i=Qo(e),o=_b(e);if(i||o){let c=(o?Wt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(n);h===-1?u.push(n,[r,c]):u[h+1].push(r,c)}else u.push(n,c)}}}function CA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Cy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Aj(t,e,n,r,i){return s_(this.multi,[])}function Rj(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Fl(r,r[he],this.providerFactory.index,i);s=c.slice(0,a),s_(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],s_(o,s);return s}function s_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Mj(t,e,n,r,i,o){let s=new as(t,n,k,null);return s.multi=[],s.index=e,s.componentProviders=0,CA(s,i,r&&!n),s}function za(t,e=[]){return n=>{n.providersResolver=(r,i)=>Dj(r,i?i(t):t,e)}}function gs(t,e,n){let r=Ph()+t,i=ve();return i[r]===kt?O_(i,r,n?e.call(n):e()):$V(i,r)}function q_(t,e,n,r){return xj(ve(),Ph(),t,e,n,r)}function EA(t,e){let n=t[e];return n===kt?void 0:n}function xj(t,e,n,r,i,o){let s=e+n;return Jn(t,s,i)?O_(t,s+1,o?r.call(o,i):r(i)):EA(t,s+1)}function Pj(t,e,n,r,i,o,s){let a=e+n;return Ul(t,a,i,o)?O_(t,a+2,s?r.call(s,i,o):r(i,o)):EA(t,a+2)}function Hf(t,e){let n=ht(),r,i=t+dt;n.firstCreatePass?(r=Nj(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Xi(r.type,!0)),s,a=ln(k);try{let c=Xh(!1),u=o();return Xh(c),Al(n,ve(),i,u),u}finally{ln(a)}}function Nj(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function zf(t,e,n,r){let i=t+dt,o=ve(),s=Rh(o,i);return kj(o,i)?Pj(o,Ph(),e,s.transform,n,r,s):s.transform(n,r)}function kj(t,e){return t[he].data[e].pure}var yf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},W_=(()=>{class t{compileModuleSync(n){return new ff(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Nv(n),o=cD(i.declarations).reduce((s,a)=>{let c=fi(a);return c&&s.push(new ls(c)),s},[]);return new yf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Oj=(()=>{class t{zone=F(Le);changeDetectionScheduler=F(lr);applicationRef=F(Zn);applicationErrorHandler=F(kn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function IA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Le(Ee(H({},wA()),{scheduleInRootZone:n})),[{provide:Le,useFactory:t},{provide:hi,multi:!0,useFactory:()=>{let r=F(Oj,{optional:!0});return()=>r.initialize()}},{provide:hi,multi:!0,useFactory:()=>{let r=F(Fj);return()=>{r.initialize()}}},e===!0?{provide:cy,useValue:!0}:[],{provide:ly,useValue:n??_D},{provide:kn,useFactory:()=>{let r=F(Le),i=F(ot),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Gn),o.handleError(s))})}}}]}function wA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Fj=(()=>{class t{subscription=new gt;initialized=!1;zone=F(Le);pendingTasks=F(Nr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var TA=(()=>{class t{applicationErrorHandler=F(kn);appRef=F(Zn);taskService=F(Nr);ngZone=F(Le);zonelessEnabled=F(xl);tracing=F(fs,{optional:!0});disableScheduling=F(cy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new gt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(of):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(ly,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?sS:CD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(of+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,sS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lj(){return typeof $localize<"u"&&$localize.locale||Ql}var eu=new se("",{providedIn:"root",factory:()=>F(eu,{optional:!0,skipSelf:!0})||Lj()});function nn(t){return tb(t)}function Ei(t,e){return Hd(t,e?.equal)}var K_=class{[tn];constructor(e){this[tn]=e}destroy(){this[tn].destroy()}};function dn(t,e){let n=e?.injector??F(et),r=e?.manualCleanup!==!0?n.get(_n):null,i,o=n.get(Ra,null,{optional:!0}),s=n.get(lr);return o!==null?(i=Uj(o.view,s,t),r instanceof El&&r._lView===o.view&&(r=null)):i=Bj(t,n.get(Pl),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new K_(i)}var bA=Ee(H({},nb),{cleanupFns:void 0,zone:null,onDestroyFn:os,run(){let t=Da(!1);try{rb(this)}finally{Da(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=_e(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],_e(t)}}}),Vj=Ee(H({},bA),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Bo(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),jj=Ee(H({},bA),{consumerMarkedDirty(){this.view[Ce]|=8192,oo(this.view),this.notifier.notify(13)},destroy(){Bo(this),this.onDestroyFn(),this.cleanup(),this.view[gi]?.delete(this)}});function Uj(t,e,n){let r=Object.create(jj);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=SA(r,n),t[gi]??=new Set,t[gi].add(r),r.consumerMarkedDirty(r),r}function Bj(t,e,n){let r=Object.create(Vj);return r.fn=SA(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function SA(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var RA=Symbol("InputSignalNode#UNSET"),t3=Ee(H({},zd),{transformFn:void 0,applyValueToInputSignal(t,e){ca(t,e)}});function MA(t,e){let n=Object.create(t3);n.value=t,n.transformFn=e?.transform;function r(){if(ia(n),n.value===RA){let i=null;throw new J(-950,i)}return n.value}return r[tn]=n,r}var n3=new se("");n3.__NG_ELEMENT_ID__=t=>{let e=wt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new J(204,!1)};function DA(t,e){return MA(t,e)}function r3(t){return MA(RA,t)}var nu=(DA.required=r3,DA);var Q_=new se(""),i3=new se("");function tu(t){return!t.moduleRef}function o3(t){let e=tu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Le);return n.run(()=>{tu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(kn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),tu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Q_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Q_);s.add(o),t.moduleRef.onDestroy(()=>{kl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return a3(r,n,()=>{let o=e.get(Nr),s=o.add(),a=e.get(U_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(eu,Ql);if(uA(c||Ql),!e.get(i3,!0))return tu(t)?e.get(Zn):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(tu(t)){let h=e.get(Zn);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return s3?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var s3;function a3(t,e,n){try{let r=n();return ho(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Gf=null;function c3(t=[],e){return et.create({name:e,providers:[{provide:Tl,useValue:"platform"},{provide:Q_,useValue:new Set([()=>Gf=null])},...t]})}function l3(t=[]){if(Gf)return Gf;let e=c3(t);return Gf=e,oA(),u3(e),e}function u3(t){let e=t.get(Cf,null);ut(t,()=>{e?.forEach(n=>n())})}function Y_(){return!1}var go=(()=>{class t{static __NG_ELEMENT_ID__=d3}return t})();function d3(t){return h3(wt(),ve(),(t&16)===16)}function h3(t,e,n){if(io(t)&&!n){let r=Yn(t.index,e);return new co(r,r)}else if(t.type&175){let r=e[xn];return new co(r,e)}return null}function xA(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Qe(8);try{let o=i?.injector??l3(r),s=[IA({}),{provide:lr,useExisting:TA},qb,...n||[]],a=new Bl({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return o3({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Qe(9)}}function J_(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function PA(t,e){let n=fi(t),r=e.elementInjector||Ia();return new ls(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function ru(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ms=class{};var qa=class{},Wa=class{},Br=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Kf=class{encodeKey(e){return NA(e)}encodeValue(e){return NA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function f3(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var p3=/%(\d[a-f0-9])/gi,g3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function NA(t){return encodeURIComponent(t).replace(p3,(e,n)=>g3[n]??e)}function qf(t){return`${t}`}var Ii=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Kf,e.fromString){if(e.fromObject)throw new J(2805,!1);this.map=f3(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(qf):[qf(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(qf(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(qf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Qf=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function m3(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function kA(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function OA(t){return typeof Blob<"u"&&t instanceof Blob}function FA(t){return typeof FormData<"u"&&t instanceof FormData}function v3(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var iu="Content-Type",Yf="Accept",nC="X-Request-URL",VA="text/plain",jA="application/json",UA=`${jA}, ${VA}, */*`,Ga=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(m3(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new J(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Br,this.context??=new Qf,!this.params)this.params=new Ii,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||kA(this.body)||OA(this.body)||FA(this.body)||v3(this.body)?this.body:this.body instanceof Ii?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||FA(this.body)?null:OA(this.body)?this.body.type||null:kA(this.body)?null:typeof this.body=="string"?VA:this.body instanceof Ii?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?jA:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,u=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.referrer||this.referrer,g=e.integrity||this.integrity,m=e.transferCache??this.transferCache,I=e.timeout??this.timeout,O=e.body!==void 0?e.body:this.body,x=e.withCredentials??this.withCredentials,j=e.reportProgress??this.reportProgress,Z=e.headers||this.headers,ce=e.params||this.params,pe=e.context??this.context;return e.setHeaders!==void 0&&(Z=Object.keys(e.setHeaders).reduce((Ke,Re)=>Ke.set(Re,e.setHeaders[Re]),Z)),e.setParams&&(ce=Object.keys(e.setParams).reduce((Ke,Re)=>Ke.set(Re,e.setParams[Re]),ce)),new t(n,r,O,{params:ce,headers:Z,context:pe,reportProgress:j,responseType:i,withCredentials:x,transferCache:m,keepalive:o,cache:a,priority:s,timeout:I,mode:c,redirect:u,credentials:h,referrer:p,integrity:g})}},wi=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(wi||{}),Ka=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new Br,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},ou=class t extends Ka{constructor(e={}){super(e)}type=wi.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qa=class t extends Ka{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=wi.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Ur=class extends Ka{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},BA=200,y3=204;function Z_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer}}var mo=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Ga)o=n;else{let c;i.headers instanceof Br?c=i.headers:c=new Br(i.headers);let u;i.params&&(i.params instanceof Ii?u=i.params:u=new Ii({fromObject:i.params})),o=new Ga(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=ye(o).pipe(Yi(c=>this.handler.handle(c)));if(n instanceof Ga||i.observe==="events")return s;let a=s.pipe(yn(c=>c instanceof Qa));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ie(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new J(2806,!1);return c.body}));case"blob":return a.pipe(Ie(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new J(2807,!1);return c.body}));case"text":return a.pipe(Ie(c=>{if(c.body!==null&&typeof c.body!="string")throw new J(2808,!1);return c.body}));case"json":default:return a.pipe(Ie(c=>c.body))}case"response":return a;default:throw new J(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Ii().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Z_(i,r))}post(n,r,i={}){return this.request("POST",n,Z_(i,r))}put(n,r,i={}){return this.request("PUT",n,Z_(i,r))}static \u0275fac=function(r){return new(r||t)(z(qa))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),_3=/^\)\]\}',?\n/;function LA(t){if(t.url)return t.url;let e=nC.toLocaleLowerCase();return t.headers.get(e)}var $A=new se(""),Wf=(()=>{class t{fetchImpl=F(X_,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n));ngZone=F(Le);destroyRef=F(_n);handle(n){return new Se(r=>{let i=new AbortController;this.doRequest(n,i.signal,r).then(eC,s=>r.error(new Ur({error:s})));let o;return n.timeout&&(o=this.ngZone.runOutsideAngular(()=>setTimeout(()=>{i.signal.aborted||i.abort(new DOMException("signal timed out","TimeoutError"))},n.timeout))),()=>{o!==void 0&&clearTimeout(o),i.abort()}})}doRequest(n,r,i){return w(this,null,function*(){let o=this.createRequestInit(n),s;try{let I=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,H({signal:r},o)));C3(I),i.next({type:wi.Sent}),s=yield I}catch(I){i.error(new Ur({error:I,status:I.status??0,statusText:I.statusText,url:n.urlWithParams,headers:I.headers}));return}let a=new Br(s.headers),c=s.statusText,u=LA(s)??n.urlWithParams,h=s.status,p=null;if(n.reportProgress&&i.next(new ou({headers:a,status:h,statusText:c,url:u})),s.body){let I=s.headers.get("content-length"),O=[],x=s.body.getReader(),j=0,Z,ce,pe=typeof Zone<"u"&&Zone.current,Ke=!1;if(yield this.ngZone.runOutsideAngular(()=>w(this,null,function*(){for(;;){if(this.destroyRef.destroyed){yield x.cancel(),Ke=!0;break}let{done:S,value:y}=yield x.read();if(S)break;if(O.push(y),j+=y.length,n.reportProgress){ce=n.responseType==="text"?(ce??"")+(Z??=new TextDecoder).decode(y,{stream:!0}):void 0;let C=()=>i.next({type:wi.DownloadProgress,total:I?+I:void 0,loaded:j,partialText:ce});pe?pe.run(C):C()}}})),Ke){i.complete();return}let Re=this.concatChunks(O,j);try{let S=s.headers.get(iu)??"";p=this.parseBody(n,Re,S,h)}catch(S){i.error(new Ur({error:S,headers:new Br(s.headers),status:s.status,statusText:s.statusText,url:LA(s)??n.urlWithParams}));return}}h===0&&(h=p?BA:0);let g=h>=200&&h<300,m=s.redirected;g?(i.next(new Qa({body:p,headers:a,status:h,statusText:c,url:u,redirected:m})),i.complete()):i.error(new Ur({error:p,headers:a,status:h,statusText:c,url:u,redirected:m}))})}parseBody(n,r,i,o){switch(n.responseType){case"json":let s=new TextDecoder().decode(r).replace(_3,"");if(s==="")return null;try{return JSON.parse(s)}catch(a){if(o<200||o>=300)return s;throw a}case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},i;if(i=n.credentials,n.withCredentials&&(i="include"),n.headers.forEach((o,s)=>r[o]=s.join(",")),n.headers.has(Yf)||(r[Yf]=UA),!n.headers.has(iu)){let o=n.detectContentTypeHeader();o!==null&&(r[iu]=o)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i,keepalive:n.keepalive,cache:n.cache,priority:n.priority,mode:n.mode,redirect:n.redirect,referrer:n.referrer,integrity:n.integrity}}concatChunks(n,r){let i=new Uint8Array(r),o=0;for(let s of n)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),X_=class{};function eC(){}function C3(t){t.then(eC,eC)}function E3(t,e){return e(t)}function I3(t,e,n){return(r,i)=>ut(n,()=>e(r,o=>t(o,i)))}var rC=new se(""),HA=new se(""),zA=new se("",{providedIn:"root",factory:()=>!0});var Jf=(()=>{class t extends qa{backend;injector;chain=null;pendingTasks=F(mi);contributeToStability=F(zA);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(rC),...this.injector.get(HA,[])]));this.chain=r.reduceRight((i,o)=>I3(i,o,this.injector),E3)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(qo(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(z(Wa),z(ot))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();var w3=/^\)\]\}',?\n/,T3=RegExp(`^${nC}:`,"m");function b3(t){return"responseURL"in t&&t.responseURL?t.responseURL:T3.test(t.getAllResponseHeaders())?t.getResponseHeader(nC):null}var tC=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new J(-2800,!1);let r=this.xhrFactory;return ye(null).pipe(Vt(()=>new Se(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((x,j)=>s.setRequestHeader(x,j.join(","))),n.headers.has(Yf)||s.setRequestHeader(Yf,UA),!n.headers.has(iu)){let x=n.detectContentTypeHeader();x!==null&&s.setRequestHeader(iu,x)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let x=n.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let a=n.serializeBody(),c=null,u=()=>{if(c!==null)return c;let x=s.statusText||"OK",j=new Br(s.getAllResponseHeaders()),Z=b3(s)||n.url;return c=new ou({headers:j,status:s.status,statusText:x,url:Z}),c},h=()=>{let{headers:x,status:j,statusText:Z,url:ce}=u(),pe=null;j!==y3&&(pe=typeof s.response>"u"?s.responseText:s.response),j===0&&(j=pe?BA:0);let Ke=j>=200&&j<300;if(n.responseType==="json"&&typeof pe=="string"){let Re=pe;pe=pe.replace(w3,"");try{pe=pe!==""?JSON.parse(pe):null}catch(S){pe=Re,Ke&&(Ke=!1,pe={error:S,text:pe})}}Ke?(o.next(new Qa({body:pe,headers:x,status:j,statusText:Z,url:ce||void 0})),o.complete()):o.error(new Ur({error:pe,headers:x,status:j,statusText:Z,url:ce||void 0}))},p=x=>{let{url:j}=u(),Z=new Ur({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:j||void 0});o.error(Z)},g=p;n.timeout&&(g=x=>{let{url:j}=u(),Z=new Ur({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:j||void 0});o.error(Z)});let m=!1,I=x=>{m||(o.next(u()),m=!0);let j={type:wi.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(j.total=x.total),n.responseType==="text"&&s.responseText&&(j.partialText=s.responseText),o.next(j)},O=x=>{let j={type:wi.UploadProgress,loaded:x.loaded};x.lengthComputable&&(j.total=x.total),o.next(j)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",O)),s.send(a),o.next({type:wi.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",O)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(z(ms))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),GA=new se(""),S3="XSRF-TOKEN",D3=new se("",{providedIn:"root",factory:()=>S3}),A3="X-XSRF-TOKEN",R3=new se("",{providedIn:"root",factory:()=>A3}),su=class{},M3=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ru(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(z(Tt),z(D3))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();function x3(t,e){let n=t.url.toLowerCase();if(!F(GA)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=F(su).getToken(),i=F(R3);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Zf=(function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t})(Zf||{});function qA(t,e){return{\u0275kind:t,\u0275providers:e}}function iC(...t){let e=[mo,tC,Jf,{provide:qa,useExisting:Jf},{provide:Wa,useFactory:()=>F($A,{optional:!0})??F(tC)},{provide:rC,useValue:x3,multi:!0},{provide:GA,useValue:!0},{provide:su,useClass:M3}];for(let n of t)e.push(...n.\u0275providers);return ur(e)}function oC(t){return qA(Zf.Interceptors,t.map(e=>({provide:rC,useValue:e,multi:!0})))}function sC(){return qA(Zf.Fetch,[Wf,{provide:$A,useExisting:Wf},{provide:Wa,useExisting:Wf}])}var QA=null;function er(){return QA}function cC(t){QA??=t}var au=class{},lC=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>F(YA),providedIn:"platform"})}return t})();var YA=(()=>{class t extends lC{_location;_history;_doc=F(Tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return er().getBaseHref(this._doc)}onPopState(n){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function JA(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function WA(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function vo(t){return t&&t[0]!=="?"?`?${t}`:t}var Xf=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>F(XA),providedIn:"root"})}return t})(),ZA=new se(""),XA=(()=>{class t extends Xf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return JA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+vo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+vo(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+vo(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(z(lC),z(ZA,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ya=(()=>{class t{_subject=new Et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=k3(WA(KA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+vo(r))}normalize(n){return t.stripTrailingSlash(N3(this._basePath,KA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=vo;static joinWithSlash=JA;static stripTrailingSlash=WA;static \u0275fac=function(r){return new(r||t)(z(Xf))};static \u0275prov=K({token:t,factory:()=>P3(),providedIn:"root"})}return t})();function P3(){return new Ya(z(Xf))}function N3(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function KA(t){return t.replace(/\/index.html$/,"")}function k3(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var fC=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(fC||{});var $r={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ja(t,e){let n=Vf(t),r=n[ps.NumberSymbols][e];if(typeof r>"u"){if(e===$r.CurrencyDecimal)return n[ps.NumberSymbols][$r.Decimal];if(e===$r.CurrencyGroup)return n[ps.NumberSymbols][$r.Group]}return r}function nR(t,e){return Vf(t)[ps.NumberFormats][e]}var O3=/^(\d+)?\.((\d+)(-(\d+))?)?$/,eR=22,ep=".",cu="0",F3=";",L3=",",uC="#";function V3(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=Ja(n,$r.Infinity);else{let u=B3(t);s&&(u=U3(u));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let Z=o.match(O3);if(Z===null)throw new J(2306,!1);let ce=Z[1],pe=Z[3],Ke=Z[5];ce!=null&&(h=dC(ce)),pe!=null&&(p=dC(pe)),Ke!=null?g=dC(Ke):pe!=null&&p>g&&(g=p)}$3(u,p,g);let m=u.digits,I=u.integerLen,O=u.exponent,x=[];for(c=m.every(Z=>!Z);I<h;I++)m.unshift(0);for(;I<0;I++)m.unshift(0);I>0?x=m.splice(I,m.length):(x=m,m=[0]);let j=[];for(m.length>=e.lgSize&&j.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)j.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&j.unshift(m.join("")),a=j.join(Ja(n,r)),x.length&&(a+=Ja(n,i)+x.join("")),O&&(a+=Ja(n,$r.Exponential)+"+"+O)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function rR(t,e,n){let r=nR(e,fC.Decimal),i=j3(r,Ja(e,$r.MinusSign));return V3(t,i,e,$r.Group,$r.Decimal,n)}function j3(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(F3),i=r[0],o=r[1],s=i.indexOf(ep)!==-1?i.split(ep):[i.substring(0,i.lastIndexOf(cu)+1),i.substring(i.lastIndexOf(cu)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(uC));for(let h=0;h<c.length;h++){let p=c.charAt(h);p===cu?n.minFrac=n.maxFrac=h+1:p===uC?n.maxFrac=h+1:n.posSuf+=p}let u=a.split(L3);if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(uC);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function U3(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function B3(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(ep))>-1&&(e=e.replace(ep,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===cu;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===cu;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>eR&&(r=r.splice(0,eR-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function $3(t,e,n){if(e>n)throw new J(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=e+t.integerLen,h=r.reduceRight(function(p,g,m,I){return g=g+p,I[m]=g<10?g:g-10,c&&(I[m]===0&&m>=u?I.pop():c=!1),g>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function dC(t){let e=parseInt(t);if(isNaN(e))throw new J(2305,!1);return e}var hC=/\s+/,tR=[],Kt=(()=>{class t{_ngEl;_renderer;initialClasses=tR;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(hC):tR}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(hC):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(hC).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(k(Ut),k(uo))};static \u0275dir=Ot({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function H3(t,e){return new J(2100,!1)}var pC=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!z3(n))return null;i||=this._locale;try{let o=G3(n);return rR(o,i,r)}catch(o){throw H3(t,o.message)}}static \u0275fac=function(r){return new(r||t)(k(eu,16))};static \u0275pipe=L_({name:"number",type:t,pure:!0})}return t})();function z3(t){return!(t==null||t===""||t!==t)}function G3(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new J(2309,!1);return t}var Ge=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ci({type:t});static \u0275inj=Dr({})}return t})();var iR="browser";var lu=class{_doc;constructor(e){this._doc=e}manager},tp=(()=>{class t extends lu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),rp=new se(""),_C=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof tp));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof tp);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(z(rp),z(Le))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),gC="ng-app-id";function oR(t){for(let e of t)e.remove()}function sR(t,e){let n=e.createElement("style");return n.textContent=t,n}function W3(t,e,n,r){let i=t.head?.querySelectorAll(`style[${gC}="${e}"],link[${gC}="${e}"]`);if(i)for(let o of i)o.removeAttribute(gC),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function vC(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var CC=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,W3(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,sR);r?.forEach(i=>this.addUsage(i,this.external,vC))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(oR(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])oR(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,sR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,vC(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(z(Tt),z(_f),z(Ef,8),z(hs))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),mC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},EC=/%COMP%/g;var cR="%COMP%",K3=`_nghost-${cR}`,Q3=`_ngcontent-${cR}`,Y3=!0,J3=new se("",{providedIn:"root",factory:()=>Y3});function Z3(t){return Q3.replace(EC,t)}function X3(t){return K3.replace(EC,t)}function lR(t,e){return e.map(n=>n.replace(EC,t))}var IC=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new uu(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof np?i.applyToHost(n):i instanceof du&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case vi.Emulated:o=new np(c,u,r,this.appId,h,s,a,p,g);break;case vi.ShadowDom:return new yC(c,u,n,r,s,a,this.nonce,p,g);default:o=new du(c,u,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(z(_C),z(CC),z(_f),z(J3),z(Tt),z(Le),z(Ef),z(fs,8))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),uu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(mC[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(aR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(aR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=mC[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=mC[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Or.DashCase|Or.Important)?e.style.setProperty(n,r,i&Or.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Or.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=er().getGlobalEventTarget(this.doc,e),!e))throw new J(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function aR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var yC=class extends uu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=lR(i.id,h);for(let g of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let g of p){let m=vC(g,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},du=class extends uu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?lR(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ao.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},np=class extends du{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){let h=i+"-"+r.id;super(e,n,r,o,s,a,c,u,h),this.contentAttr=Z3(h),this.hostAttr=X3(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var ip=class t extends au{supportsDOMEvents=!0;static makeCurrent(){cC(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=eU();return n==null?null:tU(n)}resetBaseElement(){hu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ru(document.cookie,e)}},hu=null;function eU(){return hu=hu||document.head.querySelector("base"),hu?hu.getAttribute("href"):null}function tU(t){return new URL(t,document.baseURI).pathname}var nU=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),uR=["alt","control","meta","shift"],rU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dR=(()=>{class t extends lu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>er().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),uR.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=rU[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),uR.forEach(s=>{if(s!==i){let a=iU[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();function wC(t,e,n){let r=H({rootComponent:t,platformRef:n?.platformRef},oU(e));return xA(r)}function oU(t){return{appProviders:[...uU,...t?.providers??[]],platformProviders:lU}}function sU(){ip.makeCurrent()}function aU(){return new Gn}function cU(){return l_(document),document}var lU=[{provide:hs,useValue:iR},{provide:Cf,useValue:sU,multi:!0},{provide:Tt,useFactory:cU}];var uU=[{provide:Tl,useValue:"root"},{provide:Gn,useFactory:aU},{provide:rp,useClass:tp,multi:!0,deps:[Tt]},{provide:rp,useClass:dR,multi:!0,deps:[Tt]},IC,CC,_C,{provide:cs,useExisting:IC},{provide:ms,useClass:nU},[]];var hR=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var TC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=z(dU),i},providedIn:"root"})}return t})(),dU=(()=>{class t extends TC{_doc;constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Vr.NONE:return r;case Vr.HTML:return lo(r,"HTML")?Lr(r):m_(this._doc,String(r)).toString();case Vr.STYLE:return lo(r,"Style")?Lr(r):r;case Vr.SCRIPT:if(lo(r,"Script"))return Lr(r);throw new J(5200,!1);case Vr.URL:return lo(r,"URL")?Lr(r):Hl(String(r));case Vr.RESOURCE_URL:if(lo(r,"ResourceURL"))return Lr(r);throw new J(5201,!1);default:throw new J(5202,!1)}}bypassSecurityTrustHtml(n){return d_(n)}bypassSecurityTrustStyle(n){return h_(n)}bypassSecurityTrustScript(n){return f_(n)}bypassSecurityTrustUrl(n){return p_(n)}bypassSecurityTrustResourceUrl(n){return g_(n)}static \u0275fac=function(r){return new(r||t)(z(Tt))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var we="primary",Du=Symbol("RouteTitle"),RC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Cs(t){return new RC(t)}function ER(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function hU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hr(t[n],e[n]))return!1;return!0}function Hr(t,e){let n=t?MC(t):void 0,r=e?MC(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!IR(t[i],e[i]))return!1;return!0}function MC(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function IR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wR(t){return t.length>0?t[t.length-1]:null}function Si(t){return iv(t)?t:ho(t)?st(Promise.resolve(t)):ye(t)}var fU={exact:bR,subset:SR},TR={exact:pU,subset:gU,ignored:()=>!0};function pR(t,e,n){return fU[n.paths](t.root,e.root,n.matrixParams)&&TR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function pU(t,e){return Hr(t,e)}function bR(t,e,n){if(!ys(t.segments,e.segments)||!ap(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bR(t.children[r],e.children[r],n))return!1;return!0}function gU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>IR(t[n],e[n]))}function SR(t,e,n){return DR(t,e,e.segments,n)}function DR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ys(i,n)||e.hasChildren()||!ap(i,n,r))}else if(t.segments.length===n.length){if(!ys(t.segments,n)||!ap(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!SR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ys(t.segments,i)||!ap(t.segments,i,r)||!t.children[we]?!1:DR(t.children[we],e,o,r)}}function ap(t,e,n){return e.every((r,i)=>TR[n](t[i].parameters,r.parameters))}var Gr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new $e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Cs(this.queryParams),this._queryParamMap}toString(){return yU.serialize(this)}},$e=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cp(this)}},yo=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Cs(this.parameters),this._parameterMap}toString(){return RR(this)}};function mU(t,e){return ys(t,e)&&t.every((n,r)=>Hr(n.parameters,e[r].parameters))}function ys(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function vU(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===we&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==we&&(n=n.concat(e(i,r)))}),n}var Au=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new Es,providedIn:"root"})}return t})(),Es=class{parse(e){let n=new PC(e);return new Gr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${fu(e.root,!0)}`,r=EU(e.queryParams),i=typeof e.fragment=="string"?`#${_U(e.fragment)}`:"";return`${n}${r}${i}`}},yU=new Es;function cp(t){return t.segments.map(e=>RR(e)).join("/")}function fu(t,e){if(!t.hasChildren())return cp(t);if(e){let n=t.children[we]?fu(t.children[we],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==we&&r.push(`${i}:${fu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=vU(t,(r,i)=>i===we?[fu(t.children[we],!1)]:[`${i}:${fu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[we]!=null?`${cp(t)}/${n[0]}`:`${cp(t)}/(${n.join("//")})`}}function AR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function op(t){return AR(t).replace(/%3B/gi,";")}function _U(t){return encodeURI(t)}function xC(t){return AR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lp(t){return decodeURIComponent(t)}function gR(t){return lp(t.replace(/\+/g,"%20"))}function RR(t){return`${xC(t.path)}${CU(t.parameters)}`}function CU(t){return Object.entries(t).map(([e,n])=>`;${xC(e)}=${xC(n)}`).join("")}function EU(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${op(n)}=${op(i)}`).join("&"):`${op(n)}=${op(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var IU=/^[^\/()?;#]+/;function bC(t){let e=t.match(IU);return e?e[0]:""}var wU=/^[^\/()?;=#]+/;function TU(t){let e=t.match(wU);return e?e[0]:""}var bU=/^[^=?&#]+/;function SU(t){let e=t.match(bU);return e?e[0]:""}var DU=/^[^&#]+/;function AU(t){let e=t.match(DU);return e?e[0]:""}var PC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[we]=new $e(e,n)),r}parseSegment(){let e=bC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new yo(lp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=TU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=bC(this.remaining);i&&(r=i,this.capture(r))}e[lp(n)]=lp(r)}parseQueryParam(e){let n=SU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=AU(this.remaining);s&&(r=s,this.capture(r))}let i=gR(n),o=gR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=bC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();n[o??we]=Object.keys(s).length===1&&s[we]?s[we]:new $e([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function MR(t){return t.segments.length>0?new $e([],{[we]:t}):t}function xR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=xR(i);if(r===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new $e(t.segments,e);return RU(n)}function RU(t){if(t.numberOfChildren===1&&t.children[we]){let e=t.children[we];return new $e(t.segments.concat(e.segments),e.children)}return t}function nc(t){return t instanceof Gr}function PR(t,e,n=null,r=null){let i=NR(t);return kR(i,e,n,r)}function NR(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new $e(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=MR(r);return e??i}function kR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return SC(i,i,i,n,r);let o=MU(e);if(o.toRoot())return SC(i,i,new $e([],{}),n,r);let s=xU(o,i,t),a=s.processChildren?gu(s.segmentGroup,s.index,o.commands):FR(s.segmentGroup,s.index,o.commands);return SC(i,s.segmentGroup,a,n,r)}function up(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function yu(t){return typeof t=="object"&&t!=null&&t.outlets}function SC(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;t===e?s=n:s=OR(t,e,n);let a=MR(xR(s));return new Gr(a,o,i)}function OR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=OR(o,e,n)}),new $e(t.segments,r)}var dp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&up(r[0]))throw new J(4003,!1);let i=r.find(yu);if(i&&i!==wR(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dp(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dp(n,e,r)}var ec=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function xU(t,e,n){if(t.isAbsolute)return new ec(e,!0,0);if(!n)return new ec(e,!1,NaN);if(n.parent===null)return new ec(n,!0,0);let r=up(t.commands[0])?0:1,i=n.segments.length-1+r;return PU(n,i,t.numberOfDoubleDots)}function PU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new ec(r,!1,i-o)}function NU(t){return yu(t[0])?t[0].outlets:{[we]:t}}function FR(t,e,n){if(t??=new $e([],{}),t.segments.length===0&&t.hasChildren())return gu(t,e,n);let r=kU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new $e(t.segments.slice(0,r.pathIndex),{});return o.children[we]=new $e(t.segments.slice(r.pathIndex),t.children),gu(o,0,i)}else return r.match&&i.length===0?new $e(t.segments,{}):r.match&&!t.hasChildren()?NC(t,e,n):r.match?gu(t,0,i):NC(t,e,n)}function gu(t,e,n){if(n.length===0)return new $e(t.segments,{});{let r=NU(n),i={};if(Object.keys(r).some(o=>o!==we)&&t.children[we]&&t.numberOfChildren===1&&t.children[we].segments.length===0){let o=gu(t.children[we],e,n);return new $e(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=FR(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new $e(t.segments,i)}}function kU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(yu(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!vR(c,u,s))return o;r+=2}else{if(!vR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function NC(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(yu(o)){let c=OU(o.outlets);return new $e(r,c)}if(i===0&&up(n[0])){let c=t.segments[e];r.push(new yo(c.path,mR(n[0]))),i++;continue}let s=yu(o)?o.outlets[we]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&up(a)?(r.push(new yo(s,mR(a))),i+=2):(r.push(new yo(s,{})),i++)}return new $e(r,{})}function OU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=NC(new $e([],{}),0,r))}),e}function mR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function vR(t,e,n){return t==n.path&&Hr(e,n.parameters)}var mu="imperative",Bt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Bt||{}),Vn=class{id;url;constructor(e,n){this.id=e,this.url=n}},Is=class extends Vn{type=Bt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ti=class extends Vn{urlAfterRedirects;type=Bt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(hn||{}),_u=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(_u||{}),zr=class extends Vn{reason;code;type=Bt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bi=class extends Vn{reason;code;type=Bt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},rc=class extends Vn{error;target;type=Bt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cu=class extends Vn{urlAfterRedirects;state;type=Bt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends Vn{urlAfterRedirects;state;type=Bt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class extends Vn{urlAfterRedirects;state;shouldActivate;type=Bt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pp=class extends Vn{urlAfterRedirects;state;type=Bt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gp=class extends Vn{urlAfterRedirects;state;type=Bt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mp=class{route;type=Bt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vp=class{route;type=Bt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yp=class{snapshot;type=Bt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{snapshot;type=Bt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cp=class{snapshot;type=Bt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{snapshot;type=Bt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Eu=class{},ic=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function FU(t){return!(t instanceof Eu)&&!(t instanceof ic)}function LU(t,e){return t.providers&&!t._injector&&(t._injector=Kl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function vr(t){return t.outlet||we}function VU(t,e){let n=t.filter(r=>vr(r)===e);return n.push(...t.filter(r=>vr(r)!==e)),n}function ac(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ip=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ac(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new cc(this.rootInjector)}},cc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ip(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(z(ot))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=kC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=kC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=OC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return OC(e,this._root).map(n=>n.value)}};function kC(t,e){if(t===e.value)return e;for(let n of e.children){let r=kC(t,n);if(r)return r}return null}function OC(t,e){if(t===e.value)return[e];for(let n of e.children){let r=OC(t,n);if(r.length)return r.unshift(e),r}return[]}var Ln=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Iu=class extends wp{snapshot;constructor(e,n){super(e),this.snapshot=n,HC(this,e)}toString(){return this.snapshot.toString()}};function LR(t){let e=jU(t),n=new qt([new yo("",{})]),r=new qt({}),i=new qt({}),o=new qt({}),s=new qt(""),a=new qr(n,r,o,s,i,we,t,e.root);return a.snapshot=e.root,new Iu(new Ln(a,[]),e)}function jU(t){let e={},n={},r={},o=new _s([],e,r,"",n,we,t,null,{});return new wu("",new Ln(o,[]))}var qr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(u=>u[Du]))??ye(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ie(e=>Cs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ie(e=>Cs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&jR(i)&&(r.resolve[Du]=i.title),r}var _s=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Du]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Cs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Cs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},wu=class extends wp{url;constructor(e,n){super(n),this.url=e,HC(this,n)}toString(){return VR(this._root)}};function HC(t,e){e.value._routerState=t,e.children.forEach(n=>HC(t,n))}function VR(t){let e=t.children.length>0?` { ${t.children.map(VR).join(", ")} } `:"";return`${t.value}${e}`}function DC(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Hr(e.params,n.params)||t.paramsSubject.next(n.params),hU(e.url,n.url)||t.urlSubject.next(n.url),Hr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function FC(t,e){let n=Hr(t.params,e.params)&&mU(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||FC(t.parent,e.parent))}function jR(t){return typeof t.title=="string"||t.title===null}var UR=new se(""),Ru=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new ft;deactivateEvents=new ft;attachEvents=new ft;detachEvents=new ft;routerOutletData=nu();parentContexts=F(cc);location=F(mr);changeDetector=F(go);inputBinder=F(Ap,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new LC(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ot({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ja]})}return t})(),LC=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===qr?this.route:e===cc?this.childContexts:e===UR?this.outletData:this.parent.get(e,n)}},Ap=new se("");var zC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ae({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&W(0,"router-outlet")},dependencies:[Ru],encapsulation:2})}return t})();function GC(t){let e=t.children&&t.children.map(GC),n=e?Ee(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==we&&(n.component=zC),n}function UU(t,e,n){let r=Tu(t,e._root,n?n._root:void 0);return new Iu(r,e)}function Tu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=BU(t,e,n);return new Ln(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Tu(t,a)),s}}let r=$U(e.value),i=e.children.map(o=>Tu(t,o));return new Ln(r,i)}}function BU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Tu(t,r,i);return Tu(t,r)})}function $U(t){return new qr(new qt(t.url),new qt(t.params),new qt(t.queryParams),new qt(t.fragment),new qt(t.data),t.outlet,t.component,t)}var oc=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},BR="ngNavigationCancelingError";function bp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=nc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$R(!1,hn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $R(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[BR]=!0,n.cancellationCode=e,n}function HU(t){return HR(t)&&nc(t.url)}function HR(t){return!!t&&t[BR]}var zU=(t,e,n,r)=>Ie(i=>(new VC(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),VC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),DC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Xa(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Xa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Xa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Xa(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ep(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _p(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(DC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Sp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},tc=class{component;route;constructor(e,n){this.component=e,this.route=n}};function GU(t,e,n){let r=t._root,i=e?e._root:null;return pu(r,i,n,[r.value])}function qU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function lc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Iv(t)?t:e.get(t):r}function pu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xa(e);return t.children.forEach(s=>{WU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vu(a,n.getContext(s),i)),i}function WU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=KU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?pu(t,e,a?a.children:null,r,i):pu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tc(a.outlet.component,s))}else s&&vu(e,a,i),i.canActivateChecks.push(new Sp(r)),o.component?pu(t,null,a?a.children:null,r,i):pu(t,null,n,r,i);return i}function KU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ys(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ys(t.url,e.url)||!Hr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FC(t,e)||!Hr(t.queryParams,e.queryParams);case"paramsChange":default:return!FC(t,e)}}function vu(t,e,n){let r=Xa(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?vu(s,e.children.getContext(o),n):vu(s,null,n):vu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new tc(e.outlet.component,i)):n.canDeactivateChecks.push(new tc(null,i)):n.canDeactivateChecks.push(new tc(null,i))}function Mu(t){return typeof t=="function"}function QU(t){return typeof t=="boolean"}function YU(t){return t&&Mu(t.canLoad)}function JU(t){return t&&Mu(t.canActivate)}function ZU(t){return t&&Mu(t.canActivateChild)}function XU(t){return t&&Mu(t.canDeactivate)}function eB(t){return t&&Mu(t.canMatch)}function zR(t){return t instanceof Rn||t?.name==="EmptyError"}var sp=Symbol("INITIAL_VALUE");function sc(){return Vt(t=>ph(t.map(e=>e.pipe(si(1),cv(sp)))).pipe(Ie(e=>{for(let n of e)if(n!==!0){if(n===sp)return sp;if(n===!1||tB(n))return n}return!0}),yn(e=>e!==sp),si(1)))}function tB(t){return nc(t)||t instanceof oc}function nB(t,e){return Pt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ye(Ee(H({},n),{guardsResult:!0})):rB(s,r,i,t).pipe(Pt(a=>a&&QU(a)?iB(r,o,t,e):ye(a)),Ie(a=>Ee(H({},n),{guardsResult:a})))})}function rB(t,e,n,r){return st(t).pipe(Pt(i=>lB(i.component,i.route,n,e,r)),ai(i=>i!==!0,!0))}function iB(t,e,n,r){return st(e).pipe(Yi(i=>ya(sB(i.route.parent,r),oB(i.route,r),cB(t,i.path,n),aB(t,i.route,n))),ai(i=>i!==!0,!0))}function oB(t,e){return t!==null&&e&&e(new Cp(t)),ye(!0)}function sB(t,e){return t!==null&&e&&e(new yp(t)),ye(!0)}function aB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ye(!0);let i=r.map(o=>vl(()=>{let s=ac(e)??n,a=lc(o,s),c=JU(a)?a.canActivate(e,t):ut(s,()=>a(e,t));return Si(c).pipe(ai())}));return ye(i).pipe(sc())}function cB(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>qU(s)).filter(s=>s!==null).map(s=>vl(()=>{let a=s.guards.map(c=>{let u=ac(s.node)??n,h=lc(c,u),p=ZU(h)?h.canActivateChild(r,t):ut(u,()=>h(r,t));return Si(p).pipe(ai())});return ye(a).pipe(sc())}));return ye(o).pipe(sc())}function lB(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ye(!0);let s=o.map(a=>{let c=ac(e)??i,u=lc(a,c),h=XU(u)?u.canDeactivate(t,e,n,r):ut(c,()=>u(t,e,n,r));return Si(h).pipe(ai())});return ye(s).pipe(sc())}function uB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ye(!0);let o=i.map(s=>{let a=lc(s,t),c=YU(a)?a.canLoad(e,n):ut(t,()=>a(e,n));return Si(c)});return ye(o).pipe(sc(),GR(r))}function GR(t){return Ym(jt(e=>{if(typeof e!="boolean")throw bp(t,e)}),Ie(e=>e===!0))}function dB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ye(!0);let o=i.map(s=>{let a=lc(s,t),c=eB(a)?a.canMatch(e,n):ut(t,()=>a(e,n));return Si(c)});return ye(o).pipe(sc(),GR(r))}var bu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Su=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Za(t){return Qi(new bu(t))}function hB(t){return Qi(new J(4e3,!1))}function fB(t){return Qi($R(!1,hn.GuardRejected))}var jC=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ye(r);if(i.numberOfChildren>1||!i.children[we])return hB(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,n,r,i,o){return pB(n,i,o).pipe(Ie(s=>{if(s instanceof Gr)throw new Su(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Su(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Gr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new $e(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function pB(t,e,n){if(typeof t=="string")return ye(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:h,title:p}=e;return Si(ut(n,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var UC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gB(t,e,n,r,i){let o=qR(t,e,n);return o.matched?(r=LU(e,r),dB(r,e,n,i).pipe(Ie(s=>s===!0?o:H({},UC)))):ye(o)}function qR(t,e,n){if(e.path==="**")return mB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},UC):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ER)(n,t,e);if(!i)return H({},UC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mB(t){return{matched:!0,parameters:t.length>0?wR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function yR(t,e,n,r){return n.length>0&&_B(t,n,r)?{segmentGroup:new $e(e,yB(r,new $e(n,t.children))),slicedSegments:[]}:n.length===0&&CB(t,n,r)?{segmentGroup:new $e(t.segments,vB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new $e(t.segments,t.children),slicedSegments:n}}function vB(t,e,n,r){let i={};for(let o of n)if(Rp(t,e,o)&&!r[vr(o)]){let s=new $e([],{});i[vr(o)]=s}return H(H({},r),i)}function yB(t,e){let n={};n[we]=e;for(let r of t)if(r.path===""&&vr(r)!==we){let i=new $e([],{});n[vr(r)]=i}return n}function _B(t,e,n){return n.some(r=>Rp(t,e,r)&&vr(r)!==we)}function CB(t,e,n){return n.some(r=>Rp(t,e,r))}function Rp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function EB(t,e,n){return e.length===0&&!t.children[n]}var BC=class{};function IB(t,e,n,r,i,o,s="emptyOnly"){return new $C(t,e,n,r,i,s,o).recognize()}var wB=31,$C=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new jC(this.urlSerializer,this.urlTree)}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=yR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(({children:n,rootSnapshot:r})=>{let i=new Ln(r,n),o=new wu("",i),s=PR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new _s([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,n).pipe(Ie(r=>({children:r,rootSnapshot:n})),cr(r=>{if(r instanceof Su)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof bu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Ie(s=>s instanceof Ln?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return st(o).pipe(Yi(s=>{let a=r.children[s],c=VU(n,s);return this.processSegmentGroup(e,c,a,s,i)}),av((s,a)=>(s.push(...a),s)),Ji(null),sv(),Pt(s=>{if(s===null)return Za(r);let a=WR(s);return TB(a),ye(a)}))}processSegment(e,n,r,i,o,s,a){return st(n).pipe(Yi(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(cr(u=>{if(u instanceof bu)return ye(null);throw u}))),ai(c=>!!c),cr(c=>{if(zR(c))return EB(r,i,o)?ye(new BC):Za(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return vr(r)!==s&&(s===we||!Rp(i,o,r))?Za(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Za(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=qR(n,i,o);if(!c)return Za(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wB&&(this.allowRedirects=!1));let m=new _s(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,_R(i),vr(i),i.component??i._loadedComponent??null,i,CR(i)),I=Tp(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(I.params),m.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e).pipe(Vt(x=>this.applyRedirects.lineralizeSegments(i,x)),Pt(x=>this.processSegment(e,r,n,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=gB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Vt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Vt(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:m}=c,I=new _s(g,p,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,_R(r),vr(r),r.component??r._loadedComponent??null,r,CR(r)),O=Tp(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(O.params),I.data=Object.freeze(O.data);let{segmentGroup:x,slicedSegments:j}=yR(n,g,m,u);if(j.length===0&&x.hasChildren())return this.processChildren(h,u,x,I).pipe(Ie(ce=>new Ln(I,ce)));if(u.length===0&&j.length===0)return ye(new Ln(I,[]));let Z=vr(r)===o;return this.processSegment(h,u,x,j,Z?we:o,!0,I).pipe(Ie(ce=>new Ln(I,ce instanceof Ln?[ce]:[])))}))):Za(n)))}getChildConfig(e,n,r){return n.children?ye({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ye({routes:n._loadedRoutes,injector:n._loadedInjector}):uB(e,n,r,this.urlSerializer).pipe(Pt(i=>i?this.configLoader.loadChildren(e,n).pipe(jt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):fB(n))):ye({routes:[],injector:e})}};function TB(t){t.sort((e,n)=>e.value.outlet===we?-1:n.value.outlet===we?1:e.value.outlet.localeCompare(n.value.outlet))}function bB(t){let e=t.value.routeConfig;return e&&e.path===""}function WR(t){let e=[],n=new Set;for(let r of t){if(!bB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=WR(r.children);e.push(new Ln(r.value,i))}return e.filter(r=>!n.has(r))}function _R(t){return t.data||{}}function CR(t){return t.resolve||{}}function SB(t,e,n,r,i,o){return Pt(s=>IB(t,e,n,r,s.extractedUrl,i,o).pipe(Ie(({state:a,tree:c})=>Ee(H({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function DB(t,e){return Pt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ye(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of KR(c))s.add(u);let a=0;return st(s).pipe(Yi(c=>o.has(c)?AB(c,r,t,e):(c.data=Tp(c,c.parent,t).resolve,ye(void 0))),jt(()=>a++),_a(1),Pt(c=>a===s.size?ye(n):gn))})}function KR(t){let e=t.children.map(n=>KR(n)).flat();return[t,...e]}function AB(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!jR(i)&&(o[Du]=i.title),vl(()=>(t.data=Tp(t,t.parent,n).resolve,RB(o,t,e,r).pipe(Ie(s=>(t._resolvedData=s,t.data=H(H({},t.data),s),null)))))}function RB(t,e,n,r){let i=MC(t);if(i.length===0)return ye({});let o={};return st(i).pipe(Pt(s=>MB(t[s],e,n,r).pipe(ai(),jt(a=>{if(a instanceof oc)throw bp(new Es,a);o[s]=a}))),_a(1),Ie(()=>o),cr(s=>zR(s)?gn:Qi(s)))}function MB(t,e,n,r){let i=ac(e)??r,o=lc(t,i),s=o.resolve?o.resolve(e,n):ut(i,()=>o(e,n));return Si(s)}function AC(t){return Vt(e=>{let n=t(e);return n?st(n).pipe(Ie(()=>e)):ye(e)})}var qC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===we);return r}getResolvedTitleForRoute(n){return n.data[Du]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>F(QR),providedIn:"root"})}return t})(),QR=(()=>{class t extends qC{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(z(hR))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uc=new se("",{providedIn:"root",factory:()=>({})}),xu=new se(""),YR=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(W_);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ye(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Si(ut(n,()=>r.loadComponent())).pipe(Ie(ZR),Vt(XR),jt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),qo(()=>{this.componentLoaders.delete(r)})),o=new pa(i,()=>new Et).pipe(fa());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=JR(r,this.compiler,n,this.onLoadEndListener).pipe(qo(()=>{this.childrenLoaders.delete(r)})),s=new pa(o,()=>new Et).pipe(fa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function JR(t,e,n,r){return Si(ut(n,()=>t.loadChildren())).pipe(Ie(ZR),Vt(XR),Pt(i=>i instanceof Nf||Array.isArray(i)?ye(i):st(e.compileModuleAsync(i))),Ie(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(xu,[],{optional:!0,self:!0}).flat()),{routes:s.map(GC),injector:o}}))}function xB(t){return t&&typeof t=="object"&&"default"in t}function ZR(t){return xB(t)?t.default:t}function XR(t){return ye(t)}var Mp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>F(PB),providedIn:"root"})}return t})(),PB=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eM=new se("");var tM=new se(""),nM=(()=>{class t{currentNavigation=nt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Et;transitionAbortWithErrorSubject=new Et;configLoader=F(YR);environmentInjector=F(ot);destroyRef=F(_n);urlSerializer=F(Au);rootContexts=F(cc);location=F(Ya);inputBindingEnabled=F(Ap,{optional:!0})!==null;titleStrategy=F(qC);options=F(uc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(Mp);createViewTransition=F(eM,{optional:!0});navigationErrorHandler=F(tM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ye(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new mp(i)),r=i=>this.events.next(new vp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;nn(()=>{this.transitions?.next(Ee(H({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new qt(null),this.transitions.pipe(yn(r=>r!==null),Vt(r=>{let i=!1;return ye(r).pipe(Vt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",hn.SupersededByNewNavigation),gn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new bi(o.id,this.urlSerializer.serialize(o.rawUrl),"",_u.IgnoredSameUrlNavigation)),o.resolve(!1),gn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ye(o).pipe(Vt(c=>(this.events.next(new Is(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?gn:Promise.resolve(c))),SB(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),jt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=c.urlAfterRedirects,h));let u=new Cu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:h,restoredState:p,extras:g}=o,m=new Is(c,this.urlSerializer.serialize(u),h,p);this.events.next(m);let I=LR(this.rootComponentType).snapshot;return this.currentTransition=r=Ee(H({},o),{targetSnapshot:I,urlAfterRedirects:u,extras:Ee(H({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(O=>(O.finalUrl=u,O)),ye(r)}else return this.events.next(new bi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",_u.IgnoredByUrlHandlingStrategy)),o.resolve(!1),gn}),jt(o=>{let s=new hp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ie(o=>(this.currentTransition=r=Ee(H({},o),{guards:GU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),nB(this.environmentInjector,o=>this.events.next(o)),jt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw bp(this.urlSerializer,o.guardsResult);let s=new fp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),yn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",hn.GuardRejected),!1)),AC(o=>{if(o.guards.canActivateChecks.length!==0)return ye(o).pipe(jt(s=>{let a=new pp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Vt(s=>{let a=!1;return ye(s).pipe(DB(this.paramsInheritanceStrategy,this.environmentInjector),jt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",hn.NoDataFromResolver)}}))}),jt(s=>{let a=new gp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),AC(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=ac(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(jt(h=>{a.component=h}),Ie(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return ph(s(o.targetSnapshot.root)).pipe(Ji(null),si(1))}),AC(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?st(a).pipe(Ie(()=>r)):ye(r)}),Ie(o=>{let s=UU(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ee(H({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),jt(()=>{this.events.next(new Eu)}),zU(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),si(1),mh(new Se(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(yn(()=>!i&&!r.targetRouterState),jt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",hn.Aborted)}))),jt({next:o=>{i=!0,this.lastSuccessfulNavigation=nn(this.currentNavigation),this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),mh(this.transitionAbortWithErrorSubject.pipe(jt(o=>{throw o}))),qo(()=>{i||this.cancelNavigationTransition(r,"",hn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),cr(o=>{if(this.destroyed)return r.resolve(!1),gn;if(i=!0,HR(o))this.events.next(new zr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),HU(o)?this.events.next(new ic(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new rc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ut(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof oc){let{message:c,cancellationCode:u}=bp(this.urlSerializer,a);this.events.next(new zr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new ic(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return gn}))}))}cancelNavigationTransition(n,r,i){let o=new zr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=nn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NB(t){return t!==mu}var rM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>F(kB),providedIn:"root"})}return t})(),Dp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},kB=(()=>{class t extends Dp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iM=(()=>{class t{urlSerializer=F(Au);options=F(uc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Ya);urlHandlingStrategy=F(Mp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Gr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Gr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=LR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>F(OB),providedIn:"root"})}return t})(),OB=(()=>{class t extends iM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Is?this.updateStateMemento():n instanceof bi?this.commitTransition(r):n instanceof Cu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Eu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof zr&&n.code!==hn.SupersededByNewNavigation&&n.code!==hn.Redirect?this.restoreHistory(r):n instanceof rc?this.restoreHistory(r,!0):n instanceof Ti&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WC(t,e){t.events.pipe(yn(n=>n instanceof Ti||n instanceof zr||n instanceof rc||n instanceof bi),Ie(n=>n instanceof Ti||n instanceof bi?0:(n instanceof zr?n.code===hn.Redirect||n.code===hn.SupersededByNewNavigation:!1)?2:1),yn(n=>n!==2),si(1)).subscribe(()=>{e()})}var FB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(kf);stateManager=F(iM);options=F(uc,{optional:!0})||{};pendingTasks=F(Nr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(nM);urlSerializer=F(Au);location=F(Ya);urlHandlingStrategy=F(Mp);injector=F(ot);_events=new Et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(rM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(xu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(Ap,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new gt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=nn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zr&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ti)this.navigated=!0;else if(r instanceof ic){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||NB(i.source)},s);this.scheduleNavigation(a,mu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}FU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(kn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return nn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(GC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=NR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return kR(p,n,h,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=nc(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,mu,null,r)}navigate(n,r={skipLocationChange:!1}){return VB(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(ui(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=H({},FB):r===!1?i=H({},LB):i=r,nc(n))return pR(this.currentUrlTree,n,i);let o=this.parseUrl(n);return pR(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return WC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new J(4008,!1)}var UB=new se("");function KC(t,...e){return ur([{provide:xu,multi:!0,useValue:t},[],{provide:qr,useFactory:BB,deps:[jn]},{provide:Of,multi:!0,useFactory:HB},e.map(n=>n.\u0275providers)])}function BB(t){return t.routerState.root}function $B(t,e){return{\u0275kind:t,\u0275providers:e}}function HB(){let t=F(et);return e=>{let n=t.get(Zn);if(e!==n.components[0])return;let r=t.get(jn),i=t.get(zB);t.get(GB)===1&&r.initialNavigation(),t.get(qB,null,{optional:!0})?.setUpPreloading(),t.get(UB,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zB=new se("",{factory:()=>new Et}),GB=new se("",{providedIn:"root",factory:()=>1});var qB=new se("");function QC(t){return $B(5,[{provide:uc,useValue:t}])}var sM=()=>{};var lM=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},KB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},xp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,m=u&63;c||(m=64,s||(g=64)),r.push(n[h],n[p],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new JC;let g=o<<2|a>>4;if(r.push(g),u!==64){let m=a<<4&240|u>>2;if(r.push(m),p!==64){let I=u<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},JC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},QB=function(t){let e=lM(t);return xp.encodeByteArray(e,!0)},Nu=function(t){return QB(t).replace(/\./g,"")},Pp=function(t){try{return xp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var YB=()=>XC().__FIREBASE_DEFAULTS__,JB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Pp(t[1]);return e&&JSON.parse(e)},Np=()=>{try{return sM()||YB()||JB()||ZB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uM=t=>{var e,n;return(n=(e=Np())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dM=t=>{let e=uM(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},e0=()=>{var t;return(t=Np())===null||t===void 0?void 0:t.config},hM=t=>{var e;return(e=Np())===null||e===void 0?void 0:e[`_${t}`]};var ws=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ts(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function t0(t){return w(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function fM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nu(JSON.stringify(n)),Nu(JSON.stringify(s)),""].join(".")}var Pu={};function XB(){let t={prod:[],emulator:[]};for(let e of Object.keys(Pu))Pu[e]?t.emulator.push(e):t.prod.push(e);return t}function e$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var aM=!1;function n0(t,e){if(typeof window>"u"||typeof document>"u"||!Ts(window.location.host)||Pu[t]===e||Pu[t]||aM)return;Pu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=XB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{aM=!0,s()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=e$(r),m=n("text"),I=document.getElementById(m)||document.createElement("span"),O=n("learnmore"),x=document.getElementById(O)||document.createElement("a"),j=n("preprendIcon"),Z=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ce=g.element;a(ce),h(x,O);let pe=u();c(Z,j),ce.append(Z,I,x,pe),document.body.appendChild(ce)}o?(I.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function t$(){var t;let e=(t=Np())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mM(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yM(){return!t$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ku(){try{return typeof indexedDB=="object"}catch{return!1}}function _M(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var n$="FirebaseError",tr=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yr.prototype.create)}},yr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?r$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new tr(i,a,r)}};function r$(t,e){return t.replace(i$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var i$=/\{\$([^}]+)}/g;function bs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(cM(o)&&cM(s)){if(!bs(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function cM(t){return t!==null&&typeof t=="object"}function r0(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CM(t,e){let n=new ZC(t,e);return n.subscribe.bind(n)}var ZC=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=YC),i.error===void 0&&(i.error=YC),i.complete===void 0&&(i.complete=YC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function o$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function YC(){}var zce=14400*1e3;function Tn(t){return t&&t._delegate?t._delegate:t}var fn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ss="[DEFAULT]";var i0=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ws;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a$(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:s$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function s$(t){return t===Ss?void 0:t}function a$(t){return t.instantiationMode==="EAGER"}var kp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new i0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var c$=[],Pe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(Pe||{}),l$={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},u$=Pe.INFO,d$={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},h$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=d$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wr=class{constructor(e){this.name=e,this._logLevel=u$,this._logHandler=h$,this._userLogHandler=null,c$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};var f$=(t,e)=>e.some(n=>t instanceof n),EM,IM;function p$(){return EM||(EM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g$(){return IM||(IM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var wM=new WeakMap,s0=new WeakMap,TM=new WeakMap,o0=new WeakMap,c0=new WeakMap;function m$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Kr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&wM.set(n,t)}).catch(()=>{}),c0.set(e,t),e}function v$(t){if(s0.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});s0.set(t,e)}var a0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return s0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bM(t){a0=t(a0)}function y$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Op(this),e,...n);return TM.set(r,e.sort?e.sort():[e]),Kr(r)}:g$().includes(t)?function(...e){return t.apply(Op(this),e),Kr(wM.get(this))}:function(...e){return Kr(t.apply(Op(this),e))}}function _$(t){return typeof t=="function"?y$(t):(t instanceof IDBTransaction&&v$(t),f$(t,p$())?new Proxy(t,a0):t)}function Kr(t){if(t instanceof IDBRequest)return m$(t);if(o0.has(t))return o0.get(t);let e=_$(t);return e!==t&&(o0.set(t,e),c0.set(e,t)),e}var Op=t=>c0.get(t);function DM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Kr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Kr(s.result),c.oldVersion,c.newVersion,Kr(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var C$=["get","getKey","getAll","getAllKeys","count"],E$=["put","add","delete","clear"],l0=new Map;function SM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(l0.get(e))return l0.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=E$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||C$.includes(n)))return;let o=function(s,...a){return w(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return l0.set(e,o),o}bM(t=>Ee(H({},t),{get:(e,n,r)=>SM(e,n)||t.get(e,n,r),has:(e,n)=>!!SM(e,n)||t.has(e,n)}));var d0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I$(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function I$(t){let e=t.getComponent();return e?.type==="VERSION"}var h0="@firebase/app",AM="0.13.2";var Di=new Wr("@firebase/app"),w$="@firebase/app-compat",T$="@firebase/analytics-compat",b$="@firebase/analytics",S$="@firebase/app-check-compat",D$="@firebase/app-check",A$="@firebase/auth",R$="@firebase/auth-compat",M$="@firebase/database",x$="@firebase/data-connect",P$="@firebase/database-compat",N$="@firebase/functions",k$="@firebase/functions-compat",O$="@firebase/installations",F$="@firebase/installations-compat",L$="@firebase/messaging",V$="@firebase/messaging-compat",j$="@firebase/performance",U$="@firebase/performance-compat",B$="@firebase/remote-config",$$="@firebase/remote-config-compat",H$="@firebase/storage",z$="@firebase/storage-compat",G$="@firebase/firestore",q$="@firebase/ai",W$="@firebase/firestore-compat",K$="firebase",Q$="11.10.0";var f0="[DEFAULT]",Y$={[h0]:"fire-core",[w$]:"fire-core-compat",[b$]:"fire-analytics",[T$]:"fire-analytics-compat",[D$]:"fire-app-check",[S$]:"fire-app-check-compat",[A$]:"fire-auth",[R$]:"fire-auth-compat",[M$]:"fire-rtdb",[x$]:"fire-data-connect",[P$]:"fire-rtdb-compat",[N$]:"fire-fn",[k$]:"fire-fn-compat",[O$]:"fire-iid",[F$]:"fire-iid-compat",[L$]:"fire-fcm",[V$]:"fire-fcm-compat",[j$]:"fire-perf",[U$]:"fire-perf-compat",[B$]:"fire-rc",[$$]:"fire-rc-compat",[H$]:"fire-gcs",[z$]:"fire-gcs-compat",[G$]:"fire-fst",[W$]:"fire-fst-compat",[q$]:"fire-vertex","fire-js":"fire-js",[K$]:"fire-js-all"};var Ou=new Map,J$=new Map,p0=new Map;function RM(t,e){try{t.container.addComponent(e)}catch(n){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _r(t){let e=t.name;if(p0.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;p0.set(e,t);for(let n of Ou.values())RM(n,t);for(let n of J$.values())RM(n,t);return!0}function Fp(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ai(t){return t==null?!1:t.settings!==void 0}var Z$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new yr("app","Firebase",Z$);var g0=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}};var dc=Q$;function y0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:f0,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _o.create("bad-app-name",{appName:String(i)});if(n||(n=e0()),!n)throw _o.create("no-options");let o=Ou.get(i);if(o){if(bs(n,o.options)&&bs(r,o.config))return o;throw _o.create("duplicate-app",{appName:i})}let s=new kp(i);for(let c of p0.values())s.addComponent(c);let a=new g0(n,r,s);return Ou.set(i,a),a}function hc(t=f0){let e=Ou.get(t);if(!e&&t===f0&&e0())return y0();if(!e)throw _o.create("no-app",{appName:t});return e}function Lp(){return Array.from(Ou.values())}function Ct(t,e,n){var r;let i=(r=Y$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(a.join(" "));return}_r(new fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var X$="firebase-heartbeat-database",eH=1,Fu="firebase-heartbeat-store",u0=null;function NM(){return u0||(u0=DM(X$,eH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fu)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),u0}function tH(t){return w(this,null,function*(){try{let n=(yield NM()).transaction(Fu),r=yield n.objectStore(Fu).get(kM(t));return yield n.done,r}catch(e){if(e instanceof tr)Di.warn(e.message);else{let n=_o.create("idb-get",{originalErrorMessage:e?.message});Di.warn(n.message)}}})}function MM(t,e){return w(this,null,function*(){try{let r=(yield NM()).transaction(Fu,"readwrite");yield r.objectStore(Fu).put(e,kM(t)),yield r.done}catch(n){if(n instanceof tr)Di.warn(n.message);else{let r=_o.create("idb-set",{originalErrorMessage:n?.message});Di.warn(r.message)}}})}function kM(t){return`${t.name}!${t.options.appId}`}var nH=1024,rH=30,m0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new v0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>rH){let s=oH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Di.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=xM(),{heartbeatsToSend:r,unsentEntries:i}=iH(this._heartbeatsCache.heartbeats),o=Nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Di.warn(n),""}})}};function xM(){return new Date().toISOString().substring(0,10)}function iH(t,e=nH){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),PM(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var v0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return ku()?_M().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield tH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function PM(t){return Nu(JSON.stringify({version:2,heartbeats:t})).length}function oH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function sH(t){_r(new fn("platform-logger",e=>new d0(e),"PRIVATE")),_r(new fn("heartbeat",e=>new m0(e),"PRIVATE")),Ct(h0,AM,t),Ct(h0,AM,"esm2017"),Ct("fire-js","")}sH("");var aH="firebase",cH="11.10.0";Ct(aH,cH,"app");function OM(t){t===void 0&&(t=F(et));let e=t.get(mi);return n=>new Se(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var As=new Zi("ANGULARFIRE2_VERSION");function jp(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var pc=(t,e)=>{let n=e?[e]:Lp(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},fc=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(fc||{}),FM=Y_()&&typeof Zone<"u"?fc.WARN:fc.SILENT;var Vp=class{zone;delegate;constructor(e,n=nv){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Rs=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=F(Le);this.outsideAngular=n.runOutsideAngular(()=>new Vp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Vp(typeof Zone>"u"?void 0:Zone.current,tv))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LM=!1;function lH(t,e){!LM&&(FM>fc.SILENT||Y_())&&(LM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),FM>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function uH(t){let e=F(Le,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ds(t){let e=F(Le,{optional:!0});return e?e.run(()=>t()):t()}var dH=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),ut(n,()=>Ds(()=>t.apply(void 0,r)))),Bn=(t,e,n)=>(n||=e?fc.WARN:fc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=F(Rs),s=F(mi),a=F(ot)}catch{return lH(t,n),t.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Ds(()=>s.add())),i[u]=dH(i[u],r,a));let c=uH(()=>t.apply(this,i));return e?c instanceof Se?c.pipe(Ki(o.outsideAngular),Wi(o.insideAngular),OM(a)):c instanceof Promise?Ds(()=>{let u=s.add();return new Promise((h,p)=>{c.then(g=>ut(a,()=>Ds(()=>h(g))),g=>ut(a,()=>Ds(()=>p(g)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Ds(()=>c):c instanceof Se?c.pipe(Ki(o.outsideAngular),Wi(o.insideAngular)):Ds(()=>c)});var Ms=class{constructor(e){return e}},Lu=class{constructor(){return Lp()}};function hH(t){return t&&t.length===1?t[0]:new Ms(hc())}var _0=new se("angularfire2._apps"),fH={provide:Ms,useFactory:hH,deps:[[new Fr,_0]]},pH={provide:Lu,deps:[[new Fr,_0]]};function gH(t){return(e,n)=>{let r=n.get(hs);Ct("angularfire",As.full,"core"),Ct("angularfire",As.full,"app"),Ct("angular",Cv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ms(i)}}function VM(t,...e){return ur([fH,pH,{provide:_0,useFactory:gH(t),multi:!0,deps:[Le,et,Rs,...e]}])}var jM=Bn(y0,!0);var mH=new Map,vH={activated:!1,tokenObservers:[]},yH={initialized:!1,enabled:!1};function Cr(t){return mH.get(t)||Object.assign({},vH)}function HM(){return yH}var _H="https://content-firebaseappcheck.googleapis.com/v1";var CH="exchangeDebugToken",UM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Wle=1440*60*1e3;var I0=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new ws,this.pending.promise.catch(n=>{}),yield EH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ws,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function EH(t){return new Promise(e=>{setTimeout(e,t)})}var IH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Co=new yr("appCheck","AppCheck",IH);function zM(t){if(!Cr(t).activated)throw Co.create("use-before-activation",{appName:t.name})}function GM(r,i){return w(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(m){throw Co.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Co.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw Co.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Co.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function qM(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${_H}/projects/${n}/apps/${r}:${CH}?key=${i}`,body:{debug_token:e}}}var wH="firebase-app-check-database",TH=1,w0="firebase-app-check-store";var Up=null;function bH(){return Up||(Up=new Promise((t,e)=>{try{let n=indexedDB.open(wH,TH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Co.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(w0,{keyPath:"compositeKey"})}}}catch(n){e(Co.create("storage-open",{originalErrorMessage:n?.message}))}}),Up)}function SH(t,e){return DH(AH(t),e)}function DH(t,e){return w(this,null,function*(){let r=(yield bH()).transaction(w0,"readwrite"),o=r.objectStore(w0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Co.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function AH(t){return`${t.options.appId}-${t.name}`}var Vu=new Wr("@firebase/app-check");function C0(t,e){return ku()?SH(t,e).catch(n=>{Vu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function WM(){return HM().enabled}function KM(){return w(this,null,function*(){let t=HM();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var RH={error:"UNKNOWN_ERROR"};function MH(t){return xp.encodeString(JSON.stringify(t),!1)}function T0(t,e=!1,n=!1){return w(this,null,function*(){let r=t.app;zM(r);let i=Cr(r),o=i.token,s;if(o&&!ju(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(ju(u)?o=u:yield C0(r,void 0))}if(!e&&o&&ju(o))return{token:o.token};let a=!1;if(WM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=GM(qM(r,yield KM()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield C0(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Vu.warn(u.message):n&&Vu.error(u),E0(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Cr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Vu.warn(u.message):n&&Vu.error(u),s=u}let c;return o?s?ju(o)?c={token:o.token,internalError:s}:c=E0(s):(c={token:o.token},i.token=o,yield C0(r,o)):c=E0(s),a&&kH(r,c),c})}function xH(t){return w(this,null,function*(){let e=t.app;zM(e);let{provider:n}=Cr(e);if(WM()){let r=yield KM(),{token:i}=yield GM(qM(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function PH(t,e,n,r){let{app:i}=t,o=Cr(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ju(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),BM(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>BM(t))}function QM(t,e){let n=Cr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function BM(t){let{app:e}=t,n=Cr(e),r=n.tokenRefresher;r||(r=NH(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function NH(t){let{app:e}=t;return new I0(()=>w(null,null,function*(){let n=Cr(e),r;if(n.token?r=yield T0(t,!0):r=yield T0(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Cr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},UM.RETRIAL_MIN_WAIT,UM.RETRIAL_MAX_WAIT)}function kH(t,e){let n=Cr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ju(t){return t.expireTimeMillis-Date.now()>0}function E0(t){return{token:MH(RH),error:t}}var b0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Cr(this.app);for(let n of e)QM(this.app,n.next);return Promise.resolve()}};function OH(t,e){return new b0(t,e)}function FH(t){return{getToken:e=>T0(t,e),getLimitedUseToken:()=>xH(t),addTokenListener:e=>PH(t,"INTERNAL",e),removeTokenListener:e=>QM(t.app,e)}}var LH="@firebase/app-check",VH="0.10.1";var jH="app-check",$M="app-check-internal";function UH(){_r(new fn(jH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return OH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider($M).initialize()})),_r(new fn($M,t=>{let e=t.getProvider("app-check").getImmediate();return FH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ct(LH,VH)}UH();var BH="app-check";var Bp=class{constructor(){return pc(BH)}};var $H=["localhost","0.0.0.0","127.0.0.1"],sue=typeof window<"u"&&$H.includes(window.location.hostname);function rx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ix=rx,ox=new yr("auth","Firebase",rx());var Gp=new Wr("@firebase/auth");function zH(t,...e){Gp.logLevel<=Pe.WARN&&Gp.warn(`Auth (${dc}): ${t}`,...e)}function Hp(t,...e){Gp.logLevel<=Pe.ERROR&&Gp.error(`Auth (${dc}): ${t}`,...e)}function YM(t,...e){throw L0(t,...e)}function F0(t,...e){return L0(t,...e)}function sx(t,e,n){let r=Object.assign(Object.assign({},ix()),{[e]:n});return new yr("auth","Firebase",r).create(e,{appName:t.name})}function zp(t){return sx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L0(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ox.create(t,...e)}function He(t,e,...n){if(!t)throw L0(e,...n)}function Uu(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hp(e),new Error(e)}function qp(t,e){t||Uu(e)}function GH(){return JM()==="http:"||JM()==="https:"}function JM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GH()||mM()||"connection"in navigator)?navigator.onLine:!0}function WH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ns=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,qp(n>e,"Short delay should be less than long delay!"),this.isMobile=pM()||vM()}get(){return qH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function KH(t,e){qp(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Wp=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Uu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Uu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Uu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JH=new Ns(3e4,6e4);function ax(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Zp(o,s,a,c){return w(this,arguments,function*(t,e,n,r,i={}){return cx(t,i,()=>w(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let p=r0(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:g},u);return gM()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Ts(t.emulatorConfig.host)&&(m.credentials="include"),Wp.fetch()(yield lx(t,t.config.apiHost,n,p),m)}))})}function cx(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},QH),e);try{let i=new A0(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw $p(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $p(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw $p(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw $p(t,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sx(t,h,u);YM(t,h)}}catch(i){if(i instanceof tr)throw i;YM(t,"network-request-failed",{message:String(i)})}})}function lx(t,e,n,r){return w(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?KH(t.config,i):`${t.config.apiScheme}://${i}`;return YH.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var A0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(F0(this.auth,"network-request-failed")),JH.get())})}};function $p(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=F0(t,e,r);return i.customData._tokenResponse=n,i}function ZH(t,e){return w(this,null,function*(){return Zp(t,"POST","/v1/accounts:delete",e)})}function Kp(t,e){return w(this,null,function*(){return Zp(t,"POST","/v1/accounts:lookup",e)})}function Bu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function V0(t,e=!1){return w(this,null,function*(){let n=Tn(t),r=yield n.getIdToken(e),i=ux(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Bu(S0(i.auth_time)),issuedAtTime:Bu(S0(i.iat)),expirationTime:Bu(S0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function S0(t){return Number(t)*1e3}function ux(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Pp(n);return i?JSON.parse(i):(Hp("Failed to decode base64 JWT payload"),null)}catch(i){return Hp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ZM(t){let e=ux(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function R0(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof tr&&XH(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function XH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var M0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Hu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Qp(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield R0(t,Kp(n,{idToken:r}));He(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?dx(o.providerUserInfo):[],a=e4(t.providerData,s),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!a?.length,h=c?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Hu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function j0(t){return w(this,null,function*(){let e=Tn(t);yield Qp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function e4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dx(t){return t.map(e=>{var{providerId:n}=e,r=rv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function t4(t,e){return w(this,null,function*(){let n=yield cx(t,{},()=>w(null,null,function*(){let r=r0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield lx(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ts(t.emulatorConfig.host)&&(c.credentials="include"),Wp.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function n4(t,e){return w(this,null,function*(){return Zp(t,"POST","/v2/accounts:revokeToken",ax(t,e))})}var $u=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");let n=ZM(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield t4(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(He(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(He(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Uu("not implemented")}};function Eo(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var xs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=rv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield R0(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return V0(this,e)}reload(){return j0(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Qp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Ai(this.auth.app))return Promise.reject(zp(this.auth));let e=yield this.getIdToken();return yield R0(this,ZH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=n.photoURL)!==null&&s!==void 0?s:void 0,O=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,j=(u=n.createdAt)!==null&&u!==void 0?u:void 0,Z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ce,emailVerified:pe,isAnonymous:Ke,providerData:Re,stsTokenManager:S}=n;He(ce&&S,e,"internal-error");let y=$u.fromJSON(this.name,S);He(typeof ce=="string",e,"internal-error"),Eo(p,e.name),Eo(g,e.name),He(typeof pe=="boolean",e,"internal-error"),He(typeof Ke=="boolean",e,"internal-error"),Eo(m,e.name),Eo(I,e.name),Eo(O,e.name),Eo(x,e.name),Eo(j,e.name),Eo(Z,e.name);let C=new t({uid:ce,auth:e,email:g,emailVerified:pe,displayName:p,isAnonymous:Ke,photoURL:I,phoneNumber:m,tenantId:O,stsTokenManager:y,createdAt:j,lastLoginAt:Z});return Re&&Array.isArray(Re)&&(C.providerData=Re.map(T=>Object.assign({},T))),x&&(C._redirectEventId=x),C}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new $u;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qp(o),o})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];He(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?dx(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new $u;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var XM=new Map;function Ps(t){qp(t instanceof Function,"Expected a class definition");let e=XM.get(t);return e?(qp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XM.set(t,e),e)}var r4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),x0=r4;function D0(t,e,n){return`firebase:${t}:${e}:${n}`}var Yp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=D0(this.userKey,i.apiKey,o),this.fullPersistenceKey=D0("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Kp(this.auth,{idToken:e}).catch(()=>{});return n?xs._fromGetAccountInfoResponse(this.auth,n,e):null}return xs._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Ps(x0),e,r);let i=(yield Promise.all(n.map(u=>w(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ps(x0),s=D0(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let h=yield u._get(s);if(h){let p;if(typeof h=="string"){let g=yield Kp(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield xs._fromGetAccountInfoResponse(e,g,h)}else p=xs._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(u=>w(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new t(o,e,r))})}};function ex(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l4(e))return"Blackberry";if(u4(e))return"Webos";if(o4(e))return"Safari";if((e.includes("chrome/")||s4(e))&&!e.includes("edge/"))return"Chrome";if(c4(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function i4(t=Un()){return/firefox\//i.test(t)}function o4(t=Un()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s4(t=Un()){return/crios\//i.test(t)}function a4(t=Un()){return/iemobile/i.test(t)}function c4(t=Un()){return/android/i.test(t)}function l4(t=Un()){return/blackberry/i.test(t)}function u4(t=Un()){return/webos/i.test(t)}function hx(t,e=[]){let n;switch(t){case"Browser":n=ex(Un());break;case"Worker":n=`${ex(Un())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dc}/${r}`}var P0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function d4(n){return w(this,arguments,function*(t,e={}){return Zp(t,"GET","/v2/passwordPolicy",ax(t,e))})}var h4=6,N0=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:h4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var k0=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jp(this),this.idTokenSubscription=new Jp(this),this.beforeStateQueue=new P0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ox,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ps(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Yp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield Kp(this,{idToken:e}),r=yield xs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(Ai(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Qp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=WH()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Ai(this.app))return Promise.reject(zp(this));let n=e?Tn(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Ai(this.app)?Promise.reject(zp(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ai(this.app)?Promise.reject(zp(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Ps(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield d4(this),n=new N0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield n4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ps(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=yield Yp.create(this,[Ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&zH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function f4(t){return Tn(t)}var Jp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=CM(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var p4={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g4(t){p4=t}function m4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function v4(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var yue=m4("rcb"),_ue=new Ns(3e4,6e4);var Cue=new Ns(2e3,1e4);var Eue=600*1e3;var Iue=new Ns(3e4,6e4);var wue=new Ns(5e3,15e3);var Tue=encodeURIComponent("fac");var tx="@firebase/auth",nx="1.10.8";var O0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function y4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _4(t){_r(new fn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;He(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hx(t)},u=new k0(r,i,o,c);return v4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_r(new fn("auth-internal",e=>{let n=f4(e.getProvider("auth").getImmediate());return(r=>new O0(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ct(tx,nx,y4(t)),Ct(tx,nx,"esm2017")}var C4=300,bue=hM("authIdTokenMaxAge")||C4;function E4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}g4({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=F0("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",E4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_4("Browser");var _z="auth";var Xp=class{constructor(){return pc(_z)}};var fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},px={};var Ri,U0;(function(){var t;function e(S,y){function C(){}C.prototype=y.prototype,S.D=y.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(T,D,M){for(var E=Array(arguments.length-2),ri=2;ri<arguments.length;ri++)E[ri-2]=arguments[ri];return y.prototype[D].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,y,C){C||(C=0);var T=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)T[D]=y.charCodeAt(C++)|y.charCodeAt(C++)<<8|y.charCodeAt(C++)<<16|y.charCodeAt(C++)<<24;else for(D=0;16>D;++D)T[D]=y[C++]|y[C++]<<8|y[C++]<<16|y[C++]<<24;y=S.g[0],C=S.g[1],D=S.g[2];var M=S.g[3],E=y+(M^C&(D^M))+T[0]+3614090360&4294967295;y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[1]+3905402710&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[2]+606105819&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[3]+3250441966&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(M^C&(D^M))+T[4]+4118548399&4294967295,y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[5]+1200080426&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[6]+2821735955&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[7]+4249261313&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(M^C&(D^M))+T[8]+1770035416&4294967295,y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[9]+2336552879&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[10]+4294925233&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[11]+2304563134&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(M^C&(D^M))+T[12]+1804603682&4294967295,y=C+(E<<7&4294967295|E>>>25),E=M+(D^y&(C^D))+T[13]+4254626195&4294967295,M=y+(E<<12&4294967295|E>>>20),E=D+(C^M&(y^C))+T[14]+2792965006&4294967295,D=M+(E<<17&4294967295|E>>>15),E=C+(y^D&(M^y))+T[15]+1236535329&4294967295,C=D+(E<<22&4294967295|E>>>10),E=y+(D^M&(C^D))+T[1]+4129170786&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[6]+3225465664&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[11]+643717713&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[0]+3921069994&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(D^M&(C^D))+T[5]+3593408605&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[10]+38016083&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[15]+3634488961&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[4]+3889429448&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(D^M&(C^D))+T[9]+568446438&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[14]+3275163606&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[3]+4107603335&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[8]+1163531501&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(D^M&(C^D))+T[13]+2850285829&4294967295,y=C+(E<<5&4294967295|E>>>27),E=M+(C^D&(y^C))+T[2]+4243563512&4294967295,M=y+(E<<9&4294967295|E>>>23),E=D+(y^C&(M^y))+T[7]+1735328473&4294967295,D=M+(E<<14&4294967295|E>>>18),E=C+(M^y&(D^M))+T[12]+2368359562&4294967295,C=D+(E<<20&4294967295|E>>>12),E=y+(C^D^M)+T[5]+4294588738&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[8]+2272392833&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[11]+1839030562&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[14]+4259657740&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(C^D^M)+T[1]+2763975236&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[4]+1272893353&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[7]+4139469664&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[10]+3200236656&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(C^D^M)+T[13]+681279174&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[0]+3936430074&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[3]+3572445317&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[6]+76029189&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(C^D^M)+T[9]+3654602809&4294967295,y=C+(E<<4&4294967295|E>>>28),E=M+(y^C^D)+T[12]+3873151461&4294967295,M=y+(E<<11&4294967295|E>>>21),E=D+(M^y^C)+T[15]+530742520&4294967295,D=M+(E<<16&4294967295|E>>>16),E=C+(D^M^y)+T[2]+3299628645&4294967295,C=D+(E<<23&4294967295|E>>>9),E=y+(D^(C|~M))+T[0]+4096336452&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[7]+1126891415&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[14]+2878612391&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[5]+4237533241&4294967295,C=D+(E<<21&4294967295|E>>>11),E=y+(D^(C|~M))+T[12]+1700485571&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[3]+2399980690&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[10]+4293915773&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[1]+2240044497&4294967295,C=D+(E<<21&4294967295|E>>>11),E=y+(D^(C|~M))+T[8]+1873313359&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[15]+4264355552&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[6]+2734768916&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[13]+1309151649&4294967295,C=D+(E<<21&4294967295|E>>>11),E=y+(D^(C|~M))+T[4]+4149444226&4294967295,y=C+(E<<6&4294967295|E>>>26),E=M+(C^(y|~D))+T[11]+3174756917&4294967295,M=y+(E<<10&4294967295|E>>>22),E=D+(y^(M|~C))+T[2]+718787259&4294967295,D=M+(E<<15&4294967295|E>>>17),E=C+(M^(D|~y))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var C=y-this.blockSize,T=this.B,D=this.h,M=0;M<y;){if(D==0)for(;M<=C;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<y;)if(T[D++]=S.charCodeAt(M++),D==this.blockSize){i(this,T),D=0;break}}else for(;M<y;)if(T[D++]=S[M++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var C=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=C&255,C/=256;for(this.u(S),S=Array(16),y=C=0;4>y;++y)for(var T=0;32>T;T+=8)S[C++]=this.g[y]>>>T&255;return S};function o(S,y){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=y(S)}function s(S,y){this.h=y;for(var C=[],T=!0,D=S.length-1;0<=D;D--){var M=S[D]|0;T&&M==y||(C[D]=M,T=!1)}this.g=C}var a={};function c(S){return-128<=S&&128>S?o(S,function(y){return new s([y|0],0>y?-1:0)}):new s([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return x(u(-S));for(var y=[],C=1,T=0;S>=C;T++)y[T]=S/C|0,C*=4294967296;return new s(y,0)}function h(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return x(h(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(y,8)),T=p,D=0;D<S.length;D+=8){var M=Math.min(8,S.length-D),E=parseInt(S.substring(D,D+M),y);8>M?(M=u(Math.pow(y,M)),T=T.j(M).add(u(E))):(T=T.j(C),T=T.add(u(E)))}return T}var p=c(0),g=c(1),m=c(16777216);t=s.prototype,t.m=function(){if(O(this))return-x(this).m();for(var S=0,y=1,C=0;C<this.g.length;C++){var T=this.i(C);S+=(0<=T?T:4294967296+T)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(O(this))return"-"+x(this).toString(S);for(var y=u(Math.pow(S,6)),C=this,T="";;){var D=pe(C,y).g;C=j(C,D.j(y));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=D,I(C))return M+T;for(;6>M.length;)M="0"+M;T=M+T}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function I(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function O(S){return S.h==-1}t.l=function(S){return S=j(this,S),O(S)?-1:I(S)?0:1};function x(S){for(var y=S.g.length,C=[],T=0;T<y;T++)C[T]=~S.g[T];return new s(C,~S.h).add(g)}t.abs=function(){return O(this)?x(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0,D=0;D<=y;D++){var M=T+(this.i(D)&65535)+(S.i(D)&65535),E=(M>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);T=E>>>16,M&=65535,E&=65535,C[D]=E<<16|M}return new s(C,C[C.length-1]&-2147483648?-1:0)};function j(S,y){return S.add(x(y))}t.j=function(S){if(I(this)||I(S))return p;if(O(this))return O(S)?x(this).j(x(S)):x(x(this).j(S));if(O(S))return x(this.j(x(S)));if(0>this.l(m)&&0>S.l(m))return u(this.m()*S.m());for(var y=this.g.length+S.g.length,C=[],T=0;T<2*y;T++)C[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<S.g.length;D++){var M=this.i(T)>>>16,E=this.i(T)&65535,ri=S.i(D)>>>16,Qc=S.i(D)&65535;C[2*T+2*D]+=E*Qc,Z(C,2*T+2*D),C[2*T+2*D+1]+=M*Qc,Z(C,2*T+2*D+1),C[2*T+2*D+1]+=E*ri,Z(C,2*T+2*D+1),C[2*T+2*D+2]+=M*ri,Z(C,2*T+2*D+2)}for(T=0;T<y;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=y;T<2*y;T++)C[T]=0;return new s(C,0)};function Z(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function ce(S,y){this.g=S,this.h=y}function pe(S,y){if(I(y))throw Error("division by zero");if(I(S))return new ce(p,p);if(O(S))return y=pe(x(S),y),new ce(x(y.g),x(y.h));if(O(y))return y=pe(S,x(y)),new ce(x(y.g),y.h);if(30<S.g.length){if(O(S)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var C=g,T=y;0>=T.l(S);)C=Ke(C),T=Ke(T);var D=Re(C,1),M=Re(T,1);for(T=Re(T,2),C=Re(C,2);!I(T);){var E=M.add(T);0>=E.l(S)&&(D=D.add(C),M=E),T=Re(T,1),C=Re(C,1)}return y=j(S,D.j(y)),new ce(D,y)}for(D=p;0<=S.l(y);){for(C=Math.max(1,Math.floor(S.m()/y.m())),T=Math.ceil(Math.log(C)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),M=u(C),E=M.j(y);O(E)||0<E.l(S);)C-=T,M=u(C),E=M.j(y);I(M)&&(M=g),D=D.add(M),S=j(S,E)}return new ce(D,S)}t.A=function(S){return pe(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0;T<y;T++)C[T]=this.i(T)&S.i(T);return new s(C,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0;T<y;T++)C[T]=this.i(T)|S.i(T);return new s(C,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),C=[],T=0;T<y;T++)C[T]=this.i(T)^S.i(T);return new s(C,this.h^S.h)};function Ke(S){for(var y=S.g.length+1,C=[],T=0;T<y;T++)C[T]=S.i(T)<<1|S.i(T-1)>>>31;return new s(C,S.h)}function Re(S,y){var C=y>>5;y%=32;for(var T=S.g.length-C,D=[],M=0;M<T;M++)D[M]=0<y?S.i(M+C)>>>y|S.i(M+C+1)<<32-y:S.i(M+C);return new s(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U0=px.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Ri=px.Integer=s}).apply(typeof fx<"u"?fx:typeof self<"u"?self:typeof window<"u"?window:{});var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mi={};var B0,Cz,gc,$0,zu,tg,H0,z0,G0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,f){return l==Array.prototype||l==Object.prototype||(l[d]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof eg=="object"&&eg];for(var d=0;d<l.length;++d){var f=l[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var f=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var A=l[v];if(!(A in f))break e;f=f[A]}l=l[l.length-1],v=f[l],d=d(v),d!=v&&d!=null&&e(f,l,{configurable:!0,writable:!0,value:d})}}function o(l,d){l instanceof String&&(l+="");var f=0,v=!1,A={next:function(){if(!v&&f<l.length){var N=f++;return{value:d(N,l[N]),done:!1}}return v=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,f){return l.call.apply(l.bind,arguments)}function p(l,d,f){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,v),l.apply(d,A)}}return function(){return l.apply(d,arguments)}}function g(l,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(l,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function I(l,d){function f(){}f.prototype=d.prototype,l.aa=d.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(v,A,N){for(var Q=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)Q[Xe-2]=arguments[Xe];return d.prototype[A].apply(v,Q)}}function O(l){let d=l.length;if(0<d){let f=Array(d);for(let v=0;v<d;v++)f[v]=l[v];return f}return[]}function x(l,d){for(let f=1;f<arguments.length;f++){let v=arguments[f];if(c(v)){let A=l.length||0,N=v.length||0;l.length=A+N;for(let Q=0;Q<N;Q++)l[A+Q]=v[Q]}else l.push(v)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(l){return/^[\s\xa0]*$/.test(l)}function ce(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function pe(l){return pe[" "](l),l}pe[" "]=function(){};var Ke=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Re(l,d,f){for(let v in l)d.call(f,l[v],v,l)}function S(l,d){for(let f in l)d.call(void 0,l[f],f,l)}function y(l){let d={};for(let f in l)d[f]=l[f];return d}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,d){let f,v;for(let A=1;A<arguments.length;A++){v=arguments[A];for(f in v)l[f]=v[f];for(let N=0;N<C.length;N++)f=C[N],Object.prototype.hasOwnProperty.call(v,f)&&(l[f]=v[f])}}function D(l){var d=1;l=l.split(":");let f=[];for(;0<d&&l.length;)f.push(l.shift()),d--;return l.length&&f.push(l.join(":")),f}function M(l){a.setTimeout(()=>{throw l},0)}function E(){var l=hm;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ri{constructor(){this.h=this.g=null}add(d,f){let v=Qc.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Qc=new j(()=>new ck,l=>l.reset());class ck{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Yc,Jc=!1,hm=new ri,_w=()=>{let l=a.Promise.resolve(void 0);Yc=()=>{l.then(lk)}};var lk=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(f){M(f)}var d=Qc;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Jc=!1};function Bi(){this.s=this.s,this.C=this.C}Bi.prototype.s=!1,Bi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Yt(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var uk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return l})();function Zc(l,d){if(Yt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Ke){e:{try{pe(d.nodeName);var A=!0;break e}catch{}A=!1}A||(d=null)}}else f=="mouseover"?d=l.fromElement:f=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:dk[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Zc.aa.h.call(this)}}I(Zc,Yt);var dk={2:"touch",3:"pen",4:"mouse"};Zc.prototype.h=function(){Zc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Xc="closure_listenable_"+(1e6*Math.random()|0),hk=0;function fk(l,d,f,v,A){this.listener=l,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=A,this.key=++hk,this.da=this.fa=!1}function vd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function yd(l){this.src=l,this.g={},this.h=0}yd.prototype.add=function(l,d,f,v,A){var N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);var Q=pm(l,d,v,A);return-1<Q?(d=l[Q],f||(d.fa=!1)):(d=new fk(d,this.src,N,!!v,A),d.fa=f,l.push(d)),d};function fm(l,d){var f=d.type;if(f in l.g){var v=l.g[f],A=Array.prototype.indexOf.call(v,d,void 0),N;(N=0<=A)&&Array.prototype.splice.call(v,A,1),N&&(vd(d),l.g[f].length==0&&(delete l.g[f],l.h--))}}function pm(l,d,f,v){for(var A=0;A<l.length;++A){var N=l[A];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==v)return A}return-1}var gm="closure_lm_"+(1e6*Math.random()|0),mm={};function Cw(l,d,f,v,A){if(v&&v.once)return Iw(l,d,f,v,A);if(Array.isArray(d)){for(var N=0;N<d.length;N++)Cw(l,d[N],f,v,A);return null}return f=Cm(f),l&&l[Xc]?l.K(d,f,u(v)?!!v.capture:!!v,A):Ew(l,d,f,!1,v,A)}function Ew(l,d,f,v,A,N){if(!d)throw Error("Invalid event type");var Q=u(A)?!!A.capture:!!A,Xe=ym(l);if(Xe||(l[gm]=Xe=new yd(l)),f=Xe.add(d,f,v,Q,N),f.proxy)return f;if(v=pk(),f.proxy=v,v.src=l,v.listener=f,l.addEventListener)uk||(A=Q),A===void 0&&(A=!1),l.addEventListener(d.toString(),v,A);else if(l.attachEvent)l.attachEvent(Tw(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function pk(){function l(f){return d.call(l.src,l.listener,f)}let d=gk;return l}function Iw(l,d,f,v,A){if(Array.isArray(d)){for(var N=0;N<d.length;N++)Iw(l,d[N],f,v,A);return null}return f=Cm(f),l&&l[Xc]?l.L(d,f,u(v)?!!v.capture:!!v,A):Ew(l,d,f,!0,v,A)}function ww(l,d,f,v,A){if(Array.isArray(d))for(var N=0;N<d.length;N++)ww(l,d[N],f,v,A);else v=u(v)?!!v.capture:!!v,f=Cm(f),l&&l[Xc]?(l=l.i,d=String(d).toString(),d in l.g&&(N=l.g[d],f=pm(N,f,v,A),-1<f&&(vd(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete l.g[d],l.h--)))):l&&(l=ym(l))&&(d=l.g[d.toString()],l=-1,d&&(l=pm(d,f,v,A)),(f=-1<l?d[l]:null)&&vm(f))}function vm(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Xc])fm(d.i,l);else{var f=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(f,v,l.capture):d.detachEvent?d.detachEvent(Tw(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=ym(d))?(fm(f,l),f.h==0&&(f.src=null,d[gm]=null)):vd(l)}}}function Tw(l){return l in mm?mm[l]:mm[l]="on"+l}function gk(l,d){if(l.da)l=!0;else{d=new Zc(d,this);var f=l.listener,v=l.ha||l.src;l.fa&&vm(l),l=f.call(v,d)}return l}function ym(l){return l=l[gm],l instanceof yd?l:null}var _m="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cm(l){return typeof l=="function"?l:(l[_m]||(l[_m]=function(d){return l.handleEvent(d)}),l[_m])}function Jt(){Bi.call(this),this.i=new yd(this),this.M=this,this.F=null}I(Jt,Bi),Jt.prototype[Xc]=!0,Jt.prototype.removeEventListener=function(l,d,f,v){ww(this,l,d,f,v)};function an(l,d){var f,v=l.F;if(v)for(f=[];v;v=v.F)f.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new Yt(d,l);else if(d instanceof Yt)d.target=d.target||l;else{var A=d;d=new Yt(v,l),T(d,A)}if(A=!0,f)for(var N=f.length-1;0<=N;N--){var Q=d.g=f[N];A=_d(Q,v,!0,d)&&A}if(Q=d.g=l,A=_d(Q,v,!0,d)&&A,A=_d(Q,v,!1,d)&&A,f)for(N=0;N<f.length;N++)Q=d.g=f[N],A=_d(Q,v,!1,d)&&A}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var f=l.g[d],v=0;v<f.length;v++)vd(f[v]);delete l.g[d],l.h--}}this.F=null},Jt.prototype.K=function(l,d,f,v){return this.i.add(String(l),d,!1,f,v)},Jt.prototype.L=function(l,d,f,v){return this.i.add(String(l),d,!0,f,v)};function _d(l,d,f,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,N=0;N<d.length;++N){var Q=d[N];if(Q&&!Q.da&&Q.capture==f){var Xe=Q.listener,Gt=Q.ha||Q.src;Q.fa&&fm(l.i,Q),A=Xe.call(Gt,v)!==!1&&A}}return A&&!v.defaultPrevented}function bw(l,d,f){if(typeof l=="function")f&&(l=g(l,f));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Sw(l){l.g=bw(()=>{l.g=null,l.i&&(l.i=!1,Sw(l))},l.l);let d=l.h;l.h=null,l.m.apply(null,d)}class mk extends Bi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function el(l){Bi.call(this),this.h=l,this.g={}}I(el,Bi);var Dw=[];function Aw(l){Re(l.g,function(d,f){this.g.hasOwnProperty(f)&&vm(d)},l),l.g={}}el.prototype.N=function(){el.aa.N.call(this),Aw(this)},el.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Em=a.JSON.stringify,vk=a.JSON.parse,yk=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Im(){}Im.prototype.h=null;function Rw(l){return l.h||(l.h=l.i())}function Mw(){}var tl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wm(){Yt.call(this,"d")}I(wm,Yt);function Tm(){Yt.call(this,"c")}I(Tm,Yt);var Oo={},xw=null;function Cd(){return xw=xw||new Jt}Oo.La="serverreachability";function Pw(l){Yt.call(this,Oo.La,l)}I(Pw,Yt);function nl(l){let d=Cd();an(d,new Pw(d))}Oo.STAT_EVENT="statevent";function Nw(l,d){Yt.call(this,Oo.STAT_EVENT,l),this.stat=d}I(Nw,Yt);function cn(l){let d=Cd();an(d,new Nw(d,l))}Oo.Ma="timingevent";function kw(l,d){Yt.call(this,Oo.Ma,l),this.size=d}I(kw,Yt);function rl(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function il(){this.g=!0}il.prototype.xa=function(){this.g=!1};function _k(l,d,f,v,A,N){l.info(function(){if(l.g)if(N)for(var Q="",Xe=N.split("&"),Gt=0;Gt<Xe.length;Gt++){var Ue=Xe[Gt].split("=");if(1<Ue.length){var Zt=Ue[0];Ue=Ue[1];var Xt=Zt.split("_");Q=2<=Xt.length&&Xt[1]=="type"?Q+(Zt+"="+Ue+"&"):Q+(Zt+"=redacted&")}}else Q=null;else Q=N;return"XMLHTTP REQ ("+v+") [attempt "+A+"]: "+d+`
`+f+`
`+Q})}function Ck(l,d,f,v,A,N,Q){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+A+"]: "+d+`
`+f+`
`+N+" "+Q})}function Xs(l,d,f,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ik(l,f)+(v?" "+v:"")})}function Ek(l,d){l.info(function(){return"TIMEOUT: "+d})}il.prototype.info=function(){};function Ik(l,d){if(!l.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var v=f[l];if(!(2>v.length)){var A=v[1];if(Array.isArray(A)&&!(1>A.length)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(var Q=1;Q<A.length;Q++)A[Q]=""}}}}return Em(f)}catch{return d}}var Ed={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bm;function Id(){}I(Id,Im),Id.prototype.g=function(){return new XMLHttpRequest},Id.prototype.i=function(){return{}},bm=new Id;function $i(l,d,f,v){this.j=l,this.i=d,this.l=f,this.R=v||1,this.U=new el(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fw}function Fw(){this.i=null,this.g="",this.h=!1}var Lw={},Sm={};function Dm(l,d,f){l.L=1,l.v=Sd(ii(d)),l.m=f,l.P=!0,Vw(l,null)}function Vw(l,d){l.F=Date.now(),wd(l),l.A=ii(l.v);var f=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Zw(f.i,"t",v),l.C=0,f=l.j.J,l.h=new Fw,l.g=mT(l.j,f?d:null,!l.m),0<l.O&&(l.M=new mk(g(l.Y,l,l.g),l.O)),d=l.U,f=l.g,v=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(Dw[0]=A.toString()),A=Dw);for(var N=0;N<A.length;N++){var Q=Cw(f,A[N],v||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),nl(),_k(l.i,l.u,l.A,l.l,l.R,l.m)}$i.prototype.ca=function(l){l=l.target;let d=this.M;d&&oi(l)==3?d.j():this.Y(l)},$i.prototype.Y=function(l){try{if(l==this.g)e:{let Xt=oi(this.g);var d=this.g.Ba();let na=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||oT(this.g)))){this.J||Xt!=4||d==7||(d==8||0>=na?nl(3):nl(2)),Am(this);var f=this.g.Z();this.X=f;t:if(jw(this)){var v=oT(this.g);l="";var A=v.length,N=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fo(this),ol(this);var Q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(N&&d==A-1)});v.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=f==200,Ck(this.i,this.u,this.A,this.l,this.R,Xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Gt=this.g;if((Xe=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Xe)){var Ue=Xe;break t}}Ue=null}if(f=Ue)Xs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rm(this,f);else{this.o=!1,this.s=3,cn(12),Fo(this),ol(this);break e}}if(this.P){f=!0;let sr;for(;!this.J&&this.C<Q.length;)if(sr=wk(this,Q),sr==Sm){Xt==4&&(this.s=4,cn(14),f=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==Lw){this.s=4,cn(15),Xs(this.i,this.l,Q,"[Invalid Chunk]"),f=!1;break}else Xs(this.i,this.l,sr,null),Rm(this,sr);if(jw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||Q.length!=0||this.h.h||(this.s=1,cn(16),f=!1),this.o=this.o&&f,!f)Xs(this.i,this.l,Q,"[Invalid Chunked Response]"),Fo(this),ol(this);else if(0<Q.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Om(Zt),Zt.M=!0,cn(11))}}else Xs(this.i,this.l,Q,null),Rm(this,Q);Xt==4&&Fo(this),this.o&&!this.J&&(Xt==4?hT(this.j,this):(this.o=!1,wd(this)))}else Uk(this.g),f==400&&0<Q.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),Fo(this),ol(this)}}}catch{}finally{}};function jw(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function wk(l,d){var f=l.C,v=d.indexOf(`
`,f);return v==-1?Sm:(f=Number(d.substring(f,v)),isNaN(f)?Lw:(v+=1,v+f>d.length?Sm:(d=d.slice(v,v+f),l.C=v+f,d)))}$i.prototype.cancel=function(){this.J=!0,Fo(this)};function wd(l){l.S=Date.now()+l.I,Uw(l,l.I)}function Uw(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=rl(g(l.ba,l),d)}function Am(l){l.B&&(a.clearTimeout(l.B),l.B=null)}$i.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Ek(this.i,this.A),this.L!=2&&(nl(),cn(17)),Fo(this),this.s=2,ol(this)):Uw(this,this.S-l)};function ol(l){l.j.G==0||l.J||hT(l.j,l)}function Fo(l){Am(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Aw(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Rm(l,d){try{var f=l.j;if(f.G!=0&&(f.g==l||Mm(f.h,l))){if(!l.K&&Mm(f.h,l)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var A=v;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)xd(f),Rd(f);else break e;km(f),cn(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=rl(g(f.Za,f),6e3));if(1>=Hw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Vo(f,11)}else if((l.K||f.g==l)&&xd(f),!Z(d))for(A=f.Da.g.parse(d),d=0;d<A.length;d++){let Ue=A[d];if(f.T=Ue[0],Ue=Ue[1],f.G==2)if(Ue[0]=="c"){f.K=Ue[1],f.ia=Ue[2];let Zt=Ue[3];Zt!=null&&(f.la=Zt,f.j.info("VER="+f.la));let Xt=Ue[4];Xt!=null&&(f.Aa=Xt,f.j.info("SVER="+f.Aa));let na=Ue[5];na!=null&&typeof na=="number"&&0<na&&(v=1.5*na,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;let sr=l.g;if(sr){let Nd=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nd){var N=v.h;N.g||Nd.indexOf("spdy")==-1&&Nd.indexOf("quic")==-1&&Nd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(xm(N,N.h),N.h=null))}if(v.D){let Fm=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Fm&&(v.ya=Fm,it(v.I,v.D,Fm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var Q=l;if(v.qa=gT(v,v.J?v.ia:null,v.W),Q.K){zw(v.h,Q);var Xe=Q,Gt=v.L;Gt&&(Xe.I=Gt),Xe.B&&(Am(Xe),wd(Xe)),v.g=Q}else uT(v);0<f.i.length&&Md(f)}else Ue[0]!="stop"&&Ue[0]!="close"||Vo(f,7);else f.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Vo(f,7):Nm(f):Ue[0]!="noop"&&f.l&&f.l.ta(Ue),f.v=0)}}nl(4)}catch{}}var Tk=class{constructor(l,d){this.g=l,this.map=d}};function Bw(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $w(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Hw(l){return l.h?1:l.g?l.g.size:0}function Mm(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function xm(l,d){l.g?l.g.add(d):l.h=d}function zw(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Bw.prototype.cancel=function(){if(this.i=Gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Gw(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(let f of l.g.values())d=d.concat(f.D);return d}return O(l.i)}function bk(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],f=l.length,v=0;v<f;v++)d.push(l[v]);return d}d=[],f=0;for(v in l)d[f++]=l[v];return d}function Sk(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var f=0;f<l;f++)d.push(f);return d}d=[],f=0;for(let v in l)d[f++]=v;return d}}}function qw(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var f=Sk(l),v=bk(l),A=v.length,N=0;N<A;N++)d.call(void 0,v[N],f&&f[N],l)}var Ww=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dk(l,d){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var v=l[f].indexOf("="),A=null;if(0<=v){var N=l[f].substring(0,v);A=l[f].substring(v+1)}else N=l[f];d(N,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Lo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Lo){this.h=l.h,Td(this,l.j),this.o=l.o,this.g=l.g,bd(this,l.s),this.l=l.l;var d=l.i,f=new cl;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Kw(this,f),this.m=l.m}else l&&(d=String(l).match(Ww))?(this.h=!1,Td(this,d[1]||"",!0),this.o=sl(d[2]||""),this.g=sl(d[3]||"",!0),bd(this,d[4]),this.l=sl(d[5]||"",!0),Kw(this,d[6]||"",!0),this.m=sl(d[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}Lo.prototype.toString=function(){var l=[],d=this.j;d&&l.push(al(d,Qw,!0),":");var f=this.g;return(f||d=="file")&&(l.push("//"),(d=this.o)&&l.push(al(d,Qw,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(al(f,f.charAt(0)=="/"?Mk:Rk,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",al(f,Pk)),l.join("")};function ii(l){return new Lo(l)}function Td(l,d,f){l.j=f?sl(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function bd(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Kw(l,d,f){d instanceof cl?(l.i=d,Nk(l.i,l.h)):(f||(d=al(d,xk)),l.i=new cl(d,l.h))}function it(l,d,f){l.i.set(d,f)}function Sd(l){return it(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function sl(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function al(l,d,f){return typeof l=="string"?(l=encodeURI(l).replace(d,Ak),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ak(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Qw=/[#\/\?@]/g,Rk=/[#\?:]/g,Mk=/[#\?]/g,xk=/[#\?@]/g,Pk=/#/g;function cl(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Hi(l){l.g||(l.g=new Map,l.h=0,l.i&&Dk(l.i,function(d,f){l.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=cl.prototype,t.add=function(l,d){Hi(this),this.i=null,l=ea(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(d),this.h+=1,this};function Yw(l,d){Hi(l),d=ea(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Jw(l,d){return Hi(l),d=ea(l,d),l.g.has(d)}t.forEach=function(l,d){Hi(this),this.g.forEach(function(f,v){f.forEach(function(A){l.call(d,A,v,this)},this)},this)},t.na=function(){Hi(this);let l=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){let A=l[v];for(let N=0;N<A.length;N++)f.push(d[v])}return f},t.V=function(l){Hi(this);let d=[];if(typeof l=="string")Jw(this,l)&&(d=d.concat(this.g.get(ea(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)d=d.concat(l[f])}return d},t.set=function(l,d){return Hi(this),this.i=null,l=ea(this,l),Jw(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Zw(l,d,f){Yw(l,d),0<f.length&&(l.i=null,l.g.set(ea(l,d),O(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];let N=encodeURIComponent(String(v)),Q=this.V(v);for(v=0;v<Q.length;v++){var A=N;Q[v]!==""&&(A+="="+encodeURIComponent(String(Q[v]))),l.push(A)}}return this.i=l.join("&")};function ea(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Nk(l,d){d&&!l.j&&(Hi(l),l.i=null,l.g.forEach(function(f,v){var A=v.toLowerCase();v!=A&&(Yw(this,v),Zw(this,A,f))},l)),l.j=d}function kk(l,d){let f=new il;if(a.Image){let v=new Image;v.onload=m(zi,f,"TestLoadImage: loaded",!0,d,v),v.onerror=m(zi,f,"TestLoadImage: error",!1,d,v),v.onabort=m(zi,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=m(zi,f,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function Ok(l,d){let f=new il,v=new AbortController,A=setTimeout(()=>{v.abort(),zi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(N=>{clearTimeout(A),N.ok?zi(f,"TestPingServer: ok",!0,d):zi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),zi(f,"TestPingServer: error",!1,d)})}function zi(l,d,f,v,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),v(f)}catch{}}function Fk(){this.g=new yk}function Lk(l,d,f){let v=f||"";try{qw(l,function(A,N){let Q=A;u(A)&&(Q=Em(A)),d.push(v+N+"="+encodeURIComponent(Q))})}catch(A){throw d.push(v+"type="+encodeURIComponent("_badmap")),A}}function ll(l){this.l=l.Ub||null,this.j=l.eb||!1}I(ll,Im),ll.prototype.g=function(){return new Dd(this.l,this.j)},ll.prototype.i=(function(l){return function(){return l}})({});function Dd(l,d){Jt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Dd,Jt),t=Dd.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,dl(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,dl(this)),this.g&&(this.readyState=3,dl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xw(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xw(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?ul(this):dl(this),this.readyState==3&&Xw(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ul(this))},t.Qa=function(l){this.g&&(this.response=l,ul(this))},t.ga=function(){this.g&&ul(this)};function ul(l){l.readyState=4,l.l=null,l.j=null,l.v=null,dl(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=d.next();return l.join(`\r
`)};function dl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Dd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function eT(l){let d="";return Re(l,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function Pm(l,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=eT(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):it(l,d,f))}function pt(l){Jt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(pt,Jt);var Vk=/^https?$/i,jk=["POST","PUT"];t=pt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bm.g(),this.v=this.o?Rw(this.o):Rw(bm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(N){tT(this,N);return}if(l=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var A in v)f.set(A,v[A]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let N of v.keys())f.set(N,v.get(N));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jk,d,void 0))||v||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,Q]of f)this.g.setRequestHeader(N,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iT(this),this.u=!0,this.g.send(l),this.u=!1}catch(N){tT(this,N)}};function tT(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,nT(l),Ad(l)}function nT(l){l.A||(l.A=!0,an(l,"complete"),an(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,an(this,"complete"),an(this,"abort"),Ad(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ad(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rT(this):this.bb())},t.bb=function(){rT(this)};function rT(l){if(l.h&&typeof s<"u"&&(!l.v[1]||oi(l)!=4||l.Z()!=2)){if(l.u&&oi(l)==4)bw(l.Ea,0,l);else if(an(l,"readystatechange"),oi(l)==4){l.h=!1;try{let Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=Q===0){var A=String(l.D).match(Ww)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),v=!Vk.test(A?A.toLowerCase():"")}f=v}if(f)an(l,"complete"),an(l,"success");else{l.m=6;try{var N=2<oi(l)?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.Z()+"]",nT(l)}}finally{Ad(l)}}}}function Ad(l,d){if(l.g){iT(l);let f=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||an(l,"ready");try{f.onreadystatechange=v}catch{}}}function iT(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function oi(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),vk(d)}};function oT(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(l){let d={};l=(l.g&&2<=oi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(Z(l[v]))continue;var f=D(l[v]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[A]||[];d[A]=N,N.push(f)}S(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hl(l,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||d}function sT(l){this.Aa=0,this.i=[],this.j=new il,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hl("baseRetryDelayMs",5e3,l),this.cb=hl("retryDelaySeedMs",1e4,l),this.Wa=hl("forwardChannelMaxRetries",2,l),this.wa=hl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Bw(l&&l.concurrentRequestLimit),this.Da=new Fk,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sT.prototype,t.la=8,t.G=1,t.connect=function(l,d,f,v){cn(0),this.W=l,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=gT(this,null,this.W),Md(this)};function Nm(l){if(aT(l),l.G==3){var d=l.U++,f=ii(l.I);if(it(f,"SID",l.K),it(f,"RID",d),it(f,"TYPE","terminate"),fl(l,f),d=new $i(l,l.j,d),d.L=2,d.v=Sd(ii(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=mT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),wd(d)}pT(l)}function Rd(l){l.g&&(Om(l),l.g.cancel(),l.g=null)}function aT(l){Rd(l),l.u&&(a.clearTimeout(l.u),l.u=null),xd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Md(l){if(!$w(l.h)&&!l.s){l.s=!0;var d=l.Ga;Yc||_w(),Jc||(Yc(),Jc=!0),hm.add(d,l),l.B=0}}function Bk(l,d){return Hw(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=rl(g(l.Ga,l,d),fT(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new $i(this,this.j,l),N=this.o;if(this.S&&(N?(N=y(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(A.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=lT(this,A,d),f=ii(this.I),it(f,"RID",l),it(f,"CVER",22),this.D&&it(f,"X-HTTP-Session-Id",this.D),fl(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(eT(N)))+"&"+d:this.m&&Pm(f,this.m,N)),xm(this.h,A),this.Ua&&it(f,"TYPE","init"),this.P?(it(f,"$req",d),it(f,"SID","null"),A.T=!0,Dm(A,f,null)):Dm(A,f,d),this.G=2}}else this.G==3&&(l?cT(this,l):this.i.length==0||$w(this.h)||cT(this))};function cT(l,d){var f;d?f=d.l:f=l.U++;let v=ii(l.I);it(v,"SID",l.K),it(v,"RID",f),it(v,"AID",l.T),fl(l,v),l.m&&l.o&&Pm(v,l.m,l.o),f=new $i(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),d&&(l.i=d.D.concat(l.i)),d=lT(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),xm(l.h,f),Dm(f,v,d)}function fl(l,d){l.H&&Re(l.H,function(f,v){it(d,v,f)}),l.l&&qw({},function(f,v){it(d,v,f)})}function lT(l,d,f){f=Math.min(l.i.length,f);var v=l.l?g(l.l.Na,l.l,l):null;e:{var A=l.i;let N=-1;for(;;){let Q=["count="+f];N==-1?0<f?(N=A[0].g,Q.push("ofs="+N)):N=0:Q.push("ofs="+N);let Xe=!0;for(let Gt=0;Gt<f;Gt++){let Ue=A[Gt].g,Zt=A[Gt].map;if(Ue-=N,0>Ue)N=Math.max(0,A[Gt].g-100),Xe=!1;else try{Lk(Zt,Q,"req"+Ue+"_")}catch{v&&v(Zt)}}if(Xe){v=Q.join("&");break e}}}return l=l.i.splice(0,f),d.D=l,v}function uT(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Yc||_w(),Jc||(Yc(),Jc=!0),hm.add(d,l),l.v=0}}function km(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=rl(g(l.Fa,l),fT(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,dT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=rl(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),Rd(this),dT(this))};function Om(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function dT(l){l.g=new $i(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=ii(l.qa);it(d,"RID","rpc"),it(d,"SID",l.K),it(d,"AID",l.T),it(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&it(d,"TO",l.ja),it(d,"TYPE","xmlhttp"),fl(l,d),l.m&&l.o&&Pm(d,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Sd(ii(d)),f.m=null,f.P=!0,Vw(f,l)}t.Za=function(){this.C!=null&&(this.C=null,Rd(this),km(this),cn(19))};function xd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function hT(l,d){var f=null;if(l.g==d){xd(l),Om(l),l.g=null;var v=2}else if(Mm(l.h,d))f=d.D,zw(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var A=l.B;v=Cd(),an(v,new kw(v,f)),Md(l)}else uT(l);else if(A=d.s,A==3||A==0&&0<d.X||!(v==1&&Bk(l,d)||v==2&&km(l)))switch(f&&0<f.length&&(d=l.h,d.i=d.i.concat(f)),A){case 1:Vo(l,5);break;case 4:Vo(l,10);break;case 3:Vo(l,6);break;default:Vo(l,2)}}}function fT(l,d){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*d}function Vo(l,d){if(l.j.info("Error code "+d),d==2){var f=g(l.fb,l),v=l.Xa;let A=!v;v=new Lo(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Td(v,"https"),Sd(v),A?kk(v.toString(),f):Ok(v.toString(),f)}else cn(2);l.G=0,l.l&&l.l.sa(d),pT(l),aT(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function pT(l){if(l.G=0,l.ka=[],l.l){let d=Gw(l.h);(d.length!=0||l.i.length!=0)&&(x(l.ka,d),x(l.ka,l.i),l.h.i.length=0,O(l.i),l.i.length=0),l.l.ra()}}function gT(l,d,f){var v=f instanceof Lo?ii(f):new Lo(f);if(v.g!="")d&&(v.g=d+"."+v.g),bd(v,v.s);else{var A=a.location;v=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var N=new Lo(null);v&&Td(N,v),d&&(N.g=d),A&&bd(N,A),f&&(N.l=f),v=N}return f=l.D,d=l.ya,f&&d&&it(v,f,d),it(v,"VER",l.la),fl(l,v),v}function mT(l,d,f){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new pt(new ll({eb:f})):new pt(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vT(){}t=vT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pd(){}Pd.prototype.g=function(l,d){return new Dn(l,d)};function Dn(l,d){Jt.call(this),this.g=new sT(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!Z(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new ta(this)}I(Dn,Jt),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Nm(this.g)},Dn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=Em(l),l=f);d.i.push(new Tk(d.Ya++,l)),d.G==3&&Md(d)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Nm(this.g),delete this.g,Dn.aa.N.call(this)};function yT(l){wm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(let f in d){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}I(yT,wm);function _T(){Tm.call(this),this.status=1}I(_T,Tm);function ta(l){this.g=l}I(ta,vT),ta.prototype.ua=function(){an(this.g,"a")},ta.prototype.ta=function(l){an(this.g,new yT(l))},ta.prototype.sa=function(l){an(this.g,new _T)},ta.prototype.ra=function(){an(this.g,"b")},Pd.prototype.createWebChannel=Pd.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,G0=Mi.createWebChannelTransport=function(){return new Pd},z0=Mi.getStatEventTarget=function(){return Cd()},H0=Mi.Event=Oo,tg=Mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ed.NO_ERROR=0,Ed.TIMEOUT=8,Ed.HTTP_ERROR=6,zu=Mi.ErrorCode=Ed,Ow.COMPLETE="complete",$0=Mi.EventType=Ow,Mw.EventType=tl,tl.OPEN="a",tl.CLOSE="b",tl.ERROR="c",tl.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,gc=Mi.WebChannel=Mw,Cz=Mi.FetchXmlHttpFactory=ll,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,B0=Mi.XhrIo=pt}).apply(typeof eg<"u"?eg:typeof self<"u"?self:typeof window<"u"?window:{});var gx="@firebase/firestore",mx="4.8.0";var $t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");var Oc="11.10.0";var js=new Wr("@firebase/firestore");function mc(){return js.logLevel}function oe(t,...e){if(js.logLevel<=Pe.DEBUG){let n=e.map(OI);js.debug(`Firestore (${Oc}): ${t}`,...n)}}function Pi(t,...e){if(js.logLevel<=Pe.ERROR){let n=e.map(OI);js.error(`Firestore (${Oc}): ${t}`,...n)}}function Do(t,...e){if(js.logLevel<=Pe.WARN){let n=e.map(OI);js.warn(`Firestore (${Oc}): ${t}`,...n)}}function OI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lP(t,r,n)}function lP(t,e,n){let r=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pi(r),new Error(r)}function qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||lP(e,i,r)}function Te(t,e){return t}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xi=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var cg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Y0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}},J0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Z0=class{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>w(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xi)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new cg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new $t(e)}},X0=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},eE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new X0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);let r=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ez(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function uP(){return new TextEncoder}var Yu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Ez(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function xe(t,e){return t<e?-1:t>e?1:0}function nE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return xe(r,i);{let o=uP(),s=Iz(o.encode(vx(t,n)),o.encode(vx(e,n)));return s!==0?s:xe(r,i)}}n+=r>65535?2:1}return xe(t.length,e.length)}function vx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Iz(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return xe(t[n],e[n]);return xe(t.length,e.length)}function Tc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var yx="__name__",ug=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return xe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):nE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}},lt=class t extends ug{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new te(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},wz=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$n=class t extends ug{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return wz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yx}static keyField(){return new t([yx])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new te(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new te(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var de=class t{constructor(e){this.path=e}static fromPath(e){return new t(lt.fromString(e))}static fromName(e){return new t(lt.fromString(e).popFirst(5))}static empty(){return new t(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new lt(e.slice()))}};function dP(t,e,n){if(!n)throw new te(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Tz(t,e,n,r){if(e===!0&&r===!0)throw new te(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _x(t){if(!de.isDocumentKey(t))throw new te(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cx(t){if(de.isDocumentKey(t))throw new te(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ug(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function Ls(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ug(t);throw new te(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Rt(t,e){let n={typeString:t};return e&&(n.value=e),n}function cd(t,e){if(!hP(t))throw new te(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new te(U.INVALID_ARGUMENT,n);return!0}var Ex=-62135596800,Ix=1e6,Mt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ix);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ex)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ix}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cd(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ex;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:Rt("string",Mt._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};var De=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Mt(0,0))}static max(){return new t(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ju=-1,rE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};rE.UNKNOWN_ID=-1;function bz(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new Us(i,de.empty(),e)}function Sz(t){return new Us(t.readTime,t.key,Ju)}var Us=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(De.min(),de.empty(),Ju)}static max(){return new t(De.max(),de.empty(),Ju)}};function Dz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}var Az="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",iE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fc(t){return w(this,null,function*(){if(t.code!==U.FAILED_PRECONDITION||t.message!==Az)throw t;oe("LocalStore","Unexpectedly lost primary lease")})}var $=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Rz(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lc(t){return t.name==="IndexedDbTransactionError"}var FI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),LI=-1;function Bg(t){return t==null}function Zu(t){return t===0&&1/t==-1/0}function Mz(t){return typeof t=="number"&&Number.isInteger(t)&&!Zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var fP="";function xz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wx(e)),e=Pz(t.get(n),e);return wx(e)}function Pz(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case fP:n+="";break;default:n+=o}}return n}function wx(t){return t+fP+""}var Nz="remoteDocuments",pP="owner";var gP="mutationQueues";var mP="mutations";var vP="documentMutations",kz="remoteDocumentsV14";var yP="remoteDocumentGlobal";var _P="targets";var CP="targetDocuments";var EP="targetGlobal",IP="collectionParents";var wP="clientMetadata";var TP="bundles";var bP="namedQueries";var Oz="indexConfiguration";var Fz="indexState";var Lz="indexEntries";var SP="documentOverlays";var Vz="globals";var jz=[gP,mP,vP,Nz,_P,pP,EP,CP,wP,yP,IP,TP,bP],Rde=[...jz,SP],Uz=[gP,mP,vP,kz,_P,pP,EP,CP,wP,yP,IP,TP,bP,SP],Bz=Uz,$z=[...Bz,Oz,Fz,Lz];var Mde=[...$z,Vz];function Tx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var vt=class t{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}},Cc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ht=class t{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dg(this.data.getIterator())}getIteratorFrom(e){return new dg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},dg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qr=class t{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ht($n.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var hg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var on=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hg("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};on.EMPTY_BYTE_STRING=new on("");var Hz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(t){if(qe(!!t,39018),typeof t=="string"){let e=0,n=Hz.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ki(t){return typeof t=="string"?on.fromBase64String(t):on.fromUint8Array(t)}var AP="server_timestamp",RP="__type__",MP="__previous_value__",xP="__local_write_time__";function VI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RP])===null||n===void 0?void 0:n.stringValue)===AP}function $g(t){let e=t.mapValue.fields[MP];return VI(e)?$g(e):e}function Xu(t){let e=Ni(t.mapValue.fields[xP].timestampValue);return new Mt(e.seconds,e.nanos)}var oE=class{constructor(e,n,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},fg="(default)",pg=class t{constructor(e,n){this.projectId=e,this.database=n||fg}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===fg}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var jI="__type__",PP="__max__",ng={mapValue:{fields:{__type__:{stringValue:PP}}}},UI="__vector__",bc="value";function Ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?VI(t)?4:kP(t)?9007199254740991:NP(t)?10:11:me(28295,{value:t})}function Xr(t,e){if(t===e)return!0;let n=Ao(t);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ni(i.timestampValue),a=Ni(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ki(i.bytesValue).isEqual(ki(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return ct(i.geoPointValue.latitude)===ct(o.geoPointValue.latitude)&&ct(i.geoPointValue.longitude)===ct(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ct(i.integerValue)===ct(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ct(i.doubleValue),a=ct(o.doubleValue);return s===a?Zu(s)===Zu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Tc(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Tx(s)!==Tx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Xr(s[c],a[c])))return!1;return!0})(t,e);default:return me(52216,{left:t})}}function ed(t,e){return(t.values||[]).find(n=>Xr(n,e))!==void 0}function Sc(t,e){if(t===e)return 0;let n=Ao(t),r=Ao(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ct(o.integerValue||o.doubleValue),c=ct(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return bx(t.timestampValue,e.timestampValue);case 4:return bx(Xu(t),Xu(e));case 5:return nE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=ki(o),c=ki(s);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=xe(a[u],c[u]);if(h!==0)return h}return xe(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=xe(ct(o.latitude),ct(s.latitude));return a!==0?a:xe(ct(o.longitude),ct(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Sx(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,h;let p=o.fields||{},g=s.fields||{},m=(a=p[bc])===null||a===void 0?void 0:a.arrayValue,I=(c=g[bc])===null||c===void 0?void 0:c.arrayValue,O=xe(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:Sx(m,I)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===ng.mapValue&&s===ng.mapValue)return 0;if(o===ng.mapValue)return 1;if(s===ng.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=nE(c[p],h[p]);if(g!==0)return g;let m=Sc(a[c[p]],u[h[p]]);if(m!==0)return m}return xe(c.length,h.length)})(t.mapValue,e.mapValue);default:throw me(23264,{le:n})}}function bx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);let n=Ni(t),r=Ni(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function Sx(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Sc(n[i],r[i]);if(o)return o}return xe(n.length,r.length)}function Dc(t){return sE(t)}function sE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Ni(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ki(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return de.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=sE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${sE(n.fields[s])}`;return i+"}"})(t.mapValue):me(61005,{value:t})}function og(t){switch(Ao(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$g(t);return e?16+og(e):16;case 5:return 2*t.stringValue.length;case 6:return ki(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+og(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ks(r.fields,(o,s)=>{i+=o.length+og(s)}),i})(t.mapValue);default:throw me(13486,{value:t})}}function Dx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function aE(t){return!!t&&"integerValue"in t}function BI(t){return!!t&&"arrayValue"in t}function Ax(t){return!!t&&"nullValue"in t}function Rx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sg(t){return!!t&&"mapValue"in t}function NP(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[jI])===null||n===void 0?void 0:n.stringValue)===UI}function qu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PP}var Pde={mapValue:{fields:{[jI]:{stringValue:UI},[bc]:{arrayValue:{}}}}};var Er=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(n)}setAll(e){let n=$n.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=qu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());sg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(qu(this.value))}};function OP(t){let e=[];return Ks(t.fields,(n,r)=>{let i=new $n([n]);if(sg(r)){let o=OP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qr(e)}var Ir=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,De.min(),De.min(),De.min(),Er.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,De.min(),De.min(),Er.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,De.min(),De.min(),Er.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ac=class{constructor(e,n){this.position=e,this.inclusive=n}};function Mx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=de.comparator(de.fromName(s.referenceValue),n.key):r=Sc(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}var Bs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var gg=class{},At=class t extends gg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lE(e,n,r):n==="array-contains"?new hE(e,r):n==="in"?new fE(e,r):n==="not-in"?new pE(e,r):n==="array-contains-any"?new gE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uE(e,r):new dE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sc(n,this.value)):n!==null&&Ao(this.value)===Ao(n)&&this.matchesComparison(Sc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},wr=class t extends gg{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return FP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function FP(t){return t.op==="and"}function LP(t){return Gz(t)&&FP(t)}function Gz(t){for(let e of t.filters)if(e instanceof wr)return!1;return!0}function cE(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+Dc(t.value);if(LP(t))return t.filters.map(e=>cE(e)).join(",");{let e=t.filters.map(n=>cE(n)).join(",");return`${t.op}(${e})`}}function VP(t,e){return t instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)})(t,e):t instanceof wr?(function(r,i){return i instanceof wr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&VP(s,i.filters[a]),!0):!1})(t,e):void me(19439)}function jP(t){return t instanceof At?(function(n){return`${n.field.canonicalString()} ${n.op} ${Dc(n.value)}`})(t):t instanceof wr?(function(n){return n.op.toString()+" {"+n.getFilters().map(jP).join(" ,")+"}"})(t):"Filter"}var lE=class extends At{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){let n=de.comparator(e.key,this.key);return this.matchesComparison(n)}},uE=class extends At{constructor(e,n){super(e,"in",n),this.keys=UP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},dE=class extends At{constructor(e,n){super(e,"not-in",n),this.keys=UP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function UP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}var hE=class extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return BI(n)&&ed(n.arrayValue,this.value)}},fE=class extends At{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ed(this.value.arrayValue,n)}},pE=class extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ed(this.value.arrayValue,n)}},gE=class extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!BI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ed(this.value.arrayValue,r))}};var mE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Px(t,e=null,n=[],r=[],i=null,o=null,s=null){return new mE(t,e,n,r,i,o,s)}function $I(t){let e=Te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Bg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dc(r)).join(",")),e.Pe=n}return e.Pe}function HI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xx(t.startAt,e.startAt)&&xx(t.endAt,e.endAt)}function vE(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ro=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function qz(t,e,n,r,i,o,s,a){return new Ro(t,e,n,r,i,o,s,a)}function zI(t){return new Ro(t)}function Nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BP(t){return t.collectionGroup!==null}function Wu(t){let e=Te(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ht($n.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Bs(o,r))}),n.has($n.keyField().canonicalString())||e.Te.push(new Bs($n.keyField(),r))}return e.Te}function Jr(t){let e=Te(t);return e.Ie||(e.Ie=Wz(e,Wu(t))),e.Ie}function Wz(t,e){if(t.limitType==="F")return Px(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Bs(i.field,o)});let n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return Px(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yE(t,e){let n=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _E(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hg(t,e){return HI(Jr(t),Jr(e))&&t.limitType===e.limitType}function $P(t){return`${$I(Jr(t))}|lt:${t.limitType}`}function vc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jP(i)).join(", ")}]`),Bg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Dc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Dc(i)).join(",")),`Target(${r})`})(Jr(t))}; limitType=${t.limitType})`}function zg(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):de.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Wu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=Mx(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,Wu(r),i)||r.endAt&&!(function(s,a,c){let u=Mx(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,Wu(r),i))})(t,e)}function Kz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HP(t){return(e,n)=>{let r=!1;for(let i of Wu(t)){let o=Qz(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Qz(t,e,n){let r=t.field.isKeyField()?de.comparator(e.key,n.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Sc(c,u):me(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}var Oi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return DP(this.inner)}size(){return this.innerSize}};var Yz=new vt(de.comparator);function Fi(){return Yz}var zP=new vt(de.comparator);function Gu(...t){let e=zP;for(let n of t)e=e.insert(n.key,n);return e}function GP(t){let e=zP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return Ku()}function qP(){return Ku()}function Ku(){return new Oi(t=>t.toString(),(t,e)=>t.isEqual(e))}var Jz=new vt(de.comparator),Zz=new Ht(de.comparator);function ke(...t){let e=Zz;for(let n of t)e=e.add(n);return e}var Xz=new Ht(xe);function eG(){return Xz}function GI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function WP(t){return{integerValue:""+t}}function tG(t,e){return Mz(e)?WP(e):GI(t,e)}var Rc=class{constructor(){this._=void 0}};function nG(t,e,n){return t instanceof Mc?(function(i,o){let s={fields:{[RP]:{stringValue:AP},[xP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&VI(o)&&(o=$g(o)),o&&(s.fields[MP]=o),{mapValue:s}})(n,e):t instanceof $s?QP(t,e):t instanceof Hs?YP(t,e):(function(i,o){let s=KP(i,o),a=kx(s)+kx(i.Ee);return aE(s)&&aE(i.Ee)?WP(a):GI(i.serializer,a)})(t,e)}function rG(t,e,n){return t instanceof $s?QP(t,e):t instanceof Hs?YP(t,e):n}function KP(t,e){return t instanceof xc?(function(r){return aE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Mc=class extends Rc{},$s=class extends Rc{constructor(e){super(),this.elements=e}};function QP(t,e){let n=JP(e);for(let r of t.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hs=class extends Rc{constructor(e){super(),this.elements=e}};function YP(t,e){let n=JP(e);for(let r of t.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}var xc=class extends Rc{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function kx(t){return ct(t.integerValue||t.doubleValue)}function JP(t){return BI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function iG(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof $s&&i instanceof $s||r instanceof Hs&&i instanceof Hs?Tc(r.elements,i.elements,Xr):r instanceof xc&&i instanceof xc?Xr(r.Ee,i.Ee):r instanceof Mc&&i instanceof Mc})(t.transform,e.transform)}var CE=class{constructor(e,n){this.version=e,this.transformResults=n}},Io=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ag(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Pc=class{};function ZP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new td(t.key,Io.none()):new zs(t.key,t.data,Io.none());{let n=t.data,r=Er.empty(),i=new Ht($n.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Li(t.key,r,new Qr(i.toArray()),Io.none())}}function oG(t,e,n){t instanceof zs?(function(i,o,s){let a=i.value.clone(),c=Fx(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Li?(function(i,o,s){if(!ag(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Fx(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(XP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Qu(t,e,n,r){return t instanceof zs?(function(o,s,a,c){if(!ag(o.precondition,s))return a;let u=o.value.clone(),h=Lx(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Li?(function(o,s,a,c){if(!ag(o.precondition,s))return a;let u=Lx(o.fieldTransforms,c,s),h=s.data;return h.setAll(XP(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return ag(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function sG(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=KP(r.transform,i||null);o!=null&&(n===null&&(n=Er.empty()),n.set(r.field,o))}return n||null}function Ox(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tc(r,i,(o,s)=>iG(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zs=class extends Pc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Li=class extends Pc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Fx(t,e,n){let r=new Map;qe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,rG(s,a,n[i]))}return r}function Lx(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,nG(o,s,e))}return r}var td=class extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},EE=class extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var IE=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&oG(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Qu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=qP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=ZP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,(n,r)=>Ox(n,r))&&Tc(this.baseMutations,e.baseMutations,(n,r)=>Ox(n,r))}},wE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){qe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Jz})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var TE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var St,Fe;function aG(t){switch(t){case U.OK:return me(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function e1(t){if(t===void 0)return Pi("GRPC error has no .code"),U.UNKNOWN;switch(t){case St.OK:return U.OK;case St.CANCELLED:return U.CANCELLED;case St.UNKNOWN:return U.UNKNOWN;case St.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case St.INTERNAL:return U.INTERNAL;case St.UNAVAILABLE:return U.UNAVAILABLE;case St.UNAUTHENTICATED:return U.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case St.NOT_FOUND:return U.NOT_FOUND;case St.ALREADY_EXISTS:return U.ALREADY_EXISTS;case St.PERMISSION_DENIED:return U.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case St.ABORTED:return U.ABORTED;case St.OUT_OF_RANGE:return U.OUT_OF_RANGE;case St.UNIMPLEMENTED:return U.UNIMPLEMENTED;case St.DATA_LOSS:return U.DATA_LOSS;default:return me(39323,{code:t})}}(Fe=St||(St={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var Vx=null;var cG=new Ri([4294967295,4294967295],0);function jx(t){let e=uP().encode(t),n=new U0;return n.update(e),new Uint8Array(n.digest())}function Ux(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([i,o],0)]}var SE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Os(`Invalid padding: ${n}`);if(r<0)throw new Os(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Os(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Os(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ri.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ri.fromNumber(r)));return i.compare(cG)===1&&(i=new Ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=jx(e),[r,i]=Ux(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=jx(e),[r,i]=Ux(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Os=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mg=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(De.min(),i,new vt(xe),Fi(),ke())}},nd=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ke(),ke(),ke())}};var Ec=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},vg=class{constructor(e,n){this.targetId=e,this.De=n}},yg=class{constructor(e,n,r=on.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},_g=class{constructor(){this.ve=0,this.Ce=Bx(),this.Fe=on.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),r=ke();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:o})}}),new nd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Bx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},DE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Fi(),this.je=rg(),this.Je=rg(),this.He=new vt(xe)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(vE(o))if(r===0){let s=new de(o.path);this.Xe(n,s,Ir.newNoDocument(s,De.min()))}else qe(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}Vx?.ct((function(h,p,g,m,I){var O,x,j,Z,ce,pe;let Ke={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Re=p.unchangedNames;return Re&&(Ke.bloomFilter={applied:I===0,hashCount:(O=Re?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Z=(j=(x=Re?.bits)===null||x===void 0?void 0:x.bitmap)===null||j===void 0?void 0:j.length)!==null&&Z!==void 0?Z:0,padding:(pe=(ce=Re?.bits)===null||ce===void 0?void 0:ce.padding)!==null&&pe!==void 0?pe:0,mightContain:S=>{var y;return(y=m?.mightContain(S))!==null&&y!==void 0&&y}}),Ke})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ki(r).toUint8Array()}catch(c){if(c instanceof hg)return Do("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new SE(s,i,o)}catch(c){return Do(c instanceof Os?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&vE(a.target)){let c=new de(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Ir.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ke();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new mg(e,n,this.He,this.ze,r);return this.ze=Fi(),this.je=rg(),this.Je=rg(),this.He=new vt(xe),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new _g,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ht(xe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ht(xe),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new _g),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function rg(){return new vt(de.comparator)}function Bx(){return new vt(de.comparator)}var lG={asc:"ASCENDING",desc:"DESCENDING"},uG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dG={and:"AND",or:"OR"},AE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function RE(t,e){return t.useProto3Json||Bg(e)?e:{value:e}}function Cg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hG(t,e){return Cg(t,e.toTimestamp())}function Zr(t){return qe(!!t,49232),De.fromTimestamp((function(n){let r=Ni(n);return new Mt(r.seconds,r.nanos)})(t))}function qI(t,e){return ME(t,e).canonicalString()}function ME(t,e){let n=(function(i){return new lt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function n1(t){let e=lt.fromString(t);return qe(a1(e),10190,{key:e.toString()}),e}function xE(t,e){return qI(t.databaseId,e.path)}function q0(t,e){let n=n1(e);if(n.get(1)!==t.databaseId.projectId)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(i1(n))}function r1(t,e){return qI(t.databaseId,e)}function fG(t){let e=n1(t);return e.length===4?lt.emptyPath():i1(e)}function PE(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i1(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $x(t,e,n){return{name:xE(t,e),fields:n.value.mapValue.fields}}function pG(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),on.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),on.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let h=u.code===void 0?U.UNKNOWN:e1(u.code);return new te(h,u.message||"")})(s);n=new yg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=q0(t,r.document.name),o=Zr(r.document.updateTime),s=r.document.createTime?Zr(r.document.createTime):De.min(),a=new Er({mapValue:{fields:r.document.fields}}),c=Ir.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ec(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=q0(t,r.document),o=r.readTime?Zr(r.readTime):De.min(),s=Ir.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ec([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=q0(t,r.document),o=r.removedTargetIds||[];n=new Ec([],o,i,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new bE(i,o),a=r.targetId;n=new vg(a,s)}}return n}function gG(t,e){let n;if(e instanceof zs)n={update:$x(t,e.key,e.value)};else if(e instanceof td)n={delete:xE(t,e.key)};else if(e instanceof Li)n={update:$x(t,e.key,e.data),updateMask:TG(e.fieldMask)};else{if(!(e instanceof EE))return me(16599,{Rt:e.type});n={verify:xE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Mc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $s)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xc)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw me(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:hG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)})(t,e.precondition)),n}function mG(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Zr(i.updateTime):Zr(o);return s.isEqual(De.min())&&(s=Zr(o)),new CE(s,i.transformResults||[])})(n,e))):[]}function vG(t,e){return{documents:[r1(t,e.path)]}}function yG(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=r1(t,i);let o=(function(u){if(u.length!==0)return s1(wr.create(u,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(h=>(function(g){return{field:yc(g.field),direction:EG(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=RE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:n,parent:i}}function _G(t){let e=fG(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qe(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=o1(p);return g instanceof wr&&LP(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(I){return new Bs(_c(I.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Bg(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){let g=!!p.before,m=p.values||[];return new Ac(m,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){let g=!p.before,m=p.values||[];return new Ac(m,g)})(n.endAt)),qz(e,i,s,o,a,"F",c,u)}function CG(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function o1(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=_c(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_c(n.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_c(n.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_c(n.unaryFilter.field);return At.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return At.create(_c(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return wr.create(n.compositeFilter.filters.map(r=>o1(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(n.compositeFilter.op))})(t):me(30097,{filter:t})}function EG(t){return lG[t]}function IG(t){return uG[t]}function wG(t){return dG[t]}function yc(t){return{fieldPath:t.canonicalString()}}function _c(t){return $n.fromServerFormat(t.fieldPath)}function s1(t){return t instanceof At?(function(n){if(n.op==="=="){if(Rx(n.value))return{unaryFilter:{field:yc(n.field),op:"IS_NAN"}};if(Ax(n.value))return{unaryFilter:{field:yc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rx(n.value))return{unaryFilter:{field:yc(n.field),op:"IS_NOT_NAN"}};if(Ax(n.value))return{unaryFilter:{field:yc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yc(n.field),op:IG(n.op),value:n.value}}})(t):t instanceof wr?(function(n){let r=n.getFilters().map(i=>s1(i));return r.length===1?r[0]:{compositeFilter:{op:wG(n.op),filters:r}}})(t):me(54877,{filter:t})}function TG(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function a1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rd=class t{constructor(e,n,r,i,o=De.min(),s=De.min(),a=on.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var NE=class{constructor(e){this.gt=e}};function bG(t){let e=_G({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_E(e,e.limit,"L"):e}var Eg=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(ct(e.integerValue));else if("doubleValue"in e){let r=ct(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Zu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Ni(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ki(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?kP(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):NP(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):me(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=bc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(ct(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),de.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Eg.Ut=new Eg;var kE=class{constructor(){this.Dn=new OE}addToCollectionParentIndex(e,n){return this.Dn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Us.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}},OE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ht(lt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ht(lt.comparator)).toArray()}};var Nde=new Uint8Array(0);var Hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c1=41943040,nr=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(c1,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);var id=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var zx="LruGarbageCollector",SG=1048576;function Gx([t,e],[n,r]){let i=xe(t,n);return i===0?xe(e,r):i}var FE=class{constructor(e){this.Tr=e,this.buffer=new Ht(Gx),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Gx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},LE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(zx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lc(n)?oe(zx,"Ignoring IndexedDB error during garbage collection: ",n):yield Fc(n)}yield this.Rr(3e5)}))}},VE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(FI.ue);let r=new FE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Hx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),mc()<=Pe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function DG(t,e){return new VE(t,e)}var jE=class{constructor(){this.changes=new Oi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var UE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var BE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qu(r.mutation,i,Qr.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){let i=ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Gu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Fi(),s=Ku(),a=(function(){return Ku()})();return n.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Li)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Qu(h.mutation,u,h.mutation.getFieldMask(),Mt.now())):s.set(u.key,Qr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var p;return a.set(u,new UE(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ku(),i=new vt((s,a)=>s-a),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let h=r.get(c)||Qr.empty();h=a.applyToLocalView(u,h),r.set(c,h);let p=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,p=qP();h.forEach(g=>{if(!o.has(g)){let m=ZP(n.get(g),r.get(g));m!==null&&p.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):$.resolve(ks()),a=Ju,c=o;return s.next(u=>$.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ke())).next(h=>({batchId:a,changes:GP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=Gu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Gu();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,c=>{let u=(function(p,g){return new Ro(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Ir.newInvalidDocument(h)))});let a=Gu();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&Qu(h.mutation,u,Qr.empty(),Mt.now()),zg(n,u)&&(a=a.insert(c,u))}),a})}};var $E=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return $.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Zr(i.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:bG(i.bundledQuery),readTime:Zr(i.readTime)}})(n)),$.resolve()}};var HE=class{constructor(){this.overlays=new vt(de.comparator),this.kr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ks();return $.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){let i=ks(),o=n.length+1,s=new de(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new vt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=ks(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=ks(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return $.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new TE(n,r));let o=this.kr.get(n);o===void 0&&(o=ke(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var zE=class{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}};var od=class{constructor(){this.qr=new Ht(Dt.Qr),this.$r=new Ht(Dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Dt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Dt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new de(new lt([])),r=new Dt(n,e),i=new Dt(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new de(new lt([])),r=new Dt(n,e),i=new Dt(n,e+1),o=ke();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Dt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Dt=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return de.comparator(e.key,n.key)||xe(e.Hr,n.Hr)}static Ur(e,n){return xe(e.Hr,n.Hr)||de.comparator(e.key,n.key)}};var GE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ht(Dt.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new IE(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?LI:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(xe);return n.forEach(i=>{let o=new Dt(i,0),s=new Dt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),$.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;de.isDocumentKey(o)||(o=o.child(""));let s=new Dt(new de(o),0),a=new Ht(xe);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),$.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){qe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return $.forEach(n.mutations,i=>{let o=new Dt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Dt(n,0),i=this.Yr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var qE=class{constructor(e){this.ni=e,this.docs=(function(){return new vt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=Fi();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ir.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Fi(),s=n.path,a=new de(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Dz(Sz(h),r)<=0||(i.has(h.key)||zg(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,r,i){me(9500)}ri(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new WE(this)}getSize(e){return $.resolve(this.size)}},WE=class extends jE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var KE=class{constructor(e){this.persistence=e,this.ii=new Oi(n=>$I(n),HI),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new od,this.targetCount=0,this._i=id.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),$.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new id(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.hr(n),$.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),$.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.oi.containsKey(n))}};var Ig=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new FI(0),this.ci=!1,this.ci=!0,this.li=new zE,this.referenceDelegate=e(this),this.hi=new KE(this),this.indexManager=new kE,this.remoteDocumentCache=(function(i){return new qE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new NE(n),this.Ti=new $E(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new GE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);let i=new QE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return $.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},QE=class extends iE{constructor(e){super(),this.currentSequenceNumber=e}},YE=class t{constructor(e){this.persistence=e,this.Ai=new od,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,r=>{let i=de.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return $.or([()=>$.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},wg=class t{constructor(e,n){this.persistence=e,this.gi=new Oi(r=>xz(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DG(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return $.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=og(e.data.value)),n}Sr(e,n,r){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var JE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ke(),i=ke();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ZE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var XE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return yM()?8:Rz(Un())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ZE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(mc()<=Pe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",vc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(mc()<=Pe.DEBUG&&oe("QueryEngine","Query:",vc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(mc()<=Pe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",vc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(n))):$.resolve())}ps(e,n){if(Nx(n))return $.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_E(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ke(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,_E(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return Nx(n)||i.isEqual(De.min())?$.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?$.resolve(null):(mc()<=Pe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vc(n)),this.vs(e,s,n,bz(i,Ju)).next(a=>a))})}bs(e,n){let r=new Ht(HP(e));return n.forEach((i,o)=>{zg(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return mc()<=Pe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",vc(n)),this.gs.getDocumentsMatchingQuery(e,n,Us.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var WI="LocalStore",AG=3e8,eI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new vt(xe),this.Ms=new Oi(o=>$I(o),HI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function RG(t,e,n,r){return new eI(t,e,n,r)}function l1(t,e){return w(this,null,function*(){let n=Te(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ke();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function MG(t,e){let n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){let p=u.batch,g=p.keys(),m=$.resolve();return g.forEach(I=>{m=m.next(()=>h.getEntry(c,I)).next(O=>{let x=u.docVersions.get(I);qe(x!==null,48541),O.version.compareTo(x)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),h.addEntry(O)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function u1(t){let e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function xG(t,e){let n=Te(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(on.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),(function(O,x,j){return O.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=AG?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,m,h)&&a.push(n.hi.updateTargetData(o,m))});let c=Fi(),u=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(PG(o,s,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(De.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}function PG(t,e,n){let r=ke(),i=ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Fi();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):oe(WI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function NG(t,e){let n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=LI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kG(t,e){let n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new rd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function tI(t,e,n){return w(this,null,function*(){let r=Te(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Lc(s))throw s;oe(WI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function qx(t,e,n){let r=Te(t),i=De.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,h){let p=Te(c),g=p.Ms.get(h);return g!==void 0?$.resolve(p.Fs.get(g)):p.hi.getTargetData(u,h)})(r,s,Jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:De.min(),n?o:ke())).next(a=>(OG(r,Kz(e),a),{documents:a,qs:o})))}function OG(t,e,n){let r=t.xs.get(e)||De.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Tg=class{constructor(){this.activeTargetIds=eG()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var nI=class{constructor(){this.Fo=new Tg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rI=class{xo(e){}shutdown(){}};var Wx="ConnectivityMonitor",bg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(Wx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){oe(Wx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ig=null;function iI(){return ig===null?ig=(function(){return 268435456+Math.round(2147483648*Math.random())})():ig++,"0x"+ig.toString(16)}var W0="RestConnection",FG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},oI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===fg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=iI(),a=this.Go(e,n.toUriEncodedString());oe(W0,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),h=Ts(u);return this.jo(e,a,c,r,h).then(p=>(oe(W0,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Do(W0,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=FG[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var sI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var rn="WebChannelConnection",aI=class extends oI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=iI();return new Promise((a,c)=>{let u=new B0;u.setWithCredentials(!0),u.listenOnce($0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zu.NO_ERROR:let p=u.getResponseJson();oe(rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case zu.TIMEOUT:oe(rn,`RPC '${e}' ${s} timed out`),c(new te(U.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:let g=u.getStatus();if(oe(rn,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let O=(function(j){let Z=j.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(Z)>=0?Z:U.UNKNOWN})(I.status);c(new te(O,I.message))}else c(new te(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new te(U.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{oe(rn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);oe(rn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}P_(e,n,r){let i=iI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=G0(),a=z0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");oe(rn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.T_(p);let g=!1,m=!1,I=new sI({Ho:x=>{m?oe(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(oe(rn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),oe(rn,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Yo:()=>p.close()}),O=(x,j,Z)=>{x.listen(j,ce=>{try{Z(ce)}catch(pe){setTimeout(()=>{throw pe},0)}})};return O(p,gc.EventType.OPEN,()=>{m||(oe(rn,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),O(p,gc.EventType.CLOSE,()=>{m||(m=!0,oe(rn,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(p))}),O(p,gc.EventType.ERROR,x=>{m||(m=!0,Do(rn,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),I.__(new te(U.UNAVAILABLE,"The operation could not be completed")))}),O(p,gc.EventType.MESSAGE,x=>{var j;if(!m){let Z=x.data[0];qe(!!Z,16349);let ce=Z,pe=ce?.error||((j=ce[0])===null||j===void 0?void 0:j.error);if(pe){oe(rn,`RPC '${e}' stream ${i} received error:`,pe);let Ke=pe.status,Re=(function(C){let T=St[C];if(T!==void 0)return e1(T)})(Ke),S=pe.message;Re===void 0&&(Re=U.INTERNAL,S="Unknown error status: "+Ke+" with message "+pe.message),m=!0,I.__(new te(Re,S)),p.close()}else oe(rn,`RPC '${e}' stream ${i} received:`,Z),I.a_(Z)}}),O(a,H0.STAT_EVENT,x=>{x.stat===tg.PROXY?oe(rn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===tg.NOPROXY&&oe(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function K0(){return typeof document<"u"?document:null}function Gg(t){return new AE(t,!0)}var Sg=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Kx="PersistentStream",Dg=class{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Sg(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return w(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return w(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return w(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Pi(n.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new te(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>w(this,null,function*(){this.state=0,this.start()}))}G_(e){return oe(Kx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(oe(Kx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cI=class extends Dg{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=pG(this.serializer,e),r=(function(o){if(!("targetChange"in o))return De.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?De.min():s.readTime?Zr(s.readTime):De.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=PE(this.serializer),n.addTarget=(function(o,s){let a,c=s.target;if(a=vE(c)?{documents:vG(o,c)}:{query:yG(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=t1(o,s.resumeToken);let u=RE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(De.min())>0){a.readTime=Cg(o,s.snapshotVersion.toTimestamp());let u=RE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=CG(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=PE(this.serializer),n.removeTarget=e,this.k_(n)}},lI=class extends Dg{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=mG(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=PE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>gG(this.serializer,r))};this.k_(n)}};var uI=class{},dI=class extends uI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,ME(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(U.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,ME(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(U.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},hI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pi(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Gs="RemoteStore",fI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>w(this,null,function*(){Qs(this)&&(oe(Gs,"Restarting streams for network reachability change."),yield(function(c){return w(this,null,function*(){let u=Te(c);u.Ia.add(4),yield ld(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield qg(u)})})(this))}))}),this.Aa=new hI(r,i)}};function qg(t){return w(this,null,function*(){if(Qs(t))for(let e of t.da)yield e(!0)})}function ld(t){return w(this,null,function*(){for(let e of t.da)yield e(!1)})}function d1(t,e){let n=Te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),JI(n)?YI(n):Vc(n).x_()&&QI(n,e))}function KI(t,e){let n=Te(t),r=Vc(n);n.Ta.delete(e),r.x_()&&h1(n,e),n.Ta.size===0&&(r.x_()?r.B_():Qs(n)&&n.Aa.set("Unknown"))}function QI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vc(t).H_(e)}function h1(t,e){t.Ra.$e(e),Vc(t).Y_(e)}function YI(t){t.Ra=new DE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Vc(t).start(),t.Aa.aa()}function JI(t){return Qs(t)&&!Vc(t).M_()&&t.Ta.size>0}function Qs(t){return Te(t).Ia.size===0}function f1(t){t.Ra=void 0}function LG(t){return w(this,null,function*(){t.Aa.set("Online")})}function VG(t){return w(this,null,function*(){t.Ta.forEach((e,n)=>{QI(t,e)})})}function jG(t,e){return w(this,null,function*(){f1(t),JI(t)?(t.Aa.la(e),YI(t)):t.Aa.set("Unknown")})}function UG(t,e,n){return w(this,null,function*(){if(t.Aa.set("Online"),e instanceof yg&&e.state===2&&e.cause)try{yield(function(i,o){return w(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){oe(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ag(t,r)}else if(e instanceof Ec?t.Ra.Ye(e):e instanceof vg?t.Ra.it(e):t.Ra.et(e),!n.isEqual(De.min()))try{let r=yield u1(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(on.EMPTY_BYTE_STRING,h.snapshotVersion)),h1(o,c);let p=new rd(h.target,c,u,h.sequenceNumber);QI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){oe(Gs,"Failed to raise snapshot:",r),yield Ag(t,r)}})}function Ag(t,e,n){return w(this,null,function*(){if(!Lc(e))throw e;t.Ia.add(1),yield ld(t),t.Aa.set("Offline"),n||(n=()=>u1(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(null,null,function*(){oe(Gs,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield qg(t)}))})}function p1(t,e){return e().catch(n=>Ag(t,n,e))}function Wg(t){return w(this,null,function*(){let e=Te(t),n=Mo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:LI;for(;BG(e);)try{let i=yield NG(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,$G(e,i)}catch(i){yield Ag(e,i)}g1(e)&&m1(e)})}function BG(t){return Qs(t)&&t.Pa.length<10}function $G(t,e){t.Pa.push(e);let n=Mo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function g1(t){return Qs(t)&&!Mo(t).M_()&&t.Pa.length>0}function m1(t){Mo(t).start()}function HG(t){return w(this,null,function*(){Mo(t).na()})}function zG(t){return w(this,null,function*(){let e=Mo(t);for(let n of t.Pa)e.X_(n.mutations)})}function GG(t,e,n){return w(this,null,function*(){let r=t.Pa.shift(),i=wE.from(r,e,n);yield p1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Wg(t)})}function qG(t,e){return w(this,null,function*(){e&&Mo(t).Z_&&(yield(function(r,i){return w(this,null,function*(){if((function(s){return aG(s)&&s!==U.ABORTED})(i.code)){let o=r.Pa.shift();Mo(r).N_(),yield p1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Wg(r)}})})(t,e)),g1(t)&&m1(t)})}function Qx(t,e){return w(this,null,function*(){let n=Te(t);n.asyncQueue.verifyOperationInProgress(),oe(Gs,"RemoteStore received new credentials");let r=Qs(n);n.Ia.add(3),yield ld(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield qg(n)})}function WG(t,e){return w(this,null,function*(){let n=Te(t);e?(n.Ia.delete(2),yield qg(n)):e||(n.Ia.add(2),yield ld(n),n.Aa.set("Unknown"))})}function Vc(t){return t.Va||(t.Va=(function(n,r,i){let o=Te(n);return o.ia(),new cI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:LG.bind(null,t),e_:VG.bind(null,t),n_:jG.bind(null,t),J_:UG.bind(null,t)}),t.da.push(e=>w(null,null,function*(){e?(t.Va.N_(),JI(t)?YI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),f1(t))}))),t.Va}function Mo(t){return t.ma||(t.ma=(function(n,r,i){let o=Te(n);return o.ia(),new lI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:HG.bind(null,t),n_:qG.bind(null,t),ea:zG.bind(null,t),ta:GG.bind(null,t)}),t.da.push(e=>w(null,null,function*(){e?(t.ma.N_(),yield Wg(t)):(yield t.ma.stop(),t.Pa.length>0&&(oe(Gs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var pI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZI(t,e){if(Pi("AsyncQueue",`${e}: ${t}`),Lc(t))return new te(U.UNAVAILABLE,`${e}: ${t}`);throw t}var Rg=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Gu(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Mg=class{constructor(){this.fa=new vt(de.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Nc=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Rg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var gI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},mI=class{constructor(){this.queries=Yx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Te(n),o=i.queries;i.queries=Yx(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new te(U.ABORTED,"Firestore shutting down"))}};function Yx(){return new Oi(t=>$P(t),Hg)}function KG(t,e){return w(this,null,function*(){let n=Te(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new gI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=ZI(s,`Initialization of query '${vc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&XI(n)})}function QG(t,e){return w(this,null,function*(){let n=Te(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function YG(t,e){let n=Te(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&XI(n)}function JG(t,e,n){let r=Te(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function XI(t){t.Da.forEach(e=>{e.next()})}var vI,Jx;(Jx=vI||(vI={})).Fa="default",Jx.Cache="cache";var yI=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vI.Cache}};var xg=class{constructor(e){this.key=e}},Pg=class{constructor(e){this.key=e}},_I=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=HP(e),this.eu=new Rg(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Mg,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),m=zg(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),O=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),x=!1;g&&m?g.data.isEqual(m.data)?I!==O&&(r.track({type:3,doc:m}),x=!0):this.iu(g,m)||(r.track({type:2,doc:m}),x=!0,(c&&this.Xa(m,c)>0||u&&this.Xa(m,u)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),x=!0):g&&!m&&(r.track({type:1,doc:g}),x=!0,(c||u)&&(a=!0)),x&&(m?(s=s.add(m),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(m,I){let O=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:x})}};return O(m)-O(I)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Nc(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Mg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Pg(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new xg(r))}),n}uu(e){this.Ha=e.qs,this.Za=ke();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Nc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},ew="SyncEngine",CI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},EI=class{constructor(e){this.key=e,this.lu=!1}},II=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Oi(a=>$P(a),Hg),this.Tu=new Map,this.Iu=new Set,this.du=new vt(de.comparator),this.Eu=new Map,this.Au=new od,this.Ru={},this.Vu=new Map,this.mu=id.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function ZG(t,e,n=!0){return w(this,null,function*(){let r=I1(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield v1(r,e,n,!0),i})}function XG(t,e){return w(this,null,function*(){let n=I1(t);yield v1(n,e,!0,!1)})}function v1(t,e,n,r){return w(this,null,function*(){let i=yield kG(t.localStore,Jr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield e6(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&d1(t.remoteStore,i),a})}function e6(t,e,n,r,i){return w(this,null,function*(){t.gu=(p,g,m)=>(function(O,x,j,Z){return w(this,null,function*(){let ce=x.view.nu(j);ce.Ds&&(ce=yield qx(O.localStore,x.query,!1).then(({documents:S})=>x.view.nu(S,ce)));let pe=Z&&Z.targetChanges.get(x.targetId),Ke=Z&&Z.targetMismatches.get(x.targetId)!=null,Re=x.view.applyChanges(ce,O.isPrimaryClient,pe,Ke);return Xx(O,x.targetId,Re._u),Re.snapshot})})(t,p,g,m);let o=yield qx(t.localStore,e,!0),s=new _I(e,o.qs),a=s.nu(o.documents),c=nd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);Xx(t,n,u._u);let h=new CI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot})}function t6(t,e,n){return w(this,null,function*(){let r=Te(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Hg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&KI(r.remoteStore,i.targetId),wI(r,i.targetId)}).catch(Fc))):(wI(r,i.targetId),yield tI(r.localStore,i.targetId,!0))})}function n6(t,e){return w(this,null,function*(){let n=Te(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),KI(n.remoteStore,r.targetId))})}function r6(t,e,n){return w(this,null,function*(){let r=u6(t);try{let i=yield(function(s,a){let c=Te(s),u=Mt.now(),h=a.reduce((m,I)=>m.add(I.key),ke()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=Fi(),O=ke();return c.Os.getEntries(m,h).next(x=>{I=x,I.forEach((j,Z)=>{Z.isValidDocument()||(O=O.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,I)).next(x=>{p=x;let j=[];for(let Z of a){let ce=sG(Z,p.get(Z.key).overlayedDocument);ce!=null&&j.push(new Li(Z.key,ce,OP(ce.value.mapValue),Io.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,j,a)}).next(x=>{g=x;let j=x.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(m,x.batchId,j)})}).then(()=>({batchId:g.batchId,changes:GP(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new vt(xe)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,n),yield ud(r,i.changes),yield Wg(r.remoteStore)}catch(i){let o=ZI(i,"Failed to persist write");n.reject(o)}})}function y1(t,e){return w(this,null,function*(){let n=Te(t);try{let r=yield xG(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?qe(s.lu,14607):i.removedDocuments.size>0&&(qe(s.lu,42227),s.lu=!1))}),yield ud(n,r,e)}catch(r){yield Fc(r)}})}function Zx(t,e,n){let r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Te(s);c.onlineState=a;let u=!1;c.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(u=!0)}),u&&XI(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i6(t,e,n){return w(this,null,function*(){let r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new vt(de.comparator);s=s.insert(o,Ir.newNoDocument(o,De.min()));let a=ke().add(o),c=new mg(De.min(),new Map,new vt(xe),s,a);yield y1(r,c),r.du=r.du.remove(o),r.Eu.delete(e),tw(r)}else yield tI(r.localStore,e,!1).then(()=>wI(r,e,n)).catch(Fc)})}function o6(t,e){return w(this,null,function*(){let n=Te(t),r=e.batch.batchId;try{let i=yield MG(n.localStore,e);C1(n,r,null),_1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ud(n,i)}catch(i){yield Fc(i)}})}function s6(t,e,n){return w(this,null,function*(){let r=Te(t);try{let i=yield(function(s,a){let c=Te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>(qe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})})(r.localStore,e);C1(r,e,n),_1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ud(r,i)}catch(i){yield Fc(i)}})}function _1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function C1(t,e,n){let r=Te(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function wI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||E1(t,r)})}function E1(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(KI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),tw(t))}function Xx(t,e,n){for(let r of n)r instanceof xg?(t.Au.addReference(r.key,e),a6(t,r)):r instanceof Pg?(oe(ew,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||E1(t,r.key)):me(19791,{yu:r})}function a6(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(oe(ew,"New document in limbo: "+n),t.Iu.add(r),tw(t))}function tw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new de(lt.fromString(e)),r=t.mu.next();t.Eu.set(r,new EI(n)),t.du=t.du.insert(n,r),d1(t.remoteStore,new rd(Jr(zI(n.path)),r,"TargetPurposeLimboResolution",FI.ue))}}function ud(t,e,n){return w(this,null,function*(){let r=Te(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);let p=JE.Es(c.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,u){return w(this,null,function*(){let h=Te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(u,g=>$.forEach(g.Is,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>$.forEach(g.ds,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Lc(p))throw p;oe(WI,"Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let m=h.Fs.get(g),I=m.snapshotVersion,O=m.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,O)}}})})(r.localStore,o))})}function c6(t,e){return w(this,null,function*(){let n=Te(t);if(!n.currentUser.isEqual(e)){oe(ew,"User change. New user:",e.toKey());let r=yield l1(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new te(U.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ud(n,r.Bs)}})}function l6(t,e){let n=Te(t),r=n.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function I1(t){let e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i6.bind(null,e),e.hu.J_=YG.bind(null,e.eventManager),e.hu.pu=JG.bind(null,e.eventManager),e}function u6(t){let e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s6.bind(null,e),e}var w1=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return w(this,null,function*(){this.serializer=Gg(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return RG(this.persistence,new XE,n.initialUser,this.serializer)}Du(n){return new Ig(YE.Vi,this.serializer)}bu(n){return new nI}terminate(){return w(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),TI=class extends w1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){qe(this.persistence.referenceDelegate instanceof wg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new LE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new Ig(r=>wg.Vi(r,n),this.serializer)}};var d6=(()=>{class t{initialize(n,r){return w(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Zx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c6.bind(null,this.syncEngine),yield WG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new mI})()}createDatastore(n){let r=Gg(n.databaseInfo.databaseId),i=(function(s){return new aI(s)})(n.databaseInfo);return(function(s,a,c,u){return new dI(s,a,c,u)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,c){return new fI(i,o,s,a,c)})(this.localStore,this.datastore,n.asyncQueue,r=>Zx(this.syncEngine,r,0),(function(){return bg.C()?new bg:new rI})())}createSyncEngine(n,r){return(function(o,s,a,c,u,h,p){let g=new II(o,s,a,c,u,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var n,r;yield(function(o){return w(this,null,function*(){let s=Te(o);oe(Gs,"RemoteStore shutting down."),s.Ia.add(5),yield ld(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var bI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var xo="FirestoreClient",SI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$t.UNAUTHENTICATED,this.clientId=Yu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>w(this,null,function*(){oe(xo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(oe(xo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ZI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Q0(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),oe(xo,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(null,null,function*(){r.isEqual(i)||(yield l1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Do("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Do("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function eP(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield h6(t);oe(xo,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Qx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Qx(e.remoteStore,i)),t._onlineComponents=e})}function h6(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(xo,"Using user provided OfflineComponentProvider");try{yield Q0(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),yield Q0(t,new w1)}}else oe(xo,"Using default OfflineComponentProvider"),yield Q0(t,new TI(void 0));return t._offlineComponents})}function T1(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(xo,"Using user provided OnlineComponentProvider"),yield eP(t,t._uninitializedComponentsProvider._online)):(oe(xo,"Using default OnlineComponentProvider"),yield eP(t,new d6))),t._onlineComponents})}function f6(t){return T1(t).then(e=>e.syncEngine)}function tP(t){return w(this,null,function*(){let e=yield T1(t),n=e.eventManager;return n.onListen=ZG.bind(null,e.syncEngine),n.onUnlisten=t6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n6.bind(null,e.syncEngine),n})}function b1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nP=new Map;var S1="firestore.googleapis.com",rP=!0,Ng=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=S1,this.ssl=rP}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SG)throw new te(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},kc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ng({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ng(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Y0;switch(r.type){case"firstParty":return new eE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=nP.get(n);r&&(oe("ComponentProvider","Removing Datastore"),nP.delete(n),r.terminate())})(this),Promise.resolve()}};function D1(t,e,n,r={}){var i;t=Ls(t,kc);let o=Ts(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(t0(`https://${c}`),n0("Firestore",!0)),s.host!==S1&&s.host!==c&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!bs(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=$t.MOCK_USER;else{h=fM(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new te(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new $t(g)}t._authCredentials=new J0(new cg(h,p))}}var qs=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Qt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cd(n,t._jsonSchema))return new t(e,r||null,new de(lt.fromString(n.referencePath)))}};Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:Rt("string",Qt._jsonSchemaVersion),referencePath:Rt("string")};var wo=class t extends qs{constructor(e,n,r){super(e,n,zI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new de(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function A1(t,e,...n){if(t=Tn(t),dP("collection","path",e),t instanceof kc){let r=lt.fromString(e,...n);return Cx(r),new wo(t,null,r)}{if(!(t instanceof Qt||t instanceof wo))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(lt.fromString(e,...n));return Cx(r),new wo(t.firestore,null,r)}}function R1(t,e,...n){if(t=Tn(t),arguments.length===1&&(e=Yu.newId()),dP("doc","path",e),t instanceof kc){let r=lt.fromString(e,...n);return _x(r),new Qt(t,null,new de(r))}{if(!(t instanceof Qt||t instanceof wo))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(lt.fromString(e,...n));return _x(r),new Qt(t.firestore,t instanceof wo?t.converter:null,new de(r))}}var iP="AsyncQueue",kg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Sg(this,"async_queue_retry"),this.oc=()=>{let r=K0();r&&oe(iP,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=K0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=K0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new xi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return w(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Lc(e))throw e;oe(iP,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Pi("INTERNAL UNHANDLED ERROR: ",oP(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=pI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&me(47125,{hc:oP(this.tc)})}verifyOperationInProgress(){}Pc(){return w(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function oP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function sP(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Ws=class extends kc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new kg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kg(e),this._firestoreClient=void 0,yield e}})}};function M1(t,e){let n=typeof t=="object"?t:hc(),r=typeof t=="string"?t:e||fg,i=Fp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=dM("firestore");o&&D1(i,...o)}return i}function x1(t){if(t._terminated)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p6(t),t._firestoreClient}function p6(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,c,u,h){return new oE(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,b1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new SI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}var To=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(on.fromBase64String(e))}catch(n){throw new te(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cd(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};To._jsonSchemaVersion="firestore/bytes/1.0",To._jsonSchema={type:Rt("string",To._jsonSchemaVersion),bytes:Rt("string")};var sd=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Og=class{constructor(e){this._methodName=e}};var bo=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(cd(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};bo._jsonSchemaVersion="firestore/geoPoint/1.0",bo._jsonSchema={type:Rt("string",bo._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};var So=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cd(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new te(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};So._jsonSchemaVersion="firestore/vectorValue/1.0",So._jsonSchema={type:Rt("string",So._jsonSchemaVersion),vectorValues:Rt("object")};var g6=/^__.*__$/,DI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Li(e,this.data,this.fieldMask,n,this.fieldTransforms):new zs(e,this.data,n,this.fieldTransforms)}};function P1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:t})}}var AI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(P1(this.Ec)&&g6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},RI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gg(e)}Dc(e,n,r,i=!1){return new AI({Ec:e,methodName:n,bc:r,path:$n.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function N1(t){let e=t._freezeSettings(),n=Gg(t._databaseId);return new RI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function m6(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);F1("Data must be an object, but it was:",s,r);let a=k1(r,s),c,u;if(o.merge)c=new Qr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=y6(e,p,n);if(!s.contains(g))throw new te(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);C6(h,g)||h.push(g)}c=new Qr(h),u=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=s.fieldTransforms;return new DI(new Er(a),c,u)}function v6(t,e,n,r=!1){return nw(n,t.Dc(r?4:3,e))}function nw(t,e){if(O1(t=Tn(t)))return F1("Unsupported field value:",e,t),k1(t,e);if(t instanceof Og)return(function(r,i){if(!P1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=nw(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Mt.fromDate(r);return{timestampValue:Cg(i.serializer,o)}}if(r instanceof Mt){let o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cg(i.serializer,o)}}if(r instanceof bo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:t1(i.serializer,r._byteString)};if(r instanceof Qt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof So)return(function(s,a){return{mapValue:{fields:{[jI]:{stringValue:UI},[bc]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return GI(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Ug(r)}`)})(t,e)}function k1(t,e){let n={};return DP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(r,i)=>{let o=nw(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function O1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof bo||t instanceof To||t instanceof Qt||t instanceof Og||t instanceof So)}function F1(t,e,n){if(!O1(n)||!hP(n)){let r=Ug(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function y6(t,e,n){if((e=Tn(e))instanceof sd)return e._internalPath;if(typeof e=="string")return L1(t,e);throw Fg("Field path arguments must be of type string or ",t,!1,void 0,n)}var _6=new RegExp("[~\\*/\\[\\]]");function L1(t,e,n){if(e.search(_6)>=0)throw Fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sd(...e.split("."))._internalPath}catch{throw Fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fg(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new te(U.INVALID_ARGUMENT,a+t+c)}function C6(t,e){return t.some(n=>n.isEqual(e))}var Lg=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(rw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},MI=class extends Lg{data(){return super.data()}};function rw(t,e){return typeof e=="string"?L1(t,e):e instanceof sd?e._internalPath:e._delegate._internalPath}function E6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ad=class{},Vg=class extends ad{};function V1(t,e,...n){let r=[];e instanceof ad&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(c=>c instanceof PI).length,a=o.filter(c=>c instanceof xI).length;if(s>1||s>0&&a>0)throw new te(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var xI=class t extends Vg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return U1(e._query,n),new qs(e.firestore,e.converter,yE(e._query,n))}_parse(e){let n=N1(e.firestore);return(function(o,s,a,c,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){cP(p,h);let I=[];for(let O of p)I.push(aP(c,o,O));g={arrayValue:{values:I}}}else g=aP(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||cP(p,h),g=v6(a,s,p,h==="in"||h==="not-in");return At.create(u,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var PI=class t extends ad{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)U1(s,c),s=yE(s,c)})(e._query,n),new qs(e.firestore,e.converter,yE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var NI=class t extends Vg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new te(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bs(o,s)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ro(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function j1(t,e="asc"){let n=e,r=rw("orderBy",t);return NI._create(r,n)}function aP(t,e,n){if(typeof(n=Tn(n))=="string"){if(n==="")throw new te(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BP(e)&&n.indexOf("/")!==-1)throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(lt.fromString(n));if(!de.isDocumentKey(r))throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dx(t,new de(r))}if(n instanceof Qt)return Dx(t,n._key);throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ug(n)}.`)}function cP(t,e){if(!Array.isArray(t)||t.length===0)throw new te(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U1(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new te(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var kI=class{convertValue(e,n="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ks(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[bc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ct(s.doubleValue));return new So(o)}convertGeoPoint(e){return new bo(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=$g(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){let n=Ni(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=lt.fromString(e);qe(a1(r),9688,{name:e});let i=new pg(r.get(1),r.get(3)),o=new de(r.popFirst(5));return i.isEqual(n)||Pi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function I6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Fs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vs=class t extends Lg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(rw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:Rt("string",Vs._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};var Ic=class extends Vs{data(e={}){return super.data(e)}},wc=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ic(this._firestore,this._userDataWriter,r.key,r,new Fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:w6(a.type),doc:c,oldIndex:u,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function w6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}wc._jsonSchemaVersion="firestore/querySnapshot/1.0",wc._jsonSchema={type:Rt("string",wc._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};var jg=class extends kI{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}};function B1(t,e,n){t=Ls(t,Qt);let r=Ls(t.firestore,Ws),i=I6(t.converter,e,n);return z1(r,[m6(N1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Io.none())])}function $1(t){return z1(Ls(t.firestore,Ws),[new td(t._key,Io.none())])}function H1(t,...e){var n,r,i;t=Tn(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||sP(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sP(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,u,h;if(t instanceof Qt)u=Ls(t.firestore,Ws),h=zI(t._key.path),c={next:p=>{e[s]&&e[s](T6(u,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ls(t,qs);u=Ls(p.firestore,Ws),h=p._query;let g=new jg(u);c={next:m=>{e[s]&&e[s](new wc(u,g,p,m))},error:e[s+1],complete:e[s+2]},E6(t._query)}return(function(g,m,I,O){let x=new bI(O),j=new yI(m,x,I);return g.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return KG(yield tP(g),j)})),()=>{x.Ou(),g.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return QG(yield tP(g),j)}))}})(x1(u),h,a,c)}function z1(t,e){return(function(r,i){let o=new xi;return r.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return r6(yield f6(r),i,o)})),o.promise})(x1(t),e)}function T6(t,e,n){let r=n.docs.get(e._key),i=new jg(t);return new Vs(t,i,e._key,r,new Fs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Oc=i})(dc),_r(new fn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ws(new Z0(r.getProvider("auth-internal")),new tE(s,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pg(u.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ct(gx,mx,e),Ct(gx,mx,"esm2017")})();var Ys=class{constructor(e){return e}},G1="firestore",iw=class{constructor(){return pc(G1)}};var ow=new se("angularfire2.firestore-instances");function b6(t,e){let n=jp(G1,t,e);return n&&new Ys(n)}function S6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ys(r)}}var D6={provide:iw,deps:[[new Fr,ow]]},A6={provide:Ys,useFactory:b6,deps:[[new Fr,ow],Ms]};function q1(t,...e){return Ct("angularfire",As.full,"fst"),ur([A6,D6,{provide:ow,useFactory:S6(t),multi:!0,deps:[Le,et,Rs,Lu,[new Fr,Xp],[new Fr,Bp],...e]}])}var W1=Bn(A1,!0,2);var sw=Bn($1,!0,2);var Kg=Bn(R1,!0,2);var K1=Bn(M1,!0);var Q1=Bn(H1,!0);var Y1=Bn(j1,!0,2),J1=Bn(V1,!0,2);var Z1=Bn(B1,!0,2);var Ft=(()=>{let e=class e{};e.KEY_ACTIVE_APP_ID="KEY_ACTIVE_APP_ID",e.KEY_SETTINGS="KEY_SETTINGS",e.KEY_SETTINGS_ACTIVE_TAB="KEY_SETTINGS_ACTIVE_TAB",e.KEY_GOOGLE_REFRESH_TOKEN="KEY_GOOGLE_REFRESH_TOKEN",e.KEY_GOOGLE_DATA_FILE_ID="KEY_GOOGLE_DATA_FILE_ID";let t=e;return t})();var xt=class{constructor(){}static isLargeScreen(){return window.innerWidth>1280}static isElementVisible(e,n){if(e){let r=e.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(n?n.clientHeight:window.innerHeight)&&r.right<=(n?n.clientWidth:window.innerWidth)}}};var ee=class t{static isEmpty(e){return!e||!Array.isArray(e)||e.length==0}static includes(e,n,r){if(!this.isEmpty(e)&&n)return r?e.map(i=>r(i)).includes(r(n)):e.includes(n)}static push(e,n){if(Array.isArray(e))if(Array.isArray(n))for(let r of n)r!=null&&!e.includes(r)&&e.push(r);else n!=null&&!e.includes(n)&&e.push(n)}static remove(e,n,r){if(!this.isEmpty(e)&&n!==void 0){let i=e.length;if(Array.isArray(n)){if(n.length>0)if(r){let o=e.map(s=>r(s));for(let s of n.map(a=>r(a)))this._remove(e,s,o)}else for(let o of n)this._remove(e,o)}else r?this._remove(e,r(n),e.map(o=>r(o))):this._remove(e,n);return i!=e.length}}static _remove(e,n,r){let i=(r||e).indexOf(n);i!=-1&&(r?.splice(i,1),e.splice(i,1))}static toggle(e,n,r=!1){Array.isArray(e)&&n!=null&&(e.includes(n)?this._remove(e,n):r?e.unshift(n):e.push(n))}static distinct(e,n){if(!this.isEmpty(e)){let r=[],i=new Map,o;for(let s of e)o=n(s),i.has(o)||(i.set(o,!0),r.push(s));return r}return[]}static intersection(e,n){return t.isEmpty(e)?[]:t.isEmpty(n)?[]:e.filter(r=>n.includes(r))}static getFirst(e){if(!this.isEmpty(e))return e[0]}static isFirst(e,n){if(!this.isEmpty(e)&&n)return n==e[0]}static makeFirst(e,n){e&&n&&(this._remove(e,n),e.unshift(n))}static getLast(e){if(!this.isEmpty(e))return e[e.length-1]}static isLast(e,n){if(!this.isEmpty(e)&&n)return n==e[e.length-1]}static makeLast(e,n){e&&n&&(this._remove(e,n),e.push(n))}static move(e,n,r){e&&n&&Number.isInteger(r)&&(this._remove(e,n),e.splice(r,0,n))}static getPrevious(e,n,r=!1){if(!this.isEmpty(e))return e[e.indexOf(n)-1]||(r?e[e.length-1]:void 0)}static findPrevious(e,n,r,i=!1){if(!this.isEmpty(e)){let o=e.indexOf(n),s=o;for(;s>0;)if(r(e[--s]))return e[s];if(i){for(s=e.length-1;s>o;)if(r(e[--s]))return e[s]}return}}static getNext(e,n,r=!1){if(!this.isEmpty(e))return e[e.indexOf(n)+1]||(r?e[0]:void 0)}static findNext(e,n,r,i=!1){if(!this.isEmpty(e)){let o=e.indexOf(n),s=o;for(;s<e.length-1;)if(r(e[++s]))return e[s];if(i){for(s=0;s<o;)if(r(e[++s]))return e[s]}return}}static findClosest(e,n,r){if(!this.isEmpty(e)){let i=e.indexOf(n),o=0,s,a=!0,c=!0;for(;a||c;)if(o++,c&&(s=e[i+o],s||(c=!1),s&&(!r||r(s)))||a&&(s=e[i-o],s||(a=!1),s&&(!r||r(s))))return s;return}}static getRandom(e,n){return this.isEmpty(e)?null:e.length==1?e[0]:(e=e.slice(),this.remove(e,n),e[Math.floor(Math.random()*e.length)])}static nearestRightFirst(e,n,r){if(n+1<e.length){for(let i=n+1;i<e.length;i++)if(!r||r(e[i]))return e[i]}if(n>0){for(let i=n-1;i>-1;i--)if(!r||r(e[i]))return e[i]}return null}static shuffle(e){let n=e.length,r;for(;n!=0;)r=Math.floor(Math.random()*n),n--,[e[n],e[r]]=[e[r],e[n]];return e}static except(e,...n){return e||(e=[]),e.filter(r=>!n.includes(r))}};var jc=(()=>{let e=class e{constructor(){this.stack=[]}register(r){ee.makeFirst(this.stack,r)}unregister(r){ee.remove(this.stack,r)}next(r){let i=r.target.nodeName;if(!["BODY","VIDEO"].includes(i))switch(r.key){case"Enter":ee.getFirst(this.stack)?.processKeyboardShortcut(r);break;case"Escape":document.activeElement.blur();break}else ee.getFirst(this.stack)?.processKeyboardShortcut(r)}requestFocus(r){ee.makeFirst(this.stack,r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var M6=["content"];function x6(t,e){if(t&1){let n=X();ge(0,"div",8,0),Be("click",function(){L(n);let i=_(2);return V(i.overlayClick())}),fe()}}function P6(t,e){if(t&1&&(ge(0,"span",10),Y(1),fe()),t&2){let n=_(3);b(),Me(n.getTitle())}}function N6(t,e){if(t&1){let n=X();ge(0,"i",14),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),fe()}if(t&2){let n=_(2).$implicit,r=_(4);jf("icon-button "+r.getButtonIconClass(n)),le("disabled",r.isDisabled(n))}}function k6(t,e){if(t&1){let n=X();ge(0,"div",15),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),Y(1),fe()}if(t&2){let n=_(2).$implicit,r=_(4);le("disabled",r.isDisabled(n)),b(),Me(r.getButtonText(n))}}function O6(t,e){if(t&1&&(G(0,N6,1,4,"i",12),G(1,k6,2,3,"div",13)),t&2){let n=_().$implicit;q(n.iconClass?0:-1),b(),q(n.text?1:-1)}}function F6(t,e){if(t&1&&G(0,O6,2,2),t&2){let n=e.$implicit,r=_(4);q(r.isHidden(n)?-1:0)}}function L6(t,e){if(t&1&&(ge(0,"div",11),ne(1,F6,1,1,null,null,En),fe()),t&2){let n=_(2);b(),re(n.headerButtons)}}function V6(t,e){if(t&1){let n=X();ge(0,"div",9,1),Be("mousedown",function(i){L(n);let o=On(1),s=_(2);return V(s.onHeaderMouseDown(i,o))}),G(2,P6,2,1,"span",10),G(3,L6,3,0,"div",11),fe()}if(t&2){let n=_();b(2),q(n.title?2:-1),b(),q(n.headerButtons?3:-1)}}function j6(t,e){if(t&1&&(G(0,x6,2,0,"div",6),G(1,V6,4,2,"div",7)),t&2){let n=e;q(n.hideClickOverlay?-1:0),b(),q(n.title||n.headerButtons?1:-1)}}function U6(t,e){t&1&&(ge(0,"div",4),Lf(1,null,2),fe())}function B6(t,e){if(t&1){let n=X();ge(0,"i",14),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),fe()}if(t&2){let n=_(2).$implicit,r=_(2);jf("icon-button "+r.getButtonIconClass(n)),le("disabled",r.isDisabled(n))}}function $6(t,e){if(t&1){let n=X();ge(0,"div",15),Be("click",function(){L(n);let i=_(2).$implicit;return V(i.click&&i.click())}),Y(1),fe()}if(t&2){let n=_(2).$implicit,r=_(2);le("disabled",r.isDisabled(n)),b(),Me(r.getButtonText(n))}}function H6(t,e){if(t&1&&(G(0,B6,1,4,"i",12),G(1,$6,2,3,"div",13)),t&2){let n=_().$implicit;q(n.iconClass?0:-1),b(),q(n.text?1:-1)}}function z6(t,e){if(t&1&&G(0,H6,2,2),t&2){let n=e.$implicit,r=_(2);q(r.isHidden(n)?-1:0)}}function G6(t,e){t&1&&(ge(0,"div",5),ne(1,z6,1,1,null,null,En),fe()),t&2&&(b(),re(e.footerButtons))}var X1=(()=>{let e=class e{constructor(r,i,o,s){this.elementRef=r,this.dialogService=i,this.keyboardShortcutService=o,this.ngZone=s,this.ScreenUtils=xt,this.hidden=!0,this.borderWarning=!1,this.isMouseDown=!1,this.onDocumentMouseMove=a=>{if(xt.isLargeScreen()){if(a.preventDefault(),!this.isMouseDown)return;let c=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();(this.left===void 0||this.left===null)&&(this.left=c.left),(this.top===void 0||this.top===null)&&(this.top=c.top);let u=a.clientX-c.left;a.movementX<0&&u<this.mouseDownOffsetX?(this.left=this.left+a.movementX,this.left<0&&(this.left=0)):a.movementX>0&&u>this.mouseDownOffsetX&&(this.left=this.left+a.movementX,this.left+c.width>window.innerWidth+1&&(this.left=window.innerWidth-c.width));let h=a.clientY-c.top;a.movementY<0&&h<this.mouseDownOffsetY?(this.top=this.top+a.movementY,this.top<0&&(this.top=0)):a.movementY>0&&h>this.mouseDownOffsetY&&(this.top=this.top+a.movementY,this.top+c.height>window.innerHeight+2&&(this.top=window.innerHeight-c.height+2)),this.applyPosition()}},this.onDocumentMouseUp=()=>{if(xt.isLargeScreen()){if(this.isMouseDown=!1,this.hasPosition()){let a=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();this.persistCenterFromRect(a)}this.detachDragListeners()}},this.result=new Promise(a=>this.resolve=a)}ngAfterViewInit(){this.dialogElement=this.elementRef.nativeElement.querySelector(".dialog-container");let r=this.containerRef.createComponent(this.contentComponentType);this.contentComponentInstance=r.instance,this.contentComponentInstance.inputs=this.inputs,this.contentComponentInstance.resolve=this.resolve;let i=r.instance.configuration?.waitForContent;i?(this.hidden=!0,i.finally(()=>{this.hidden=!1,this.schedulePositionRestore()})):this.hidden=!1,this.keyboardShortcutService.register(this.contentComponentInstance),this.result.finally(()=>{this.keyboardShortcutService.unregister(this.contentComponentInstance),r.destroy()}),r.changeDetectorRef.detectChanges(),i||this.schedulePositionRestore()}ngOnDestroy(){this.detachDragListeners()}isHidden(r){return r.hidden&&r.hidden()}isDisabled(r){return r.disabled&&r.disabled()}getTitle(){let r=this.contentComponentInstance.configuration;return r?typeof r.title=="function"?r.title():r.title:""}getButtonText(r){return typeof r.text=="function"?r.text():r.text}getButtonIconClass(r){return typeof r.iconClass=="function"?r.iconClass():r.iconClass}onHeaderMouseDown(r,i){if(xt.isLargeScreen()&&r.buttons==1&&r.target==i){if(this.isMouseDown=!0,this.mouseDownOffsetX=r.offsetX,this.mouseDownOffsetY=r.offsetY,!this.hasPosition()){let o=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();this.top=o.top,this.left=o.left,this.applyPosition(),this.persistCenterFromRect(o)}this.attachDragListeners()}}attachDragListeners(){this.ngZone.runOutsideAngular(()=>{let r=this.elementRef.nativeElement.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove),r.addEventListener("mouseup",this.onDocumentMouseUp)})}detachDragListeners(){let r=this.elementRef.nativeElement.ownerDocument;r.removeEventListener("mousemove",this.onDocumentMouseMove),r.removeEventListener("mouseup",this.onDocumentMouseUp)}applyPosition(){xt.isLargeScreen()&&this.dialogElement&&(this.top!==void 0&&(this.dialogElement.style.top=`${this.top}px`),this.left!==void 0&&(this.dialogElement.style.left=`${this.left}px`))}hasPosition(){return Number.isFinite(this.top)&&Number.isFinite(this.left)}schedulePositionRestore(){xt.isLargeScreen()&&requestAnimationFrame(()=>this.restorePositionFromStorage())}resetPosition(){this.top=null,this.left=null,this.schedulePositionRestore()}restorePositionFromStorage(){if(!this.dialogElement||this.hasPosition())return;let r=(this.dialogElement??this.elementRef.nativeElement.firstChild).getBoundingClientRect();if(!r.width||!r.height)return;let i=this.getStoredCenter();if(i){this.left=i.x-r.width/2,this.top=i.y-r.height/2,this.applyPosition();return}this.centerInViewport(r)}getStoredCenter(){let r=this.getStoredNumber(this.getStorageKey(".centerX")),i=this.getStoredNumber(this.getStorageKey(".centerY"));return r===null||i===null?null:{x:r,y:i}}getStorageKey(r){return`${this.contentComponentType.name}${r}`}getStoredNumber(r){let i=window.localStorage.getItem(r);if(i===null)return null;let o=Number.parseFloat(i);return Number.isFinite(o)?o:null}persistCenterFromRect(r){let i=r.left+r.width/2,o=r.top+r.height/2;window.localStorage.setItem(this.getStorageKey(".centerX"),i.toString()),window.localStorage.setItem(this.getStorageKey(".centerY"),o.toString())}centerInViewport(r){let i=window.innerWidth/2,o=window.innerHeight/2;this.left=Math.max(0,i-r.width/2),this.top=Math.max(0,o-r.height/2),this.applyPosition()}overlayClick(){let r=this.dialogService.containerComponentInstances.indexOf(this);for(let i=r;i<this.dialogService.containerComponentInstances.length;i++){let o=this.dialogService.containerComponentInstances[i];o.borderWarning=!0,setTimeout(()=>o.borderWarning=!1,500)}}onClick(r){this.keyboardShortcutService.requestFocus(this.contentComponentInstance)}};e.\u0275fac=function(i){return new(i||e)(k(Ut),k(Ye),k(jc),k(Le))},e.\u0275cmp=ae({type:e,selectors:[["app-dialog-container"]],viewQuery:function(i,o){if(i&1&&Yl(M6,5,mr),i&2){let s;Jl(s=Zl())&&(o.containerRef=s.first)}},hostVars:2,hostBindings:function(i,o){i&1&&B("click",function(a){return o.onClick(a)}),i&2&&le("display-none",o.hidden)},decls:4,vars:9,consts:[["overlay",""],["header",""],["content",""],[1,"dialog-container"],[1,"content"],[1,"buttons"],[1,"overlay-effect"],[1,"header"],[1,"overlay-effect",3,"click"],[1,"header",3,"mousedown"],[1,"header-title"],[1,"flex","gap"],[3,"class","disabled"],[1,"button",3,"disabled"],[3,"click"],[1,"button",3,"click"]],template:function(i,o){if(i&1&&(ge(0,"div",3),G(1,j6,2,2),G(2,U6,3,0,"div",4),G(3,G6,3,0,"div",5),fe()),i&2){let s,a;at("top",o.top,"px")("left",o.left,"px"),le("border-warning",o.borderWarning),b(),q((s=o.contentComponentInstance==null?null:o.contentComponentInstance.configuration)?1:-1,s),b(),q(o.contentComponentType?2:-1),b(),q((a=o.contentComponentInstance==null?null:o.contentComponentInstance.configuration)?3:-1,a)}},styles:["[_nghost-%COMP%]{width:100vw;height:100vh;position:absolute;top:0;left:0;z-index:200;overflow:hidden;pointer-events:none}.dialog-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;border:1px solid var(--color-border);border-radius:.66666666rem;min-width:300px;background-color:var(--color-surface-100);pointer-events:all}@media screen and (max-width: 1280px){.dialog-container[_ngcontent-%COMP%]{max-width:calc(100% - .66666666rem);max-height:calc(100% - .66666666rem);top:50%!important;left:50%!important;transform:translate(-50%,-50%)}}@media screen and (min-width: 1280px){.dialog-container[_ngcontent-%COMP%]{max-width:80%;max-height:80%}}.dialog-container.border-warning[_ngcontent-%COMP%]{border-color:var(--color-negative)}.dialog-container[_ngcontent-%COMP%]:not(.border-warning){transition:border-color .5s}.dialog-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;overflow:auto;justify-content:center}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none;padding:1rem;gap:.33333333rem;border-bottom:1px solid var(--color-border)}.header[_ngcontent-%COMP%]:has(i){padding:.33333333rem .33333333rem .33333333rem 1rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{pointer-events:none}.buttons[_ngcontent-%COMP%]{gap:.33333333rem;padding:.33333333rem;height:3rem;display:flex;align-items:center;justify-content:space-evenly;border-top:1px solid var(--color-border)}.button[_ngcontent-%COMP%]{flex:1;transition:.5s;white-space:nowrap;min-width:auto}.overlay-effect[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:-1;-webkit-user-select:none;user-select:none}"]});let t=e;return t})();var rt=class{submit(){this.close()}processKeyboardShortcut(e){if(e.target.nodeName=="BODY")switch(e.key){case"Enter":this.submit();return;case"Escape":this.close();return}}};function q6(t,e){if(t&1&&(ge(0,"span"),Y(1),fe()),t&2){let n=e.$implicit;b(),Me(n)}}var eN=(()=>{let e=class e extends rt{ngOnInit(){this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>this.inputs.positiveButtonText||"Yes",click:()=>this.resolve(!0)},{text:()=>this.inputs.negativeButtonText||"Cancel",click:()=>this.resolve(!1)}]}}submit(){this.resolve(!0)}close(){this.resolve(!1)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=ae({type:e,selectors:[["app-confirmation-dialog"]],features:[Ve],decls:3,vars:0,consts:[[1,"container"]],template:function(i,o){i&1&&(ge(0,"div",0),ne(1,q6,2,1,"span",null,Xn),fe()),i&2&&(b(),re(o.inputs.messages))},styles:[".container[_ngcontent-%COMP%]{padding:1rem}"]});let t=e;return t})();var lN=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(k(uo),k(Ut))};static \u0275dir=Ot({type:t})}return t})(),fw=(()=>{class t extends lN{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275dir=Ot({type:t,features:[Ve]})}return t})(),Xg=new se("");var W6={provide:Xg,useExisting:di(()=>rr),multi:!0};function K6(){let t=er()?er().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Q6=new se(""),rr=(()=>{class t extends lN{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!K6())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(k(uo),k(Ut),k(Q6,8))};static \u0275dir=Ot({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[za([W6]),Ve]})}return t})();var Y6=new se(""),J6=new se("");function uN(t){return t!=null}function dN(t){return ho(t)?st(t):t}function hN(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function fN(t,e){return e.map(n=>n(t))}function Z6(t){return!t.validate}function pN(t){return t.map(e=>Z6(e)?e:n=>e.validate(n))}function X6(t){if(!t)return null;let e=t.filter(uN);return e.length==0?null:function(n){return hN(fN(n,e))}}function gN(t){return t!=null?X6(pN(t)):null}function eq(t){if(!t)return null;let e=t.filter(uN);return e.length==0?null:function(n){let r=fN(n,e).map(dN);return ov(r).pipe(Ie(hN))}}function mN(t){return t!=null?eq(pN(t)):null}function tN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function tq(t){return t._rawValidators}function nq(t){return t._rawAsyncValidators}function cw(t){return t?Array.isArray(t)?t:[t]:[]}function Yg(t,e){return Array.isArray(t)?t.includes(e):t===e}function nN(t,e){let n=cw(e);return cw(t).forEach(i=>{Yg(n,i)||n.push(i)}),n}function rN(t,e){return cw(e).filter(n=>!Yg(t,n))}var Jg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},lw=class extends Jg{name;get formDirective(){return null}get path(){return null}},gd=class extends Jg{_parent=null;name=null;valueAccessor=null},uw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mfe=Ee(H({},rq),{"[class.ng-submitted]":"isSubmitted"}),ir=(()=>{class t extends uw{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(k(gd,2))};static \u0275dir=Ot({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&le("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ve]})}return t})();var dd="VALID",Qg="INVALID",Uc="PENDING",hd="DISABLED",Js=class{},Zg=class extends Js{value;source;constructor(e,n){super(),this.value=e,this.source=n}},fd=class extends Js{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},pd=class extends Js{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Bc=class extends Js{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var dw=class extends Js{source;constructor(e){super(),this.source=e}};function iq(t){return(em(t)?t.validators:t)||null}function oq(t){return Array.isArray(t)?gN(t):t||null}function sq(t,e){return(em(e)?e.asyncValidators:t)||null}function aq(t){return Array.isArray(t)?mN(t):t||null}function em(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var hw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nn(this.statusReactive)}set status(e){nn(()=>this.statusReactive.set(e))}_status=Ei(()=>this.statusReactive());statusReactive=nt(void 0);get valid(){return this.status===dd}get invalid(){return this.status===Qg}get pending(){return this.status==Uc}get disabled(){return this.status===hd}get enabled(){return this.status!==hd}errors;get pristine(){return nn(this.pristineReactive)}set pristine(e){nn(()=>this.pristineReactive.set(e))}_pristine=Ei(()=>this.pristineReactive());pristineReactive=nt(!0);get dirty(){return!this.pristine}get touched(){return nn(this.touchedReactive)}set touched(e){nn(()=>this.touchedReactive.set(e))}_touched=Ei(()=>this.touchedReactive());touchedReactive=nt(!1);get untouched(){return!this.touched}_events=new Et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(nN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rN(e,this._rawAsyncValidators))}hasValidator(e){return Yg(this._rawValidators,e)}hasAsyncValidator(e){return Yg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ee(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new pd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new pd(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ee(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new fd(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new fd(!0,r))}markAsPending(e={}){this.status=Uc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ee(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=hd,this.errors=null,this._forEachChild(i=>{i.disable(Ee(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zg(this.value,r)),this._events.next(new Bc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=dd,this._forEachChild(r=>{r.enable(Ee(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dd||this.status===Uc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zg(this.value,n)),this._events.next(new Bc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ee(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hd:dd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Uc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=dN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Bc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ft,this.statusChanges=new ft}_calculateStatus(){return this._allControlsDisabled()?hd:this.errors?Qg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uc)?Uc:this._anyControlsHaveStatus(Qg)?Qg:dd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new fd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new pd(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){em(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=oq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=aq(this._rawAsyncValidators)}};var vN=new se("",{providedIn:"root",factory:()=>pw}),pw="always";function cq(t,e){return[...e.path,t]}function lq(t,e,n=pw){dq(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),hq(t,e),pq(t,e),fq(t,e),uq(t,e)}function iN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function uq(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function dq(t,e){let n=tq(t);e.validator!==null?t.setValidators(tN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=nq(t);e.asyncValidator!==null?t.setAsyncValidators(tN(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();iN(e._rawValidators,i),iN(e._rawAsyncValidators,i)}function hq(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yN(t,e)})}function fq(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function pq(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function gq(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function mq(t){return Object.getPrototypeOf(t.constructor)===fw}function vq(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===rr?n=o:mq(o)?r=o:i=o}),i||r||n||null}function oN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var yq=class extends hw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(iq(n),sq(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),em(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new dw(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _q={provide:gd,useExisting:di(()=>zn)},aN=Promise.resolve(),zn=(()=>{class t extends gd{_changeDetectorRef;callSetDisabledState;control=new yq;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ft;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=vq(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),gq(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){aN.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&J_(r);aN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?cq(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(k(lw,9),k(Y6,10),k(J6,10),k(Xg,10),k(go,8),k(vN,8))};static \u0275dir=Ot({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[za([_q]),Ve,ja]})}return t})();var Cq={provide:Xg,useExisting:di(()=>tm),multi:!0};function _N(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Eq(t){return t.split(":")[0]}var tm=(()=>{class t extends fw{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=F(Zn).injector;destroyRef=F(_n);cdr=F(go);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Gl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=_N(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=Eq(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275dir=Ot({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[za([Cq]),Ve]})}return t})(),CN=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(_N(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(k(Ut),k(uo),k(tm,9))};static \u0275dir=Ot({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),Iq={provide:Xg,useExisting:di(()=>EN),multi:!0};function cN(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function wq(t){return t.split(":")[0]}var EN=(()=>{class t extends fw{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=wq(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bt(t)))(i||t)}})();static \u0275dir=Ot({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[za([Iq]),Ve]})}return t})(),IN=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(cN(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(cN(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(k(Ut),k(uo),k(EN,9))};static \u0275dir=Ot({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var Tq=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ci({type:t});static \u0275inj=Dr({})}return t})();var sn=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:vN,useValue:n.callSetDisabledState??pw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ci({type:t});static \u0275inj=Dr({imports:[Tq]})}return t})();var wN=(()=>{let e=class e extends rt{ngOnInit(){this.value=this.inputs.defaultValue,this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.resolve(void 0)},{text:()=>this.inputs.positiveButtonText||"Submit",disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}canSubmit(){return!(this.inputs.validationFn&&!this.inputs.validationFn(this.value))}submit(){this.canSubmit()&&this.resolve(this.value)}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=ae({type:e,selectors:[["app-input-dialog"]],features:[Ve],decls:1,vars:2,consts:[["autofocus","",3,"ngModelChange","ngModel","placeholder"]],template:function(i,o){i&1&&(R(0,"input",0),wn("ngModelChange",function(a){return Fn(o.value,a)||(o.value=a),a}),P()),i&2&&(In("ngModel",o.value),ie("placeholder",o.inputs.placeholder))},dependencies:[sn,rr,ir,zn],styles:["[_nghost-%COMP%]{display:block;width:650px;padding:.33333333rem}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();function bq(t,e){if(t&1&&(ge(0,"span"),Y(1),fe()),t&2){let n=e.$implicit;b(),Me(n)}}var TN=(()=>{let e=class e extends rt{ngOnInit(){this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"OK",click:()=>this.resolve()}]}}close(){this.resolve()}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=ae({type:e,selectors:[["app-message-dialog"]],features:[Ve],decls:3,vars:0,consts:[[1,"container"]],template:function(i,o){i&1&&(ge(0,"div",0),ne(1,bq,2,1,"span",null,Xn),fe()),i&2&&(b(),re(o.inputs.messages))},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}"]});let t=e;return t})();function Sq(t,e){if(t&1){let n=X();R(0,"div",7),B("click",function(){let i=L(n).$implicit,o=_();return V(o.toggle(i))}),W(1,"i",8),R(2,"span"),Y(3),P(),W(4,"i",9),P()}if(t&2){let n=e.$implicit,r=_();b(3),Me(r.getText(n))}}function Dq(t,e){t&1&&W(0,"div",4)}function Aq(t,e){if(t&1){let n=X();R(0,"div",7),B("click",function(){let i=L(n).$implicit,o=_();return V(o.toggle(i))}),W(1,"i",9),R(2,"span"),Y(3),P(),W(4,"i",9),P()}if(t&2){let n=e.$implicit,r=_();le("disabled",r.inputs.disableFn&&r.inputs.disableFn(n,r.selection))("unavailable",!r.isAvailable(n)),b(3),Me(r.getText(n))}}var bN=(()=>{let e=class e extends rt{constructor(){super(...arguments),this.query="",this.selection=[]}ngOnInit(){this.selection=this.inputs.defaultSelection?[...this.inputs.defaultSelection]:[],this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:"Cancel",click:()=>this.resolve(void 0)},{text:()=>{let r;return this.inputs.positiveButtonText?typeof this.inputs.positiveButtonText=="string"?r=this.inputs.positiveButtonText:r=this.inputs.positiveButtonText():r="Submit",r+" ("+this.selection.length+")"},disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}isAvailable(r){return this.getText(r).toLocaleLowerCase().includes(this.query.toLocaleLowerCase())}getText(r){return this.inputs.getText?this.inputs.getText(r):r}toggle(r){ee.toggle(this.selection,r,!0),this.inputs.onSelectionChange&&this.inputs.onSelectionChange(this.selection,r)}canSubmit(){return!0}submit(){this.canSubmit()&&this.resolve(this.selection)}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=ae({type:e,selectors:[["app-multi-select-dialog"]],features:[Ve],decls:9,vars:2,consts:[["placeholder","Search","autofocus","",3,"ngModelChange","ngModel"],[1,"content-container"],[1,"y-scrollbar-container","selection-container"],[1,"flex-1","flex","gap","align-items-center","cursor-pointer","hover-brighten"],[1,"h-separator"],[1,"y-scrollbar-container","options-container"],[1,"flex-1","flex","gap","align-items-center","cursor-pointer","hover-brighten",3,"disabled","unavailable"],[1,"flex-1","flex","gap","align-items-center","cursor-pointer","hover-brighten",3,"click"],[1,"fa-solid","fa-check",2,"margin-top","1px"],[1,"fa-solid","fa-check","opacity-0"]],template:function(i,o){i&1&&(R(0,"input",0),wn("ngModelChange",function(a){return Fn(o.query,a)||(o.query=a),a}),P(),R(1,"div",1)(2,"div",2),ne(3,Sq,5,1,"div",3,Xn),P(),G(5,Dq,1,0,"div",4),R(6,"div",5),ne(7,Aq,5,5,"div",6,Xn),P()()),i&2&&(In("ngModel",o.query),b(3),re(o.selection),b(2),q(o.selection.length?5:-1),b(2),re(o.inputs.options))},dependencies:[sn,rr,ir,zn],styles:["[_nghost-%COMP%]{display:block;padding:.33333333rem .33333333rem 0;line-height:24px;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]{height:50vh}}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .selection-container[_ngcontent-%COMP%]{max-height:50%}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]{height:0;opacity:0;pointer-events:none}"]});let t=e;return t})();function Rq(t,e){if(t&1&&(R(0,"option",1),Y(1),P()),t&2){let n=_();ie("ngValue",null)("selected",!n.value),b(),Me(n.inputs.nullOption)}}function Mq(t,e){if(t&1&&(R(0,"option",1),Y(1),P()),t&2){let n=e.$implicit,r=_();ie("ngValue",n)("selected",r.value===n),b(),Me(r.getText(n))}}var SN=(()=>{let e=class e extends rt{ngOnInit(){this.value=this.inputs.defaultValue,this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.resolve(void 0)},{text:()=>this.inputs.positiveButtonText||"Submit",disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}getText(r){return this.inputs.getText?this.inputs.getText(r):r}canSubmit(){return this.value!==void 0}submit(){this.canSubmit()&&this.resolve(this.value)}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=ae({type:e,selectors:[["app-select-dialog"]],features:[Ve],decls:4,vars:2,consts:[[3,"ngModelChange","ngModel"],[3,"ngValue","selected"]],template:function(i,o){i&1&&(R(0,"select",0),wn("ngModelChange",function(a){return Fn(o.value,a)||(o.value=a),a}),G(1,Rq,2,3,"option",1),ne(2,Mq,2,3,"option",1,Xn),P()),i&2&&(In("ngModel",o.value),b(),q(o.inputs.nullOption!==void 0?1:-1),b(),re(o.inputs.options))},dependencies:[sn,CN,IN,tm,ir,zn],styles:["[_nghost-%COMP%]{display:block;padding:.33333333rem}[_nghost-%COMP%]   select[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();var bn=class{static format(e,...n){do e=e.replace("%s",n.shift()||"");while(e.includes("%s"));return e}static capitalize(e){if(!this.isEmpty(e))return e.substring(0,1).toUpperCase()+e.substring(1)}static isEmpty(e){return!e||typeof e!="string"||e.trim().length==0}static getWordCount(e){return e.split(new RegExp(`[^ /
]+`,"g")).length-1}};var nm=(()=>{let e=class e{constructor(r){this.elementRef=r,this.create=new ft}ngOnInit(){this.create.emit(this.elementRef)}};e.\u0275fac=function(i){return new(i||e)(k(Ut))},e.\u0275dir=Ot({type:e,selectors:[["","create",""]],outputs:{create:"create"}});let t=e;return t})();function xq(t,e){if(t&1){let n=X();R(0,"div",1)(1,"span"),Y(2),P(),R(3,"i",3),B("click",function(){let i=L(n).$implicit,o=_();return V(o.remove(i))}),P()()}if(t&2){let n=e.$implicit;b(2),Me(n)}}var DN=(()=>{let e=class e extends rt{constructor(){super(...arguments),this.values=[],this.inputValue=""}ngOnInit(){this.values=[...this.inputs.defaultValues],this.configuration={title:this.inputs.title,headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.resolve(void 0)},{text:()=>this.inputs.positiveButtonText||"Submit",disabled:()=>!this.canSubmit(),click:()=>this.submit()}]}}remove(r){ee.remove(this.values,r)}onInputKeyPress(r){r.key==="Enter"&&(bn.isEmpty(this.inputValue)?this.resolve(this.values):(this.values.push(this.inputValue),this.inputValue=""))}canSubmit(){return!0}submit(){this.canSubmit()&&(bn.isEmpty(this.inputValue)||this.values.push(this.inputValue),this.resolve(this.values))}close(){this.resolve(void 0)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=bt(e)))(o||e)}})(),e.\u0275cmp=ae({type:e,selectors:[["app-multi-input-dialog"]],features:[Ve],decls:4,vars:1,consts:[["tagsInput",""],[1,"tag"],["placeholder","Start typing and press enter",3,"ngModelChange","keypress","create","focus","ngModel"],[1,"fa-solid","fa-times","cursor-pointer","hover-brighten",3,"click"]],template:function(i,o){if(i&1){let s=X();ne(0,xq,4,1,"div",1,Xn),R(2,"input",2,0),wn("ngModelChange",function(c){return L(s),Fn(o.inputValue,c)||(o.inputValue=c),V(c)}),B("keypress",function(c){return L(s),V(o.onInputKeyPress(c))})("create",function(){L(s);let c=On(3);return V(c.focus())})("focus",function(){L(s);let c=On(3);return V(c.select())}),P()}i&2&&(re(o.values),b(2),In("ngModel",o.inputValue))},dependencies:[sn,rr,ir,zn,nm],styles:["[_nghost-%COMP%]{width:650px;padding:.33333333rem;display:flex;flex-direction:row;flex-wrap:wrap;gap:.33333333rem}[_nghost-%COMP%]   .tag[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:.33333333rem;padding:.2rem .33333333rem;display:flex;align-items:center;gap:.2rem}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:220px;min-height:0;border:none;caret-color:var(--color-text-secondary);font-variant-numeric:tabular-nums;-webkit-user-select:none;user-select:none}"]});let t=e;return t})();var Ye=(()=>{let e=class e{constructor(r,i){this.applicationRef=r,this.injector=i,this.containerComponentInstances=[]}createMessage(r){return this.create(TN,r)}createConfirmation(r){return this.create(eN,r)}createInput(r){return this.create(wN,r)}createMultiInput(r){return this.create(DN,r)}createSelect(r){return this.create(SN,r)}createMultiSelect(r){return this.create(bN,r)}create(r,i){let o=ee.getLast(this.containerComponentInstances.filter(c=>c.contentComponentType==r));if(o&&!o.contentComponentInstance.configuration.allowMultiple)return;let s=PA(X1,{environmentInjector:this.injector}),a=s.instance;return a.contentComponentType=r,a.inputs=i,a.result.finally(()=>{ee.remove(this.containerComponentInstances,a),this.applicationRef.detachView(s.hostView),s.destroy()}),o&&(a.top=o.top+10,a.left=o.left+10),this.containerComponentInstances.push(a),this.applicationRef.attachView(s.hostView),document.body.firstElementChild.appendChild(s.location.nativeElement),s.changeDetectorRef.detectChanges(),a.result}};e.\u0275fac=function(i){return new(i||e)(z(Zn),z(ot))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Je=(()=>{let e=class e{constructor(r){this.dialogService=r,this.headerSections=["start","center","end"],this.headerState=this.createEmptyHeader(),this.headerCollector=nt(this.createEmptyHeader()),this.header=this.headerCollector.asReadonly(),this.appSettings=nt(this.loadAppSettings()),this.applicationSettings={id:"app",label:"Application",items:[{id:"dark-theme",type:"toggle",label:"Dark Theme",getValue:()=>this.darkTheme,onChange:i=>this.darkTheme=i},{id:"reduce-data-usage",type:"toggle",label:"Reduce Data Usage",getValue:()=>this.reduceDataUsage,onChange:i=>this.reduceDataUsage=i},{id:"reset-dialog-positions",type:"action",label:"Reset Dialog Positions",onClick:()=>this.resetDialogPositions()}]},this.moduleSettingsProviders=[],this.loading=nt(!0),this.changes=nt(void 0),this.errors=nt(void 0),this.applyTheme(this.appSettings().darkTheme),this.persistSettings(this.appSettings()),this.updateHeader()}get darkTheme(){return this.appSettings().darkTheme}set darkTheme(r){this.setAppSettings({darkTheme:r})}toggleTheme(){this.setAppSettings({darkTheme:!this.appSettings().darkTheme})}get reduceDataUsage(){return this.appSettings().reduceDataUsage}set reduceDataUsage(r){this.setAppSettings({reduceDataUsage:r})}addHeaderButton(r,i,o="last"){this.addHeaderButtons(r,[i],o)}addHeaderButtons(r,i,o=r==="end"?"first":"last"){let a=(this.headerState[r]??[]).filter(c=>!i.some(u=>u.id===c.id));o==="first"?this.headerState[r]=[...i,...a]:this.headerState[r]=[...a,...i],this.updateHeader()}removeHeaderButtons(r){let i=!1;this.headerSections.forEach(o=>{let s=this.headerState[o]??[],a=s.filter(c=>!r.includes(c.id));a.length!==s.length&&(this.headerState[o]=a,i=!0)}),i&&this.updateHeader()}registerModuleSettings(r){let i=this.moduleSettingsProviders.findIndex(o=>o.id===r.id);i>=0?this.moduleSettingsProviders[i]=r:this.moduleSettingsProviders.push(r)}getRegisteredModuleSettings(){return this.moduleSettingsProviders}getApplicationSettings(){return this.applicationSettings}getApplicationSettingsState(){return this.appSettings.asReadonly()}getApplicationSettingsItems(){return this.applicationSettings.items}updateHeader(){this.headerCollector.set({start:[...this.headerState.start??[]],center:[...this.headerState.center??[]],end:[...this.headerState.end??[]]})}createEmptyHeader(){return{start:[],center:[],end:[]}}setAppSettings(r){let i=H(H({},this.appSettings()),r);this.appSettings.set(i),this.persistSettings(i),this.applyTheme(i.darkTheme)}loadAppSettings(){let r=localStorage.getItem(Ft.KEY_SETTINGS);if(r)try{let i=JSON.parse(r);if(i&&typeof i.darkTheme=="boolean"&&typeof i.reduceDataUsage=="boolean")return i}catch{}return{darkTheme:!1,reduceDataUsage:!1}}persistSettings(r){localStorage.setItem(Ft.KEY_SETTINGS,JSON.stringify(r))}applyTheme(r){document.body.classList.toggle("dark-theme",r),document.body.classList.toggle("light-theme",!r),document.body.style.colorScheme=r?"dark":"light"}resetDialogPositions(){for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);(i.endsWith(".centerX")||i.endsWith(".centerY"))&&localStorage.removeItem(i)}this.dialogService.containerComponentInstances.forEach(r=>r.resetPosition())}};e.\u0275fac=function(i){return new(i||e)(z(Ye))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gw=(t,e)=>e.id;function Pq(t,e){if(t&1&&W(0,"i",7),t&2){let n=e.$implicit;ie("ngClass",n)}}function Nq(t,e){if(t&1){let n=X();R(0,"span",5),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),R(1,"span",6),ne(2,Pq,1,1,"i",7,En),P()()}if(t&2){_();let n=po(0),r=_().$implicit,i=_();le("disabled",i.isDisabled(r)),ie("title",i.getTooltip(r)),b(2),re(n)}}function kq(t,e){if(t&1){let n=X();R(0,"i",8),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),P()}if(t&2){_();let n=po(0),r=_().$implicit,i=_();le("disabled",i.isDisabled(r)),ie("ngClass",n)("title",i.getTooltip(r))}}function Oq(t,e){if(t&1&&(Ha(0),G(1,Nq,4,3,"span",3)(2,kq,1,4,"i",4)),t&2){let n=_().$implicit,r=_(),i=Xl(r.resolveClasses(n.classes));b(),q(r.isStackedClasses(i)?1:2)}}function Fq(t,e){if(t&1&&G(0,Oq,3,2),t&2){let n=e.$implicit,r=_();q(r.isHidden(n)?-1:0)}}function Lq(t,e){if(t&1&&W(0,"i",7),t&2){let n=e.$implicit;ie("ngClass",n)}}function Vq(t,e){if(t&1){let n=X();R(0,"span",5),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),R(1,"span",6),ne(2,Lq,1,1,"i",7,En),P()()}if(t&2){_();let n=po(0),r=_().$implicit,i=_();le("disabled",i.isDisabled(r)),ie("title",i.getTooltip(r)),b(2),re(n)}}function jq(t,e){if(t&1){let n=X();R(0,"i",8),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),P()}if(t&2){_();let n=po(0),r=_().$implicit,i=_();le("disabled",i.isDisabled(r)),ie("ngClass",n)("title",i.getTooltip(r))}}function Uq(t,e){if(t&1&&(Ha(0),G(1,Vq,4,3,"span",3)(2,jq,1,4,"i",4)),t&2){let n=_().$implicit,r=_(),i=Xl(r.resolveClasses(n.classes));b(),q(r.isStackedClasses(i)?1:2)}}function Bq(t,e){if(t&1&&G(0,Uq,3,2),t&2){let n=e.$implicit,r=_();q(r.isHidden(n)?-1:0)}}function $q(t,e){if(t&1&&W(0,"i",7),t&2){let n=e.$implicit;ie("ngClass",n)}}function Hq(t,e){if(t&1){let n=X();R(0,"span",5),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),R(1,"span",6),ne(2,$q,1,1,"i",7,En),P()()}if(t&2){_();let n=po(0),r=_().$implicit,i=_();le("disabled",i.isDisabled(r)),ie("title",i.getTooltip(r)),b(2),re(n)}}function zq(t,e){if(t&1){let n=X();R(0,"i",8),B("click",function(){L(n);let i=_(2).$implicit,o=_();return V(o.onClick(i))}),P()}if(t&2){_();let n=po(0),r=_().$implicit,i=_();le("disabled",i.isDisabled(r)),ie("ngClass",n)("title",i.getTooltip(r))}}function Gq(t,e){if(t&1&&(Ha(0),G(1,Hq,4,3,"span",3)(2,zq,1,4,"i",4)),t&2){let n=_().$implicit,r=_(),i=Xl(r.resolveClasses(n.classes));b(),q(r.isStackedClasses(i)?1:2)}}function qq(t,e){if(t&1&&G(0,Gq,3,2),t&2){let n=e.$implicit,r=_();q(r.isHidden(n)?-1:0)}}var AN=(()=>{let e=class e{constructor(r){this.applicationService=r}resolveClasses(r){if(r)return typeof r=="function"?r():r}isStackedClasses(r){return Array.isArray(r)&&r.length>1}isDisabled(r){let i=r.disabled;return typeof i=="function"?i():!!i}isHidden(r){let i=r.hidden;return typeof i=="function"?i():!!i}getTooltip(r){let i=r.tooltip;return typeof i=="function"?i():i}onClick(r){r.onClick&&!this.isDisabled(r)&&!this.isHidden(r)&&r.onClick()}};e.\u0275fac=function(i){return new(i||e)(k(Je))},e.\u0275cmp=ae({type:e,selectors:[["app-header"]],decls:9,vars:0,consts:[[1,"header-start"],[1,"header-center"],[1,"header-end"],[1,"icon-button",3,"disabled","title"],[1,"icon-button",3,"ngClass","disabled","title"],[1,"icon-button",3,"click","title"],[1,"fa-stack"],[1,"fa-stack-1x","pointer-events-none",3,"ngClass"],[1,"icon-button",3,"click","ngClass","title"]],template:function(i,o){if(i&1&&(R(0,"div",0),ne(1,Fq,1,1,null,null,gw),P(),R(3,"div",1),ne(4,Bq,1,1,null,null,gw),P(),R(6,"div",2),ne(7,qq,1,1,null,null,gw),P()),i&2){let s=o.applicationService.header();b(),re(s.start),b(3),re(s.center),b(3),re(s.end)}},dependencies:[Kt],styles:["[_nghost-%COMP%]{padding:.33333333rem;border-bottom:1px solid var(--color-border);display:grid;grid-template-columns:1fr 1fr 1fr}[_nghost-%COMP%]   .header-start[_ngcontent-%COMP%], [_nghost-%COMP%]   .header-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .header-end[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.33333333rem}[_nghost-%COMP%]   .header-start[_ngcontent-%COMP%]{justify-content:start}[_nghost-%COMP%]   .header-center[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .header-end[_ngcontent-%COMP%]{justify-content:end}"]});let t=e;return t})();var ei=class{constructor(e,n){this.length=e,n&&n>e&&(this.maxLength=n)}restart(e){clearTimeout(this.timeout),this.runnable=e,this.timeout=setTimeout(()=>{e&&e(),this.timeout=null,this.maxLengthTimeout&&(clearTimeout(this.maxLengthTimeout),this.maxLengthTimeout=null)},this.length),this.maxLength&&!this.maxLengthTimeout&&(this.maxLengthTimeout=setTimeout(()=>{e&&e(),this.maxLengthTimeout=null,clearTimeout(this.timeout),this.timeout=null},this.maxLength))}abort(){clearTimeout(this.timeout),this.timeout=null,clearTimeout(this.maxLengthTimeout),this.maxLengthTimeout=null}complete(){this.abort(),this.runnable&&this.runnable()}isActive(){return this.timeout!=null}};function Wq(t,e){t&1&&(R(0,"div",1),Cn("anim-fade-out"),W(1,"span",3),P())}var RN=(()=>{let e=class e{constructor(r,i){this.keyboardShortcutService=r,this.applicationService=i,this.hideLoadingBarDelay=new ei(1500),dn(()=>{this.applicationService.changes()!==void 0&&this.hideLoadingBarDelay.restart()})}getLoadingBarColor(){return this.applicationService.changes()?"orange":this.applicationService.errors()?"red":this.hideLoadingBarDelay.isActive()?"limegreen":"transparent"}onKeyDown(r){this.keyboardShortcutService.next(r)}};e.\u0275fac=function(i){return new(i||e)(k(jc),k(Je))},e.\u0275cmp=ae({type:e,selectors:[["app-root"]],hostBindings:function(i,o){i&1&&B("keydown",function(a){return o.onKeyDown(a)},v_)},decls:5,vars:3,consts:[[1,"loading-overlay-bar"],[1,"loading-overlay-container","anim-fade-in"],[1,"app-content","center"],[1,"loading-spinner"]],template:function(i,o){i&1&&(W(0,"div",0),G(1,Wq,2,0,"div",1),W(2,"app-header"),R(3,"div",2),W(4,"router-outlet"),P()),i&2&&(at("background-color",o.getLoadingBarColor()),b(),q(o.applicationService.loading()?1:-1))},dependencies:[Ru,AN],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;color:var(--color-text-secondary);position:relative}.app-content[_ngcontent-%COMP%]{flex:1;display:flex;min-height:0;min-width:0;position:relative}.loading-overlay-bar[_ngcontent-%COMP%]{width:100%;height:1px;position:absolute;pointer-events:none;z-index:101;background-color:transparent;transition-property:background-color;transition-duration:.5s}.loading-overlay-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);z-index:100;inset:0}.loading-overlay-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:75px;height:75px;border-width:3px;border-color:var(--color-surface-200);border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s infinite linear;border-radius:50%;border-style:solid}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]});let t=e;return t})();var We=class{static isImage(e){return e.mimeType.includes("image")&&e.thumbnailLink!=null}static isVideo(e){return e.mimeType.includes("video")&&e.thumbnailLink!=null}static isFolder(e){return e.mimeType=="application/vnd.google-apps.folder"}};var Hc=class{constructor(e){this.http=e,this.API_KEY="AIzaSyBLAfLb8QHSIqXPFTh2YJEMfMoW8EhJpRU"}createFile(e,n,r){let i="https://content.googleapis.com/drive/v3/files?key="+this.API_KEY;return vn(this.http.post(i,{name:e,parents:n,mimeType:r}))}createFolder(e,n){let r="https://content.googleapis.com/drive/v3/files?key="+this.API_KEY;return vn(this.http.post(r,{name:e,mimeType:"application/vnd.google-apps.folder",parents:[n]}))}getFolderMetadata(e="root"){let r="https://content.googleapis.com/drive/v3/files?pageSize=1000&q="+("'"+e+"' in parents and trashed=false")+"&fields=files("+this.FIELDS+")&key="+this.API_KEY;return this.getFileArrayPromise(r)}getEntityMetadata(e){let n="https://content.googleapis.com/drive/v3/files/"+e+"?fields="+this.FIELDS+"&key="+this.API_KEY;return vn(this.http.get(n))}getContent(e){let n="https://www.googleapis.com/drive/v3/files/"+e;return vn(this.http.get(n,{params:{alt:"media"},responseType:"json"}))}updateContent(e,n){let r="https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=media";return vn(this.http.patch(r,n))}move(e,n,r){let i="https://www.googleapis.com/drive/v3/files/"+e+"?removeParents="+n+"&addParents="+r+"&key="+this.API_KEY;return vn(this.http.patch(i,{}))}trash(e){return this.updateMetadata(e,{trashed:!0})}updateProperty(e,n,r){return this.updateMetadata(e,{appProperties:{[n]:r}})}updateProperties(e,n){return this.updateMetadata(e,{appProperties:n})}download(e){return w(this,null,function*(){let n="https://www.googleapis.com/drive/v3/files/"+e.id,r=yield vn(this.http.get(n,{params:{alt:"media"},responseType:"blob"})),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e.name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)})}openFolderById(e){let n="https://drive.google.com/drive/folders/"+e;window.open(n,"_blank")}openSearch(e){let n="https://drive.google.com/drive/search?q="+e+"%20title:"+e;window.open(n,"_blank")}updateMetadata(e,n){let r="https://content.googleapis.com/drive/v3/files/"+e+"?fields="+this.FIELDS+"&key="+this.API_KEY;return vn(this.http.patch(r,n))}getFileArrayPromise(e,n){return n?vn(this.http.post(e,n).pipe(Ie(r=>r?r.files:[]))):vn(this.http.get(e).pipe(Ie(r=>r?r.files:[])))}};var ti=(()=>{let e=class e extends Hc{constructor(r){super(r),this.http=r,this.FIELDS="id,name,mimeType,size,thumbnailLink,imageMediaMetadata,videoMediaMetadata"}get dataFileId(){return sessionStorage.getItem(Ft.KEY_GOOGLE_DATA_FILE_ID)}set dataFileId(r){sessionStorage.setItem(Ft.KEY_GOOGLE_DATA_FILE_ID,r)}getData(){return w(this,null,function*(){let r="https://www.googleapis.com/drive/v3/files/"+this.dataFileId;return yield vn(this.http.get(r,{params:{alt:"media"},responseType:"json"})).catch(i=>i)})}getBase64(r){return w(this,null,function*(){return new Promise(i=>{let o="https://www.googleapis.com/drive/v3/files/"+r;this.http.get(o,{params:{alt:"media"},responseType:"blob"}).subscribe(s=>{let a=new FileReader;a.onload=c=>i(c.target.result),a.readAsDataURL(s)})})})}};e.\u0275fac=function(i){return new(i||e)(z(mo))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var MN=(t,e)=>e.id;function Kq(t,e){if(t&1){let n=X();ge(0,"span",1),Be("click",function(){let i=L(n).$implicit,o=_();return V(o.onDataFileClick(i))}),Y(1),fe()}if(t&2){let n=e.$implicit;b(),Me(n.name.substring(0,n.name.length-10))}}function Qq(t,e){if(t&1){let n=X();ge(0,"span",1),Be("click",function(){let i=L(n).$implicit,o=_();return V(o.onFolderClick(i))}),Y(1),fe()}if(t&2){let n=e.$implicit;b(),Me(n.name)}}var xN=(()=>{let e=class e extends rt{constructor(r,i){super(),this.googleService=r,this.applicationService=i,this.configuration={title:"Select a Google Drive Folder",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.close()}],waitForContent:new Promise(o=>this.ready=o)},this.FOLDER_ROOT="root",this.FOLDER_GALLERY_DATA="gallerydata",this.SUFFIX_DATA_FILE="-data.json",this.SUFFIX_ARCHIVE_FOLDER="-archive",this.loading=!0,this.applicationService.loading.set(!0)}ngOnInit(){return w(this,null,function*(){let r=yield this.googleService.getFolderMetadata();this.dataFolder=r.find(s=>s.name==this.FOLDER_GALLERY_DATA),this.dataFolder||(this.dataFolder=yield this.googleService.createFolder(this.FOLDER_GALLERY_DATA,this.FOLDER_ROOT));let i=yield this.googleService.getFolderMetadata(this.dataFolder.id);this.dataFiles=i.filter(s=>s.name.endsWith(this.SUFFIX_DATA_FILE));let o=this.dataFiles.map(s=>s.name.substring(0,s.name.indexOf(this.SUFFIX_DATA_FILE)));this.folders=r.filter(s=>We.isFolder(s)&&!o.includes(s.name)&&s.name!=this.FOLDER_GALLERY_DATA),this.applicationService.loading.set(!1),this.loading=!1,this.ready()})}onDataFileClick(r){this.applicationService.loading.set(!0),this.googleService.dataFileId=r.id,this.resolve()}onFolderClick(r){return w(this,null,function*(){this.applicationService.loading.set(!0);let i=yield this.googleService.createFile(r.name+this.SUFFIX_DATA_FILE,[this.dataFolder.id],"application/json"),o=yield this.googleService.createFolder(r.name+this.SUFFIX_ARCHIVE_FOLDER,this.dataFolder.id);this.googleService.dataFileId=i.id,yield this.googleService.updateContent(i.id,{dataFolderId:r.id,archiveFolderId:o.id}),this.resolve()})}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(ti),k(Je))},e.\u0275cmp=ae({type:e,selectors:[["app-folder-picker"]],features:[Ve],decls:4,vars:0,consts:[[1,"button","fluid"],[1,"button","fluid",3,"click"]],template:function(i,o){i&1&&(ne(0,Kq,2,1,"span",0,MN),ne(2,Qq,2,1,"span",0,MN)),i&2&&(re(o.dataFiles),b(2),re(o.folders))},dependencies:[Ge],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.33333333rem;padding:.33333333rem}"]});let t=e;return t})();var PN=(()=>{let e=class e{constructor(){this.valueChange=new ft}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-checkbox"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[[1,"cursor-pointer","fa-regular",3,"click","ngClass"]],template:function(i,o){i&1&&(R(0,"i",0),B("click",function(){return o.value=!o.value,o.valueChange.emit(o.value)}),P()),i&2&&ie("ngClass",o.value?"fa-circle-check":"fa-circle")},dependencies:[Ge,Kt],encapsulation:2});let t=e;return t})();var mw=(t,e)=>e.id;function Yq(t,e){if(t&1){let n=X();R(0,"div",6),B("click",function(){let i=L(n).$implicit,o=_();return V(o.setActiveTabId(i.id))}),Y(1),P()}if(t&2){let n=e.$implicit,r=_();le("active",n.id===r.activeTabId),b(),Me(n.label)}}function Jq(t,e){if(t&1){let n=X();R(0,"div",10),B("click",function(){L(n);let i=_().$implicit;return V(i.onChange(!i.getValue()))}),R(1,"span",8),Y(2),P(),W(3,"app-checkbox",11),P()}if(t&2){let n=_().$implicit;b(2),Me(n.label),b(),ie("value",n.getValue())}}function Zq(t,e){if(t&1){let n=X();R(0,"div",10),B("click",function(){L(n);let i=_().$implicit;return V(i.onClick())}),Y(1),W(2,"i",12),P()}if(t&2){let n=_().$implicit;b(),Me(n.label)}}function Xq(t,e){if(t&1&&G(0,Jq,4,2,"div",9)(1,Zq,3,1,"div",9),t&2){let n=e.$implicit;q(n.type==="toggle"?0:n.type==="action"?1:-1)}}function e5(t,e){if(t&1&&ne(0,Xq,2,1,null,null,mw),t&2){let n=_().$implicit;re(n.items)}}function t5(t,e){t&1&&(R(0,"span",8),Y(1,"No settings available."),P())}function n5(t,e){if(t&1&&(R(0,"div",7),G(1,e5,2,0)(2,t5,2,0,"span",8),P()),t&2){let n=e.$implicit,r=_();le("is-active",n.id===r.activeTabId),b(),q(n.items!=null&&n.items.length?1:2)}}var Po=(()=>{let e=class e extends rt{constructor(r){super(),this.applicationService=r,this.configuration={title:"Settings",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:"Close",click:()=>this.close()}]},this.tabs=[];let i=this.applicationService.getApplicationSettings();this.tabs=[i,...this.applicationService.getRegisteredModuleSettings()],this.activeTabId=sessionStorage.getItem(Ft.KEY_SETTINGS_ACTIVE_TAB)??i.id}get activeTab(){return this.tabs.find(r=>r.id===this.activeTabId)}setActiveTabId(r){this.activeTabId=r,sessionStorage.setItem(Ft.KEY_SETTINGS_ACTIVE_TAB,r)}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Je))},e.\u0275cmp=ae({type:e,selectors:[["app-application-settings"]],features:[Ve],decls:8,vars:0,consts:[[1,"settings-layout"],[1,"tabs"],[1,"button","smaller","fluid",3,"active"],[1,"v-separator"],[1,"tab-content"],[1,"tab-panel",3,"is-active"],[1,"button","smaller","fluid",3,"click"],[1,"tab-panel"],[1,"nowrap","user-select-none"],[1,"button","smaller","fluid","option-container"],[1,"button","smaller","fluid","option-container",3,"click"],[3,"value"],[1,"fa-solid","fa-play","fa-sm"]],template:function(i,o){i&1&&(R(0,"div",0)(1,"div",1),ne(2,Yq,2,3,"div",2,mw),P(),W(4,"div",3),R(5,"div",4),ne(6,n5,3,3,"div",5,mw),P()()),i&2&&(b(2),re(o.tabs),b(4),re(o.tabs))},dependencies:[Ge,PN],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem;width:100%;height:100%;box-sizing:border-box}.settings-layout[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;flex:1;min-height:0}.tabs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem}.tab-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr);grid-template-rows:minmax(0,1fr);flex:1;min-width:0}.tab-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;flex:1;min-width:0;grid-area:1/1;visibility:hidden;pointer-events:none}.tab-panel.is-active[_ngcontent-%COMP%]{visibility:visible;pointer-events:auto}.option-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.33333333rem}.full-width[_ngcontent-%COMP%]{width:100%;justify-content:center}"]});let t=e;return t})();var Vi=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var No=class{get colorClass(){switch(this.state){case 1:return"positive";case-1:return"negative";default:return""}}constructor(e=0){this.state=e}};var ji=class extends No{get pseudo(){return!this.group&&this.children.length!=0}getNameWithParents(e=" | "){return this.collectParents().concat(this).map(n=>n.name).join(e)}getCount(e){return this.group?null:this.pseudo?e.filter(n=>ee.intersection(n.tags,this.children).length).length:e.filter(n=>n.tags.includes(this)).length}collectParents(){return this._collectParents(this,[])}_collectParents(e,n){return e.parent&&(n.unshift(e.parent),this._collectParents(e.parent,n)),n}collectChildren(){return this._collectChildren(this,[])}_collectChildren(e,n){if(e.group)for(let r of e.children)n.push(r),this._collectChildren(r,n);return n}};var rm=class{static number(e,n){return Math.random()*(n?n-e:e)+(n?e:0)}static boolean(){return this.from([!0,!1])}static from(e,n){return n&&(Array.isArray(n)?e=e.filter(r=>!n.includes(r)):e=e.filter(r=>r!=n)),e[Math.floor(this.number(e.length))]}static percentage(e){return Math.random()<e/100}static oneIn(e){return Math.random()<1/e}static color(){let e=(Math.random()+.618033988749895)%1,n=this.number(.4,.6),r=.95,i=Math.floor(e*6),o=e*6-i,s=r*(1-n),a=r*(1-o*n),c=r*(1-(1-o)*n),u,h,p;switch(i%6){case 0:u=r,h=c,p=s;break;case 1:u=a,h=r,p=s;break;case 2:u=s,h=r,p=c;break;case 3:u=s,h=a,p=r;break;case 4:u=c,h=s,p=r;break;case 5:u=r,h=s,p=a;break}return"#"+Math.round(u*255).toString(16)+Math.round(h*255).toString(16)+Math.round(p*255).toString(16)}};var zc=class{constructor(){this.images=[],this.imagesToCompare=[],this.graph=new Map,this.imageById=new Map,this.imageByIdSize=0,this.imageByIdSource=null,this.comparisonAdjacency=null,this.comparisonAdjacencySource=null,this.comparisonAdjacencyCount=0,this.comparison=nt(null),this.availableComparisonsCount=null,this.totalComparisons=0,this.remainingComparisons=0,this.completeComparisons=0,this.estimateComparisons=0}start(e,n,r){this.estimateComparisons=this.calculateEstimateComparisons(n.length),this.comparisons=[],this.availableComparisons=[],this.availableKeyToIndex=new Map,this.availableComparisonsCount=null,this.graph=new Map,this.images=e??[],this.imagesToCompare=n??[],ee.shuffle(this.imagesToCompare);let i={};for(let o of this.images)this.graph.set(o,new Set),i[o.id]=o;if(r){let o=this.images.map(s=>s.id);r.comparisons.filter(([s,a])=>o.includes(s)&&o.includes(a)).map(([s,a])=>[i[s],i[a]]).forEach(([s,a])=>this.handleUserInput(s,a))}this.rebuildAvailableComparisons(),this.comparison.set(this.getNextComparison())}matchesImagesToCompare(e){if(!e)return this.imagesToCompare.length===0;if(e.length!==this.imagesToCompare.length)return!1;let n=new Set(this.imagesToCompare.map(r=>r.id));for(let r of e)if(!n.delete(r.id))return!1;return n.size===0}get progressPercent(){return this.totalComparisons===0?0:this.completeComparisons/this.totalComparisons*100}get estimateProgressPercent(){return this.estimateComparisons===0?0:Math.min(100,this.completeComparisons/this.estimateComparisons*100)}calculateEstimateComparisons(e){return e<=1?0:Math.round(e*(.914*Math.log2(e)+.734))}updateProgress(){if(!this.comparisons){this.completeComparisons=0,this.remainingComparisons=0,this.totalComparisons=0;return}let e=this.getComparisonProgress();this.completeComparisons=e.completed,this.remainingComparisons=e.remaining,this.totalComparisons=e.total}getNextComparison(){let e=this.collectAvailableComparisons();if(e.length===0)return null;let[n,r]=e[Math.floor(Math.random()*e.length)];return rm.boolean()?[n,r]:[r,n]}getComparisonProgress(){this.availableComparisonsCount===null&&this.collectAvailableComparisons();let e=this.comparisons.length,n=this.availableComparisonsCount??0;return{completed:e,remaining:n,total:e+n}}collectAvailableComparisons(){return this.availableComparisonsCount===null&&this.rebuildAvailableComparisons(),this.availableComparisons}hasPath(e,n){return this.graph.get(e)?.has(n)??!1}handleUserInput(e,n){if(!n){let r=this.comparison();if(!r)return;n=r[0]===e?r[1]:r[0]}this.graph.get(e).add(n),this.comparisons.push([e,n]),this.updateTransitiveRelations(e,n),this.comparison.set(this.getNextComparison()),this.updateProgress()}updateTransitiveRelations(e,n){let r=new Set(this.graph.get(n));r.add(n);let i=[];for(let[o,s]of this.graph.entries())(o===e||s.has(e))&&i.push(o);for(let o of i){let s=this.graph.get(o);for(let a of r)s.add(a)}this.pruneAvailableComparisons(i,r)}pruneAvailableComparisons(e,n){for(let r of e)for(let i of n)this.removeAvailablePair(r,i);this.availableComparisonsCount=this.availableComparisons.length}getRanking(){return this.getRankingFor(this.imagesToCompare)}getImagesToCompare(){return this.imagesToCompare??[]}getNearestWinners(e){if(!e)return[];let n=this.getRankingFor(this.images),r=n.indexOf(e);if(r===-1)return[];let i=[];for(let o=r-1;o>=0;o--){let s=n[o];this.graph.get(s)?.has(e)&&i.push(s)}return i}getNearestLosers(e){if(!e)return[];let n=this.graph.get(e);if(!n||n.size===0)return[];let r=this.getRankingFor(this.images),i=r.indexOf(e);if(i===-1)return[];let o=[];for(let s=i+1;s<r.length;s++){let a=r[s];n.has(a)&&o.push(a)}return o}getRankingFor(e){let n=e??[],r=new Map;n.forEach(s=>r.set(s,0));for(let[,s]of this.graph.entries())for(let a of s)r.has(a)&&r.set(a,(r.get(a)??0)+1);let i=n.filter(s=>(r.get(s)??0)===0),o=[];for(;i.length;){let s=i.shift();o.push(s);for(let a of this.graph.get(s))r.set(a,r.get(a)-1),r.get(a)===0&&i.push(a)}return o}skip(){this.comparison.set(this.getNextComparison())}undo(){if(ee.isEmpty(this.comparisons))return null;this.comparison.set(this.comparisons.pop()??null),this.graph=new Map,this.images.forEach(e=>this.graph.set(e,new Set)),this.availableComparisons=[],this.availableKeyToIndex=new Map;for(let[e,n]of this.comparisons)this.graph.get(e).add(n),this.updateTransitiveRelations(e,n);this.rebuildAvailableComparisons(),this.updateProgress()}getState(){return{comparisons:this.comparisons.map(([e,n])=>[e.id,n.id])}}rebuildAvailableComparisons(){this.availableComparisons=[],this.availableKeyToIndex=new Map;for(let e=0;e<this.imagesToCompare.length;e++)for(let n=e+1;n<this.imagesToCompare.length;n++){let r=this.imagesToCompare[e],i=this.imagesToCompare[n];!this.hasPath(r,i)&&!this.hasPath(i,r)&&this.addAvailablePair(r,i)}this.availableComparisonsCount=this.availableComparisons.length}addAvailablePair(e,n){let r=this.makePairKey(e,n);this.availableKeyToIndex.has(r)||(this.availableKeyToIndex.set(r,this.availableComparisons.length),this.availableComparisons.push([e,n]))}removeAvailablePair(e,n){let r=this.makePairKey(e,n),i=this.availableKeyToIndex.get(r);if(i===void 0)return;let o=this.availableComparisons.length-1;if(o>-1){if(i!==o){let s=this.availableComparisons[o];this.availableComparisons[i]=s,this.availableKeyToIndex.set(this.makePairKey(s[0],s[1]),i)}this.availableComparisons.pop()}this.availableKeyToIndex.delete(r)}makePairKey(e,n){let[r,i]=[e.id,n.id].sort();return`${r}|${i}`}getImageByIdMap(e){if(this.imageByIdSource!==e||this.imageByIdSize!==e.length){this.imageById.clear();for(let n of e)this.imageById.set(n.id,n);this.imageByIdSource=e,this.imageByIdSize=e.length}return this.imageById}getComparisonAdjacency(e){if(this.comparisonAdjacency&&this.comparisonAdjacencySource===e&&this.comparisonAdjacencyCount===e.length)return this.comparisonAdjacency;let n=new Map;for(let[r,i]of e){let o=n.get(r);o?o.push(i):n.set(r,[i])}return this.comparisonAdjacency=n,this.comparisonAdjacencySource=e,this.comparisonAdjacencyCount=e.length,n}};var je=(()=>{let e=class e{constructor(){this.viewMode="masonry",this.images=[],this.imageGroups=[],this.fullscreenImage=nt(null),this.filterVisible=xt.isLargeScreen(),this.tournament=new zc}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ze=(()=>{let e=class e{constructor(r,i){this.stateService=r,this.tagService=i,this.images=nt([]),this.masonryImages=Ei(()=>this.images().filter(o=>o.group?o==o.group.images.find(s=>s.passesFilters):!0)),this.favoritesFilter=new No(0),this.bookmarksFilter=new No(0),this.groupsFilter=new No(0)}updateFilters(...r){(ee.isEmpty(r)?this.stateService.images:r).forEach(i=>i.passesFilters=this.doesPassFilters(i)),this.images.set(this.stateService.images.filter(i=>i.passesFilters))}doesPassFilters(r){return!r||!this.doesPassFilter(this.favoritesFilter,r.heart)||!this.doesPassFilter(this.bookmarksFilter,r.bookmark)||!this.doesPassFilter(this.groupsFilter,r.group!=null)||!this.stateService.settings.showVideos&&We.isVideo(r)?!1:this.doesPassTagsCheck(r,this.tagService.getRootTags())}doesPassFilter(r,i){return!(r.state==-1&&i||r.state==1&&!i)}doesPassTagsCheck(r,i){for(let o of i)if(o.state==0){if(o.group&&!this.doesPassTagsCheck(r,o.children))return!1}else if(o.group){let s=ee.intersection(r.tags,o.collectChildren().concat(o));if(o.state==-1&&s.length!=0||o.state==1&&s.length==0)return!1}else if(o.pseudo){let s=ee.intersection(r.tags,o.children);if(o.state==-1&&s.length!=0||o.state==1&&s.length==0)return!1}else{let s=r.tags.includes(o);if(o.state==-1&&s||o.state==1&&!s)return!1}return!0}};e.\u0275fac=function(i){return new(i||e)(z(je),z(Lt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var im=class{};var om=class{};var sm=class extends om{};var zt=(()=>{let e=class e{constructor(r,i,o,s){this.injector=r,this.sanitizer=i,this.applicationService=o,this.googleService=s,this.saveDelay=new ei(5e3)}processData(){return w(this,null,function*(){let r=this.injector.get(je),i=yield this.googleService.getData();r.dataFolderId=i.dataFolderId,r.archiveFolderId=i.archiveFolderId,r.tournamentState=i.tournamentState,r.settings=i.settings??{};let o=this.injector.get(Ze);o.favoritesFilter.state=i.heartsFilter||0,o.bookmarksFilter.state=i.bookmarksFilter||0,o.groupsFilter.state=i.filterGroups||0,i.imageProperties||(i.imageProperties=[]),i.groupProperties||(i.groupProperties=[]),i.tagProperties||(i.tagProperties=[]);let s=this.injector.get(Lt);ee.push(s.tags,i.tagProperties.map(c=>this.parseTag(c))),s.tags.forEach(c=>c.children=i.tagProperties.find(u=>u.id==c.id).childIds.map(u=>s.tags.find(h=>h.id==u))),s.tags.forEach(c=>c.parent=s.tags.find(u=>u.children.includes(c)));let a=new Set;yield this.processImages(i,r.dataFolderId,r.images,s.tags,a),yield Promise.all(a);for(let c of i.imageProperties.filter(u=>!r.images.some(h=>u.id==h.id)))console.log(c),console.log("This image does not exist, but has a data entry. Removing image entry from data."),ee.remove(r.images,r.images.find(u=>u.id==c.id));ee.push(r.imageGroups,i.groupProperties.map(c=>{let u=new im;return u.images=r.images.filter(h=>c.imageIds.includes(h.id)),u.images.sort((h,p)=>c.imageIds.indexOf(h.id)-c.imageIds.indexOf(p.id)),u.images.forEach(h=>h.group=u),u})),o.updateFilters(),this.applicationService.loading.set(!1)})}processImages(r,i,o,s,a){return w(this,null,function*(){let c=yield this.googleService.getFolderMetadata(i);for(let u of c.filter(h=>We.isFolder(h)))a.add(this.processImages(r,u.id,o,s,a));ee.push(o,c.filter(u=>We.isImage(u)||We.isVideo(u)).map(u=>this.metaToImage(u,r.imageProperties.find(h=>h.id==u.id),i,s,this.applicationService.reduceDataUsage)))})}metaToImage(r,i,o,s,a){let c=new sm;return c.id=r.id,c.name=r.name,c.mimeType=r.mimeType,c.parentFolderId=o,c.size=r.size?Number(r.size):void 0,a?c.thumbnailLink=r.thumbnailLink:c.thumbnailLink=r.thumbnailLink.replace("=s220","=w440"),We.isImage(c)?(c.imageMediaMetadata=r.imageMediaMetadata,c.aspectRatio=c.imageMediaMetadata.width/c.imageMediaMetadata.height,c.contentLink=r.thumbnailLink.replace("=s220","=s"+Math.max(window.screen.width,window.screen.height))):We.isVideo(c)&&(c.videoMediaMetadata=r.videoMediaMetadata,c.videoMediaMetadata||(c.videoMediaMetadata={}),(!c.videoMediaMetadata.width||c.videoMediaMetadata.width==0)&&(c.videoMediaMetadata.width=1920),(!c.videoMediaMetadata.height||c.videoMediaMetadata.height==0)&&(c.videoMediaMetadata.height=1080),c.aspectRatio=c.videoMediaMetadata.width/c.videoMediaMetadata.height,c.contentLink=this.sanitizer.bypassSecurityTrustResourceUrl("https://drive.google.com/file/d/"+c.id+"/preview")),i?(c.heart=i.heart,c.bookmark=i.bookmark,c.tags=i.tagIds.map(u=>s.find(h=>h.id==u))):(c.heart=!1,c.bookmark=!0,c.tags=[]),c}parseTag(r){let i=new ji;return i.id=r.id,i.name=r.name,i.group=r.group,i.state=r.state,i.open=!1,i}save(r=!1){this.applicationService.changes.set(!0),this.saveDelay.restart(()=>this.serialize()),r&&this.saveDelay.complete()}serialize(){let r=this.injector.get(je),i=this.injector.get(Ze),o=this.injector.get(Lt),s={};s.dataFolderId=r.dataFolderId,s.archiveFolderId=r.archiveFolderId,s.heartsFilter=i.favoritesFilter.state,s.bookmarksFilter=i.bookmarksFilter.state,s.filterGroups=i.groupsFilter.state,s.settings=r.settings,s.tournamentState=r.tournamentState,s.imageProperties=r.images.map(a=>this.serializeImage(a)),s.groupProperties=r.imageGroups.filter(a=>!ee.isEmpty(a.images)).map(a=>this.serializeGroup(a)),s.tagProperties=o.tags.map(a=>this.serializeTag(a)),this.googleService.updateContent(this.googleService.dataFileId,s).then(a=>{a||this.applicationService.errors.set(!0)}).finally(()=>{this.applicationService.changes.set(!1)})}serializeImage(r){let i={};return i.id=r.id,i.heart=r.heart,i.bookmark=r.bookmark,i.tagIds=r.tags.map(o=>o.id),i}serializeGroup(r){let i={};return i.imageIds=r.images.map(o=>o.id),i}serializeTag(r){let i={};return i.id=r.id,i.name=r.name,i.group=r.group,i.state=r.state,i.childIds=r.children.map(o=>o.id),i}};e.\u0275fac=function(i){return new(i||e)(z(et),z(TC),z(Je),z(ti))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Lt=(()=>{let e=class e{constructor(r,i,o,s){this.injector=r,this.dialogService=i,this.stateService=o,this.serializationService=s,this.tags=[]}getRootTags(){return this.tags.filter(r=>!r.parent)}getParentPseudoTags(r){return this.tags.filter(i=>i.pseudo&&i.children.includes(r))}sort(r,i=!1){r&&(i?r.sort((o,s)=>o.getNameWithParents().localeCompare(s.getNameWithParents())):r.sort((o,s)=>o.name.localeCompare(s.name)))}openTagCreate(r){return w(this,null,function*(){if(r){let i=yield this.dialogService.createInput({title:"Create Tag: "+r.getNameWithParents(),placeholder:"Name",validationFn:o=>!r.children.filter(s=>!s.group).map(s=>s.name).includes(o)});if(!bn.isEmpty(i)){let o=new ji;o.id=Vi(),o.name=i,o.group=!1,o.state=0,o.parent=r,o.children=[],r.children.push(o),this.sort(r.children),this.tags.push(o),this.sort(this.tags),this.serializationService.save()}}})}openTagGroupCreate(r){return w(this,null,function*(){if(r){let i=yield this.dialogService.createInput({title:"Create Tag Group: "+r.getNameWithParents(),placeholder:"Name",validationFn:o=>!r.children.filter(s=>s.group).map(s=>s.name).includes(o)});if(!bn.isEmpty(i)){let o=new ji;o.id=Vi(),o.name=i,o.group=!0,o.state=0,o.parent=r,o.children=[],o.open=!0,r.children.push(o),this.sort(r.children),this.tags.push(o),this.sort(this.tags),this.serializationService.save()}}else{let i=yield this.dialogService.createInput({title:"Create Tag Group: Root",placeholder:"Name",validationFn:o=>!this.tags.filter(s=>!s.parent).map(s=>s.name).includes(o)});if(!bn.isEmpty(i)){let o=new ji;o.id=Vi(),o.name=i,o.group=!0,o.state=0,o.parent=r,o.children=[],o.open=!0,this.tags.push(o),this.sort(this.tags),this.serializationService.save()}}})}insertTagGroup(r){return w(this,null,function*(){if(r&&(yield this.dialogService.createConfirmation({title:"Confirmation",messages:["Insert Tag Group between '"+r.getNameWithParents()+"' and its parent?"]}))){let i=new ji;i.id=Vi(),i.name=r.name,i.group=!0,i.state=0,i.parent=r.parent,i.children=[r],i.open=!0,ee.remove(r.parent.children,r),ee.push(r.parent.children,i),this.sort(r.parent.children),r.parent=i,this.tags.push(i),this.serializationService.save()}})}openTagRename(r){return w(this,null,function*(){let i=yield this.dialogService.createInput({title:"Rename: "+r.getNameWithParents(),placeholder:"Name",defaultValue:r.name,validationFn:o=>r.parent?!r.parent.children.map(s=>s.name).includes(o):!this.tags.filter(s=>!s.parent).map(s=>s.name).includes(o)});bn.isEmpty(i)||(r.name=i,this.sort(r.parent?.children),this.sort(this.tags),this.serializationService.save())})}openTagDelete(r){return w(this,null,function*(){let i;if(r.group?i="Delete '"+r.getNameWithParents()+"' and its descendants?":i="Delete '"+r.getNameWithParents()+"'",yield this.dialogService.createConfirmation({title:"Confirmation",messages:[i]})){ee.remove(r.parent?.children,r);let o=r.collectChildren().concat(r);ee.remove(this.tags,o);for(let s of this.stateService.images)ee.remove(s.tags,o);this.injector.get(Ze).updateFilters(),this.serializationService.save()}})}openTagParentChange(r){return w(this,null,function*(){let i=r.collectChildren(),o=this.tags.filter(a=>!(!a.group||a==r||a==r.parent||i.includes(a)||a.children.map(c=>c.name).includes(r.name))),s=yield this.dialogService.createSelect({title:"Change Parent: "+r.getNameWithParents(),options:o,nullOption:r.parent?"Root":null,defaultValue:r.parent,getText:a=>a.getCompleteName()});this.changeParent(r,s)})}changeParent(r,i){r.group&&i===null?(ee.remove(r.parent?.children,r),r.parent=null,this.injector.get(Ze).updateFilters(...this.stateService.images.filter(o=>o.tags.includes(r))),this.serializationService.save()):i&&(ee.remove(r.parent?.children,r),r.parent=i,r.parent.open=!0,r.parent.children.push(r),this.sort(r.parent.children),this.injector.get(Ze).updateFilters(...this.stateService.images.filter(o=>o.tags.includes(r))),this.serializationService.save())}editPseudoList(r){return w(this,null,function*(){if(!r.group){let i=this.tags.filter(s=>!(s==r||s.group||s.pseudo));this.sort(i,!0);let o=yield this.dialogService.createMultiSelect({title:"Edit Pseudo List: "+r.getNameWithParents(),options:i,getText:s=>s.getNameWithParents(),defaultSelection:r.children,disableFn:(s,a)=>{for(let c of a)if(c.collectChildren().includes(s))return!0},onSelectionChange:(s,a)=>{let c=a.collectChildren();for(let u of s)c.includes(u)&&ee.remove(s,u)}});o&&(ee.isEmpty(r.children)&&this.stateService.images.forEach(s=>ee.remove(s.tags,r)),r.children=o,this.sort(r.children,!0),this.injector.get(Ze).updateFilters(),this.serializationService.save())}})}};e.\u0275fac=function(i){return new(i||e)(z(et),z(Ye),z(je),z(zt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var NN=(()=>{let e=class e{constructor(r){let i=r.element.nativeElement;i.draggable=!0,i.ondragstart=()=>e.onDragStart(this.array,this.array.indexOf(this.object)),i.ondragenter=()=>e.onDragEnter(this.array,this.array.indexOf(this.object)),i.ondragend=()=>e.onDragEnd(this.array),i.ondragover=o=>o.preventDefault()}static onDragStart(r,i){this.currentArray==null&&this.currentIndex==null&&(this.currentArray=r,this.currentIndex=i)}static onDragEnter(r,i){this.currentArray==r&&this.currentIndex!=i&&(this.currentArray.splice(i,0,this.currentArray.splice(this.currentIndex,1)[0]),this.currentIndex=i)}static onDragEnd(r){this.currentArray==r&&(console.log("onDragEnd"),this.currentArray=null,this.currentIndex=null)}};e.\u0275fac=function(i){return new(i||e)(k(mr))},e.\u0275dir=Ot({type:e,selectors:[["","dragdrop",""]],inputs:{object:[0,"dragdrop","object"],array:[0,"dragdropParent","array"]}});let t=e;return t})();var r5=(t,e)=>e.id;function i5(t,e){t&1&&(R(0,"span"),Y(1,"No Images"),P())}function o5(t,e){if(t&1){let n=X();R(0,"div",3),B("click",function(){let i=L(n).$implicit,o=_(3);return V(o.stateService.fullscreenImage.set(i))}),R(1,"i",4),B("click",function(i){let o=L(n).$implicit,s=_(3);return i.stopPropagation(),V(s.removeImage(o))}),P(),R(2,"img",5,0),B("load",function(){L(n);let i=On(3);return V(i.style.opacity="1")}),P()()}if(t&2){let n=e.$implicit,r=_(3);ie("dragdrop",n)("dragdropParent",r.stateService.groupEditorGroup.images),b(2),at("width",120*n.aspectRatio,"px"),ie("src",n.thumbnailLink,_t)}}function s5(t,e){if(t&1&&(R(0,"div",1),ne(1,o5,4,5,"div",2,r5),P()),t&2){let n=_(2);b(),re(n.stateService.groupEditorGroup.images)}}function a5(t,e){if(t&1&&G(0,i5,2,0,"span")(1,s5,3,0,"div",1),t&2){let n=_();q(n.stateService.groupEditorGroup.images.length==0?0:1)}}var kN=(()=>{let e=class e extends rt{constructor(r,i,o,s){super(),this.filterService=r,this.serializationService=i,this.stateService=o,this.dialogService=s,this.configuration={title:"Image Group Manager",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Disband",hidden:()=>this.inputs.sourceGroup==null,click:()=>{this.dialogService.createConfirmation({title:"Confirmation: Disband Image Group",messages:["Are you sure you want to disband this group of images?"]}).then(a=>{a&&this.disband()})}},{text:()=>"Cancel",click:()=>this.close()},{text:()=>"Save",disabled:()=>this.stateService.groupEditorGroup.images.length<2,click:()=>this.submit()}],hideClickOverlay:!0}}ngOnInit(){this.stateService.groupEditorGroup={images:this.inputs.sourceGroup?[...this.inputs.sourceGroup.images]:[]},this.filterService.updateFilters()}removeImage(r){ee.remove(this.stateService.groupEditorGroup.images,r)}disband(){let r=this.inputs.sourceGroup;if(r){ee.remove(this.stateService.imageGroups,r);for(let i of r.images)delete i.group;this.serializationService.save(!0),this.close()}}submit(){let r=this.inputs.sourceGroup,i=this.stateService.groupEditorGroup;i.images.length>0&&(r?(r.images.forEach(o=>o.group=null),r.images=[...i.images],r.images.forEach(o=>o.group=r)):(this.stateService.imageGroups.push(i),i.images.forEach(o=>o.group=i)),this.serializationService.save(!0),this.close())}close(){this.stateService.groupEditorGroup=null,this.filterService.updateFilters(),this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Ze),k(zt),k(je),k(Ye))},e.\u0275cmp=ae({type:e,selectors:[["app-group-manager"]],features:[Ve],decls:1,vars:1,consts:[["imageElement",""],[1,"order-container"],[1,"image-container",3,"dragdrop","dragdropParent"],[1,"image-container",3,"click","dragdrop","dragdropParent"],["title","Remove",1,"icon-button","smaller","fa-solid","fa-times",3,"click"],[3,"load","src"]],template:function(i,o){i&1&&G(0,a5,2,1),i&2&&q(o.stateService.groupEditorGroup?0:-1)},dependencies:[NN],styles:["[_nghost-%COMP%]{height:120px;min-height:120px;display:flex;align-items:center;justify-content:center;padding:.33333333rem;flex:1}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]{height:120px;min-height:120px;display:flex;gap:.33333333rem;overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:center;align-items:center;border-radius:.33333333rem;cursor:pointer}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{opacity:0;pointer-events:none;position:absolute;top:0;right:0}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]   .order-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;border-radius:.33333333rem;opacity:0;transition-property:opacity;transition-duration:.5s}"]});let t=e;return t})();function c5(t,e){if(t&1){let n=X();ge(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.createTag())}),Y(1,"Create Tag"),fe(),ge(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.createTagGroup())}),Y(3,"Create Tag Group"),fe()}}function l5(t,e){if(t&1){let n=X();ge(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.editPseudoList())}),Y(1,"Edit Pseudo List"),fe(),ge(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.insertTagGroup())}),Y(3,"Insert Tag Group"),fe()}if(t&2){let n=_();le("disabled",n.isEditPseudoListDisabled())}}var ON=(()=>{let e=class e extends rt{constructor(r,i){super(),this.tagService=r,this.stateService=i,this.configuration={title:()=>"Tag: "+this.inputs.tag.getNameWithParents(),headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.close()}]}}renameTag(){this.tagService.openTagRename(this.inputs.tag),this.close()}deleteTag(){this.tagService.openTagDelete(this.inputs.tag),this.close()}changeTagParent(){this.tagService.openTagParentChange(this.inputs.tag),this.close()}createTag(){this.tagService.openTagCreate(this.inputs.tag),this.close()}createTagGroup(){this.tagService.openTagGroupCreate(this.inputs.tag),this.close()}getPseudoListEditDisabledMessage(){if(this.stateService.images.some(i=>i.tags.includes(this.inputs.tag)))return"Disabled: Tag is in use";let r=this.tagService.getParentPseudoTags(this.inputs.tag);return r.length==0?null:`Disabled: Tag is in a pseudo list of '${r.map(i=>i.getNameWithParents()).join("; ")}'`}isEditPseudoListDisabled(){return!!(this.stateService.images.some(r=>r.tags.includes(this.inputs.tag))||this.tagService.getParentPseudoTags(this.inputs.tag).length)}editPseudoList(){this.tagService.editPseudoList(this.inputs.tag),this.close()}insertTagGroup(){this.tagService.insertTagGroup(this.inputs.tag),this.close()}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Lt),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-tag-manager"]],features:[Ve],decls:8,vars:1,consts:[[1,"button","action-button",3,"click"]],template:function(i,o){i&1&&(ge(0,"div",0),Be("click",function(){return o.renameTag()}),Y(1,"Rename"),fe(),ge(2,"div",0),Be("click",function(){return o.deleteTag()}),Y(3,"Delete"),fe(),ge(4,"div",0),Be("click",function(){return o.changeTagParent()}),Y(5,"Change Parent"),fe(),G(6,c5,4,0)(7,l5,4,2)),i&2&&(b(6),q(o.inputs.tag.group?6:7))},styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .button.action-button[_ngcontent-%COMP%]{min-height:initial;padding:.33333333rem 0}"]});let t=e;return t})();var or=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.serializationService=r,this.dialogService=i,this.filterService=o,this.stateService=s,this.applicationService=a,this.googleService=c,this.googleLensProxyUrl="https://image-proxy.mazak-miso.workers.dev/img"}openImageGroupEditor(r){this.dialogService.create(kN,{sourceGroup:r})}openTagOptions(r){this.dialogService.create(ON,{tag:r})}openYandexRIS(r,i){window.open("https://yandex.com/images/search?rpt=imageview&url="+encodeURIComponent(i.thumbnailLink.replace(/=s\d+/u,"=s9999")),"_blank")}openGoogleRIS(r,i){let o=i.contentLink.replace(/=s\d+/u,"=s9999"),s=this.googleLensProxyUrl+"?url="+encodeURIComponent(o);window.open("https://lens.google.com/uploadbyurl?url="+encodeURIComponent(s),"_blank")}delete(r,i,o=!0){return w(this,null,function*(){if(o&&!(yield this.dialogService.createConfirmation({title:"Confirmation",messages:["Are you sure you want to "+(i?"archive":"delete")+" this image?"],positiveButtonText:"Delete",negativeButtonText:"Cancel"})))return;this.applicationService.loading.set(!0),i?yield this.googleService.move(r.id,r.parentFolderId,this.stateService.archiveFolderId):yield this.googleService.trash(r.id),ee.remove(this.stateService.images,this.stateService.images.find(a=>a.id==r.id));let s=null;if(r.group){let a=r.group.images.indexOf(r);if(s=r.group.images[a+1]||r.group.images[a-1],r.group.images.length>2)ee.remove(r.group.images,r);else{ee.remove(this.stateService.imageGroups,r.group);for(let c of r.group.images)delete c.group}}if(this.stateService.tournamentState!=null)for(let a of Object.values(this.stateService.tournamentState))a.includes(r.id)&&ee.remove(a,r.id);if(this.filterService.images.set(this.stateService.images.filter(a=>a.passesFilters)),this.stateService.viewMode==="tournament"){let a=this.stateService.images.filter(h=>We.isImage(h)),c=this.stateService.tournament.getImagesToCompare()??[],u=this.filterService.images().filter(h=>We.isImage(h));this.stateService.tournament.start(a,c.length?c:u,this.stateService.tournamentState),this.stateService.tournament.updateProgress(),this.stateService.tournamentState!=null&&(this.stateService.tournamentState=this.stateService.tournament.getState())}this.stateService.fullscreenImage.set(s),this.serializationService.save(!0),this.applicationService.loading.set(!1)})}toggleFavorite(r){r.heart=!r.heart,this.filterService.updateFilters(r),this.serializationService.save()}toggleBookmark(r){r.bookmark=!r.bookmark,this.filterService.updateFilters(r),this.serializationService.save()}};e.\u0275fac=function(i){return new(i||e)(z(zt),z(Ye),z(Ze),z(je),z(Je),z(ti))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var u5=()=>[],FN=(t,e)=>e.id;function d5(t,e){t&1&&W(0,"i",2)}function h5(t,e){if(t&1&&W(0,"i",3),t&2){let n=_(2);ie("ngClass",n.tag.open?"fa-angle-down":"fa-angle-right")}}function f5(t,e){t&1&&W(0,"i",2)}function p5(t,e){if(t&1&&(R(0,"span",7),Y(1),P()),t&2){let n=_(2);b(),$a(" ",n.tag.pseudo?"\u279D":"\u2022"," ",e)}}function g5(t,e){if(t&1){let n=X();R(0,"i",12),B("click",function(){L(n);let i=_(2);return V(i.toggleTagState())}),P()}}function m5(t,e){if(t&1&&W(0,"app-filter-row",14),t&2){let n=e.$implicit;ie("tag",n)}}function v5(t,e){if(t&1&&W(0,"app-filter-row",14),t&2){let n=e.$implicit;ie("tag",n)}}function y5(t,e){if(t&1&&(R(0,"div",13),ne(1,m5,1,1,"app-filter-row",14,FN),ne(3,v5,1,1,"app-filter-row",14,FN),P()),t&2){let n=_(2);le("open",n.tag.open),b(),re(n.getTagGroups()),b(2),re(n.getTags())}}function _5(t,e){if(t&1){let n=X();R(0,"div",0),B("drop",function(i){L(n);let o=_();return V(o.drop(i,o.tag))}),R(1,"div",1),B("click",function(){L(n);let i=_();return V(i.onTagClick())}),ne(2,d5,1,0,"i",2,En),G(4,h5,1,1,"i",3)(5,f5,1,0,"i",2),R(6,"div",4),B("dragstart",function(i){L(n);let o=_();return V(o.start(i,o.tag))})("dragenter",function(i){L(n);let o=_();return V(o.enter(i,o.tag))})("dragleave",function(i){L(n);let o=_();return V(o.leave(i,o.tag))})("dragend",function(i){L(n);let o=_();return V(o.end(i,o.tag))}),R(7,"div",5)(8,"span",6),Y(9),P(),G(10,p5,2,2,"span",7),P()()(),R(11,"div",8),G(12,g5,1,0,"i",9),R(13,"i",10),B("click",function(){L(n);let i=_();return V(i.galleryService.openTagOptions(i.tag))}),P()()(),G(14,y5,5,2,"div",11)}if(t&2){let n,r=_();b(2),re(gs(6,u5).constructor(r.tag.collectParents().length)),b(2),q(r.tag.group?4:5),b(2),ie("ngClass",r.getTextClass()),b(3),Me(r.tag.name),b(),q((n=r.stateService.settings.showTagCount&&r.tag.getCount(r.stateService.images))?10:-1,n),b(2),q(r.tag.group?12:-1),b(2),q(r.tag.group?14:-1)}}var LN=(()=>{let e=class e{constructor(r,i,o,s,a){this.tagService=r,this.filterService=i,this.serializationService=o,this.galleryService=s,this.stateService=a}onTagClick(){this.tag.group?this.tag.open=!this.tag.open:this.toggleTagState()}toggleTagState(){this.tag.state=this.tag.state==0?1:this.tag.state==1?-1:0,this.filterService.updateFilters(),this.serializationService.save()}getTextClass(){let r=[];return this.tag.state==1?r.push("positive"):this.tag.state==-1&&r.push("negative"),this.tag.collectChildren().some(i=>i.state)&&r.push("underline-dashed"),r.join(" ")}getTagGroups(){return this.tag.children.filter(r=>r.group)}getTags(){return this.tag.children.filter(r=>!r.group)}start(r,i){console.log("start: "+i.name),e.startObject=i}enter(r,i){console.log("enter: "+i.name)}leave(r,i){console.log("leave: "+i.name)}drop(r,i){console.log("drop: "+i.name),i!=e.startObject&&i.parent!=e.startObject&&this.tagService.changeParent(e.startObject,i.group?i:i.parent)}end(r,i){console.log("end: "+i.name)}};e.\u0275fac=function(i){return new(i||e)(k(Lt),k(Ze),k(zt),k(or),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-filter-row"]],inputs:{tag:"tag"},decls:1,vars:1,consts:[["ondragover","event.preventDefault()",1,"flex","gap","cursor-pointer","hover-brighten","hover-container",2,"line-height","24px",3,"drop"],[1,"flex","gap","flex-1","width-100","min-width-0","align-items-center",3,"click"],[1,"fa-solid","fa-angle-down","opacity-0"],[1,"fa-solid",2,"margin-top","1px",3,"ngClass"],["draggable","true","ondragover","event.preventDefault()",1,"flex-1","overflow-hidden",3,"dragstart","dragenter","dragleave","dragend","ngClass"],[1,"flex","pointer-events-none"],[1,"ellipsis"],[1,"pointer-events-none",2,"white-space","pre"],[1,"flex","gap","align-items-center","hover-visible"],[1,"hover-positive","fa-solid","fa-check-double"],[1,"hover-positive","fa-solid","fa-ellipsis-vertical",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer",3,"open"],[1,"hover-positive","fa-solid","fa-check-double",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer"],[3,"tag"]],template:function(i,o){i&1&&G(0,_5,15,7),i&2&&q(o.tag?0:-1)},dependencies:[e,Ge,Kt],encapsulation:2});let t=e;return t})();var C5=(t,e)=>e.id;function E5(t,e){if(t&1&&W(0,"app-filter-row",10),t&2){let n=e.$implicit;ie("tag",n)}}var VN=(()=>{let e=class e{constructor(r,i,o,s){this.serializationService=r,this.tagService=i,this.filterService=o,this.stateService=s}getFilterClass(r){switch(r.state){case 1:return"positive";case-1:return"negative"}}getFilterIconClass(r){switch(r.state){case 1:return"positive fa-solid";case-1:return"negative fa-solid";default:return"fa-regular"}}toggleFilter(r){r.state=r.state==0?1:r.state==1?-1:0,this.filterService.updateFilters(),this.serializationService.save()}clearFilters(){this.tagService.tags.forEach(r=>r.state=0),this.filterService.updateFilters(),this.serializationService.save()}canClear(){return this.tagService.tags.some(r=>r.state!=0)}};e.\u0275fac=function(i){return new(i||e)(k(zt),k(Lt),k(Ze),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-filter"]],hostVars:2,hostBindings:function(i,o){i&2&&le("hidden",!o.stateService.filterVisible)},decls:27,vars:8,consts:[[1,"filter-container"],[1,"flex","center","gap-3","margins-3-v"],[1,"flex","center","gap","cursor-pointer","hover-brighten",3,"click"],[1,"fa-heart",2,"margin-top","1px",3,"ngClass"],[3,"ngClass"],[1,"fa-bookmark",2,"margin-top","1px",3,"ngClass"],[1,"fa-object-group",2,"margin-top","1px",3,"ngClass"],[1,"h-separator","margins"],[1,"filters-container","y-scrollbar-container"],[1,"flex","column","margins-1-h"],[3,"tag"],[1,"test"],[1,"h-separator","gap-1-bottom","margins"],[1,"buttons-container"],[1,"button",3,"click"],[1,"v-separator","desktop-only"]],template:function(i,o){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2),B("click",function(){return o.toggleFilter(o.filterService.favoritesFilter)}),W(3,"i",3),R(4,"span",4),Y(5,"Favorites"),P()(),R(6,"div",2),B("click",function(){return o.toggleFilter(o.filterService.bookmarksFilter)}),W(7,"i",5),R(8,"span",4),Y(9,"Bookmarks"),P()(),R(10,"div",2),B("click",function(){return o.toggleFilter(o.filterService.groupsFilter)}),W(11,"i",6),R(12,"span",4),Y(13,"Groups"),P()()(),W(14,"div",7),R(15,"div",8)(16,"div",9),ne(17,E5,1,1,"app-filter-row",10,C5),P(),W(19,"div",11),P(),W(20,"div",12),R(21,"div",13)(22,"div",14),B("click",function(){return o.tagService.openTagGroupCreate()}),Y(23,"Create Tag"),P(),R(24,"div",14),B("click",function(){return o.clearFilters()}),Y(25,"Clear Filter"),P()()(),W(26,"div",15)),i&2&&(b(3),ie("ngClass",o.getFilterIconClass(o.filterService.favoritesFilter)),b(),ie("ngClass",o.getFilterClass(o.filterService.favoritesFilter)),b(3),ie("ngClass",o.getFilterIconClass(o.filterService.bookmarksFilter)),b(),ie("ngClass",o.getFilterClass(o.filterService.bookmarksFilter)),b(3),ie("ngClass",o.getFilterIconClass(o.filterService.groupsFilter)),b(),ie("ngClass",o.getFilterClass(o.filterService.groupsFilter)),b(5),re(o.tagService.getRootTags()),b(7),le("disabled",!o.canClear()))},dependencies:[Ge,Kt,LN],styles:["[_nghost-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;overflow:hidden;height:100%;transition-property:margin-left opacity;transition-duration:.5s}.hidden[_nghost-%COMP%]{opacity:0;pointer-events:none}@media screen and (max-width: 1280px){[_nghost-%COMP%]{position:absolute;z-index:1;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background-color:color-mix(in srgb,var(--color-surface-0) 65%,transparent)}}@media screen and (min-width: 1280px){[_nghost-%COMP%]{width:300.8px;min-width:300.8px}.hidden[_nghost-%COMP%]{margin-left:-300.8px}}[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]{width:100vw;min-width:100vw}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]{width:300px;min-width:300px}}[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{flex:1;scrollbar-gutter:stable}[_nghost-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;margin-top:1px}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;margin:0 .33333333rem .33333333rem}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;gap:.33333333rem}"]});let t=e;return t})();var I5=(t,e)=>e.trackBy;function w5(t,e){if(t&1&&(ge(0,"img",1),Cn("anim-fade-out"),fe()),t&2){let n=e.$implicit;fo("src",n.src,_t)}}var qc=(()=>{let e=class e{constructor(){this.src=nu.required(),this.placeholderSrc=nu(),this.trackBy=0,this.images=[],dn(()=>this.next(this.src(),this.placeholderSrc()))}next(r,i){if(!r)return;let o=++this.trackBy,s=!1,a=new Image;if(a.src=r,a.complete){this.images=[{trackBy:o,src:r}];return}if(a.decode().finally(()=>{o==this.trackBy&&(s=!0,this.images=[{trackBy:o,src:r}])}),i){let c=new Image;if(c.src=i,c.complete){this.images=[{trackBy:o,src:i}];return}c.decode().finally(()=>{o==this.trackBy&&!s&&(this.images=[{trackBy:o,src:i}])})}this.images=[]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ae({type:e,selectors:[["app-image"]],inputs:{src:[1,"src"],placeholderSrc:[1,"placeholderSrc"]},decls:3,vars:0,consts:[[1,"stack-container-alt","width-100","height-100"],[1,"anim-fade-in",3,"src"]],template:function(i,o){i&1&&(ge(0,"div",0),ne(1,w5,1,1,"img",1,I5),fe()),i&2&&(b(),re(o.images))},dependencies:[Ge],styles:["[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;-webkit-user-select:none;user-select:none;object-fit:contain}"]});let t=e;return t})();var T5=(t,e)=>e.id;function b5(t,e){if(t&1){let n=X();ge(0,"span",3),Be("click",function(){L(n);let i=_().$index,o=_(2);return V(o.toggleRemoval(i))}),Ba(1,"i",4)(2,"i",5),fe()}if(t&2){let n=_().$index,r=_(2);le("pending",r.isRemovalPending(n))}}function S5(t,e){if(t&1){let n=X();ge(0,"img",1),Be("click",function(){let i=L(n).$implicit,o=_(2);return V(o.openFullscreen(i))}),fe(),G(1,b5,3,2,"span",2)}if(t&2){let n=e.$implicit,r=e.$index,i=e.$count;fo("src",n.thumbnailLink,_t),b(),q(r!==i-1?1:-1)}}function D5(t,e){if(t&1&&(ge(0,"div",0),ne(1,S5,2,2,null,null,T5),fe()),t&2){let n=_();b(),re(n.path)}}var am=(()=>{let e=class e extends rt{constructor(r,i,o){super(),this.stateService=r,this.serializationService=i,this.filterService=o,this.configuration={title:()=>"Comparison Path",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>this.hasPendingChanges?"Save":"Close",click:()=>this.saveOrClose()}]},this.path=[],this.pendingRemovals=new Set}ngOnInit(){this.buildPath()}close(){this.resolve(!1)}toggleRemoval(r){if(!this.path||r<0||r>=this.path.length-1)return;let i=this.path[r].id,o=this.path[r+1].id,s=this.makeEdgeKey(i,o);this.pendingRemovals.has(s)?this.pendingRemovals.delete(s):this.pendingRemovals.add(s)}isRemovalPending(r){if(!this.path||r<0||r>=this.path.length-1)return!1;let i=this.path[r].id,o=this.path[r+1].id;return this.pendingRemovals.has(this.makeEdgeKey(i,o))}get hasPendingChanges(){return this.pendingRemovals.size>0}openFullscreen(r){r&&this.stateService.fullscreenImage.set(r)}saveOrClose(){if(!this.hasPendingChanges){this.close();return}let r=this.stateService.tournament.comparison(),i=r?[r[0]?.id,r[1]?.id]:null,o=this.stateService.tournamentState?.comparisons??[],s=!1;if(o.length){let a=o.filter(([c,u])=>!this.pendingRemovals.has(this.makeEdgeKey(c,u)));if(s=a.length!==o.length,s){this.stateService.tournamentState={comparisons:a},this.serializationService.save();let c=this.stateService.images.filter(p=>We.isImage(p)),u=this.stateService.tournament.getImagesToCompare(),h=this.filterService.images().filter(p=>We.isImage(p));if(this.stateService.tournament.start(c,u.length?u:h,this.stateService.tournamentState),i?.[0]&&i?.[1]){let p=this.stateService.tournament.getImageByIdMap(c),g=p.get(i[0]),m=p.get(i[1]);g&&m&&this.stateService.tournament.comparison.set([g,m])}}}this.resolve(s)}buildPath(){this.path=[];let r=this.inputs?.start,i=this.inputs?.end;if(!r||!i)return;if(r.id===i.id){this.path=[r];return}let o=this.stateService.tournament.getComparisonAdjacency(this.stateService.tournamentState?.comparisons??[]);if(o.size===0)return;let s=[r.id],a=new Set([r.id]),c=new Map;for(let g=0;g<s.length;g++){let m=s[g];if(m===i.id)break;for(let I of o.get(m)??[])a.has(I)||(a.add(I),c.set(I,m),s.push(I))}if(!a.has(i.id))return;let u=[],h=i.id;for(;h&&(u.unshift(h),h!==r.id);)h=c.get(h);if(u[0]!==r.id)return;let p=this.stateService.tournament.getImageByIdMap(this.stateService.images);this.path=u.map(g=>p.get(g)??(g===r.id?r:g===i.id?i:void 0)).filter(Boolean)}makeEdgeKey(r,i){return`${r}|${i}`}};e.\u0275fac=function(i){return new(i||e)(k(je),k(zt),k(Ze))},e.\u0275cmp=ae({type:e,selectors:[["app-comparison-path"]],features:[Ve],decls:1,vars:1,consts:[[1,"path-row"],["loading","lazy",1,"path-thumb",3,"click","src"],[1,"path-separator",3,"pending"],[1,"path-separator",3,"click"],[1,"fa-solid","fa-angle-right"],[1,"fa-solid","fa-trash"]],template:function(i,o){i&1&&G(0,D5,3,0,"div",0),i&2&&q(o.path.length?0:-1)},styles:["[_nghost-%COMP%]{display:flex;overflow:auto}.path-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.33333333rem;padding:.33333333rem;overflow-x:auto;overflow-y:hidden}.path-thumb[_ngcontent-%COMP%]{height:256px;border-radius:.33333333rem;border:1px solid var(--color-border)}.path-separator[_ngcontent-%COMP%]{display:grid;place-items:center;width:18px;height:18px;cursor:pointer}.path-separator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{grid-area:1/1;color:var(--color-text-secondary);transition:opacity .25s ease,color .25s ease}.path-separator[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]{opacity:0}.path-separator.pending[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]{opacity:1;color:var(--color-negative)}.path-separator.pending[_ngcontent-%COMP%]   .fa-angle-right[_ngcontent-%COMP%]{opacity:0}@media (hover: hover) and (pointer: fine){.path-separator[_ngcontent-%COMP%]:hover   .fa-trash[_ngcontent-%COMP%]{opacity:1}.path-separator[_ngcontent-%COMP%]:hover   .fa-angle-right[_ngcontent-%COMP%]{opacity:0}}"]});let t=e;return t})();var cm=(()=>{let e=class e{static getPlaceholderSrc(r){if(r&&!(r.size!=null&&r.size<this.thumbnailSkipThresholdBytes))return r.thumbnailLink}};e.thumbnailSkipThresholdBytes=1048576;let t=e;return t})();var jN=(t,e)=>e.id;function A5(t,e){if(t&1){let n=X();R(0,"img",6),B("click",function(){let i=L(n).$implicit,o=_(2),s=_();return V(s.openComparisonPath(i,o))}),P()}if(t&2){let n=e.$implicit;at("aspect-ratio",n.aspectRatio),ie("src",n.thumbnailLink,_t)}}function R5(t,e){if(t&1&&ne(0,A5,1,3,"img",5,jN),t&2){let n=_(2);re(n.comparisonWinners)}}function M5(t,e){if(t&1){let n=X();R(0,"img",6),B("click",function(){let i=L(n).$implicit,o=_(2),s=_();return V(s.openComparisonPath(o,i))}),P()}if(t&2){let n=e.$implicit;at("aspect-ratio",n.aspectRatio),ie("src",n.thumbnailLink,_t)}}function x5(t,e){if(t&1&&ne(0,M5,1,3,"img",5,jN),t&2){let n=_(2);re(n.comparisonLosers)}}function P5(t,e){if(t&1){let n=X();R(0,"img",0),B("load",function(){L(n);let i=_();return V(i.loadingT=!1)}),P(),R(1,"img",0),B("load",function(){L(n);let i=_();return V(i.loadingC=!1)}),P(),R(2,"div",1),Cn("anim-fade-out"),R(3,"div",2),G(4,R5,2,0),P(),R(5,"app-image",3),B("click",function(){let i=L(n),o=_();return V(o.onImageClick(i))}),P(),R(6,"div",4),G(7,x5,2,0),P()()}if(t&2){let n=e,r=_();ie("src",n.thumbnailLink,_t),b(),ie("src",n.contentLink,_t),b(),le("hide-comparison-relations",!r.stateService.settings.showFullscreenComparisonRelations),b(2),q(r.comparisonWinners.length?4:-1),b(),ie("src",n.contentLink)("placeholderSrc",r.galleryUtils.getPlaceholderSrc(n)),b(2),q(r.comparisonLosers.length?7:-1)}}var UN=(()=>{let e=class e{constructor(r,i,o,s,a,c,u){this.applicationService=r,this.dialogService=i,this.googleService=o,this.stateService=s,this.galleryService=a,this.tagService=c,this.filterService=u,this.galleryUtils=cm,this.loadingT=!0,this.loadingC=!0,this.video=!1,this.comparisonWinners=[],this.comparisonLosers=[],dn(()=>{let h=this.stateService.fullscreenImage();h?(We.isVideo(h)?this.video=!0:(this.video=!1,this.loadingT=!0,this.loadingC=!0),this.ensureTournamentInitialized(),this.refreshComparisonRelations(h)):(this.comparisonWinners=[],this.comparisonLosers=[])})}openComparisonPath(r,i){if(!r||!i)return;let o=this.dialogService.create(am,{start:r,end:i});o&&o.then(s=>{if(s){let a=this.stateService.fullscreenImage();a?this.refreshComparisonRelations(a):(this.comparisonWinners=[],this.comparisonLosers=[])}})}refreshComparisonRelations(r){this.comparisonWinners=this.stateService.tournament.getNearestWinners(r),this.comparisonLosers=this.stateService.tournament.getNearestLosers(r)}ensureTournamentInitialized(){if(this.stateService.tournament.comparisons!=null)return;let r=this.stateService.images.filter(s=>We.isImage(s)),i=this.filterService.images().filter(s=>We.isImage(s)),o=i.length?i:r;this.stateService.tournament.start(r,o,this.stateService.tournamentState)}getSrc(r){if(!this.loadingC)return r.contentLink;if(!this.loadingT)return r.thumbnailLink}onImageClick(r){this.applicationService.reduceDataUsage&&(r.thumbnailLink=r.thumbnailLink.replace("=s220","=s440"))}snapshot(){let r=document.getElementById("video-element");if(r){let i=document.createElement("canvas");i.width=r.videoWidth,i.height=r.videoHeight,i.getContext("2d").drawImage(r,0,0),window.open("about:blank","Video Snapshot").document.write("<img src='"+i.toDataURL("image/png")+"' alt='from canvas'/>")}}};e.\u0275fac=function(i){return new(i||e)(k(Je),k(Ye),k(ti),k(je),k(or),k(Lt),k(Ze))},e.\u0275cmp=ae({type:e,selectors:[["app-fullscreen"]],decls:1,vars:1,consts:[[2,"display","none",3,"load","src"],[1,"fullscreen-container","anim-fade-in"],[1,"comparison-winners"],[3,"click","src","placeholderSrc"],[1,"comparison-losers"],["loading","lazy",3,"src","aspect-ratio"],["loading","lazy",3,"click","src"]],template:function(i,o){if(i&1&&G(0,P5,8,8),i&2){let s;q((s=o.stateService.fullscreenImage())?0:-1,s)}},dependencies:[Ge,qc],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}@media screen and (max-width: 1280px){[_nghost-%COMP%]{min-width:100%}}[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:space-between;position:relative}[_nghost-%COMP%]   .fullscreen-container.hide-comparison-relations[_ngcontent-%COMP%]   .comparison-winners[_ngcontent-%COMP%]{transform:translate(-100%)}[_nghost-%COMP%]   .fullscreen-container.hide-comparison-relations[_ngcontent-%COMP%]   .comparison-losers[_ngcontent-%COMP%]{transform:translate(100%)}[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem;z-index:1;transform:translate(0);transition:transform .5s ease;overflow:auto;max-height:100%;width:fit-content}[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;border-radius:.33333333rem;border:1px solid var(--color-border);cursor:pointer}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:96px}}[_nghost-%COMP%]   .comparison-winners[_ngcontent-%COMP%]{left:0}[_nghost-%COMP%]   .comparison-losers[_ngcontent-%COMP%]{right:0}"]});let t=e;return t})();var N5=(t,e)=>e.id;function k5(t,e){if(t&1){let n=X();R(0,"i",12),B("click",function(i){L(n);let o=_(2).$implicit;return _().galleryService.openImageGroupEditor(o.group),V(i.stopPropagation())}),P()}}function O5(t,e){if(t&1){let n=X();R(0,"div",7)(1,"i",8),B("click",function(i){L(n);let o=_().$implicit,s=_();return i.stopPropagation(),V(s.galleryService.toggleFavorite(o))}),P(),R(2,"i",9),B("click",function(i){L(n);let o=_().$implicit,s=_();return i.stopPropagation(),V(s.galleryService.toggleBookmark(o))}),P(),G(3,k5,1,0,"i",10),P(),W(4,"div",11)}if(t&2){let n=_().$implicit;b(),ie("ngClass",n.heart?"fa-solid active":"fa-regular"),b(),ie("ngClass",n.bookmark?"fa-solid active":"fa-regular"),b(),q(n.group?3:-1)}}function F5(t,e){if(t&1){let n=X();R(0,"div",4),Cn("anim-fade-out"),B("click",function(){let i=L(n).$implicit,o=_();return V(o.onImageClick(i))}),R(1,"div",5)(2,"img",6,0),B("create",function(i){let o=L(n).$implicit,s=_();return V(s.masonryBricks[o.id]=i.nativeElement)})("load",function(){L(n);let i=On(3);return V(i.style.opacity="1")}),P()(),G(4,O5,5,3),P()}if(t&2){let n=e.$implicit,r=_();at("width",n.masonryWidth,"px")("height",n.masonryHeight,"px")("top",n.masonryTop,"px")("left",n.masonryLeft,"px")("opacity",n.group&&r.stateService.groupEditorGroup&&!r.stateService.groupEditorGroup.images.includes(n)?"0.15":"1"),b(2),ie("src",n.thumbnailLink,_t),b(2),q(r.areBrickButtonsVisible()?4:-1)}}var BN=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.cdr=i,this.tagService=o,this.filterService=s,this.stateService=a,this.galleryService=c,this.masonryBricks={},this.layoutUpdateDelay=new ei(100),dn(()=>this.updateLayout(this.filterService.masonryImages())),new ResizeObserver(()=>{xt.isLargeScreen()&&this.requestLayoutUpdate()}).observe(r.nativeElement)}requestLayoutUpdate(){this.layoutUpdateDelay.restart(()=>{let r=this.masonryScrollContainer.scrollTop/(this.masonryScrollContainer.scrollHeight-this.masonryScrollContainer.clientHeight);this.updateLayout();let i=(this.masonryScrollContainer.scrollHeight-this.masonryScrollContainer.clientHeight)*r;setTimeout(()=>this.masonryScrollContainer.scrollTo({top:i,behavior:"smooth"}),500),this.cdr.detectChanges()})}updateLayout(r=this.filterService.masonryImages()){if(this.masonryContainer&&!ee.isEmpty(r)){let i=xt.isLargeScreen()?250:200,o=xt.isLargeScreen()?9.6666666666:4.3333333333,s=this.masonryContainer.clientWidth,a=Math.max(Math.floor(s/i),2),c=(s-o*(a-1))/a,u=[],h=[];for(let p=0;p<a;p++)u[p]=0,h[p]=p*(c+o);for(let p of this.filterService.masonryImages()){p.masonryWidth!=c&&(p.masonryWidth=c,p.masonryHeight=c/p.aspectRatio);let g=u.indexOf(Math.min(...u));p.masonryTop=u[g],p.masonryLeft=h[g],u[g]=u[g]+p.masonryHeight+o}}}scrollTo(r){if(r){let i=r.group?r.group.images.find(s=>s.passesFilters):r;this.masonryBricks[i?.id].scrollIntoView()}}onImageClick(r){let i=this.stateService.groupEditorGroup;if(i){if(r.group&&i!=r.group)return;ee.toggle(i.images,r);return}this.stateService.fullscreenImage.set(r)}areBrickButtonsVisible(){return xt.isLargeScreen()&&!this.stateService.groupEditorGroup}};e.\u0275fac=function(i){return new(i||e)(k(Ut),k(go),k(Lt),k(Ze),k(je),k(or))},e.\u0275cmp=ae({type:e,selectors:[["app-masonry"]],decls:4,vars:0,consts:[["imageElement",""],[1,"masonry-scroll-container",3,"create"],[1,"masonry-container",3,"create"],[1,"masonry-brick","anim-fade-in",3,"width","height","top","left","opacity"],[1,"masonry-brick","anim-fade-in",3,"click"],[1,"brick-container"],["loading","lazy",3,"create","load","src"],[1,"brick-header"],["title","Favorite",1,"icon-button","fa-heart",3,"click","ngClass"],["title","Bookmark",1,"icon-button","fa-bookmark",3,"click","ngClass"],["title","Group Manager",1,"icon-button","active","fa-solid","fa-object-group"],[1,"brick-footer"],["title","Group Manager",1,"icon-button","active","fa-solid","fa-object-group",3,"click"]],template:function(i,o){i&1&&(R(0,"div",1),B("create",function(a){return o.masonryScrollContainer=a.nativeElement}),R(1,"div",2),B("create",function(a){return o.masonryContainer=a.nativeElement,o.updateLayout()}),ne(2,F5,5,12,"div",3,N5),P()()),i&2&&(b(2),re(o.filterService.masonryImages()))},dependencies:[Ge,Kt,nm],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:scroll;height:100%;padding:.33333333rem}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]{position:absolute;transition-property:top,left,width,height,opacity;transition-duration:.5s;padding-bottom:.33333333rem;cursor:pointer}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-container[_ngcontent-%COMP%]{border-radius:.33333333rem;width:100%;height:100%;display:flex;background-color:var(--color-surface-200);transition-property:outline,background-color;transition-duration:.5s;outline:1px solid transparent}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;-webkit-user-select:none;user-select:none;border-radius:.33333333rem;contain:size;opacity:0;transition:opacity .5s ease}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]:hover   .brick-header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]:hover   .brick-footer[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{opacity:1;pointer-events:all}}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]{width:100%;position:absolute;display:flex;padding:.33333333rem;box-sizing:border-box;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;gap:.33333333rem}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{opacity:0;pointer-events:none;background-color:transparent;border-color:transparent}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]:hover{border-color:var(--color-border);-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]   .icon-button.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]   .icon-button.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-header[_ngcontent-%COMP%]{top:0}[_nghost-%COMP%]   .masonry-scroll-container[_ngcontent-%COMP%]   .masonry-container[_ngcontent-%COMP%]   .masonry-brick[_ngcontent-%COMP%]   .brick-footer[_ngcontent-%COMP%]{bottom:0;padding-bottom:.66666666rem}"]});let t=e;return t})();var L5=()=>[],$N=(t,e)=>e.id;function V5(t,e){t&1&&W(0,"i",2)}function j5(t,e){if(t&1&&W(0,"i",3),t&2){let n=_(2);ie("ngClass",n.tag.open?"fa-angle-down":"fa-angle-right")}}function U5(t,e){t&1&&W(0,"i",2)}function B5(t,e){if(t&1&&(R(0,"span",7),Y(1),P()),t&2){let n=_(2);b(),$a(" ",n.tag.pseudo?"\u279D":"\u2022"," ",e)}}function $5(t,e){if(t&1&&W(0,"app-tagger-row",12),t&2){let n=e.$implicit,r=_(3);ie("tag",n)("target",r.target)("groupMode",r.groupMode)}}function H5(t,e){if(t&1&&W(0,"app-tagger-row",12),t&2){let n=e.$implicit,r=_(3);ie("tag",n)("target",r.target)("groupMode",r.groupMode)}}function z5(t,e){if(t&1&&(R(0,"div",11),ne(1,$5,1,3,"app-tagger-row",12,$N),ne(3,H5,1,3,"app-tagger-row",12,$N),P()),t&2){let n=_(2);le("open",n.tag.open),b(),re(n.getTagGroups()),b(2),re(n.getTags())}}function G5(t,e){if(t&1){let n=X();R(0,"div",0),B("drop",function(i){L(n);let o=_();return V(o.drop(i,o.tag))}),R(1,"div",1),B("click",function(){L(n);let i=_();return V(i.onTagClick())}),ne(2,V5,1,0,"i",2,En),G(4,j5,1,1,"i",3)(5,U5,1,0,"i",2),R(6,"div",4),B("dragstart",function(i){L(n);let o=_();return V(o.start(i,o.tag))})("dragenter",function(i){L(n);let o=_();return V(o.enter(i,o.tag))})("dragleave",function(i){L(n);let o=_();return V(o.leave(i,o.tag))})("dragend",function(i){L(n);let o=_();return V(o.end(i,o.tag))}),R(7,"div",5)(8,"span",6),Y(9),P(),G(10,B5,2,2,"span",7),P()()(),R(11,"div",8)(12,"i",9),B("click",function(){L(n);let i=_();return V(i.galleryService.openTagOptions(i.tag))}),P()()(),G(13,z5,5,2,"div",10)}if(t&2){let n,r=_();b(),le("disabled",r.tag.pseudo)("cursor-pointer",!r.tag.pseudo),b(),re(gs(9,L5).constructor(r.tag.collectParents().length)),b(2),q(r.tag.group?4:5),b(2),ie("ngClass",r.getTextClass()),b(3),Me(r.tag.name),b(),q((n=r.stateService.settings.showTagCount&&r.tag.getCount(r.stateService.images))?10:-1,n),b(3),q(r.tag.group?13:-1)}}var HN=(()=>{let e=class e{constructor(r,i,o,s,a){this.tagService=r,this.filterService=i,this.serializationService=o,this.galleryService=s,this.stateService=a}onTagClick(){this.tag.group?this.tag.open=!this.tag.open:this.tag.pseudo||(this.groupMode&&this.target.group?this.target.group.images.every(r=>r.tags.includes(this.tag))?this.target.group.images.forEach(r=>ee.remove(r.tags,this.tag)):this.target.group.images.forEach(r=>ee.push(r.tags,this.tag)):ee.toggle(this.target.tags,this.tag),this.serializationService.save(),this.filterService.updateFilters())}getTextClass(){if(this.tag.pseudo)return"";let r=[];if(this.target)if(this.target.group)if(this.groupMode)if(this.tag.group){let i=this.tag.collectChildren();this.target.group.images.every(o=>i.some(s=>o.tags.includes(s)))?r.push("positive"):this.target.group.images.some(o=>i.some(s=>o.tags.includes(s)))&&r.push("underline-positive")}else this.target.group.images.every(i=>i.tags.includes(this.tag))?r.push("positive"):this.target.group.images.some(i=>i.tags.includes(this.tag))&&r.push("underline-positive");else{let i=ee.except(this.target.group.images,this.target);if(this.tag.group){let o=this.tag.collectChildren();this.target.tags.some(s=>o.includes(s))?r.push("positive"):i.some(s=>s.tags.some(a=>o.includes(a)))&&r.push("underline-dashed-positive")}else this.target.group.images.every(o=>o.tags.includes(this.tag))?r.push("underline-positive"):i.some(o=>o.tags.includes(this.tag))&&r.push("underline-dashed-positive"),this.target.tags.includes(this.tag)&&r.push("positive")}else this.tag.group?this.tag.collectChildren().some(i=>this.target.tags.includes(i))&&r.push("underline-positive"):this.target.tags.includes(this.tag)&&r.push("positive");return r.join(" ")}getTagGroups(){return this.tag.children.filter(r=>r.group)}getTags(){return this.tag.children.filter(r=>!r.group)}start(r,i){console.log("start: "+i.name),e.startObject=i}enter(r,i){console.log("enter: "+i.name),console.log(r.target)}leave(r,i){console.log("leave: "+i.name)}drop(r,i){console.log("drop: "+i.name),i!=e.startObject&&i.parent!=e.startObject&&this.tagService.changeParent(e.startObject,i.group?i:i.parent)}end(r,i){console.log("end: "+i.name)}};e.\u0275fac=function(i){return new(i||e)(k(Lt),k(Ze),k(zt),k(or),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-tagger-row"]],inputs:{tag:"tag",target:"target",groupMode:"groupMode"},decls:1,vars:1,consts:[["ondragover","event.preventDefault()",1,"flex","gap","hover-brighten","hover-container",2,"line-height","24px",3,"drop"],[1,"flex","gap","flex-1","width-100","min-width-0","align-items-center",3,"click"],[1,"fa-solid","fa-angle-down","opacity-0"],[1,"fa-solid",2,"margin-top","1px",3,"ngClass"],["draggable","true","ondragover","event.preventDefault()",1,"flex-1","overflow-hidden",3,"dragstart","dragenter","dragleave","dragend","ngClass"],[1,"flex","pointer-events-none"],[1,"ellipsis"],[1,"pointer-events-none",2,"white-space","pre"],[1,"flex","gap","align-items-center","cursor-pointer","hover-visible"],[1,"hover-positive","fa-solid","fa-ellipsis-vertical",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer",3,"open"],[1,"flex","column","overflow-hidden","anim-drawer"],[3,"tag","target","groupMode"]],template:function(i,o){i&1&&G(0,G5,14,10),i&2&&q(o.tag?0:-1)},dependencies:[e,Ge,Kt],encapsulation:2});let t=e;return t})();var q5=t=>[t],zN=(t,e)=>e.id;function W5(t,e){return this.groupTracker}function K5(t,e){if(t&1){let n=X();R(0,"div",27),B("click",function(){let i=L(n).$implicit,o=_(3);return V(o.stateService.fullscreenImage.set(i))}),W(1,"app-image",28)(2,"div",29),P()}if(t&2){let n=e.$implicit,r=_(3);b(),at("width",120*n.aspectRatio,"px"),le("grayscale",!n.passesFilters),ie("src",n.thumbnailLink),b(),le("target",n==r.target)}}function Q5(t,e){if(t&1&&(R(0,"div",25),Cn("anim-fade-out"),ne(1,K5,3,7,"div",26,zN),P()),t&2){let n=e.$implicit;b(),re(n.images)}}function Y5(t,e){if(t&1&&(R(0,"div",24),ne(1,Q5,3,0,"div",25,W5,!0),P(),W(3,"div",4)),t&2){let n=_();b(),re(q_(0,q5,n.target.group))}}function J5(t,e){t&1&&(R(0,"span",31),Y(1,"Size"),P(),R(2,"span",32),Y(3),P()),t&2&&(b(3),Me(e))}function Z5(t,e){t&1&&(R(0,"span",31),Y(1,"Resolution"),P(),R(2,"span",32),Y(3),P()),t&2&&(b(3),Me(e))}function X5(t,e){if(t&1&&(R(0,"div",3)(1,"div",30),Y(2),P(),G(3,J5,4,1),G(4,Z5,4,1),P()),t&2){let n,r,i=_();b(),ie("title",i.target.name),b(),Me(i.target.name),b(),q((n=i.getFileSize(i.target))?3:-1,n),b(),q((r=i.getResolution(i.target))?4:-1,r)}}function e8(t,e){if(t&1&&W(0,"app-tagger-row",20),t&2){let n=e.$implicit,r=_();ie("tag",n)("target",r.target)("groupMode",r.groupMode)}}var GN=(()=>{let e=class e{constructor(r,i,o,s){this.tagService=r,this.galleryService=i,this.googleService=o,this.stateService=s,this.groupMode=!1,this.groupTracker=0,dn(()=>{if(this.target=this.stateService.fullscreenImage(),this.target==null){this.groupMode=!1;return}this.currentGroup!=this.target.group&&(this.currentGroup=this.target.group,this.groupTracker++)})}getFileSize(r){let i=Number(r?.size);return!r||Number.isNaN(i)?null:(i/1024).toLocaleString(void 0,{maximumFractionDigits:1})+" KB"}getResolution(r){return r?.imageMediaMetadata?.width&&r?.imageMediaMetadata?.height?r.imageMediaMetadata.width+" x "+r.imageMediaMetadata.height:r?.videoMediaMetadata?.width&&r?.videoMediaMetadata?.height?r.videoMediaMetadata.width+" x "+r.videoMediaMetadata.height:null}};e.\u0275fac=function(i){return new(i||e)(k(Lt),k(or),k(ti),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-tagger"]],decls:37,vars:10,consts:[[1,"v-separator","desktop-only"],[1,"tagger-container"],[1,"overflow-hidden"],[1,"file-information"],[1,"h-separator","margins"],[1,"flex","gap","center","padding-1"],[1,"flex","gap"],["title","Download",1,"icon-button","fa-solid","fa-download",3,"click"],["title","Google Drive",1,"icon-button","fa-brands","fa-google-drive",3,"click"],[1,"v-separator"],["title","Google Lens",1,"icon-button","fa-brands","fa-google",3,"click"],["title","Yandex RIS",1,"icon-button","fa-brands","fa-yandex-international",3,"click"],["title","Archive",1,"icon-button","fa-solid","fa-box",3,"click"],["title","Delete",1,"icon-button","fa-solid","fa-trash",3,"click"],[1,"flex",2,"justify-content","space-evenly"],[1,"flex","center","gap","cursor-pointer","hover-brighten","padding-2",3,"click"],[1,"fa-heart",2,"margin-top","1px",3,"ngClass"],[1,"fa-bookmark",2,"margin-top","1px",3,"ngClass"],[1,"filters-container","y-scrollbar-container"],[1,"flex","column","margins-1-h"],[3,"tag","target","groupMode"],[1,"h-separator","gap-1-bottom","margins"],[1,"buttons-container"],[1,"button",3,"click"],[1,"group-images-container","x-scrollbar-container","height-auto"],[1,"group-images-scroll-container","anim-fade-in"],[1,"group-image-container"],[1,"group-image-container",3,"click"],[3,"src"],[1,"target-border"],[1,"file-name",3,"title"],[1,"label"],[1,"value"]],template:function(i,o){i&1&&(W(0,"div",0),R(1,"div",1),G(2,Y5,4,2),R(3,"div",2),G(4,X5,5,4,"div",3),P(),W(5,"div",4),R(6,"div",5)(7,"div",6)(8,"i",7),B("click",function(){return o.googleService.download(o.target)}),P(),R(9,"i",8),B("click",function(a){return a.stopPropagation(),o.googleService.openSearch(o.target.name)}),P(),W(10,"div",9),R(11,"i",10),B("click",function(a){return a.stopPropagation(),o.galleryService.openGoogleRIS(a,o.target)}),P(),R(12,"i",11),B("click",function(a){return a.stopPropagation(),o.galleryService.openYandexRIS(a,o.target)}),P(),W(13,"div",9),P(),R(14,"i",12),B("click",function(){return o.galleryService.delete(o.target,!0)}),P(),R(15,"i",13),B("click",function(){return o.galleryService.delete(o.target,!1)}),P()(),W(16,"div",4),R(17,"div",14)(18,"div",15),B("click",function(){return o.galleryService.toggleFavorite(o.target)}),W(19,"i",16),R(20,"span"),Y(21,"Favorite"),P()(),R(22,"div",15),B("click",function(){return o.galleryService.toggleBookmark(o.target)}),W(23,"i",17),R(24,"span"),Y(25,"Bookmark"),P()()(),W(26,"div",4),R(27,"div",18)(28,"div",19),ne(29,e8,1,3,"app-tagger-row",20,zN),P()(),W(31,"div",21),R(32,"div",22)(33,"div",23),B("click",function(){return o.tagService.openTagGroupCreate()}),Y(34,"Create Tag"),P(),R(35,"div",23),B("click",function(){return o.groupMode=!o.groupMode}),Y(36,"Group Mode"),P()()()),i&2&&(b(2),q(o.target!=null&&o.target.group?2:-1),b(2),q(o.target?4:-1),b(14),le("positive",o.target==null?null:o.target.heart),b(),ie("ngClass",o.target!=null&&o.target.heart?"fa-solid":"fa-regular"),b(3),le("positive",o.target==null?null:o.target.bookmark),b(),ie("ngClass",o.target!=null&&o.target.bookmark?"fa-solid":"fa-regular"),b(6),re(o.tagService.getRootTags()),b(6),le("positive",o.groupMode))},dependencies:[Ge,Kt,HN,qc],styles:["[_nghost-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;transition:.5s;overflow:hidden;height:100%;background-color:color-mix(in srgb,var(--color-surface-0) 65%,transparent);scroll-snap-align:center}@media screen and (max-width: 1280px){[_nghost-%COMP%]{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:1;position:relative}}@media screen and (min-width: 1280px){[_nghost-%COMP%]{width:300.8px;min-width:300.8px}}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]{display:grid;padding:.66666666rem;column-gap:.33333333rem;row-gap:.33333333rem;grid-template-columns:auto 1fr;position:relative}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;grid-column:1/3}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.02em;font-size:.75rem;opacity:.8;white-space:nowrap;align-content:center}[_nghost-%COMP%]   .file-information[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;font-size:.95rem;align-content:center}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]{width:100vw;min-width:100vw}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]{width:300px;min-width:300px}}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]{height:120px;display:flex;align-items:center;overflow-x:auto;overflow-y:hidden;margin:.33333333rem;scrollbar-gutter:stable}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;height:100%;flex:0 0 auto;width:max-content;margin:0 auto}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:0 0 auto;height:100%;position:relative;border-radius:.33333333rem;cursor:pointer;overflow:hidden}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]{flex:0 0 auto;height:100%}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   app-image.grayscale[_ngcontent-%COMP%]{opacity:.5!important;filter:grayscale(1)}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   .target-border[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:inherit;pointer-events:none}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .group-images-container[_ngcontent-%COMP%]   .group-images-scroll-container[_ngcontent-%COMP%]   .group-image-container[_ngcontent-%COMP%]   .target-border.target[_ngcontent-%COMP%]{box-sizing:border-box;border:2px solid var(--color-positive)}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{flex:1;scrollbar-gutter:stable}[_nghost-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;margin-top:1px}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;margin:0 .33333333rem .33333333rem}[_nghost-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;gap:.33333333rem}"]});let t=e;return t})();var t8=(t,e)=>e.id;function n8(t,e){t&1&&Ba(0,"i",5)}function r8(t,e){if(t&1){let n=X();ge(0,"div",3)(1,"img",4),Be("click",function(){let i=L(n).$implicit,o=_(2);return V(o.openFullscreen(i))}),fe(),G(2,n8,1,0,"i",5),fe()}if(t&2){let n=e.$implicit,r=e.$index,i=e.$count;b(),at("aspect-ratio",n.aspectRatio),fo("src",n.thumbnailLink,_t),b(),q(r!==i-1?2:-1)}}function i8(t,e){if(t&1&&(ge(0,"div",1),ne(1,r8,3,4,"div",3,t8),fe()),t&2){let n=_();b(),re(n.longestChain)}}function o8(t,e){t&1&&(ge(0,"div",2),Y(1,"No comparison chain available yet."),fe())}var qN=(()=>{let e=class e{constructor(r){this.stateService=r,this.longestChain=[],dn(()=>{this.stateService.tournament.comparison(),this.refresh()})}refresh(){this.longestChain=this.getLongestChain(this.stateService.tournament.comparisons??[])}openFullscreen(r){r&&this.stateService.fullscreenImage.set(r)}getLongestChain(r){if(!r.length)return[];let i=new Map,o=new Map,s=[],a=g=>{i.has(g)||(i.set(g,new Set),s.push(g))};for(let[g,m]of r)!g||!m||(o.set(g.id,g),o.set(m.id,m),a(g.id),a(m.id),i.get(g.id).add(m.id));let c=new Map,u=new Set,h=g=>{let m=c.get(g);if(m)return m;if(u.has(g))return[];u.add(g);let I=[];for(let x of i.get(g)??[]){let j=h(x);j.length>I.length&&(I=j)}u.delete(g);let O=[g,...I];return c.set(g,O),O},p=[];for(let g of s){let m=h(g);m.length>p.length&&(p=m)}return p.map(g=>o.get(g)).filter(g=>!!g)}};e.\u0275fac=function(i){return new(i||e)(k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-image-tournament-longest-chain"]],decls:3,vars:1,consts:[[1,"longest-chain-wrapper"],[1,"longest-chain"],[1,"chain-empty"],[1,"chain-segment"],["loading","lazy",1,"chain-image",3,"click","src"],[1,"fa-solid","fa-chevron-right","chain-arrow"]],template:function(i,o){i&1&&(ge(0,"div",0),G(1,i8,3,0,"div",1)(2,o8,2,0,"div",2),fe()),i&2&&(b(),q(o.longestChain.length?1:2))},styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .longest-chain-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;overflow:auto;padding:.66666666rem}[_nghost-%COMP%]   .longest-chain[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.33333333rem;margin:auto 0;max-width:100%;justify-content:space-between}[_nghost-%COMP%]   .chain-segment[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.33333333rem}[_nghost-%COMP%]   .chain-image[_ngcontent-%COMP%]{height:330px;border-radius:.33333333rem;border:1px solid var(--color-border);cursor:pointer}[_nghost-%COMP%]   .chain-arrow[_ngcontent-%COMP%]{color:var(--color-text-secondary)}[_nghost-%COMP%]   .chain-empty[_ngcontent-%COMP%]{margin:auto;color:var(--color-text-secondary)}"]});let t=e;return t})();var lm=(t,e)=>e.id;function s8(t,e){if(t&1){let n=X();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(i,o.comparison[0]))}),P()}if(t&2){let n=e.$implicit;at("aspect-ratio",n.aspectRatio),ie("src",n.thumbnailLink,_t)}}function a8(t,e){if(t&1&&(R(0,"div",6),ne(1,s8,1,3,"img",8,lm),P()),t&2){let n=_(3);b(),re(n.winnersLeft)}}function c8(t,e){if(t&1){let n=X();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(o.comparison[0],i))}),P()}if(t&2){let n=e.$implicit;at("aspect-ratio",n.aspectRatio),ie("src",n.thumbnailLink,_t)}}function l8(t,e){if(t&1&&(R(0,"div",7),ne(1,c8,1,3,"img",8,lm),P()),t&2){let n=_(3);b(),re(n.losersLeft)}}function u8(t,e){if(t&1&&(G(0,a8,3,0,"div",6),G(1,l8,3,0,"div",7)),t&2){let n=_(2);q(n.winnersLeft.length?0:-1),b(),q(n.losersLeft.length?1:-1)}}function d8(t,e){if(t&1){let n=X();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(i,o.comparison[1]))}),P()}if(t&2){let n=e.$implicit;at("aspect-ratio",n.aspectRatio),ie("src",n.thumbnailLink,_t)}}function h8(t,e){if(t&1&&(R(0,"div",6),ne(1,d8,1,3,"img",8,lm),P()),t&2){let n=_(3);b(),re(n.winnersRight)}}function f8(t,e){if(t&1){let n=X();R(0,"img",9),B("click",function(){let i=L(n).$implicit,o=_(4);return V(o.openComparisonPath(o.comparison[1],i))}),P()}if(t&2){let n=e.$implicit;at("aspect-ratio",n.aspectRatio),ie("src",n.thumbnailLink,_t)}}function p8(t,e){if(t&1&&(R(0,"div",7),ne(1,f8,1,3,"img",8,lm),P()),t&2){let n=_(3);b(),re(n.losersRight)}}function g8(t,e){if(t&1&&(G(0,h8,3,0,"div",6),G(1,p8,3,0,"div",7)),t&2){let n=_(2);q(n.winnersRight.length?0:-1),b(),q(n.losersRight.length?1:-1)}}function m8(t,e){if(t&1){let n=X();R(0,"div",1)(1,"div",3)(2,"app-image",4),B("click",function(){L(n);let i=_();return V(i.onImageClick(i.comparison[0]))})("contextmenu",function(i){L(n);let o=_();return V(o.onImageContextMenu(o.comparison[0],i))})("touchstart",function(){L(n);let i=_();return V(i.onImageTouchStart(i.comparison[0]))})("touchend",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchcancel",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchmove",function(){L(n);let i=_();return V(i.onImageTouchMove())}),P(),G(3,u8,2,2),P(),W(4,"div",5),R(5,"div",3)(6,"app-image",4),B("click",function(){L(n);let i=_();return V(i.onImageClick(i.comparison[1]))})("contextmenu",function(i){L(n);let o=_();return V(o.onImageContextMenu(o.comparison[1],i))})("touchstart",function(){L(n);let i=_();return V(i.onImageTouchStart(i.comparison[1]))})("touchend",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchcancel",function(){L(n);let i=_();return V(i.onImageTouchEnd())})("touchmove",function(){L(n);let i=_();return V(i.onImageTouchMove())}),P(),G(7,g8,2,2),P()()}if(t&2){let n=_();b(2),ie("src",n.comparison[0].contentLink)("placeholderSrc",n.galleryUtils.getPlaceholderSrc(n.comparison[0])),b(),q(n.stateService.settings!=null&&n.stateService.settings.showComparisonRelations?3:-1),b(3),ie("src",n.comparison[1].contentLink)("placeholderSrc",n.galleryUtils.getPlaceholderSrc(n.comparison[1])),b(),q(n.stateService.settings!=null&&n.stateService.settings.showComparisonRelations?7:-1)}}function v8(t,e){t&1&&(R(0,"div",2),Y(1," No comparisons remaining. "),P())}function y8(t,e){if(t&1&&(W(0,"div",12),R(1,"div",13),Y(2),Hf(3,"number"),P()),t&2){let n=_(2);at("width",n.stateService.tournament.estimateProgressPercent,"%"),b(2),Bf(" ",n.stateService.tournament.completeComparisons,"/~",n.stateService.tournament.estimateComparisons,"/",n.stateService.tournament.remainingComparisons," (",zf(3,6,n.stateService.tournament.estimateProgressPercent,"1.0-0"),"%) ")}}function _8(t,e){if(t&1&&(W(0,"div",12),R(1,"div",13),Y(2),Hf(3,"number"),P()),t&2){let n=_(2);at("width",100,"%"),b(2),Uf("",n.stateService.tournament.completeComparisons,"/",n.stateService.tournament.completeComparisons," (",zf(3,5,100,"1.0-0"),"%)")}}function C8(t,e){if(t&1&&(W(0,"div",10),R(1,"div",11),G(2,y8,4,9)(3,_8,4,8),P()),t&2){let n=_();b(2),q(n.stateService.tournament.comparison()?2:3)}}var vw=(()=>{let e=class e{constructor(r,i,o,s){this.filterService=r,this.serializationService=i,this.dialogService=o,this.stateService=s,this.galleryUtils=cm,this.comparison=null,this.winnersLeft=[],this.losersLeft=[],this.winnersRight=[],this.losersRight=[],this.longPressTimer=null,this.suppressNextClick=!1,this.longPressDelayMs=500,this.autoPickDebugEnabled=!1,dn(()=>{this.stateService.tournament.comparison(),this.refreshComparisonRelations()})}onImageClick(r){if(this.suppressNextClick){this.suppressNextClick=!1;return}this.stateService.tournament.handleUserInput(r),this.stateService.tournamentState=this.stateService.tournament.getState(),this.serializationService.save(),this.refreshComparisonRelations()}onEnterTournament(){let r=this.stateService.images.filter(s=>We.isImage(s)),i=this.filterService.images().filter(s=>We.isImage(s)),o=this.stateService.tournament;!o.comparisons||!o.matchesImagesToCompare(i)?this.restartTournament(r,i):this.refreshComparisonRelations(),this.logTournamentSimulationComparisonCount(r,i)}undo(){this.stateService.tournament.undo(),this.stateService.tournamentState=this.stateService.tournament.getState(),this.serializationService.save(),this.refreshComparisonRelations()}skip(){this.stateService.tournament.skip(),this.refreshComparisonRelations()}toggleRelations(){this.stateService.settings.showComparisonRelations=!this.stateService.settings.showComparisonRelations,this.serializationService.save(),this.refreshComparisonRelations()}onImageContextMenu(r,i){i.preventDefault(),i.stopPropagation(),this.openFullscreen(r)}onImageTouchStart(r){r&&(this.clearLongPressTimer(),this.longPressTimer=window.setTimeout(()=>{this.suppressNextClick=!0,this.openFullscreen(r)},this.longPressDelayMs))}onImageTouchEnd(){this.clearLongPressTimer()}onImageTouchMove(){this.clearLongPressTimer()}openComparisonPath(r,i){if(!r||!i)return;let o=this.dialogService.create(am,{start:r,end:i});o&&o.then(s=>{s&&this.refreshComparisonRelations()})}openFullscreen(r){r&&this.stateService.fullscreenImage.set(r)}clearLongPressTimer(){this.longPressTimer!==null&&(window.clearTimeout(this.longPressTimer),this.longPressTimer=null)}restartTournament(r,i){this.stateService.tournament.start(r,i,this.stateService.tournamentState),this.refreshComparisonRelations()}refreshComparisonRelations(){this.stateService.tournament.updateProgress(),this.comparison=this.stateService.tournament.comparison()??null,this.comparison?(this.stateService.settings?.showComparisonRelations?(this.winnersLeft=this.stateService.tournament.getNearestWinners(this.comparison[0]),this.losersLeft=this.stateService.tournament.getNearestLosers(this.comparison[0]),this.winnersRight=this.stateService.tournament.getNearestWinners(this.comparison[1]),this.losersRight=this.stateService.tournament.getNearestLosers(this.comparison[1])):(this.winnersLeft=[],this.losersLeft=[],this.winnersRight=[],this.losersRight=[]),this.filterSharedComparisonRelations()):(this.winnersLeft=[],this.losersLeft=[],this.winnersRight=[],this.losersRight=[])}filterSharedComparisonRelations(){if(!this.stateService.settings?.hideComparisonSharedRelations)return;let r=this.collectSharedIds(this.winnersLeft,this.winnersRight);r.size&&(this.winnersLeft=this.winnersLeft.filter(o=>!r.has(o.id)),this.winnersRight=this.winnersRight.filter(o=>!r.has(o.id)));let i=this.collectSharedIds(this.losersLeft,this.losersRight);i.size&&(this.losersLeft=this.losersLeft.filter(o=>!i.has(o.id)),this.losersRight=this.losersRight.filter(o=>!i.has(o.id)))}collectSharedIds(r,i){if(!r.length||!i.length)return new Set;let o=new Set(r.map(a=>a.id)),s=new Set;return i.forEach(a=>{o.has(a.id)&&s.add(a.id)}),s}logTournamentSimulationComparisonCount(r,i){if(!this.autoPickDebugEnabled)return;let o=new zc,s=this.stateService.tournament.getState();o.start(r,i,s);let a=o.comparison(),c=0,u=i.length*i.length+1e3;for(;a;){let h=this.pickSimulatedWinner(a,o.comparisons);if(o.handleUserInput(h),a=o.comparison(),c++,c>u)break}console.log("[ImageTournament] simulated comparisons",o.comparisons.length)}pickSimulatedWinner(r,i){let[o,s]=r,a=this.getWinLossCounts(o,i),c=this.getWinLossCounts(s,i);return a.wins!==c.wins?a.wins>c.wins?o:s:a.losses!==c.losses?a.losses<c.losses?o:s:Math.random()<.5?o:s}getWinLossCounts(r,i){let o=0,s=0;for(let[a,c]of i)a?.id===r.id&&o++,c?.id===r.id&&s++;return{wins:o,losses:s}}};e.\u0275fac=function(i){return new(i||e)(k(Ze),k(zt),k(Ye),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-image-tournament"]],decls:4,vars:2,consts:[[1,"comparison-wrapper"],[1,"comparison"],[1,"comparison","comparison-empty"],[1,"comparison-column"],[1,"image-container",3,"click","contextmenu","touchstart","touchend","touchcancel","touchmove","src","placeholderSrc"],[1,"h-separator","v-separator"],[1,"side-column","winners-column"],[1,"side-column","losers-column"],["loading","lazy",1,"side-image",3,"src","aspect-ratio"],["loading","lazy",1,"side-image",3,"click","src"],[1,"h-separator"],[1,"progress-bar"],[1,"progress-bar-fill"],[1,"progress-bar-label"]],template:function(i,o){i&1&&(R(0,"div",0),G(1,m8,8,6,"div",1)(2,v8,2,0,"div",2),G(3,C8,4,1),P()),i&2&&(b(),q(o.comparison?1:2),b(2),q(o.stateService.settings!=null&&o.stateService.settings.showComparisonRelations?3:-1))},dependencies:[qc,pC],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .comparison-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;justify-content:end;overflow:auto}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}@media (orientation: portrait){[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]{flex-direction:column}}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .comparison-column[_ngcontent-%COMP%]{display:flex;flex:1;min-width:0;position:relative}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;cursor:pointer}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover{background-color:var(--color-border)}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;position:absolute;align-items:center;top:0;bottom:0;padding:.33333333rem;overflow:auto}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-column.winners-column[_ngcontent-%COMP%]{left:0}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-column.losers-column[_ngcontent-%COMP%]{right:0}[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-image[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:.33333333rem;cursor:pointer}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-image[_ngcontent-%COMP%]{width:64px}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .comparison[_ngcontent-%COMP%]   .side-image[_ngcontent-%COMP%]{width:96px}}[_nghost-%COMP%]   .comparison.comparison-empty[_ngcontent-%COMP%]{align-items:center;justify-content:center;padding:.66666666rem;border:1px dashed var(--color-border);border-radius:.33333333rem;color:var(--color-text-secondary)}[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:1.5rem}[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-bar-fill[_ngcontent-%COMP%]{height:100%;width:0;background-color:var(--color-positive);transition:width .25s ease}[_nghost-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-bar-label[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--color-text-secondary);font-weight:600;font-size:small;pointer-events:none;mix-blend-mode:difference}"]});let t=e;return t})();function E8(t,e){if(t&1&&(R(0,"div",0)(1,"div",1),W(2,"app-filter")(3,"app-masonry"),P(),W(4,"app-image-tournament")(5,"app-image-tournament-longest-chain"),R(6,"div",2),W(7,"app-fullscreen"),R(8,"div",3),W(9,"div",4)(10,"app-tagger"),P()()()),t&2){let n=_();b(),le("transparent",n.viewMode!="masonry"),b(3),le("transparent",n.viewMode!="tournament"||n.tournamentSubview!="comparison"),b(),le("transparent",n.viewMode!="tournament"||n.tournamentSubview!="chain"),b(),le("transparent",!n.stateService.fullscreenImage())}}var WN=(()=>{let e=class e{get viewMode(){return this.stateService.viewMode}set viewMode(r){let i=this.stateService.viewMode;this.stateService.viewMode=r,r==="tournament"&&i!=="tournament"&&this.imageTournamentComponent?.onEnterTournament()}constructor(r,i,o,s,a,c,u){this.serializationService=r,this.applicationService=i,this.keyboardShortcutService=o,this.galleryService=s,this.filterService=a,this.dialogService=c,this.stateService=u,this.tournamentSubview="comparison",this.loading=!0,this.applicationService.loading.set(!0)}ngOnInit(){this.configureHeader(),this.registerModuleSettings(),this.serializationService.processData().then(()=>{this.keyboardShortcutService.register(this),this.loading=!1})}ngOnDestroy(){this.keyboardShortcutService.unregister(this)}processKeyboardShortcut(r){if(this.stateService.fullscreenImage())switch(r.code){case"Escape":this.stateService.fullscreenImage.set(null);break;case"KeyR":this.setRandomTarget();break;case"KeyG":this.setRandomGroupTarget();break}}configureHeader(){let r=()=>this.stateService.viewMode==="masonry"&&!i()&&!o(),i=()=>!!this.stateService.fullscreenImage(),o=()=>this.stateService.viewMode==="masonry"&&!xt.isLargeScreen()&&this.stateService.filterVisible,s=()=>this.stateService.viewMode==="tournament"&&!i(),a=()=>s()&&this.tournamentSubview==="comparison";this.applicationService.addHeaderButtons("start",[{id:"open-filter",tooltip:"Open Filter",classes:"fa-solid fa-filter",hidden:()=>!r()||this.stateService.filterVisible,onClick:()=>this.stateService.filterVisible=!0},{id:"create-group",tooltip:"Create Image Group",classes:"fa-solid fa-folder-plus",hidden:()=>!r(),onClick:()=>this.galleryService.openImageGroupEditor()},{id:"random-image",tooltip:"Random Image",classes:"fa-solid fa-shuffle",hidden:()=>!i(),onClick:()=>this.setRandomTarget()},{id:"random-group-image",tooltip:"Random Image from Group",classes:"fa-solid fa-arrows-spin",hidden:()=>!i()||!this.stateService.fullscreenImage().group,onClick:()=>this.setRandomGroupTarget()},{id:"group-comparison",tooltip:"Open Group Comparison",classes:"fa-solid fa-code-compare",hidden:()=>!i()||!this.stateService.fullscreenImage().group,onClick:()=>this.openGroupComparison()},{id:"group-manager",tooltip:"Open Image Group Manager",classes:"fa-solid fa-object-group",hidden:()=>!i()||!this.stateService.fullscreenImage().group,onClick:()=>this.galleryService.openImageGroupEditor(this.stateService.fullscreenImage().group)},{id:"comparison-chain-toggle",tooltip:()=>this.tournamentSubview==="comparison"?"Open Longest Comparison Chain":"Open Tournament Comparisons",classes:()=>this.tournamentSubview==="chain"?"fa-solid fa-link active":"fa-solid fa-link",hidden:()=>!s(),onClick:()=>this.toggleTournamentSubview()}]),this.applicationService.addHeaderButtons("center",[{id:"comparison-undo",tooltip:"Undo Comparison",classes:"fa-solid fa-delete-left",hidden:()=>!a(),onClick:()=>this.imageTournamentComponent?.undo(),disabled:()=>!this.stateService.tournament||this.stateService.tournament.comparisons.length==0},{id:"comparison-skip",tooltip:"Skip Comparison",classes:"fa-solid fa-forward",hidden:()=>!a(),onClick:()=>this.imageTournamentComponent?.skip()},{id:"comparison-relations",tooltip:"Toggle Comparison Relations and Progress Bar",classes:()=>this.stateService.settings?.showComparisonRelations?["fa-solid fa-code-compare","fa-solid fa-slash"]:["fa-solid fa-code-compare"],hidden:()=>!a(),onClick:()=>this.imageTournamentComponent?.toggleRelations()},{id:"fullscreen-comparison-relations",tooltip:"Toggle Comparison Relations",classes:()=>this.stateService.settings?.showFullscreenComparisonRelations?["fa-solid fa-code-compare","fa-solid fa-slash"]:["fa-solid fa-code-compare"],hidden:()=>!i(),onClick:()=>{this.stateService.settings.showFullscreenComparisonRelations=!this.stateService.settings.showFullscreenComparisonRelations,this.serializationService.save()}}]),this.applicationService.addHeaderButtons("end",[{id:"close-fullscreen",tooltip:"Close Fullscreen",classes:"fa-solid fa-times",onClick:()=>this.stateService.fullscreenImage.set(null),hidden:()=>!i()},{id:"close-filter",tooltip:"Close Filter",classes:"fa-solid fa-times",onClick:()=>this.stateService.filterVisible=!1,hidden:()=>!o()},{id:"open-masonry",tooltip:"Open Masonry",classes:()=>this.viewMode==="masonry"?"fa-solid fa-images active":"fa-solid fa-images",onClick:()=>this.viewMode="masonry",hidden:()=>!r()&&!s()},{id:"open-comparison",tooltip:"Open Comparison",classes:()=>this.viewMode==="tournament"?"fa-solid fa-code-compare active":"fa-solid fa-code-compare",onClick:()=>{this.tournamentSubview="comparison",this.viewMode="tournament"},hidden:()=>!r()&&!s()},{id:"open-settings",tooltip:"Open Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Po),hidden:()=>!r()&&!s()}])}registerModuleSettings(){this.stateService.settings||(this.stateService.settings={}),this.applicationService.registerModuleSettings({id:"gallery-settings",label:"Gallery",items:[{id:"show-tag-count",type:"toggle",label:"Show Tag Count",getValue:()=>!!this.stateService.settings?.showTagCount,onChange:r=>{this.stateService.settings.showTagCount=r,this.serializationService.save()}},{id:"show-videos",type:"toggle",label:"Show Videos",getValue:()=>!!this.stateService.settings?.showVideos,onChange:r=>{this.stateService.settings.showVideos=r,this.filterService.updateFilters(),this.serializationService.save()}},{id:"auto-bookmark",type:"toggle",label:"Auto Bookmark",getValue:()=>!!this.stateService.settings?.autoBookmark,onChange:r=>{this.stateService.settings.autoBookmark=r,this.serializationService.save()}},{id:"bookmark-all",type:"action",label:"Bookmark All Images",onClick:()=>this.bookmarkAllImages()}]}),this.applicationService.registerModuleSettings({id:"comparison-settings",label:"Comparison",items:[{id:"show-comparison-relations",type:"toggle",label:"Show Comparison Relations",getValue:()=>this.stateService.settings?.showComparisonRelations,onChange:r=>{this.stateService.settings.showComparisonRelations=r,this.serializationService.save(),this.stateService.viewMode==="tournament"&&this.imageTournamentComponent?.refreshComparisonRelations()}},{id:"hide-shared-comparison-relations",type:"toggle",label:"Hide Shared Relations",getValue:()=>this.stateService.settings?.hideComparisonSharedRelations,onChange:r=>{this.stateService.settings.hideComparisonSharedRelations=r,this.serializationService.save(),this.stateService.viewMode==="tournament"&&this.imageTournamentComponent?.refreshComparisonRelations()}},{id:"reset-comparison",type:"action",label:"Reset Comparison",onClick:()=>{this.dialogService.createConfirmation({title:"Reset Comparison",messages:["Are you sure?"]}).then(r=>{if(r){this.stateService.tournamentState=null,this.serializationService.save();let i=this.stateService.images.filter(s=>We.isImage(s)),o=this.filterService.images().filter(s=>We.isImage(s));this.stateService.tournament.start(i,o,this.stateService.tournamentState)}})}}]}),this.applicationService.registerModuleSettings({id:"fullscreen-settings",label:"Fullscreen",items:[{id:"show-fullscreen-comparison-relations",type:"toggle",label:"Show Comparison Relations",getValue:()=>this.stateService.settings?.showFullscreenComparisonRelations,onChange:r=>{this.stateService.settings.showFullscreenComparisonRelations=r,this.serializationService.save()}}]})}setRandomTarget(){let r=this.filterService.images();if(!ee.isEmpty(r)){let i,o=this.stateService.fullscreenImage();o?o.group?i=ee.getRandom(r,o.group.images):i=ee.getRandom(r,[o]):i=ee.getRandom(r),i&&this.stateService.fullscreenImage.set(i)}}setRandomGroupTarget(){let r=this.stateService.fullscreenImage();r?.group&&this.stateService.fullscreenImage.set(ee.getRandom(r.group.images,[r]))}openGroupComparison(){let r=this.stateService.fullscreenImage();if(r?.group){this.tournamentSubview="comparison",this.stateService.viewMode="tournament";let i=this.stateService.images.filter(s=>We.isImage(s)),o=r.group.images.filter(s=>We.isImage(s));this.stateService.tournament.start(i,o,this.stateService.tournamentState)}}toggleTournamentSubview(){this.tournamentSubview=this.tournamentSubview==="comparison"?"chain":"comparison"}bookmarkAllImages(){this.dialogService.createConfirmation({title:"Confirmation: Bookmark All Images",messages:["Are you sure you want to bookmark all images?"]}).then(r=>{r&&(this.stateService.images.forEach(i=>i.bookmark=!0),this.filterService.updateFilters(),this.serializationService.save())})}};e.\u0275fac=function(i){return new(i||e)(k(zt),k(Je),k(jc),k(or),k(Ze),k(Ye),k(je))},e.\u0275cmp=ae({type:e,selectors:[["app-gallery"]],viewQuery:function(i,o){if(i&1&&Yl(vw,5),i&2){let s;Jl(s=Zl())&&(o.imageTournamentComponent=s.first)}},decls:1,vars:1,consts:[[1,"stack-container-alt","height-100"],[1,"flex"],[1,"fullscreen-container","glass-effect","height-100"],[1,"tagger-container"],[1,"tagger-scroll-offset-helper"]],template:function(i,o){i&1&&G(0,E8,11,8,"div",0),i&2&&q(o.loading?-1:0)},dependencies:[VN,BN,vw,qN,UN,GN],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]{display:flex;overflow:hidden;transition:.5s;z-index:1}@media screen and (max-width: 1280px){[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]   .tagger-container[_ngcontent-%COMP%]{height:100%;position:absolute;overflow:auto;scroll-snap-type:y mandatory}[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]   .tagger-container[_ngcontent-%COMP%]   .tagger-scroll-offset-helper[_ngcontent-%COMP%]{height:100%;scroll-snap-align:center}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .fullscreen-container[_ngcontent-%COMP%]   .tagger-container[_ngcontent-%COMP%]{display:contents}}"]});let t=e;return t})();var I8=(t,e)=>e.id;function w8(t,e){if(t&1){let n=X();ge(0,"span",1),Be("click",function(){let i=L(n).$implicit,o=_();return V(o.navigate(i))}),Y(1),fe()}if(t&2){let n=e.$implicit;b(),Me(n.label)}}var KN=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.applicationService=i,this.dialogService=o,this.apps=[{id:"gallery",label:"Gallery"},{id:"story-manager",label:"Notes"},{id:"shopping-list",label:"Shopping List"}],this.applicationService.loading.set(!1)}ngOnInit(){this.configureHeader()}navigate(r){sessionStorage.setItem(Ft.KEY_ACTIVE_APP_ID,r.id),sessionStorage.removeItem(Ft.KEY_GOOGLE_DATA_FILE_ID),this.applicationService.loading.set(!0),this.router.navigate([r.id])}configureHeader(){this.applicationService.addHeaderButtons("end",[{id:"open-settings",tooltip:"Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Po)}],"last")}};e.\u0275fac=function(i){return new(i||e)(k(jn),k(Je),k(Ye))},e.\u0275cmp=ae({type:e,selectors:[["app-landing"]],decls:2,vars:0,consts:[[1,"button","fluid"],[1,"button","fluid",3,"click"]],template:function(i,o){i&1&&ne(0,w8,2,1,"span",0,I8),i&2&&re(o.apps)},dependencies:[Ge],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.33333333rem}"]});let t=e;return t})();var QN="https://mazacik.github.io",Zs={production:!0,baseUrl:QN,redirectUrl:QN+"/login",firebase:{apiKey:"AIzaSyDOAks7IYxZn0CfhQfDYp06r5rP9B-4Jc8",authDomain:"mazacik-69cda.firebaseapp.com",projectId:"mazacik-69cda",appId:"1:43148772573:web:86c8a9749dd20d99260734",storageBucket:"mazacik-69cda.appspot.com",messagingSenderId:"43148772573"}};var Wc=(()=>{let e=class e{constructor(r){this.http=r,this.CLIENT_ID="692582629035-s6vftm7t7erhlblg9iekl0fhfhdskq25.apps.googleusercontent.com",this.CLIENT_SECRET="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"}getAccessToken(){return this.accessToken}startAuthentication(){let s="https://accounts.google.com/o/oauth2/v2/auth?redirect_uri="+Zs.redirectUrl+"&prompt=consent&response_type=code&client_id="+"692582629035-s6vftm7t7erhlblg9iekl0fhfhdskq25.apps.googleusercontent.com"+"&scope="+"https://www.googleapis.com/auth/drive"+"&access_type=offline";location.href=s}requestTokens(r){return w(this,null,function*(){let i="https://accounts.google.com/o/oauth2/token",o={"content-type":"form-data",grant_type:"authorization_code",code:r,client_id:this.CLIENT_ID,client_secret:this.CLIENT_SECRET,redirect_uri:Zs.redirectUrl,plugin_name:"TagalleryWeb"};yield uh(this.http.post(i,o)).then(s=>{s&&(this.accessToken=s.access_token,this.refreshToken=s.refresh_token,localStorage.setItem(Ft.KEY_GOOGLE_REFRESH_TOKEN,this.refreshToken))}).catch(s=>s)})}requestAccessToken(){return w(this,null,function*(){let r="https://accounts.google.com/o/oauth2/token",i={grant_type:"refresh_token",refresh_token:this.getRefreshToken(),client_id:this.CLIENT_ID,client_secret:this.CLIENT_SECRET};return yield uh(this.http.post(r,i)).then(o=>{o&&(this.accessToken=o.access_token)}).catch(o=>o),this.accessToken})}getRefreshToken(){return this.refreshToken||(this.refreshToken=localStorage.getItem(Ft.KEY_GOOGLE_REFRESH_TOKEN)),this.refreshToken}};e.\u0275fac=function(i){return new(i||e)(z(mo))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function b8(t,e){if(t&1){let n=X();R(0,"div",1),B("click",function(){L(n);let i=_();return V(i.authenticationService.startAuthentication())}),W(1,"img",2),R(2,"span",3),Y(3,"Sign in with Google"),P()()}}var YN=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.router=i,this.authenticationService=o,this.applicationService=s,this.applicationService.loading.set(!0)}ngAfterViewInit(){return w(this,null,function*(){let r=this.route.snapshot.queryParams.code;r?(yield this.authenticationService.requestTokens(r),this.router.navigate([""])):this.applicationService.loading.set(!1)})}};e.\u0275fac=function(i){return new(i||e)(k(qr),k(jn),k(Wc),k(Je))},e.\u0275cmp=ae({type:e,selectors:[["app-login"]],standalone:!1,decls:1,vars:1,consts:[[1,"sign-in-button"],[1,"sign-in-button",3,"click"],["src","assets/google-logo.svg"],[1,"sign-in-text"]],template:function(i,o){i&1&&G(0,b8,4,0,"div",0),i&2&&q(o.applicationService.loading()?-1:0)},styles:["[_nghost-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%]{width:18px;height:18px}.sign-in-button[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;gap:8px;padding:0 12px;cursor:pointer;background-color:#fff;border:1px solid #dadce0;border-radius:4px;-webkit-user-select:none;user-select:none}.sign-in-button[_ngcontent-%COMP%]:hover{background:#f8faff;border-color:#d2e3fc}.sign-in-text[_ngcontent-%COMP%]{color:#3c4043;font-family:Google Sans,arial,sans-serif;font-size:14px;letter-spacing:.25px}"]});let t=e;return t})();var JN=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.injector=i,this.collectionPath="shopping-list",this.itemsSignal=nt([]),this.connectionSignal=nt("disconnected"),this.items=this.itemsSignal.asReadonly(),this.connectionState=this.connectionSignal.asReadonly()}connect(){this.unsubscribe||this.ensureConfigured()&&(this.connectionSignal.set("connecting"),this.unsubscribe=this.runInContext(()=>{let r=J1(W1(this.firestore,this.collectionPath),Y1("position","desc"));return Q1(r,i=>{let o=i.docs.map(s=>H({id:s.id},s.data()));this.applyRemote(o),this.connectionSignal.set(i.metadata.fromCache?"connecting":"connected")},()=>{this.connectionSignal.set("disconnected")})}))}disconnect(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0,this.connectionSignal.set("disconnected"))}addItem(r){let i=this.normalizeText(r);if(!i||!this.ensureConfigured())return;let o=this.itemsSignal();if(o.some(a=>a.text===i))return;let s={text:i,check:!1,position:this.nextPosition(o)};this.applyLocal([...o,s]),this.writeItem(s,!1)}toggleItem(r){if(!this.ensureConfigured())return;let i=this.normalizeText(r);if(!i)return;let o=this.itemsSignal(),s=o.findIndex(u=>u.text===i);if(s===-1)return;let a=Ee(H({},o[s]),{check:!o[s].check}),c=[...o];c[s]=a,this.applyLocal(c),this.writeItem(a,!0)}removeItem(r){if(!this.ensureConfigured())return;let i=this.normalizeText(r);if(!i)return;let o=this.itemsSignal().filter(s=>s.text!==i);this.applyLocal(o),this.deleteItem(i)}clearCompleted(){if(!this.ensureConfigured())return;let r=this.itemsSignal(),i=r.filter(s=>s.check),o=r.filter(s=>!s.check);this.applyLocal(o),this.deleteItems(i.map(s=>s.text))}applyLocal(r){this.itemsSignal.set(this.sortItems(r))}applyRemote(r){let i=this.sanitizeItems(r);this.itemsSignal.set(this.sortItems(i))}ensureConfigured(){let r=this.isFirebaseConfigured();return r||this.connectionSignal.set("disconnected"),r}isFirebaseConfigured(){let r=Zs.firebase;return r?["apiKey","projectId","appId"].every(o=>{let s=r[o];return!!s&&!s.startsWith("YOUR_")}):!1}sanitizeItems(r){if(!Array.isArray(r))return this.itemsSignal();let i=[];for(let o of r){if(!o||typeof o!="object")continue;let s=o,a=typeof s.text=="string"?this.normalizeText(s.text):"";if(!a)continue;let c=typeof s.check=="boolean"?s.check:!1,u=typeof s.position=="number"&&Number.isFinite(s.position)?s.position:0;i.push({text:a,check:c,position:u})}return i}sortItems(r){return r.slice().sort((i,o)=>{let s=o.position-i.position;return s!==0?s:i.text.localeCompare(o.text)})}normalizeText(r){return r.trim().replace(/\s+/gu," ").slice(0,20)}nextPosition(r){let i=r.map(o=>o.position).filter(o=>Number.isFinite(o));return i.length===0?1:Math.max(...i)+1}encodeId(r){return encodeURIComponent(r)}runInContext(r){return ut(this.injector,r)}writeItem(r,i){this.runInContext(()=>Z1(Kg(this.firestore,this.collectionPath,this.encodeId(r.text)),{text:r.text,check:r.check,position:r.position},{merge:i}))}deleteItem(r){this.runInContext(()=>sw(Kg(this.firestore,this.collectionPath,this.encodeId(r))))}deleteItems(r){this.runInContext(()=>Promise.all(r.map(i=>sw(Kg(this.firestore,this.collectionPath,this.encodeId(i))))))}};e.\u0275fac=function(i){return new(i||e)(z(Ys),z(ot))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var D8=(t,e)=>e.text;function A8(t,e){t&1&&W(0,"div",7)}function R8(t,e){if(t&1){let n=X();R(0,"div",9)(1,"button",10),B("click",function(){let i=L(n).$implicit,o=_(2);return V(o.toggleItem(i))}),W(2,"i",11),P(),R(3,"span",12),Y(4),P(),R(5,"button",13),B("click",function(){let i=L(n).$implicit,o=_(2);return V(o.removeItem(i))}),W(6,"i",14),P()(),G(7,A8,1,0,"div",7)}if(t&2){let n=e.$implicit,r=e.$index,i=e.$count;le("checked",n.check),b(),le("checked",n.check),b(3),Me(n.text),b(),le("transparent",!n.check),b(2),q(r!==i-1?7:-1)}}function M8(t,e){if(t&1&&(W(0,"div",7),R(1,"div",8),ne(2,R8,8,8,null,null,D8),P()),t&2){let n=_();b(2),re(n.items())}}function x8(t,e){t&1&&(R(0,"div",6),Y(1,"List is empty."),P())}var ZN=(()=>{let e=class e{constructor(r,i,o){this.shoppingListService=r,this.applicationService=i,this.dialogService=o,this.draft="",this.items=this.shoppingListService.items,this.connectionState=this.shoppingListService.connectionState,this.completedCount=Ei(()=>this.items().filter(s=>s.check).length),this.applicationService.loading.set(!1)}ngOnInit(){this.shoppingListService.connect(),this.configureHeader()}ngOnDestroy(){this.shoppingListService.disconnect(),this.applicationService.removeHeaderButtons(["shopping-reset","shopping-status"])}addItem(){let r=this.draft.trim();r&&(this.shoppingListService.addItem(r),this.draft="")}toggleItem(r){this.shoppingListService.toggleItem(r.text)}removeItem(r){this.shoppingListService.removeItem(r.text)}clearCompleted(){this.shoppingListService.clearCompleted()}getConnectionLabel(){switch(this.connectionState()){case"connected":return"Live";case"connecting":return"Connecting";default:return"Offline"}}getConnectionClass(){switch(this.connectionState()){case"connected":return"positive";case"connecting":return"highlight";default:return"negative"}}configureHeader(){this.applicationService.addHeaderButtons("center",[{id:"shopping-status",tooltip:()=>this.getConnectionLabel(),classes:()=>`fa-solid fa-circle fa-sm border-transparent pointer-events-none ${this.getConnectionClass()}`}]),this.applicationService.addHeaderButtons("end",[{id:"shopping-reset",tooltip:"Reset",classes:"fa-solid fa-trash",onClick:()=>this.clearCompleted(),disabled:()=>this.completedCount()===0},{id:"open-settings",tooltip:"Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Po)}])}};e.\u0275fac=function(i){return new(i||e)(k(JN),k(Je),k(Ye))},e.\u0275cmp=ae({type:e,selectors:[["app-shopping-list"]],decls:8,vars:2,consts:[[1,"shopping-list"],[1,"flex","column","gap-1","margins-1-v"],[1,"input-row"],["type","text","placeholder","...",3,"ngModelChange","keydown.enter","ngModel"],["aria-label","Add item",1,"icon-button",3,"click"],[1,"fa-solid","fa-plus"],[1,"empty"],[1,"h-separator","subtle"],[1,"list"],[1,"item"],["aria-label","Mark item",1,"icon-button","check-button",3,"click"],[1,"fa-solid","fa-check"],[1,"label"],["aria-label","Remove item",1,"icon-button",3,"click"],[1,"fa-solid","fa-times"]],template:function(i,o){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),wn("ngModelChange",function(a){return Fn(o.draft,a)||(o.draft=a),a}),B("keydown.enter",function(){return o.addItem()}),P(),R(4,"button",4),B("click",function(){return o.addItem()}),W(5,"i",5),P()()(),G(6,M8,4,0)(7,x8,2,0,"div",6),P()),i&2&&(b(3),In("ngModel",o.draft),b(3),q(o.items().length?6:7))},dependencies:[Ge,sn,rr,ir,zn],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}.shopping-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;max-height:100%;height:fit-content;padding:0 .33333333rem}@media screen and (min-width: 1280px){.shopping-list[_ngcontent-%COMP%]{margin:0 auto;max-width:400px}}.input-row[_ngcontent-%COMP%]{display:flex;gap:.33333333rem}.input-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;height:3rem;padding:0 1rem}.input-row[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{height:3rem}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;background-color:var(--color-surface-100);gap:.33333333rem;overflow-y:auto;max-height:100%;padding:.33333333rem 0}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:1rem;align-items:center}.item[_ngcontent-%COMP%]:last-child{border-bottom:0}.check-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:0}.check-button.checked[_ngcontent-%COMP%]{background-color:var(--color-surface-200);border-color:var(--color-border-darker)}.check-button.checked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:1}.item.checked[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--color-text-secondary)}.label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.empty[_ngcontent-%COMP%]{border:1px dashed var(--color-border);border-radius:.33333333rem;padding:.66666666rem;text-align:center;color:var(--color-text-secondary)}"]});let t=e;return t})();var yw=(t,e)=>w(null,null,function*(){let n=F(jn);console.log("guard: start");let r=F(Wc);if(r.getAccessToken())return console.log("guard: has access token, return true"),!0;if(console.log("guard: no access token"),r.getRefreshToken()){if(console.log("guard: has refresh token"),yield r.requestAccessToken())return console.log("guard: got access token from refresh token, return true"),!0;console.log("guard: could not get access token from refresh token")}return console.log("guard: return false"),n.navigate(["login"])});var um=(()=>{let e=class e extends Hc{constructor(r,i,o){super(r),this.http=r,this.applicationService=i,this.dialogService=o,this.FILE_ID="1ydFjvWYG3p-m3S_gDodNJbc0Cyeqv82Z",this.FIELDS="id,name,mimeType,appProperties"}request(){let r=this.getContent(this.FILE_ID);return r.catch(i=>{this.applicationService.errors.set(!0),this.dialogService.createMessage({title:"Error",messages:["Google Drive Error, check console."]}),console.log(i)}),r}update(r){this.applicationService.changes.set(!0),this.updateContent(this.FILE_ID,JSON.stringify(r)).then(()=>{this.applicationService.errors.set(!1)}).catch(i=>{this.applicationService.errors.set(!0),this.dialogService.createMessage({title:"Error",messages:["Google Drive Error, check console."]}),console.log(i)}).finally(()=>{this.applicationService.changes.set(!1)})}};e.\u0275fac=function(i){return new(i||e)(z(mo),z(Je),z(Ye))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function P8(t,e){if(t&1){let n=X();ge(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.create(!1))}),Y(1,"Create Note"),fe(),ge(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.create(!0))}),Y(3,"Create Folder"),fe()}}function N8(t,e){if(t&1){let n=X();ge(0,"div",0),Be("click",function(){L(n);let i=_();return V(i.rename())}),Y(1,"Rename"),fe(),ge(2,"div",0),Be("click",function(){L(n);let i=_();return V(i.delete())}),Y(3,"Delete"),fe()}}var ek=(()=>{let e=class e extends rt{constructor(r){super(),this.stateService=r,this.configuration={title:()=>this.inputs.article?this.inputs.article.title:"Root",headerButtons:[{iconClass:"fa-solid fa-times",click:()=>this.close()}],footerButtons:[{text:()=>"Cancel",click:()=>this.close()}]}}rename(){return w(this,null,function*(){this.close(),this.stateService.rename(this.inputs.article)})}create(r){return w(this,null,function*(){this.close(),this.stateService.create(this.inputs.article,r)})}delete(){return w(this,null,function*(){this.close(),this.stateService.delete(this.inputs.article)})}close(){this.resolve()}};e.\u0275fac=function(i){return new(i||e)(k(Tr))},e.\u0275cmp=ae({type:e,selectors:[["app-story-options"]],features:[Ve],decls:2,vars:2,consts:[[1,"button","action-button",3,"click"]],template:function(i,o){i&1&&(G(0,P8,4,0),G(1,N8,4,0)),i&2&&(q(!o.inputs.article||o.inputs.article.folder?0:-1),b(),q(o.inputs.article?1:-1))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:.33333333rem;padding:.33333333rem;flex:1}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .button.action-button[_ngcontent-%COMP%]{min-height:initial;padding:.33333333rem 0}"]});let t=e;return t})();var Kc=class{getNameWithParents(e=" | "){return this.collectParents().concat(this).map(n=>n.title).join(e)}collectParents(){return this._collectParents(this,[])}_collectParents(e,n){return e.parent&&(n.unshift(e.parent),this._collectParents(e.parent,n)),n}collectChildren(){return this._collectChildren(this,[])}_collectChildren(e,n){if(e.children.length)for(let r of e.children)n.push(r),this._collectChildren(r,n);return n}};var tk=(()=>{let e=class e{constructor(r,i,o){this.injector=r,this.applicationService=i,this.googleService=o,this.saveDelay=new ei(5e3),this.applicationService.loading.set(!0),this.load().finally(()=>this.applicationService.loading.set(!1))}save(r=!1){this.applicationService.changes.set(!0),this.saveDelay.restart(()=>this._save()),r&&this.saveDelay.complete()}_save(){let r={},i=this.injector.get(Tr);r.articles=i.articles.filter(o=>o.id!="placeholder").map(o=>this.serializeArticle(o)),this.googleService.update(r)}serializeArticle(r){let i={};return i.id=r.id,i.title=r.title,i.text=r.text,i.childIds=r.children.map(o=>o.id),i.folder=r.folder,i}load(){return w(this,null,function*(){let r=yield this.googleService.request(),i=this.injector.get(Tr);i.articles=r.articles.map(o=>this.parseArticle(o)),i.articles.forEach(o=>o.children=r.articles.find(s=>s.id==o.id).childIds.map(s=>i.articles.find(a=>a.id==s))),i.articles.forEach(o=>o.parent=i.articles.find(s=>s.children.includes(o)))})}parseArticle(r){let i=new Kc;return i.id=r.id||Vi(),i.title=r.title,i.text=r.text,i.open=!1,i.folder=r.folder,i}};e.\u0275fac=function(i){return new(i||e)(z(et),z(Je),z(um))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Tr=(()=>{let e=class e{constructor(r,i){this.dialogService=r,this.serializationService=i,this.searchResults=[]}getRoot(){return this.articles?.filter(r=>!r.parent)}collectArticles(){let r=[];for(let i of this.articles)r.push(i),r.push(i.collectChildren());return r}save(r=!1){this.serializationService.save(r)}create(r,i){return w(this,null,function*(){let o=yield this.dialogService.createInput({title:i?"Create Folder":"Create Note",placeholder:"Title"});if(o){let s=new Kc;s.id=Vi(),s.title=o,s.text="",s.children=[],s.parent=r,s.parent?.children.push(s),s.folder=i,this.articles.push(s),this.serializationService.save(!0)}})}rename(r){this.dialogService.createInput({title:"Rename: "+r.getNameWithParents(),placeholder:"Text",defaultValue:r.title}).then(i=>{bn.isEmpty(i)||(r.title=i,this.serializationService.save(!0))})}delete(r){this.dialogService.createConfirmation({title:"Delete: "+r.getNameWithParents(),messages:['Are you sure you want to delete "'+r.title+'"?']}).then(i=>{i&&(r==this.current&&(this.current=ee.nearestRightFirst(this.articles,this.articles.indexOf(r))),ee.remove(this.articles,r),ee.remove(r.parent?.children,r),this.serializationService.save(!0))})}options(r){this.dialogService.create(ek,{article:r})}};e.\u0275fac=function(i){return new(i||e)(z(Ye),z(tk))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var O8=()=>[],F8=(t,e)=>e.id;function L8(t,e){t&1&&W(0,"i",2)}function V8(t,e){if(t&1&&W(0,"i",3),t&2){let n=_(2);ie("ngClass",n.article.open?"fa-angle-down":"fa-angle-right")}}function j8(t,e){t&1&&W(0,"i",2)}function U8(t,e){if(t&1&&W(0,"app-sidebar-row",8),t&2){let n=e.$implicit;ie("article",n)}}function B8(t,e){if(t&1){let n=X();R(0,"div",0),B("drop",function(i){L(n);let o=_();return V(o.drop(i,o.article))}),R(1,"div",1),B("click",function(){L(n);let i=_();return V(i.onClick())}),ne(2,L8,1,0,"i",2,En),G(4,V8,1,1,"i",3)(5,j8,1,0,"i",2),R(6,"span",4),B("dragstart",function(i){L(n);let o=_();return V(o.start(i,o.article))})("dragenter",function(i){L(n);let o=_();return V(o.enter(i,o.article))})("dragleave",function(i){L(n);let o=_();return V(o.leave(i,o.article))})("dragend",function(i){L(n);let o=_();return V(o.end(i,o.article))}),Y(7),P()(),R(8,"div",5)(9,"i",6),B("click",function(){L(n);let i=_();return V(i.stateService.options(i.article))}),P()()(),R(10,"div",7),ne(11,U8,1,1,"app-sidebar-row",8,F8),P()}if(t&2){let n=_();b(2),re(gs(8,O8).constructor(n.article.collectParents().length)),b(2),q(n.article.folder?4:5),b(2),le("highlight",n.isCurrent())("positive",n.isSearchResult()),b(),Me(n.article.title),b(3),le("open",n.article.open),b(),re(n.article.children)}}var nk=(()=>{let e=class e{constructor(r,i){this.googleService=r,this.stateService=i}isCurrent(){return this.article.collectChildren().concat(this.article).some(r=>r==this.stateService.current)}isSearchResult(){return this.article.collectChildren().concat(this.article).some(r=>this.stateService.searchResults.includes(r))}onClick(){this.article.folder?this.article.open=!this.article.open:this.stateService.current=this.article}start(r,i){if(console.log("start: "+i.title),r.dataTransfer.setDragImage(new Image,0,0),e.object=i,i.parent)e.array=i.parent.children,e.index=i.parent.children.indexOf(i);else{let o=this.stateService.articles;e.array=o,e.index=o.indexOf(i)}}enter(r,i){console.log("enter: "+i.title),(!i.parent||i.parent.children==e.array)&&ee.move(e.array,e.object,e.array.indexOf(i))}leave(r,i){console.log("leave: "+i.title)}drop(r,i){console.log("drop: "+i.title),e.array.indexOf(e.object)!=e.index&&this.stateService.save(),e.object=null,e.array=null,e.index=null}end(r,i){console.log("end: "+i.title),e.object&&ee.move(e.array,e.object,e.index)}isDraggingSome(){return e.object!=null}isDraggingThis(){return e.object==this.article}};e.\u0275fac=function(i){return new(i||e)(k(um),k(Tr))},e.\u0275cmp=ae({type:e,selectors:[["app-sidebar-row"]],inputs:{article:"article"},decls:1,vars:1,consts:[["ondragover","event.preventDefault()",1,"flex","gap","cursor-pointer","hover-brighten","hover-container",2,"line-height","24px",3,"drop"],[1,"flex","gap","flex-1","width-100","min-width-0","align-items-center",3,"click"],[1,"fa-solid","fa-angle-down","opacity-0"],[1,"fa-solid",3,"ngClass"],["draggable","true","ondragover","event.preventDefault()",1,"ellipsis","flex-1","width-0",3,"dragstart","dragenter","dragleave","dragend"],[1,"article-buttons","hover-positive","hover-visible"],[1,"fa-solid","fa-ellipsis-vertical",3,"click"],[1,"flex","column","overflow-hidden","anim-drawer"],[3,"article"]],template:function(i,o){i&1&&G(0,B8,13,9),i&2&&q(o.article?0:-1)},dependencies:[e,Ge,Kt,sn],encapsulation:2});let t=e;return t})();var $8=(t,e)=>e.id;function H8(t,e){t&1&&W(0,"div",9)}function z8(t,e){if(t&1&&(G(0,H8,1,0,"div",9),W(1,"app-sidebar-row",10)),t&2){let n=e.$implicit,r=e.$index;q(r!=0?0:-1),b(),ie("article",n)}}var rk=(()=>{let e=class e{constructor(r){this.stateService=r}onSearchInputChange(r){if(this.stateService.searchQuery=r.value,this.stateService.searchResults.length=0,!bn.isEmpty(this.stateService.searchQuery))for(let i of this.stateService.collectArticles())!i.folder&&i.text?.match(new RegExp(this.stateService.searchQuery,"i"))&&ee.push(this.stateService.searchResults,i)}};e.\u0275fac=function(i){return new(i||e)(k(Tr))},e.\u0275cmp=ae({type:e,selectors:[["app-sidebar"]],decls:12,vars:0,consts:[["searchInput",""],[1,"sidebar-container"],["placeholder","Search",1,"search-input",3,"input","focus"],[1,"h-separator","margins","subtle"],[1,"items-container","y-scrollbar-container"],[1,"flex","column","margins-1-h"],[1,"h-separator","gap-1-bottom","margins","subtle"],[1,"buttons-container"],[1,"button",3,"click"],[1,"h-separator","subtle"],[3,"article"]],template:function(i,o){if(i&1){let s=X();R(0,"div",1)(1,"input",2,0),B("input",function(){L(s);let c=On(2);return V(o.onSearchInputChange(c))})("focus",function(){L(s);let c=On(2);return V(c.select())}),P(),W(3,"div",3),R(4,"div",4)(5,"div",5),ne(6,z8,2,2,null,null,$8),P()(),W(8,"div",6),R(9,"div",7)(10,"div",8),B("click",function(){return L(s),V(o.stateService.options(null))}),Y(11,"Create"),P()()()}i&2&&(b(6),re(o.stateService.getRoot()))},dependencies:[sn,nk],styles:["[_nghost-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;overflow:hidden;height:100%;width:300px;min-width:300px}@media screen and (max-width: 1280px){[_nghost-%COMP%]{width:100%;min-width:100%}}.sidebar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;width:100%}.search-input[_ngcontent-%COMP%]{border:none;caret-color:var(--color-text-secondary);font-variant-numeric:tabular-nums;-webkit-user-select:none;user-select:none;padding:.66666666rem;border-radius:.33333333rem;border:1px solid var(--color-border);margin:.33333333rem}.items-container[_ngcontent-%COMP%]{flex:1}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:.33333333rem;margin:0 .33333333rem .33333333rem}.buttons-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;gap:.33333333rem}"]});let t=e;return t})();function G8(t,e){if(t&1){let n=X();R(0,"textarea",4),wn("ngModelChange",function(i){L(n);let o=_();return Fn(o.stateService.current.text,i)||(o.stateService.current.text=i),V(i)}),B("ngModelChange",function(){L(n);let i=_();return V(i.stateService.save())}),P()}if(t&2){let n=_();In("ngModel",n.stateService.current.text)}}var ik=(()=>{let e=class e{constructor(r,i,o){this.stateService=r,this.applicationService=i,this.dialogService=o}ngOnInit(){this.configureHeader()}configureHeader(){this.applicationService.addHeaderButtons("start",[{id:"show-sidebar",tooltip:"Show Notes",classes:"fa-solid fa-angle-left mobile-only",onClick:()=>this.stateService.current=null,hidden:()=>!this.stateService.current}],"first"),this.applicationService.addHeaderButtons("end",[{id:"open-settings",tooltip:"Settings",classes:"fa-solid fa-gear",onClick:()=>this.dialogService.create(Po)}],"last")}isMobileView(){return!xt.isLargeScreen()}};e.\u0275fac=function(i){return new(i||e)(k(Tr),k(Je),k(Ye))},e.\u0275cmp=ae({type:e,selectors:[["app-story-manager"]],decls:5,vars:5,consts:[[1,"story-manager-container"],[1,"v-separator","desktop-only"],[1,"content"],["spellcheck","false","placeholder","Text",1,"note-content",3,"ngModel"],["spellcheck","false","placeholder","Text",1,"note-content",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(R(0,"div",0),W(1,"app-sidebar")(2,"div",1),R(3,"div",2),G(4,G8,1,1,"textarea",3),P()()),i&2&&(b(),le("display-none",o.isMobileView()&&o.stateService.current),b(2),le("display-none",o.isMobileView()&&!o.stateService.current),b(),q(o.stateService.current?4:-1))},dependencies:[Ge,sn,rr,ir,zn,rk],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .story-manager-container[_ngcontent-%COMP%]{display:flex;height:100%;overflow:hidden}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{flex:1;resize:none;border:none;line-height:1.5rem;padding:.33333333rem;overflow-wrap:normal}"]});let t=e;return t})();var q8=(t,e)=>sessionStorage.getItem(Ft.KEY_ACTIVE_APP_ID)?!0:F(jn).navigate([""]),W8=(t,e)=>w(null,null,function*(){let n=F(jn);return sessionStorage.getItem(Ft.KEY_GOOGLE_DATA_FILE_ID)?!0:(yield F(Ye).create(xN),sessionStorage.getItem(Ft.KEY_GOOGLE_DATA_FILE_ID)?!0:n.navigate([""]))}),ok=[{path:"login",canActivate:[q8],component:YN},{path:"gallery",canActivateChild:[yw],children:[{path:"",canActivate:[W8],component:WN}]},{path:"story-manager",canActivate:[yw],component:ik},{path:"shopping-list",component:ZN},{path:"",component:KN},{path:"**",redirectTo:""}];var ak=(t,e)=>{let n=F(Wc);return e(sk(n,t)).pipe(cr(r=>{if(r.url.includes("googleapis.com")&&n.getRefreshToken())return console.log(r),st(n.requestAccessToken()).pipe(Vt(()=>e(sk(n,t))),cr(i=>Qi(()=>i)))}))},sk=(t,e)=>e.url.includes("googleapis.com")?e.clone({headers:e.headers.set("authorization","Bearer "+t.getAccessToken())}):e;wC(RN,{providers:[KC(ok,QC({paramsInheritanceStrategy:"always"})),iC(sC(),oC([ak])),VM(()=>jM(Zs.firebase)),q1(()=>K1())]}).catch(t=>console.error(t));
