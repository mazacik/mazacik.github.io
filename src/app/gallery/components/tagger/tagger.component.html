<div class="v-separator desktop-only"></div>
<div class="tagger-container">
  <div class="overflow-hidden">
    @if (target) {
      <div class="file-information">
        <div class="file-name" [title]="target.name">{{ target.name }}</div>
        @if (getFileSize(target); as fileSize) {
          <div class="file-row">
            <span class="label">Size</span>
            <span class="value">{{ fileSize }}</span>
          </div>
        }
        @if (getResolution(target); as resolution) {
          <div class="file-row">
            <span class="label">Resolution</span>
            <span class="value">{{ resolution }}</span>
          </div>
        }
      </div>
    }
  </div>
  <div class="h-separator margins"></div>
  <div class="flex gap center padding-1">
    <div class="flex gap desktop-only">
      <i class="icon-button fa-solid fa-download" title="Download" tpPlacement="right" (click)="googleService.download(target)"></i>
      <div class="v-separator"></div>
      <i class="icon-button fa-brands fa-google-drive" title="Google Drive" tpPlacement="right" (click)="$event.stopPropagation(); googleService.openSearch(target.name)"></i>
      <i
        class="icon-button fa-brands fa-yandex-international"
        title="Yandex RIS"
        tpPlacement="right"
        (click)="$event.stopPropagation(); galleryService.openYandexReverseImageSearch($event, target)"></i>
      <div class="v-separator"></div>
    </div>
    <i class="icon-button fa-solid fa-box" title="Archive" tpPlacement="right" (click)="galleryService.delete(target, true)"></i>
    <i class="icon-button fa-solid fa-trash" title="Delete" tpPlacement="right" (click)="galleryService.delete(target, false)"></i>
  </div>
  <div class="h-separator margins"></div>
  <div class="flex center gap-3 margins-3-v">
    <div class="flex center gap cursor-pointer hover-brighten" [class.positive]="target?.heart" (click)="galleryService.toggleFavorite(target)">
      <i class="fa-heart" [ngClass]="target?.heart ? 'fa-solid' : 'fa-regular'" style="margin-top: 1px"></i>
      <span>Favorite</span>
    </div>
    <div class="flex center gap cursor-pointer hover-brighten" [class.positive]="target?.bookmark" (click)="galleryService.toggleBookmark(target)">
      <i class="fa-bookmark" [ngClass]="target?.bookmark ? 'fa-solid' : 'fa-regular'" style="margin-top: 1px"></i>
      <span>Bookmark</span>
    </div>
  </div>
  <div class="h-separator margins"></div>
  <div class="header desktop-only">
    <div class="flex gap">
      <i
        class="icon-button fa-solid hover-brighten"
        [class.transparent]="!target?.group"
        [ngClass]="groupMode ? 'fa-images' : 'fa-image'"
        [class.positive]="groupMode"
        (click)="groupMode = !groupMode"></i>
    </div>
    <span class="margins-3-h">Tag Manager</span>
    <div class="flex gap flex-end-h"></div>
  </div>
  <div class="h-separator margins desktop-only"></div>
  <div class="filters-container y-scrollbar-container">
    <div class="flex column margins-1-h">
      @for (tag of tagService.getRootTags(); track tag.id) {
        <app-tagger-row [tag]="tag" [target]="target" [groupMode]="groupMode"></app-tagger-row>
      }
    </div>
  </div>
  <div class="buttons-container">
    <div class="button" (click)="tagService.openTagGroupCreate()"><i class="fa-solid fa-plus"></i>Create</div>
  </div>
</div>
