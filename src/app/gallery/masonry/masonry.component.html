<app-header></app-header>

<div class="masonry-scroll-container">
  <div class="masonry-container" (create)="onMasonryContainerCreate($event)">
    <!-- TODO split styles -->
    <div *ngFor="let image of masonryImages" @fade class="masonry-brick" [style]="'width: ' + image.width + 'px; height: ' + image.height + 'px; top: ' + image.top + 'px; left: ' + image.left + 'px; '" (click)="onImageClick(image)" [style.opacity]="image.group && stateService.groupEditorGroup && !stateService.groupEditorGroup.images.includes(image) ? '0.15' : '1'">
      <div class="brick-container">
        <img [src]="image.thumbnailLink" (create)="onBrickCreate($event, image)" #imageElement (load)="imageElement.style.opacity = '1'">
      </div>
      <ng-container *ngIf="areBrickButtonsVisible()">
        <div class="brick-header">
          <i class="icon-button fa-heart" [ngClass]="image.heart ? 'fa-solid active' : 'fa-regular'" tp="Favorite" (click)="$event.stopPropagation(); stateService.toggleFavorite(image, true);"></i>
          <i class="icon-button fa-bookmark" [ngClass]="image.bookmark ? 'fa-solid active' : 'fa-regular'" tp="Bookmark" (click)="$event.stopPropagation(); stateService.toggleBookmark(image, true);"></i>
        </div>
        <div class="brick-footer">
          <i class="icon-button fa-solid fa-tags" tp="Tag Manager" (click)="galleryService.openTagManager(image); $event.stopPropagation();"></i>
          <i *ngIf="image.group" class="icon-button active fa-solid fa-object-group" tp="Group Manager" (click)="galleryService.openGroupEditor(image.group); $event.stopPropagation();"></i>
        </div>
      </ng-container>
    </div>
  </div>
</div>